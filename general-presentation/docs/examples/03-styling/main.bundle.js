!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=139)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0),i=n(35),o=n(67),s=n(7),a=n(52),u=n(21),c=n(46),l=function(t){function e(n,r,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.a;break;case 1:if(!n){s.destination=o.a;break}if("object"==typeof n){n instanceof e?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new d(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new d(s,n,r,i)}return s}return r.a(e,t),e.prototype[a.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(s.a),d=function(t){function e(e,n,r,s){var a,u=t.call(this)||this;u._parentSubscriber=e;var c=u;return Object(i.a)(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o.a&&(c=Object.create(n),Object(i.a)(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=a,u._error=r,u._complete=s,u}return r.a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw t;Object(c.a)(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return u.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(c.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(l)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c}));var r=n(0),i=n(1),o=n(3),s=n(45),a=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,n}return r.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(i.a),u=(i.a,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(i.a));i.a;function c(t,e){if(!e.closed)return t instanceof o.a?t.subscribe(e):Object(s.a)(t)(e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(65),i=n(1),o=n(52),s=n(67);var a=n(31),u=n(50),c=n(21),l=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(r?a.add(r.call(a,this.source)):a.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(r.a)(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=d(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(u.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=d(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function d(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(10),i=n(64),o=n(35),s=n(53),a=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,a=this._ctorUnsubscribe,c=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var d=0;d<n.length;++d){n[d].remove(this)}if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(t){e=t instanceof s.a?u(t.errors):[t]}}if(Object(r.a)(l)){d=-1;for(var h=l.length;++d<h;){var f=l[d];if(Object(i.a)(f))try{f.unsubscribe()}catch(t){e=e||[],t instanceof s.a?e=e.concat(u(t.errors)):e.push(t)}}}if(e)throw new s.a(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function u(t){return t.reduce((function(t,e){return t.concat(e instanceof s.a?e.errors:e)}),[])}},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d}));var r=n(0),i=n(3),o=n(1),s=n(7),a=n(32),u=n(89),c=n(52),l=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.a(e,t),e}(o.a),d=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.a(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),s.a.EMPTY):this.isStopped?(t.complete(),s.a.EMPTY):(this.observers.push(t),new u.a(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(i.a),h=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.a(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.a.EMPTY},e}(d)},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(41),i=new(n(39).a)(r.a),o=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}()},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.newError=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";return new c(t,e)},e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.Neo4jError=void 0;var i=r(n(5)),o=r(n(15)),s=r(n(12)),a=r(n(16)),u=r(n(140));e.SERVICE_UNAVAILABLE="ServiceUnavailable";e.SESSION_EXPIRED="SessionExpired";e.PROTOCOL_ERROR="ProtocolError";var c=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";return(0,i.default)(this,e),(n=(0,o.default)(this,(0,s.default)(e).call(this,t))).message=t,n.code=r,n.name="Neo4jError",n}return(0,a.default)(e,t),e}((0,u.default)(Error));e.Neo4jError=c},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(1);function o(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.a)},function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},function(t,e,n){var r=n(72),i=n(73);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){var r=n(96);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(3),i=new r.a((function(t){return t.complete()}));function o(t){return t?function(t){return new r.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):i}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),i=n(45),o=n(88);function s(t,e){return e?Object(o.a)(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.isEmptyObjectOrNull=function(t){if(null===t)return!0;if(!s(t))return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},e.isObject=s,e.isString=u,e.assertObject=function(t,e){if(!s(t))throw new TypeError(e+" expected to be an object but was: "+JSON.stringify(t));return t},e.assertString=a,e.assertNumber=function(t,e){if("number"!=typeof t)throw new TypeError(e+" expected to be a number but was: "+JSON.stringify(t));return t},e.assertNumberOrInteger=function(t,e){if("number"!=typeof t&&!(0,o.isInt)(t))throw new TypeError(e+" expected to be either a number or an Integer object but was: "+JSON.stringify(t));return t},e.assertValidDate=function(t,e){if("[object Date]"!==Object.prototype.toString.call(t))throw new TypeError(e+" expected to be a standard JavaScript Date but was: "+JSON.stringify(t));if(Number.isNaN(t.getTime()))throw new TypeError(e+" expected to be valid JavaScript Date but its time was NaN: "+JSON.stringify(t));return t},e.validateQueryAndParameters=function(t,e){var n=t,r=e||{};"object"===(0,i.default)(t)&&t.text&&(n=t.text,r=t.parameters||{});return function(t){if(a(t,"Cypher query"),0===t.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}(n),function(t){if(!s(t)){var e=t.constructor?" "+t.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(e," ").concat(t))}}(r),{validatedQuery:n,params:r}},e.ENCRYPTION_OFF=e.ENCRYPTION_ON=void 0;var i=r(n(72)),o=n(29);e.ENCRYPTION_ON="ENCRYPTION_ON";function s(t){return"object"===(0,i.default)(t)&&!Array.isArray(t)&&null!==t}function a(t,e){if(!u(t))throw new TypeError(e+" expected to be string but was: "+JSON.stringify(t));return t}function u(t){return"[object String]"===Object.prototype.toString.call(t)}e.ENCRYPTION_OFF="ENCRYPTION_OFF"},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0),i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(1).a),o=n(45),s=n(3);function a(t,e,n,r,a){if(void 0===a&&(a=new i(t,n,r)),!a.closed)return e instanceof s.a?e.subscribe(a):Object(o.a)(e)(a)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n(1).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(1);function o(t,e){return function(n){return n.lift(new s(t,e))}}var s=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var r,i=n(17),o=n(49),s=n(59);r||(r={});var a=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));var i=r()},function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},function(t,e,n){var r=n(72);function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=o?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var i=r(n(5)),o=r(n(6)),s=n(11),a=function(){function t(e,n){(0,i.default)(this,t),this.low=0|e,this.high=0|n}return(0,o.default)(t,[{key:"inSafeRange",value:function(){return this.greaterThanOrEqual(t.MIN_SAFE_VALUE)&&this.lessThanOrEqual(t.MAX_SAFE_VALUE)}},{key:"toInt",value:function(){return this.low}},{key:"toNumber",value:function(){return this.high*c+(this.low>>>0)}},{key:"toNumberOrInfinity",value:function(){return this.lessThan(t.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(t.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()}},{key:"toString",value:function(e){if((e=e||10)<2||e>36)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(t.MIN_VALUE)){var r=t.fromNumber(e),i=this.div(r);return n=i.multiply(r).subtract(this),i.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=t.fromNumber(Math.pow(e,6));n=this;for(var s="";;){var a=n.div(o),u=(n.subtract(a.multiply(o)).toInt()>>>0).toString(e);if((n=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}}},{key:"getHighBits",value:function(){return this.high}},{key:"getLowBits",value:function(){return this.low}},{key:"getNumBitsAbs",value:function(){if(this.isNegative())return this.equals(t.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,n=31;n>0&&0==(e&1<<n);n--);return 0!==this.high?n+33:n+1}},{key:"isZero",value:function(){return 0===this.high&&0===this.low}},{key:"isNegative",value:function(){return this.high<0}},{key:"isPositive",value:function(){return this.high>=0}},{key:"isOdd",value:function(){return 1==(1&this.low)}},{key:"isEven",value:function(){return 0==(1&this.low)}},{key:"equals",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.high===e.high&&this.low===e.low}},{key:"notEquals",value:function(t){return!this.equals(t)}},{key:"lessThan",value:function(t){return this.compare(t)<0}},{key:"lessThanOrEqual",value:function(t){return this.compare(t)<=0}},{key:"greaterThan",value:function(t){return this.compare(t)>0}},{key:"greaterThanOrEqual",value:function(t){return this.compare(t)>=0}},{key:"compare",value:function(e){if(t.isInteger(e)||(e=t.fromValue(e)),this.equals(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.subtract(e).isNegative()?-1:1}},{key:"negate",value:function(){return this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}},{key:"add",value:function(e){t.isInteger(e)||(e=t.fromValue(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,c=0,l=0,d=0,h=0;return d+=(h+=o+(65535&e.low))>>>16,h&=65535,l+=(d+=i+u)>>>16,d&=65535,c+=(l+=r+a)>>>16,l&=65535,c+=n+s,c&=65535,t.fromBits(d<<16|h,c<<16|l)}},{key:"subtract",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.add(e.negate())}},{key:"multiply",value:function(e){if(this.isZero())return t.ZERO;if(t.isInteger(e)||(e=t.fromValue(e)),e.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.equals(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(d)&&e.lessThan(d))return t.fromNumber(this.toNumber()*e.toNumber());var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,c=65535&e.low,l=0,h=0,f=0,p=0;return f+=(p+=o*c)>>>16,p&=65535,h+=(f+=i*c)>>>16,f&=65535,h+=(f+=o*u)>>>16,f&=65535,l+=(h+=r*c)>>>16,h&=65535,l+=(h+=i*u)>>>16,h&=65535,l+=(h+=o*a)>>>16,h&=65535,l+=n*c+r*u+i*a+o*s,l&=65535,t.fromBits(f<<16|p,l<<16|h)}},{key:"div",value:function(e){if(t.isInteger(e)||(e=t.fromValue(e)),e.isZero())throw(0,s.newError)("division by zero");if(this.isZero())return t.ZERO;var n,r,i;if(this.equals(t.MIN_VALUE))return e.equals(t.ONE)||e.equals(t.NEG_ONE)?t.MIN_VALUE:e.equals(t.MIN_VALUE)?t.ONE:(n=this.shiftRight(1).div(e).shiftLeft(1)).equals(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(r=this.subtract(e.multiply(n)),i=n.add(r.div(e)));if(e.equals(t.MIN_VALUE))return t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(i=t.ZERO,r=this;r.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),a=o<=48?1:Math.pow(2,o-48),u=t.fromNumber(n),c=u.multiply(e);c.isNegative()||c.greaterThan(r);)n-=a,c=(u=t.fromNumber(n)).multiply(e);u.isZero()&&(u=t.ONE),i=i.add(u),r=r.subtract(c)}return i}},{key:"modulo",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.subtract(this.div(e).multiply(e))}},{key:"not",value:function(){return t.fromBits(~this.low,~this.high)}},{key:"and",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high)}},{key:"or",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high)}},{key:"xor",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high)}},{key:"shiftLeft",value:function(e){return t.isInteger(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):t.fromBits(0,this.low<<e-32)}},{key:"shiftRight",value:function(e){return t.isInteger(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):t.fromBits(this.high>>e-32,this.high>=0?0:-1)}}]),t}();a.__isInteger__=!0,Object.defineProperty(a.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1}),a.isInteger=function(t){return!0===(t&&t.__isInteger__)};var u={};a.fromInt=function(t){var e,n;return(t|=0)>=-128&&t<128&&(n=u[t])?n:(e=new a(t,t<0?-1:0,!1),t>=-128&&t<128&&(u[t]=e),e)},a.fromNumber=function(t){return isNaN(t)||!isFinite(t)?a.ZERO:t<=-l?a.MIN_VALUE:t+1>=l?a.MAX_VALUE:t<0?a.fromNumber(-t).negate():new a(t%c|0,t/c|0)},a.fromBits=function(t,e){return new a(t,e)},a.fromString=function(t,e){if(0===t.length)throw(0,s.newError)("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return a.ZERO;if((e=e||10)<2||e>36)throw(0,s.newError)("radix out of range: "+e);var n;if((n=t.indexOf("-"))>0)throw(0,s.newError)('number format error: interior "-" character: '+t);if(0===n)return a.fromString(t.substring(1),e).negate();for(var r=a.fromNumber(Math.pow(e,8)),i=a.ZERO,o=0;o<t.length;o+=8){var u=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+u),e);if(u<8){var l=a.fromNumber(Math.pow(e,u));i=i.multiply(l).add(a.fromNumber(c))}else i=(i=i.multiply(r)).add(a.fromNumber(c))}return i},a.fromValue=function(t){return t instanceof a?t:"number"==typeof t?a.fromNumber(t):"string"==typeof t?a.fromString(t):new a(t.low,t.high)},a.toNumber=function(t){return a.fromValue(t).toNumber()},a.toString=function(t,e){return a.fromValue(t).toString(e)},a.inSafeRange=function(t){return a.fromValue(t).inSafeRange()};var c=4294967296,l=c*c/2,d=a.fromInt(1<<24);a.ZERO=a.fromInt(0),a.ONE=a.fromInt(1),a.NEG_ONE=a.fromInt(-1),a.MAX_VALUE=a.fromBits(-1,2147483647,!1),a.MIN_VALUE=a.fromBits(0,-2147483648,!1),a.MIN_SAFE_VALUE=a.fromBits(1,-2097152),a.MAX_SAFE_VALUE=a.fromBits(-1,2097151);var h=a.fromValue;e.int=h;var f=a.isInteger;e.isInt=f;var p=a.inSafeRange;e.inSafeRange=p;var g=a.toNumber;e.toNumber=g;var _=a.toString;e.toString=_;var v=a;e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=void 0;e.ACCESS_MODE_READ="READ";e.ACCESS_MODE_WRITE="WRITE";e.BOLT_PROTOCOL_V1=1;e.BOLT_PROTOCOL_V2=2;e.BOLT_PROTOCOL_V3=3;e.BOLT_PROTOCOL_V4_0=4;e.BOLT_PROTOCOL_V4_1=4.1},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var i=r(n(73)),o=r(n(114)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=r(n(5)),l=r(n(6)),d=r(n(99)),h=(r(n(75)),n(11)),f=(r(n(29)),n(55)),p=function(){function t(){(0,c.default)(this,t)}return(0,l.default)(t,[{key:"onNext",value:function(t){}},{key:"onError",value:function(t){}},{key:"onCompleted",value:function(t){}}]),t}();e.StreamObserver=p;var g=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.connection,i=n.reactive,o=void 0!==i&&i,u=n.moreFunction,l=n.discardFunction,d=n.fetchSize,h=void 0===d?f.ALL:d,p=n.beforeError,g=n.afterError,_=n.beforeKeys,v=n.afterKeys,y=n.beforeComplete,m=n.afterComplete;return(0,c.default)(this,e),(t=(0,s.default)(this,(0,a.default)(e).call(this)))._connection=r,t._fieldKeys=null,t._fieldLookup=null,t._head=null,t._queuedRecords=[],t._tail=null,t._error=null,t._observers=[],t._meta={},t._beforeError=p,t._afterError=g,t._beforeKeys=_,t._afterKeys=v,t._beforeComplete=y,t._afterComplete=m,t._queryId=null,t._moreFunction=u,t._discardFunction=l,t._discard=!1,t._fetchSize=h,t._setState(o?b.READY:b.READY_STREAMING),t._setupAuoPull(h),t}return(0,u.default)(e,t),(0,l.default)(e,[{key:"onNext",value:function(t){var e=new d.default(this._fieldKeys,t,this._fieldLookup);this._observers.some((function(t){return t.onNext}))?this._observers.forEach((function(t){t.onNext&&t.onNext(e)})):(this._queuedRecords.push(e),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))}},{key:"onCompleted",value:function(t){this._state.onSuccess(this,t)}},{key:"onError",value:function(t){this._state.onError(this,t)}},{key:"cancel",value:function(){this._discard=!0}},{key:"prepareToHandleSingleResponse",value:function(){this._head=[],this._fieldKeys=[],this._setState(b.STREAMING)}},{key:"markCompleted",value:function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(b.SUCCEEDED)}},{key:"subscribe",value:function(t){if(this._error)t.onError(this._error);else{if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var e=0;e<this._queuedRecords.length;e++)t.onNext(this._queuedRecords[e]),this._queuedRecords.length-e-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===b.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._observers.push(t),this._state===b.READY&&this._handleStreaming()}}},{key:"_handleHasMore",value:function(t){this._setState(b.READY),this._handleStreaming(),delete t.has_more}},{key:"_handlePullSuccess",value:function(t){var e=this;this._setState(b.SUCCEEDED);var n=Object.assign(this._connection?{server:this._connection.server}:{},this._meta,t),r=null;this._beforeComplete&&(r=this._beforeComplete(n));var i=function(){e._tail=n,e._observers.some((function(t){return t.onCompleted}))&&e._observers.forEach((function(t){t.onCompleted&&t.onCompleted(n)})),e._afterComplete&&e._afterComplete(n)};r?Promise.resolve(r).then((function(){return i()})):i()}},{key:"_handleRunSuccess",value:function(t,e){var n=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var r=0;r<t.fields.length;r++)this._fieldLookup[t.fields[r]]=r;delete t.fields}t.qid&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var i=null;this._beforeKeys&&(i=this._beforeKeys(this._fieldKeys));var o=function(){n._head=n._fieldKeys,n._observers.some((function(t){return t.onKeys}))&&n._observers.forEach((function(t){t.onKeys&&t.onKeys(n._fieldKeys)})),n._afterKeys&&n._afterKeys(n._fieldKeys),e()};i?Promise.resolve(i).then((function(){return o()})):o()}}},{key:"_handleError",value:function(t){var e=this;this._setState(b.FAILED),this._error=t;var n=null;this._beforeError&&(n=this._beforeError(t));var r=function(){e._observers.some((function(t){return t.onError}))&&e._observers.forEach((function(e){e.onError&&e.onError(t)})),e._afterError&&e._afterError(t)};n?Promise.resolve(n).then((function(){return r()})):r()}},{key:"_handleStreaming",value:function(){this._head&&this._observers.some((function(t){return t.onNext||t.onCompleted}))&&(this._discard?(this._discardFunction(this._connection,this._queryId,this),this._setState(b.STREAMING)):this._autoPull&&(this._moreFunction(this._connection,this._queryId,this._fetchSize,this),this._setState(b.STREAMING)))}},{key:"_storeMetadataForCompletion",value:function(t){for(var e=Object.keys(t),n=e.length,r="";n--;)r=e[n],this._meta[r]=t[r]}},{key:"_setState",value:function(t){this._state=t}},{key:"_setupAuoPull",value:function(t){this._autoPull=!0,t===f.ALL?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*t,this._highRecordWatermark=.7*t)}}]),e}(p);e.ResultStreamObserver=g;var _=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.connection,i=n.beforeError,o=n.afterError,u=n.beforeComplete,l=n.afterComplete;return(0,c.default)(this,e),(t=(0,s.default)(this,(0,a.default)(e).call(this)))._connection=r,t._beforeError=i,t._afterError=o,t._beforeComplete=u,t._afterComplete=l,t}return(0,u.default)(e,t),(0,l.default)(e,[{key:"onNext",value:function(t){this.onError((0,h.newError)("Received RECORD when initializing "+JSON.stringify(t)))}},{key:"onError",value:function(t){this._beforeError&&this._beforeError(t),this._connection._updateCurrentObserver(),this._connection._handleFatalError(t),this._afterError&&this._afterError(t)}},{key:"onCompleted",value:function(t){if(this._beforeComplete&&this._beforeComplete(t),t){var e=t.server;this._connection.version||(this._connection.version=e);var n=t.connection_id;this._connection.databaseId||(this._connection.databaseId=n)}this._afterComplete&&this._afterComplete(t)}}]),e}(p);e.LoginObserver=_;var v=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.connection,i=n.onError,o=n.onComplete;return(0,c.default)(this,e),(t=(0,s.default)(this,(0,a.default)(e).call(this)))._connection=r,t._onError=i,t._onComplete=o,t}return(0,u.default)(e,t),(0,l.default)(e,[{key:"onNext",value:function(t){this.onError((0,h.newError)("Received RECORD when resetting: received record is: "+JSON.stringify(t),h.PROTOCOL_ERROR))}},{key:"onError",value:function(t){t.code===h.PROTOCOL_ERROR&&this._connection._handleProtocolError(t.message),this._onError&&this._onError(t)}},{key:"onCompleted",value:function(t){this._onComplete&&this._onComplete(t)}}]),e}(p);e.ResetObserver=v;var y=function(t){function e(t){var n,r=t.error,i=t.onError;return(0,c.default)(this,e),(n=(0,s.default)(this,(0,a.default)(e).call(this,{beforeError:i}))).onError(r),n}return(0,u.default)(e,t),e}(g);e.FailedObserver=y;var m=function(t){function e(){var t;return(0,c.default)(this,e),t=(0,s.default)(this,(0,a.default)(e).call(this)),(0,o.default)((0,a.default)(e.prototype),"markCompleted",(0,i.default)(t)).call((0,i.default)(t)),t}return(0,u.default)(e,t),e}(g);e.CompletedObserver=m;var b={READY_STREAMING:{onSuccess:function(t,e){t._handleRunSuccess(e,(function(){t._setState(b.STREAMING)}))},onError:function(t,e){t._handleError(e)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(t,e){t._handleRunSuccess(e,(function(){return t._handleStreaming()}))},onError:function(t,e){t._handleError(e)},name:function(){return"READY"}},STREAMING:{onSuccess:function(t,e){e.has_more?t._handleHasMore(e):t._handlePullSuccess(e)},onError:function(t,e){t._handleError(e)},name:function(){return"STREAMING"}},FAILED:{onError:function(t){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return l}));var r=n(0),i=n(13),o=n(18),s=n(2);function a(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(a((function(n,r){return Object(o.a)(t(n,r)).pipe(Object(i.a)((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new u(t,n))})}var u=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.concurrent))},t}(),c=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new s.a(this),n=this.destination;n.add(e);var r=Object(s.c)(t,e);r!==e&&n.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(s.b),l=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),i=n(90),o=n(66);function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(71),o=function(t){function e(n,r){void 0===r&&(r=i.a.now);var o=t.call(this,n,(function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.a(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(0),i=n(8),o=n(7),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.a(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n(7).a))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(10);function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},function(t,e,n){t.exports=n(145)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(49),i=n(84);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(i.a)()(r.a.apply(void 0,t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(90),i=n(46),o=n(26),s=n(31),a=n(91),u=n(92),c=n(64),l=function(t){if(t&&"function"==typeof t[s.a])return l=t,function(t){var e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,i.a),t};if(t&&"function"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,l,d=Object(c.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+d+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}),0)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(113)),s=i(n(5)),a=i(n(6)),u=r(n(19)),c=function(){function t(e){(0,s.default)(this,t),this._values=function(t){if(!t)return[];if(u.isString(t))return[t];if(Array.isArray(t)){for(var e=[],n=function t(e){return e.reduce((function(e,n){return Array.isArray(n)?e.concat(t(n)):e.concat(n)}),[])}(t),r=0;r<n.length;r++){var i=n[r];if(null!=i){if(!u.isString(i))throw new TypeError("Bookmark value should be a string, given: '".concat(i,"'"));e.push(i)}}return e}throw new TypeError("Bookmark should either be a string or a string array, given: '".concat(t,"'"))}(e)}return(0,a.default)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"values",value:function(){return this._values}},{key:"asBeginTransactionParameters",value:function(){return this.isEmpty()?{}:(0,o.default)({},"bookmarks",this._values)}}],[{key:"empty",value:function(){return l}}]),t}();e.default=c;var l=new c(null)},function(t,e){function n(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var s=t.apply(e,r);function a(t){n(s,i,o,a,u,"next",t)}function u(t){n(s,i,o,a,u,"throw",t)}a(void 0)}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(14),i=n(38),o=n(66);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(r.a)(n)?(t.pop(),Object(o.a)(t,n)):Object(i.a)(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(22);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return h}));var r=n(0),i=1,o=function(){return Promise.resolve()}(),s={};function a(t){return t in s&&(delete s[t],!0)}var u=function(t){var e=i++;return s[e]=!0,o.then((function(){return a(e)&&t()})),e},c=function(t){a(t)},l=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=u(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(c(n),e.scheduled=void 0)},e}(n(41).a),d=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n(39).a))(l),h=d},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.HostNameResolver=e.Channel=e.alloc=void 0;var i=r(n(101)),o=r(n(149)),s=r(n(150)),a=r(n(152));e.alloc=function(t){return new i.default(t)};var u=o.default;e.Channel=u;var c=s.default;e.HostNameResolver=c;var l=a.default;e.utf8=l},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ALL=void 0;var i=r(n(5)),o=r(n(6)),s=n(30),a=n(29),u=n(19);e.ALL=-1;var c=function(){function t(e,n,r){(0,i.default)(this,t),this.signature=e,this.fields=n,this.toString=r}return(0,o.default)(t,null,[{key:"init",value:function(e,n){return new t(1,[e,n],(function(){return"INIT ".concat(e," {...}")}))}},{key:"run",value:function(e,n){return new t(16,[e,n],(function(){return"RUN ".concat(e," ").concat(JSON.stringify(n))}))}},{key:"pullAll",value:function(){return h}},{key:"reset",value:function(){return f}},{key:"hello",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=Object.assign({user_agent:e},n);return null!=r&&(i.routing=r),new t(1,[i],(function(){return"HELLO {user_agent: '".concat(e,"', ...}")}))}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.bookmark,r=e.txConfig,i=e.database,o=e.mode,s=l(n,r,i,o);return new t(17,[s],(function(){return"BEGIN ".concat(JSON.stringify(s))}))}},{key:"commit",value:function(){return p}},{key:"rollback",value:function(){return g}},{key:"runWithMetadata",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.bookmark,o=r.txConfig,s=r.database,a=r.mode,u=l(i,o,s,a);return new t(16,[e,n,u],(function(){return"RUN ".concat(e," ").concat(JSON.stringify(n)," ").concat(JSON.stringify(u))}))}},{key:"goodbye",value:function(){return _}},{key:"pull",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.stmtId,r=void 0===n?-1:n,i=e.n,o=void 0===i?-1:i,s=d(r||-1,o||-1);return new t(63,[s],(function(){return"PULL ".concat(JSON.stringify(s))}))}},{key:"discard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.stmtId,r=void 0===n?-1:n,i=e.n,o=void 0===i?-1:i,s=d(r||-1,o||-1);return new t(47,[s],(function(){return"DISCARD ".concat(JSON.stringify(s))}))}}]),t}();function l(t,e,n,r){var i={};return t.isEmpty()||(i.bookmarks=t.values()),e.timeout&&(i.tx_timeout=e.timeout),e.metadata&&(i.tx_metadata=e.metadata),n&&(i.db=(0,u.assertString)(n,"database")),r===s.ACCESS_MODE_READ&&(i.mode="r"),i}function d(t,e){var n={n:(0,a.int)(e)};return-1!==t&&(n.qid=(0,a.int)(t)),n}e.default=c;var h=new c(63,[],(function(){return"PULL_ALL"})),f=new c(15,[],(function(){return"RESET"})),p=new c(18,[],(function(){return"COMMIT"})),g=new c(19,[],(function(){return"ROLLBACK"})),_=new c(2,[],(function(){return"GOODBYE"}))},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.WRITE=e.READ=e.Driver=void 0;var i=r(n(5)),o=r(n(6)),s=n(11),a=(r(n(102)),r(n(47))),u=r(n(155)),c=r(n(161)),l=n(30),d=r(n(106)),h=n(105),f=r(n(77)),p=r(n(163)),g=n(55),_=n(19),v=l.ACCESS_MODE_READ;e.READ=v;var y=l.ACCESS_MODE_WRITE;e.WRITE=y;var m=0,b=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,i.default)(this,t),x(o),this._id=m++,this._address=e,this._userAgent=n,this._authToken=r,this._config=o,this._log=d.default.create(o),this._connectionProvider=null,this._afterConstruction()}return(0,o.default)(t,[{key:"verifyConnectivity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.database,n=void 0===e?"":e,r=this._getOrCreateConnectionProvider(),i=new c.default(r);return i.verify({database:n})}},{key:"supportsMultiDb",value:function(){return this._getOrCreateConnectionProvider().supportsMultiDb()}},{key:"supportsTransactionConfig",value:function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()}},{key:"_supportsRouting",value:function(){return!1}},{key:"_isEncrypted",value:function(){return this._config.encrypted===_.ENCRYPTION_ON}},{key:"_getTrust",value:function(){return this._config.trust}},{key:"session",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultAccessMode,n=void 0===e?y:e,r=t.bookmarks,i=t.database,o=void 0===i?"":i,s=t.fetchSize;return this._newSession({defaultAccessMode:n,bookmarkOrBookmarks:r,database:o,reactive:!1,fetchSize:w(s,this._config.fetchSize)})}},{key:"rxSession",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultAccessMode,n=void 0===e?y:e,r=t.bookmarks,i=t.database,o=void 0===i?"":i,s=t.fetchSize;return new p.default({session:this._newSession({defaultAccessMode:n,bookmarks:r,database:o,reactive:!0,fetchSize:w(s,this._config.fetchSize)}),config:this._config})}},{key:"close",value:function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider?this._connectionProvider.close():Promise.resolve()}},{key:"_afterConstruction",value:function(){this._log.info("Direct driver ".concat(this._id," created for server address ").concat(this._address))}},{key:"_createConnectionProvider",value:function(t,e,n){return new u.default({id:this._id,config:this._config,log:this._log,address:t,userAgent:e,authToken:n})}},{key:"_newSession",value:function(e){var n=e.defaultAccessMode,r=e.bookmarkOrBookmarks,i=e.database,o=e.reactive,s=e.fetchSize,u=t._validateSessionMode(n),c=this._getOrCreateConnectionProvider(),l=r?new a.default(r):a.default.empty();return new f.default({mode:u,database:i,connectionProvider:c,bookmark:l,config:this._config,reactive:o,fetchSize:s})}},{key:"_getOrCreateConnectionProvider",value:function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._address,this._userAgent,this._authToken)),this._connectionProvider}}],[{key:"_validateSessionMode",value:function(t){var e=t||y;if(e!==l.ACCESS_MODE_READ&&e!==l.ACCESS_MODE_WRITE)throw(0,s.newError)("Illegal session mode "+e);return e}}]),t}();function x(t){t.maxConnectionLifetime=E(t.maxConnectionLifetime,36e5),t.maxConnectionPoolSize=E(t.maxConnectionPoolSize,h.DEFAULT_MAX_SIZE),t.connectionAcquisitionTimeout=E(t.connectionAcquisitionTimeout,h.DEFAULT_ACQUISITION_TIMEOUT),t.fetchSize=w(t.fetchSize,1e3)}function E(t,e){var n=parseInt(t,10);return n>0||0===n?n:n<0?Number.MAX_SAFE_INTEGER:e}function w(t,e){var n=parseInt(t,10);if(n>0||n===g.ALL)return n;if(0===n||n<0)throw new Error("The fetch size can only be a positive value or -1 for ALL. However fetchSize = "+n);return e}e.Driver=b;var S=b;e.default=S},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),i=n(1);function o(){return function(t){return t.lift(new s(t))}}var s=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new a(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0),i=n(8),o=n(70),s=n(7),a=n(82),u=n(32),c=n(89),l=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new d(this._getNow(),e)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new u.a;if(this.isStopped||this.hasError?e=s.a.EMPTY:(this.observers.push(t),e=new c.a(this,t)),i&&t.add(t=new a.a(t,i)),n)for(var l=0;l<o&&!t.closed;l++)t.next(r[l]);else for(l=0;l<o&&!t.closed;l++)t.next(r[l].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.a).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.a),d=function(){return function(t,e){this.time=t,this.value=e}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3);function i(t,e){return e?new r.a((function(n){return e.schedule(o,0,{error:t,subscriber:n})})):new r.a((function(e){return e.error(t)}))}function o(t){var e=t.error;t.subscriber.error(e)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d}));var r=n(0),i=n(14),o=n(10),s=n(23),a=n(20),u=n(38),c={};function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=void 0,r=void 0;return Object(i.a)(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(o.a)(t[0])&&(t=t[0]),Object(u.a)(t,r).lift(new d(n))}var d=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.resultSelector))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(a.a)(this,r,void 0,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n){var r=this.values,i=r[n],o=this.toRespond?i===c?--this.toRespond:this.toRespond:0;r[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(37),i=n(22);function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.b)(i.a,t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),i=n(18),o=n(17);function s(t){return new r.a((function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)}))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n(0),i=n(38),o=n(10),s=n(1),a=n(26),u=n(2);function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(i.a)(t,void 0).lift(new l(n))}var l=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.resultSelector))},t}(),d=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:void 0,i}return r.a(e,t),e.prototype._next=function(t){var e=this.iterators;Object(o.a)(t)?e.push(new f(t)):"function"==typeof t[a.a]?e.push(new h(t[a.a]())):e.push(new p(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe());else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var s,a=(s=t[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(s.a),h=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return Boolean(t&&t.done)},t}(),f=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[a.a]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),p=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.a(e,t),e.prototype[a.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t){this.buffer.push(t),this.parent.checkIterators()},e.prototype.subscribe=function(){return Object(u.c)(this.observable,new u.a(this))},e}(u.b)},function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.a?i:null}return!0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(3),i=n(7);function o(t,e){return new r.a((function(n){var r=new i.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(21),i=n(46),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(5)),s=i(n(6)),a=r(n(19)),u=n(29),c=n(11),l=function(){function t(e){(0,o.default)(this,t),function(t){t&&a.assertObject(t,"Transaction config")}(e),this.timeout=function(t){if(a.isObject(t)&&(t.timeout||0===t.timeout)){a.assertNumberOrInteger(t.timeout,"Transaction timeout");var e=(0,u.int)(t.timeout);if(e.isZero())throw(0,c.newError)("Transaction timeout should not be zero");if(e.isNegative())throw(0,c.newError)("Transaction timeout should not be negative");return e}return null}(e),this.metadata=function(t){if(a.isObject(t)&&t.metadata){var e=t.metadata;if(a.assertObject(e),0!==Object.keys(e).length)return e}return null}(e)}return(0,s.default)(t,[{key:"isEmpty",value:function(){return Object.values(this).every((function(t){return null==t}))}}],[{key:"empty",value:function(){return d}}]),t}();e.default=l;var d=new l({})},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}));var r=n(0),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n(41).a),o=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e}(n(39).a))(i),s=o},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.default=void 0;var i=r(n(15)),o=r(n(12)),s=r(n(16)),a=r(n(5)),u=r(n(6)),c=n(11),l=n(19),d=n(30),h=r(n(47)),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mode,r=void 0===n?d.ACCESS_MODE_WRITE:n,i=e.database,o=void 0===i?"":i,s=e.bookmark,u=e.connectionProvider;(0,a.default)(this,t),this._mode=r,this._database=o?(0,l.assertString)(o,"database"):"",this._bookmark=s||h.default.empty(),this._connectionProvider=u,this._referenceCount=0,this._connectionPromise=Promise.resolve(null)}return(0,u.default)(t,[{key:"mode",value:function(){return this._mode}},{key:"database",value:function(){return this._database}},{key:"initializeConnection",value:function(){return 0!==this._referenceCount?(this._referenceCount++,!1):(this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmark:this._bookmark}),this._referenceCount++,!0)}},{key:"getConnection",value:function(){return this._connectionPromise}},{key:"releaseConnection",value:function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)}},{key:"close",value:function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())}},{key:"_releaseConnection",value:function(){return this._connectionPromise=this._connectionPromise.then((function(t){return t?t.resetAndFlush().catch(p).then((function(){return t._release()})):Promise.resolve()})).catch(p),this._connectionPromise}}]),t}();function p(t){}e.default=f;var g=new(function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(0,o.default)(e).apply(this,arguments))}return(0,s.default)(e,t),(0,u.default)(e,[{key:"initializeConnection",value:function(){return!0}},{key:"getConnection",value:function(){return Promise.reject((0,c.newError)("This connection holder does not serve connections"))}},{key:"releaseConnection",value:function(){return Promise.resolve()}},{key:"close",value:function(){return Promise.resolve()}}]),e}(f));e.EMPTY_CONNECTION_HOLDER=g},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=(n(33),r(n(76)),function(){function t(e){(0,i.default)(this,t),this._errorHandler=e}return(0,o.default)(t,[{key:"isOpen",value:function(){throw new Error("not implemented")}},{key:"protocol",value:function(){throw new Error("not implemented")}},{key:"connect",value:function(t,e){throw new Error("not implemented")}},{key:"write",value:function(t,e,n){throw new Error("not implemented")}},{key:"resetAndFlush",value:function(){throw new Error("not implemented")}},{key:"close",value:function(){throw new Error("not implemented")}},{key:"handleAndTransformError",value:function(t,e){return this._errorHandler?this._errorHandler.handleAndTransformError(t,e):t}},{key:"id",get:function(){throw new Error("not implemented")}},{key:"databaseId",get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")}},{key:"address",get:function(){throw new Error("not implemented")}},{key:"version",get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")}},{key:"server",get:function(){throw new Error("not implemented")}}]),t}());e.default=s},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(5)),s=i(n(6)),a=n(118),u=i(n(47)),c=(n(119),i(n(75)),n(30)),l=r(n(120)),d=i(n(55)),h=n(33),f=i(n(69)),p=function(){function t(e,n,r){(0,o.default)(this,t),this._connection=e,this._packer=this._createPacker(n),this._unpacker=this._createUnpacker(r)}return(0,s.default)(t,[{key:"packer",value:function(){return this._packer}},{key:"unpacker",value:function(){return this._unpacker}},{key:"transformMetadata",value:function(t){return t}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.userAgent,n=t.authToken,r=t.onError,i=t.onComplete,o=new h.LoginObserver({connection:this._connection,afterError:r,afterComplete:i});return this._connection.write(d.default.init(e,n),o,!0),o}},{key:"prepareToClose",value:function(){}},{key:"beginTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bookmark,n=t.txConfig,r=t.database,i=t.mode,o=t.beforeError,s=t.afterError,a=t.beforeComplete,u=t.afterComplete;return this.run("BEGIN",e?e.asBeginTransactionParameters():{},{bookmark:e,txConfig:n,database:r,mode:i,beforeError:o,afterError:s,beforeComplete:a,afterComplete:u,flush:!1})}},{key:"commitTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.beforeError,n=t.afterError,r=t.beforeComplete,i=t.afterComplete;return this.run("COMMIT",{},{bookmark:u.default.empty(),txConfig:f.default.empty(),mode:c.ACCESS_MODE_WRITE,beforeError:e,afterError:n,beforeComplete:r,afterComplete:i})}},{key:"rollbackTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.beforeError,n=t.afterError,r=t.beforeComplete,i=t.afterComplete;return this.run("ROLLBACK",{},{bookmark:u.default.empty(),txConfig:f.default.empty(),mode:c.ACCESS_MODE_WRITE,beforeError:e,afterError:n,beforeComplete:r,afterComplete:i})}},{key:"run",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n.bookmark,n.txConfig),i=n.database,o=(n.mode,n.beforeKeys),s=n.afterKeys,u=n.beforeError,c=n.afterError,l=n.beforeComplete,f=n.afterComplete,p=n.flush,g=void 0===p||p,_=new h.ResultStreamObserver({connection:this._connection,beforeKeys:o,afterKeys:s,beforeError:u,afterError:c,beforeComplete:l,afterComplete:f});return(0,a.assertTxConfigIsEmpty)(r,this._connection,_),(0,a.assertDatabaseIsEmpty)(i,this._connection,_),this._connection.write(d.default.run(t,e),_,!1),this._connection.write(d.default.pullAll(),_,g),_}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onError,n=t.onComplete,r=new h.ResetObserver({connection:this._connection,onError:e,onComplete:n});return this._connection.write(d.default.reset(),r,!0),r}},{key:"_createPacker",value:function(t){return new l.Packer(t)}},{key:"_createUnpacker",value:function(t){return new l.Unpacker(t)}},{key:"version",get:function(){return c.BOLT_PROTOCOL_V1}}]),t}();e.default=p},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(43)),o=r(n(48)),s=r(n(5)),a=r(n(6)),u=n(33),c=r(n(97)),l=r(n(128)),d=n(11),h=n(19),f=r(n(74)),p=r(n(56)),g=n(30),_=r(n(162)),v=r(n(47)),y=r(n(69));var m=function(){function t(e){var n=e.mode,r=e.connectionProvider,i=e.bookmark,o=e.database,a=e.config,u=e.reactive,c=e.fetchSize;(0,s.default)(this,t),this._mode=n,this._database=o,this._reactive=u,this._fetchSize=c,this._readConnectionHolder=new f.default({mode:g.ACCESS_MODE_READ,database:o,bookmark:i,connectionProvider:r}),this._writeConnectionHolder=new f.default({mode:g.ACCESS_MODE_WRITE,database:o,bookmark:i,connectionProvider:r}),this._open=!0,this._hasTx=!1,this._lastBookmark=i,this._transactionExecutor=function(t){var e=t&&t.maxTransactionRetryTime?t.maxTransactionRetryTime:null;return new _.default(e)}(a),this._onComplete=this._onCompleteCallback.bind(this)}var e;return(0,a.default)(t,[{key:"run",value:function(t,e,n){var r=this,i=(0,h.validateQueryAndParameters)(t,e),o=i.validatedQuery,s=i.params,a=n?new y.default(n):y.default.empty();return this._run(o,s,(function(t){return r._assertSessionIsOpen(),t.protocol().run(o,s,{bookmark:r._lastBookmark,txConfig:a,mode:r._mode,database:r._database,afterComplete:r._onComplete,reactive:r._reactive,fetchSize:r._fetchSize})}))}},{key:"_run",value:function(t,e,n){var r,i=this._connectionHolderWithMode(this._mode);return r=this._open?!this._hasTx&&i.initializeConnection()?i.getConnection().then((function(t){return n(t)})).catch((function(t){return Promise.resolve(new u.FailedObserver({error:t}))})):Promise.resolve(new u.FailedObserver({error:(0,d.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):Promise.resolve(new u.FailedObserver({error:(0,d.newError)("Cannot run query in a closed session.")})),new c.default(r,t,e,i)}},{key:"beginTransaction",value:function(t){var e=t,n=y.default.empty();return e&&(n=new y.default(e)),this._beginTransaction(this._mode,n)}},{key:"_beginTransaction",value:function(t,e){if(!this._open)throw(0,d.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,d.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var n=p.default._validateSessionMode(t),r=this._connectionHolderWithMode(n);r.initializeConnection(),this._hasTx=!0;var i=new l.default({connectionHolder:r,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return i._begin(this._lastBookmark,e),i}},{key:"_assertSessionIsOpen",value:function(){if(!this._open)throw(0,d.newError)("You cannot run more transactions on a closed session.")}},{key:"_transactionClosed",value:function(){this._hasTx=!1}},{key:"lastBookmark",value:function(){return this._lastBookmark.values()}},{key:"readTransaction",value:function(t,e){var n=new y.default(e);return this._runTransaction(g.ACCESS_MODE_READ,n,t)}},{key:"writeTransaction",value:function(t,e){var n=new y.default(e);return this._runTransaction(g.ACCESS_MODE_WRITE,n,t)}},{key:"_runTransaction",value:function(t,e,n){var r=this;return this._transactionExecutor.execute((function(){return r._beginTransaction(t,e)}),n)}},{key:"_updateBookmark",value:function(t){t&&!t.isEmpty()&&(this._lastBookmark=t)}},{key:"close",value:(e=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._open){t.next=7;break}return this._open=!1,this._transactionExecutor.close(),t.next=5,this._readConnectionHolder.close();case 5:return t.next=7,this._writeConnectionHolder.close();case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_connectionHolderWithMode",value:function(t){if(t===g.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===g.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,d.newError)("Unknown access mode: "+t)}},{key:"_onCompleteCallback",value:function(t){this._updateBookmark(new v.default(t.bookmark))}}]),t}();e.default=m},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return h}));var r=n(0),i=n(1),o=n(7),s=n(3),a=n(8);function u(t,e,n,r){return function(i){return i.lift(new c(t,e,n,r))}}var c=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.keySelector=n,s.elementSelector=r,s.durationSelector=i,s.subjectSelector=o,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return r.a(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new a.a,n.set(e,i);var o=new h(e,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new h(e,i))}catch(t){return void this.error(t)}this.add(s.subscribe(new d(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach((function(e,n){e.error(t)})),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach((function(t,e){t.complete()})),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.a),d=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return r.a(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(i.a),h=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r.a(e,t),e.prototype._subscribe=function(t){var e=new o.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new f(n)),e.add(r.subscribe(t)),e},e}(s.a),f=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.a(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.a)},function(t,e,n){"use strict";n.r(e),n.d(e,"Observable",(function(){return r.a})),n.d(e,"ConnectableObservable",(function(){return i.a})),n.d(e,"GroupedObservable",(function(){return o.a})),n.d(e,"observable",(function(){return s.a})),n.d(e,"Subject",(function(){return a.a})),n.d(e,"BehaviorSubject",(function(){return u.a})),n.d(e,"ReplaySubject",(function(){return c.a})),n.d(e,"AsyncSubject",(function(){return l.a})),n.d(e,"asap",(function(){return d.a})),n.d(e,"asapScheduler",(function(){return d.b})),n.d(e,"async",(function(){return h.a})),n.d(e,"asyncScheduler",(function(){return h.b})),n.d(e,"queue",(function(){return f.a})),n.d(e,"queueScheduler",(function(){return f.b})),n.d(e,"animationFrame",(function(){return m})),n.d(e,"animationFrameScheduler",(function(){return y})),n.d(e,"VirtualTimeScheduler",(function(){return b})),n.d(e,"VirtualAction",(function(){return x})),n.d(e,"Scheduler",(function(){return E.a})),n.d(e,"Subscription",(function(){return w.a})),n.d(e,"Subscriber",(function(){return S.a})),n.d(e,"Notification",(function(){return A.a})),n.d(e,"NotificationKind",(function(){return A.b})),n.d(e,"pipe",(function(){return C.a})),n.d(e,"noop",(function(){return T.a})),n.d(e,"identity",(function(){return k.a})),n.d(e,"isObservable",(function(){return I})),n.d(e,"ArgumentOutOfRangeError",(function(){return O.a})),n.d(e,"EmptyError",(function(){return M.a})),n.d(e,"ObjectUnsubscribedError",(function(){return L.a})),n.d(e,"UnsubscriptionError",(function(){return N.a})),n.d(e,"TimeoutError",(function(){return R.a})),n.d(e,"bindCallback",(function(){return B})),n.d(e,"bindNodeCallback",(function(){return j})),n.d(e,"combineLatest",(function(){return W.b})),n.d(e,"concat",(function(){return Y.a})),n.d(e,"defer",(function(){return X.a})),n.d(e,"empty",(function(){return Z.b})),n.d(e,"forkJoin",(function(){return Q})),n.d(e,"from",(function(){return J.a})),n.d(e,"fromEvent",(function(){return et})),n.d(e,"fromEventPattern",(function(){return nt})),n.d(e,"generate",(function(){return rt})),n.d(e,"iif",(function(){return ot})),n.d(e,"interval",(function(){return at})),n.d(e,"merge",(function(){return ct.a})),n.d(e,"never",(function(){return dt})),n.d(e,"of",(function(){return ht.a})),n.d(e,"onErrorResumeNext",(function(){return ft})),n.d(e,"pairs",(function(){return pt})),n.d(e,"partition",(function(){return mt})),n.d(e,"race",(function(){return bt.a})),n.d(e,"range",(function(){return xt})),n.d(e,"throwError",(function(){return wt.a})),n.d(e,"timer",(function(){return St.a})),n.d(e,"using",(function(){return At})),n.d(e,"zip",(function(){return Ct.b})),n.d(e,"scheduled",(function(){return Tt.a})),n.d(e,"EMPTY",(function(){return Z.a})),n.d(e,"NEVER",(function(){return lt})),n.d(e,"config",(function(){return kt.a}));var r=n(3),i=n(80),o=n(78),s=n(31),a=n(8),u=n(81),c=n(58),l=n(40),d=n(51),h=n(9),f=n(70),p=n(0),g=n(41),_=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return p.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(g.a),v=n(39),y=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(v.a))(_),m=y,b=function(t){function e(e,n){void 0===e&&(e=x),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return p.a(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n[0])&&e.delay<=r&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(v.a),x=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return p.a(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(g.a),E=n(71),w=n(7),S=n(1),A=n(25),C=n(50),T=n(27),k=n(22);function I(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var O=n(34),M=n(36),L=n(32),N=n(53),R=n(83),P=n(13),D=n(65),F=n(10),z=n(14);function B(t,e,n){if(e){if(!Object(z.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return B(t,n).apply(void 0,r).pipe(Object(P.a)((function(t){return Object(F.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o,s=this,a={context:s,subject:o,callbackFunc:t,scheduler:n};return new r.a((function(r){if(n){var i={args:e,subscriber:r,params:a};return n.schedule(U,0,i)}if(!o){o=new l.a;try{t.apply(s,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.next(t.length<=1?t[0]:t),o.complete()}]))}catch(t){Object(D.a)(o)?o.error(t):console.warn(t)}}return o.subscribe(r)}))}}function U(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,a=i.scheduler,u=i.subject;if(!u){u=i.subject=new l.a;try{o.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(a.schedule(V,0,{value:r,subject:u}))}]))}catch(t){u.error(t)}}this.add(u.subscribe(r))}function V(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function j(t,e,n){if(e){if(!Object(z.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return j(t,n).apply(void 0,r).pipe(Object(P.a)((function(t){return Object(F.a)(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a((function(r){var i=o.context,s=o.subject;if(n)return n.schedule(H,0,{params:o,subscriber:r,context:i});if(!s){s=o.subject=new l.a;try{t.apply(i,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?s.error(n):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){Object(D.a)(s)?s.error(t):console.warn(t)}}return s.subscribe(r)}))}}function H(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,s=n.args,a=n.scheduler,u=n.subject;if(!u){u=n.subject=new l.a;try{o.apply(i,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(a.schedule(q,0,{err:r,subject:u}));else{var i=t.length<=1?t[0]:t;e.add(a.schedule(G,0,{value:i,subject:u}))}}]))}catch(t){this.add(a.schedule(q,0,{err:t,subject:u}))}}this.add(u.subscribe(r))}function G(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function q(t){var e=t.err;t.subject.error(e)}var W=n(60),Y=n(44),X=n(62),Z=n(17),K=n(64),J=n(18);function Q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=t[0];if(Object(F.a)(n))return $(n,null);if(Object(K.a)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return $(r.map((function(t){return n[t]})),r)}}if("function"==typeof t[t.length-1]){var i=t.pop();return $(t=1===t.length&&Object(F.a)(t[0])?t[0]:t,null).pipe(Object(P.a)((function(t){return i.apply(void 0,t)})))}return $(t,null)}function $(t,e){return new r.a((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var u=Object(J.a)(t[a]),c=!1;n.add(u.subscribe({next:function(t){c||(c=!0,s++),i[a]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&c||(s===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},u=0;u<r;u++)a(u);else n.complete()}))}var tt=n(35);function et(t,e,n,i){return Object(tt.a)(n)&&(i=n,n=void 0),i?et(t,e,n).pipe(Object(P.a)((function(t){return Object(F.a)(t)?i.apply(void 0,t):i(t)}))):new r.a((function(r){!function t(e,n,r,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),s=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),s=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,d=e.length;l<d;l++)t(e[l],n,r,i,o)}i.add(s)}(t,e,(function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}),r,n)}))}function nt(t,e,n){return n?nt(t,e).pipe(Object(P.a)((function(t){return Object(F.a)(t)?n.apply(void 0,t):n(t)}))):new r.a((function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(Object(tt.a)(e))return function(){return e(i,r)}}))}function rt(t,e,n,i,o){var s,a;if(1==arguments.length){var u=t;a=u.initialState,e=u.condition,n=u.iterate,s=u.resultSelector||k.a,o=u.scheduler}else void 0===i||Object(z.a)(i)?(a=t,s=k.a,o=i):(a=t,s=i);return new r.a((function(t){var r=a;if(o)return o.schedule(it,0,{subscriber:t,iterate:n,condition:e,resultSelector:s,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(e){return void t.error(e)}if(!i){t.complete();break}}var u=void 0;try{u=s(r)}catch(e){return void t.error(e)}if(t.next(u),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}}))}function it(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function ot(t,e,n){return void 0===e&&(e=Z.a),void 0===n&&(n=Z.a),Object(X.a)((function(){return t()?e:n}))}var st=n(42);function at(t,e){return void 0===t&&(t=0),void 0===e&&(e=h.a),(!Object(st.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=h.a),new r.a((function(n){return n.add(e.schedule(ut,t,{subscriber:n,counter:0,period:t})),n}))}function ut(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var ct=n(85),lt=new r.a(T.a);function dt(){return lt}var ht=n(49);function ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return Z.a;var n=t[0],i=t.slice(1);return 1===t.length&&Object(F.a)(n)?ft.apply(void 0,n):new r.a((function(t){var e=function(){return t.add(ft.apply(void 0,i).subscribe(t))};return Object(J.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function pt(t,e){return e?new r.a((function(n){var r=Object.keys(t),i=new w.a;return i.add(e.schedule(gt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i})):new r.a((function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()}))}function gt(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var s=e[n];r.next([s,o[s]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var _t=n(93),vt=n(45),yt=n(24);function mt(t,e,n){return[Object(yt.a)(e,n)(new r.a(Object(vt.a)(t))),Object(yt.a)(Object(_t.a)(e,n))(new r.a(Object(vt.a)(t)))]}var bt=n(86);function xt(t,e,n){return void 0===t&&(t=0),new r.a((function(r){void 0===e&&(e=t,t=0);var i=0,o=t;if(n)return n.schedule(Et,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}}))}function Et(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var wt=n(59),St=n(87);function At(t,e){return new r.a((function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?Object(J.a)(i):Z.a).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}var Ct=n(63),Tt=n(88),kt=n(21)},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l}));var r=n(0),i=n(8),o=n(3),s=n(1),a=n(7),u=n(57),c=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.a.EMPTY)),t},e.prototype.refCount=function(){return Object(u.a)()(this)},e}(o.a),l=function(){var t=c.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),d=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);s.a},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(0),i=n(8),o=n(32),s=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n(0),i=n(1),o=n(25);function s(t,e){return void 0===e&&(e=0),function(n){return n.lift(new a(t,e))}}var a=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler,this.delay))},t}(),u=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r.a(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.a.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.a.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(o.a.createComplete()),this.unsubscribe()},e}(i.a),c=function(){return function(t,e){this.notification=t,this.destination=e}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(61);function i(){return Object(r.a)(1)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(3),i=n(14),o=n(61),s=n(38);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,a=null,u=t[t.length-1];return Object(i.a)(u)?(a=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===a&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(n)(Object(s.a)(t,a))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(0),i=n(10),o=n(38),s=n(23),a=n(20);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(i.a)(t[0]))return t[0];t=t[0]}return Object(o.a)(t,void 0).lift(new c)}var c=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.a(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(a.a)(this,r,void 0,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(e)},e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(3),i=n(9),o=n(42),s=n(14);function a(t,e,n){void 0===t&&(t=0);var a=-1;return Object(o.a)(e)?a=Number(e)<1?1:Number(e):Object(s.a)(e)&&(n=e),Object(s.a)(n)||(n=i.a),new r.a((function(e){var r=Object(o.a)(t)?t:+t-n.now();return n.schedule(u,r,{index:0,period:a,subscriber:e})}))}function u(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(3),i=n(7),o=n(31);var s=n(66),a=n(26);var u=n(92),c=n(91);function l(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.a]}(t))return function(t,e){return new r.a((function(n){var r=new i.a;return r.add(e.schedule((function(){var i=t[o.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a((function(n){var r=new i.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(Object(c.a)(t))return Object(s.a)(t,e);if(function(t){return t&&"function"==typeof t[a.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,o=new i.a;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(e.schedule((function(){r=t[a.a](),o.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),o}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.a(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(7).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t){var r=n(4),i=n(28);Object.defineProperty(e,"__esModule",{value:!0}),e.driver=m,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return o.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return o.isInt}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return _.isPoint}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return v.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return v.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return v.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return v.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return v.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return v.isTime}}),e.default=e.temporal=e.spatial=e.error=e.session=e.types=e.logging=e.auth=e.integer=void 0;var o=i(n(29)),s=n(112),a=n(11),u=r(n(97)),c=r(n(98)),l=r(n(99)),d=n(56),h=r(n(166)),f=r(n(179)),p=n(19),g=r(n(132)),_=n(123),v=n(104),y=r(n(108));function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,p.assertString)(t,"Bolt URL");var r,i=g.default.parseDatabaseUrl(t),o=!1,s=!1;switch(i.scheme){case"bolt":break;case"bolt+s":s=!0,r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":s=!0,r="TRUST_ALL_CERTIFICATES";break;case"neo4j":o=!0;break;case"neo4j+s":s=!0,r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",o=!0;break;case"neo4j+ssc":s=!0,r="TRUST_ALL_CERTIFICATES",o=!0;break;default:throw new Error("Unknown scheme: ".concat(i.scheme))}if(s){if("encrypted"in n||"trust"in n)throw new Error("Encryption/trust can only be configured either through URL or config, not both");n.encrypted=p.ENCRYPTION_ON,n.trust=r}if((e=e||{}).scheme=e.scheme||"none",n.userAgent=n.userAgent||x,o)return new h.default(y.default.fromUrl(i.hostAndPort),i.query,n.userAgent,e,n);if(!(0,p.isEmptyObjectOrNull)(i.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(t,"'"));return new d.Driver(y.default.fromUrl(i.hostAndPort),n.userAgent,e,n)}var b={basic:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return n?{scheme:"basic",principal:t,credentials:e,realm:n}:{scheme:"basic",principal:t,credentials:e}},kerberos:function(t){return{scheme:"kerberos",principal:"",credentials:t}},custom:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return i?{scheme:r,principal:t,credentials:e,realm:n,parameters:i}:{scheme:r,principal:t,credentials:e,realm:n}}};e.auth=b;var x="neo4j-javascript/"+f.default,E={console:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return{level:e,logger:function(e,n){return console.log("".concat(t.Date.now()," ").concat(e.toUpperCase()," ").concat(n))}}}))};e.logging=E;var w={Node:s.Node,Relationship:s.Relationship,UnboundRelationship:s.UnboundRelationship,PathSegment:s.PathSegment,Path:s.Path,Result:u.default,ResultSummary:c.default,Record:l.default,Point:_.Point,Date:v.Date,DateTime:v.DateTime,Duration:v.Duration,LocalDateTime:v.LocalDateTime,LocalTime:v.LocalTime,Time:v.Time,Integer:o.default};e.types=w;var S={READ:d.READ,WRITE:d.WRITE};e.session=S;var A={SERVICE_UNAVAILABLE:a.SERVICE_UNAVAILABLE,SESSION_EXPIRED:a.SESSION_EXPIRED,PROTOCOL_ERROR:a.PROTOCOL_ERROR};e.error=A;var C={toNumber:o.toNumber,toString:o.toString,inSafeRange:o.inSafeRange};e.integer=C;var T={isPoint:_.isPoint};e.spatial=T;var k={isDuration:v.isDuration,isLocalTime:v.isLocalTime,isTime:v.isTime,isDate:v.isDate,isLocalDateTime:v.isLocalDateTime,isDateTime:v.isDateTime};e.temporal=k;var I={driver:m,int:o.int,isInt:o.isInt,isPoint:_.isPoint,isDuration:v.isDuration,isLocalTime:v.isLocalTime,isTime:v.isTime,isDate:v.isDate,isLocalDateTime:v.isLocalDateTime,isDateTime:v.isDateTime,integer:C,Neo4jError:a.Neo4jError,auth:b,logging:E,types:w,session:S,error:A,spatial:T,temporal:k};e.default=I}).call(this,n(111))},function(t){t.exports=JSON.parse('{"b":"neo4j+s://db-xk5qmxsgakadwhvrtomo.graphenedb.com:24786","a":"neo4j","c":"spongebob"}')},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(98)),a=n(74),u=(n(33),function(t){console.log("Uncaught error when processing result: "+t)}),c=function(t){};var l=function(){function t(e,n,r,o){(0,i.default)(this,t),this._stack=function(){var t=new Error("");if(t.stack)return t.stack.replace(/^Error(\n\r)*/,"");return null}(),this._streamObserverPromise=e,this._p=null,this._query=n,this._parameters=r||{},this._connectionHolder=o||a.EMPTY_CONNECTION_HOLDER}return(0,o.default)(t,[{key:"keys",value:function(){var t=this;return new Promise((function(e,n){t._streamObserverPromise.then((function(t){return t.subscribe({onKeys:function(t){return e(t)},onError:function(t){return n(t)}})}))}))}},{key:"summary",value:function(){var t=this;return new Promise((function(e,n){t._streamObserverPromise.then((function(t){t.cancel(),t.subscribe({onCompleted:function(t){return e(t)},onError:function(t){return n(t)}})}))}))}},{key:"_getOrCreatePromise",value:function(){var t=this;return this._p||(this._p=new Promise((function(e,n){var r=[],i={onNext:function(t){r.push(t)},onCompleted:function(t){e({records:r,summary:t})},onError:function(t){n(t)}};t.subscribe(i)}))),this._p}},{key:"then",value:function(t,e){return this._getOrCreatePromise().then(t,e)}},{key:"catch",value:function(t){return this._getOrCreatePromise().catch(t)}},{key:"subscribe",value:function(t){var e=this,n=t.onCompleted||c;t.onCompleted=function(r){var i=e._connectionHolder,o=e._query,a=e._parameters;function u(e){i.releaseConnection().then((function(){n.call(t,new s.default(o,a,r,e))}))}i.getConnection().then((function(t){u(t?t.protocol().version:void 0)}),(function(t){u()}))};var r=t.onError||u;t.onError=function(n){e._connectionHolder.releaseConnection().then((function(){!function(t,e){e&&(t.stack=t.toString()+"\n"+e)}(n,e._stack),r.call(t,n)}))},this._streamObserverPromise.then((function(e){return e.subscribe(t)}))}},{key:"_cancel",value:function(){this._streamObserverPromise.then((function(t){return t.cancel()}))}}]),t}();e.default=l},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.queryType=void 0;var i=r(n(5)),o=r(n(6)),s=n(29),a=function(){function t(e,n,r,o){(0,i.default)(this,t),this.query={text:e,parameters:n},this.queryType=r.type,this.counters=new l(r.stats||{}),this.updateStatistics=this.counters,this.plan=!(!r.plan&&!r.profile)&&new u(r.plan||r.profile),this.profile=!!r.profile&&new c(r.profile),this.notifications=this._buildNotifications(r.notifications),this.server=new h(r.server,o),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:r.db||null}}return(0,o.default)(t,[{key:"_buildNotifications",value:function(t){return t?t.map((function(t){return new d(t)})):[]}},{key:"hasPlan",value:function(){return this.plan instanceof u}},{key:"hasProfile",value:function(){return this.profile instanceof c}}]),t}(),u=function t(e){(0,i.default)(this,t),this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=e.children?e.children.map((function(e){return new t(e)})):[]},c=function(){function t(e){(0,i.default)(this,t),this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=p("dbHits",e),this.rows=p("rows",e),this.pageCacheMisses=p("pageCacheMisses",e),this.pageCacheHits=p("pageCacheHits",e),this.pageCacheHitRatio=p("pageCacheHitRatio",e),this.time=p("time",e),this.children=e.children?e.children.map((function(e){return new t(e)})):[]}return(0,o.default)(t,[{key:"hasPageCacheStats",value:function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0}}]),t}(),l=function(){function t(e){var n=this;(0,i.default)(this,t),this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(e).forEach((function(t){var r=t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}));r in n._stats?n._stats[r]=f(e[t]):"systemUpdates"===r&&(n._systemUpdates=f(e[t]))})),this._stats=Object.freeze(this._stats)}return(0,o.default)(t,[{key:"containsUpdates",value:function(){var t=this;return Object.keys(this._stats).reduce((function(e,n){return e+t._stats[n]}),0)>0}},{key:"updates",value:function(){return this._stats}},{key:"containsSystemUpdates",value:function(){return this._systemUpdates>0}},{key:"systemUpdates",value:function(){return this._systemUpdates}}]),t}(),d=function(){function t(e){(0,i.default)(this,t),this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=t._constructPosition(e.position)}return(0,o.default)(t,null,[{key:"_constructPosition",value:function(t){return t?{offset:f(t.offset),line:f(t.line),column:f(t.column)}:{}}}]),t}(),h=function t(e,n){(0,i.default)(this,t),e&&(this.address=e.address,this.version=e.version),this.protocolVersion=n};function f(t){return(0,s.isInt)(t)?t.toInt():t}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t in e){var r=e[t];return(0,s.isInt)(r)?r.toInt():r}return n}e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};var g=a;e.default=g},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(43)),o=r(n(115)),s=r(n(5)),a=r(n(6)),u=n(11);function c(t){var e={};return t.forEach((function(t,n){e[t]=n})),e}var l=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,s.default)(this,t),this.keys=e,this.length=e.length,this._fields=n,this._fieldLookup=r||c(e)}return(0,a.default)(t,[{key:"forEach",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,s=this.entries()[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var a=(0,o.default)(i.value,2),u=a[0];t(a[1],u,this)}}catch(t){n=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}}},{key:"map",value:function(t){var e=[],n=!0,r=!1,i=void 0;try{for(var s,a=this.entries()[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=(0,o.default)(s.value,2),c=u[0],l=u[1];e.push(t(l,c,this))}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}},{key:"entries",value:i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.keys.length)){t.next=7;break}return t.next=4,[this.keys[e],this._fields[e]];case 4:e++,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))},{key:"values",value:i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.keys.length)){t.next=7;break}return t.next=4,this._fields[e];case 4:e++,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))},{key:Symbol.iterator,value:i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this.values(),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"toObject",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,s=this.entries()[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var a=(0,o.default)(i.value,2),u=a[0],c=a[1];t[u]=c}}catch(t){n=!0,r=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}return t}},{key:"get",value:function(t){var e;if("number"!=typeof t){if(void 0===(e=this._fieldLookup[t]))throw(0,u.newError)("This record has no field with key '"+t+"', available key are: ["+this.keys+"].")}else e=t;if(e>this._fields.length-1||e<0)throw(0,u.newError)("This record has no field with index '"+e+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[e]}},{key:"has",value:function(t){return"number"==typeof t?t>=0&&t<this._fields.length:void 0!==this._fieldLookup[t]}}]),t}();e.default=l},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(15)),o=r(n(12)),s=r(n(16)),a=r(n(5)),u=r(n(6)),c=function(){function t(e){(0,a.default)(this,t),this.position=0,this.length=e}return(0,u.default)(t,[{key:"getUInt8",value:function(t){throw new Error("Not implemented")}},{key:"getInt8",value:function(t){throw new Error("Not implemented")}},{key:"getFloat64",value:function(t){throw new Error("Not implemented")}},{key:"putUInt8",value:function(t,e){throw new Error("Not implemented")}},{key:"putInt8",value:function(t,e){throw new Error("Not implemented")}},{key:"putFloat64",value:function(t,e){throw new Error("Not implemented")}},{key:"getInt16",value:function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)}},{key:"getUInt16",value:function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)}},{key:"getInt32",value:function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)}},{key:"getUInt32",value:function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)}},{key:"getInt64",value:function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)}},{key:"getSlice",value:function(t,e){return new l(t,e,this)}},{key:"putInt16",value:function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,255&e)}},{key:"putUInt16",value:function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,255&e)}},{key:"putInt32",value:function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)}},{key:"putUInt32",value:function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)}},{key:"putInt64",value:function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,255&e)}},{key:"putBytes",value:function(t,e){for(var n=0,r=e.remaining();n<r;n++)this.putUInt8(t+n,e.readUInt8())}},{key:"readUInt8",value:function(){return this.getUInt8(this._updatePos(1))}},{key:"readInt8",value:function(){return this.getInt8(this._updatePos(1))}},{key:"readUInt16",value:function(){return this.getUInt16(this._updatePos(2))}},{key:"readUInt32",value:function(){return this.getUInt32(this._updatePos(4))}},{key:"readInt16",value:function(){return this.getInt16(this._updatePos(2))}},{key:"readInt32",value:function(){return this.getInt32(this._updatePos(4))}},{key:"readInt64",value:function(){return this.getInt32(this._updatePos(8))}},{key:"readFloat64",value:function(){return this.getFloat64(this._updatePos(8))}},{key:"writeUInt8",value:function(t){this.putUInt8(this._updatePos(1),t)}},{key:"writeInt8",value:function(t){this.putInt8(this._updatePos(1),t)}},{key:"writeInt16",value:function(t){this.putInt16(this._updatePos(2),t)}},{key:"writeInt32",value:function(t){this.putInt32(this._updatePos(4),t)}},{key:"writeUInt32",value:function(t){this.putUInt32(this._updatePos(4),t)}},{key:"writeInt64",value:function(t){this.putInt64(this._updatePos(8),t)}},{key:"writeFloat64",value:function(t){this.putFloat64(this._updatePos(8),t)}},{key:"writeBytes",value:function(t){this.putBytes(this._updatePos(t.remaining()),t)}},{key:"readSlice",value:function(t){return this.getSlice(this._updatePos(t),t)}},{key:"_updatePos",value:function(t){var e=this.position;return this.position+=t,e}},{key:"remaining",value:function(){return this.length-this.position}},{key:"hasRemaining",value:function(){return this.remaining()>0}},{key:"reset",value:function(){this.position=0}},{key:"toString",value:function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()}},{key:"toHex",value:function(){for(var t="",e=0;e<this.length;e++){var n=this.getUInt8(e).toString(16);1===n.length&&(n="0"+n),t+=n,e!==this.length-1&&(t+=" ")}return t}}]),t}();e.default=c;var l=function(t){function e(t,n,r){var s;return(0,a.default)(this,e),(s=(0,i.default)(this,(0,o.default)(e).call(this,n)))._start=t,s._inner=r,s}return(0,s.default)(e,t),(0,u.default)(e,[{key:"putUInt8",value:function(t,e){this._inner.putUInt8(this._start+t,e)}},{key:"getUInt8",value:function(t){return this._inner.getUInt8(this._start+t)}},{key:"putInt8",value:function(t,e){this._inner.putInt8(this._start+t,e)}},{key:"putFloat64",value:function(t,e){this._inner.putFloat64(this._start+t,e)}},{key:"getInt8",value:function(t){return this._inner.getInt8(this._start+t)}},{key:"getFloat64",value:function(t){return this._inner.getFloat64(this._start+t)}}]),e}(c)},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=function(t){function e(t){var n;(0,i.default)(this,e);var r=t instanceof ArrayBuffer?t:new ArrayBuffer(t);return(n=(0,s.default)(this,(0,a.default)(e).call(this,r.byteLength)))._buffer=r,n._view=new DataView(n._buffer),n}return(0,u.default)(e,t),(0,o.default)(e,[{key:"putUInt8",value:function(t,e){this._view.setUint8(t,e)}},{key:"getUInt8",value:function(t){return this._view.getUint8(t)}},{key:"putInt8",value:function(t,e){this._view.setInt8(t,e)}},{key:"getInt8",value:function(t){return this._view.getInt8(t)}},{key:"getFloat64",value:function(t){return this._view.getFloat64(t)}},{key:"putFloat64",value:function(t,e){this._view.setFloat64(t,e)}},{key:"getSlice",value:function(t,n){if(this._buffer.slice)return new e(this._buffer.slice(t,t+n));for(var r=new e(n),i=0;i<n;i++)r.putUInt8(i,this.getUInt8(i+t));return r}},{key:"readView",value:function(t){return new DataView(this._buffer,this._updatePos(t),t)}}]),e}(r(n(100)).default);e.default=c},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=(r(n(47)),function(){function t(){(0,i.default)(this,t)}return(0,o.default)(t,[{key:"acquireConnection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.accessMode,t.database,t.bookmarks;throw new Error("not implemented")}},{key:"supportsMultiDb",value:function(){throw new Error("not implemented")}},{key:"supportsTransactionConfig",value:function(){throw new Error("not implemented")}},{key:"close",value:function(){throw new Error("not implemented")}}]),t}());e.default=s},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(43)),o=r(n(48)),s=r(n(5)),a=r(n(6)),u=r(n(15)),c=r(n(12)),l=r(n(73)),d=r(n(16)),h=n(54),f=n(119),p=n(11),g=r(n(156)),_=r(n(157)),v=r(n(75));r(n(76)),n(33);function y(){}var m={onNext:y,onCompleted:y,onError:y},b=0,x=function(t){function e(t,n,r,i){var o,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return(0,s.default)(this,e),(o=(0,u.default)(this,(0,c.default)(e).call(this,n)))._id=b++,o._address=r,o._server={address:r.asHostPort()},o.creationTimestamp=Date.now(),o._disableLosslessIntegers=a,o._pendingObservers=[],o._currentObserver=void 0,o._ch=t,o._dechunker=new f.Dechunker,o._chunker=new f.Chunker(t),o._log=i,o._serversideRouting=d,o._dbConnectionId=null,o._protocol=null,o._currentFailure=null,o._isBroken=!1,o._log.isDebugEnabled()&&o._log.debug("".concat((0,l.default)(o)," created towards ").concat(r)),o}var n;return(0,d.default)(e,t),(0,a.default)(e,[{key:"connect",value:function(t,e){var n=this;return this._negotiateProtocol().then((function(){return n._initialize(t,e)}))}},{key:"_negotiateProtocol",value:function(){var t=this,e=new _.default(this,this._ch,this._chunker,this._disableLosslessIntegers,this._log,this._serversideRouting);return new Promise((function(n,r){var i=function(e){t._handleFatalError(e),r(e)};t._ch.onerror=i.bind(t),t._ch._error&&i(t._ch._error),t._ch.onmessage=function(i){try{t._protocol=e.createNegotiatedProtocol(i),t._ch.onerror=t._handleFatalError.bind(t),t._ch.onmessage=function(e){return t._dechunker.write(e)},t._dechunker.onmessage=function(e){t._handleMessage(t._protocol.unpacker().unpack(e))},i.hasRemaining()&&t._dechunker.write(i.readSlice(i.remaining())),n(t)}catch(e){t._handleFatalError(e),r(e)}},e.writeHandshakeRequest()}))}},{key:"_initialize",value:function(t,e){var n=this,r=this;return new Promise((function(i,o){n._protocol.initialize({userAgent:t,authToken:e,onError:function(t){return o(t)},onComplete:function(){return i(r)}})}))}},{key:"protocol",value:function(){return this._protocol}},{key:"write",value:function(t,e,n){var r=this;this._queueObserver(e)&&(this._log.isDebugEnabled()&&this._log.debug("".concat(this," C: ").concat(t)),this._protocol.packer().packStruct(t.signature,t.fields.map((function(t){return r._packable(t)}))),this._chunker.messageBoundary(),n&&this._chunker.flush())}},{key:"_handleFatalError",value:function(t){for(this._isBroken=!0,this._error=this.handleAndTransformError(t,this._address),this._log.isErrorEnabled()&&this._log.error("".concat(this," experienced a fatal error ").concat(JSON.stringify(this._error))),this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(this._error);this._pendingObservers.length>0;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(this._error)}}},{key:"_handleMessage",value:function(t){if(!this._isBroken){var e=t.fields[0];switch(t.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: RECORD ").concat(JSON.stringify(t))),this._currentObserver.onNext(e);break;case 112:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: SUCCESS ").concat(JSON.stringify(t)));try{var n=this._protocol.transformMetadata(e);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: FAILURE ").concat(JSON.stringify(t)));try{var r=(0,p.newError)(e.message,e.code);this._currentFailure=this.handleAndTransformError(r,this._address),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._resetOnFailure()}break;case 126:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: IGNORED ").concat(JSON.stringify(t)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,p.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._handleFatalError((0,p.newError)("Unknown Bolt protocol message: "+t))}}}},{key:"resetAndFlush",value:function(){var t=this;return new Promise((function(e,n){t._protocol.reset({onError:function(e){if(t._isBroken)n(e);else{var r=t._handleProtocolError("Received FAILURE as a response for RESET: "+e);n(r)}},onComplete:function(){e()}})}))}},{key:"_resetOnFailure",value:function(){var t=this;this._protocol.reset({onError:function(){t._currentFailure=null},onComplete:function(){t._currentFailure=null}})}},{key:"_queueObserver",value:function(t){return this._isBroken?(t&&t.onError&&t.onError(this._error),!1):((t=t||m).onCompleted=t.onCompleted||y,t.onError=t.onError||y,t.onNext=t.onNext||y,void 0===this._currentObserver?this._currentObserver=t:this._pendingObservers.push(t),!0)}},{key:"_updateCurrentObserver",value:function(){this._currentObserver=this._pendingObservers.shift()}},{key:"isOpen",value:function(){return!this._isBroken&&this._ch._open}},{key:"close",value:(n=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._log.isDebugEnabled()&&this._log.debug("".concat(this," closing")),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),t.next=4,this._ch.close();case 4:this._log.isDebugEnabled()&&this._log.debug("".concat(this," closed"));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"toString",value:function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")}},{key:"_packable",value:function(t){return this._protocol.packer().packable(t)}},{key:"_handleProtocolError",value:function(t){this._currentFailure=null,this._updateCurrentObserver();var e=(0,p.newError)(t,p.PROTOCOL_ERROR);return this._handleFatalError(e),e}},{key:"id",get:function(){return this._id}},{key:"databaseId",get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t}},{key:"address",get:function(){return this._address}},{key:"version",get:function(){return this._server.version},set:function(t){this._server.version=t}},{key:"server",get:function(){return this._server}}],[{key:"create",value:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=new g.default(t,n,r.errorCode());return new e(new h.Channel(s),r,t,i,n.disableLosslessIntegers,o)}}]),e}(v.default);e.default=x},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.isDuration=function(t){return y(t,"__isDuration__")},e.isLocalTime=function(t){return y(t,"__isLocalTime__")},e.isTime=function(t){return y(t,"__isTime__")},e.isDate=function(t){return y(t,"__isDate__")},e.isLocalDateTime=function(t){return y(t,"__isLocalDateTime__")},e.isDateTime=function(t){return y(t,"__isDateTime__")},e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=void 0;var o=i(n(115)),s=i(n(5)),a=i(n(6)),u=r(n(124)),c=n(19),l=n(11),d={value:!0,enumerable:!1,configurable:!1,writable:!1},h=function(){function t(e,n,r,i){(0,s.default)(this,t),this.months=(0,c.assertNumberOrInteger)(e,"Months"),this.days=(0,c.assertNumberOrInteger)(n,"Days"),(0,c.assertNumberOrInteger)(r,"Seconds"),(0,c.assertNumberOrInteger)(i,"Nanoseconds"),this.seconds=u.normalizeSecondsForDuration(r,i),this.nanoseconds=u.normalizeNanosecondsForDuration(i),Object.freeze(this)}return(0,a.default)(t,[{key:"toString",value:function(){return u.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)}}]),t}();e.Duration=h,Object.defineProperty(h.prototype,"__isDuration__",d);var f=function(){function t(e,n,r,i){(0,s.default)(this,t),this.hour=u.assertValidHour(e),this.minute=u.assertValidMinute(n),this.second=u.assertValidSecond(r),this.nanosecond=u.assertValidNanosecond(i),Object.freeze(this)}return(0,a.default)(t,[{key:"toString",value:function(){return u.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)}}],[{key:"fromStandardDate",value:function(e,n){return b(e,n),new t(e.getHours(),e.getMinutes(),e.getSeconds(),u.totalNanoseconds(e,n))}}]),t}();e.LocalTime=f,Object.defineProperty(f.prototype,"__isLocalTime__",d);var p=function(){function t(e,n,r,i,o){(0,s.default)(this,t),this.hour=u.assertValidHour(e),this.minute=u.assertValidMinute(n),this.second=u.assertValidSecond(r),this.nanosecond=u.assertValidNanosecond(i),this.timeZoneOffsetSeconds=(0,c.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return(0,a.default)(t,[{key:"toString",value:function(){return u.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+u.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)}}],[{key:"fromStandardDate",value:function(e,n){return b(e,n),new t(e.getHours(),e.getMinutes(),e.getSeconds(),u.totalNanoseconds(e,n),u.timeZoneOffsetInSeconds(e))}}]),t}();e.Time=p,Object.defineProperty(p.prototype,"__isTime__",d);var g=function(){function t(e,n,r){(0,s.default)(this,t),this.year=u.assertValidYear(e),this.month=u.assertValidMonth(n),this.day=u.assertValidDay(r),Object.freeze(this)}return(0,a.default)(t,[{key:"toString",value:function(){return u.dateToIsoString(this.year,this.month,this.day)}}],[{key:"fromStandardDate",value:function(e){return b(e,null),new t(e.getFullYear(),e.getMonth()+1,e.getDate())}}]),t}();e.Date=g,Object.defineProperty(g.prototype,"__isDate__",d);var _=function(){function t(e,n,r,i,o,a,c){(0,s.default)(this,t),this.year=u.assertValidYear(e),this.month=u.assertValidMonth(n),this.day=u.assertValidDay(r),this.hour=u.assertValidHour(i),this.minute=u.assertValidMinute(o),this.second=u.assertValidSecond(a),this.nanosecond=u.assertValidNanosecond(c),Object.freeze(this)}return(0,a.default)(t,[{key:"toString",value:function(){return m(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)}}],[{key:"fromStandardDate",value:function(e,n){return b(e,n),new t(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),u.totalNanoseconds(e,n))}}]),t}();e.LocalDateTime=_,Object.defineProperty(_.prototype,"__isLocalDateTime__",d);var v=function(){function t(e,n,r,i,a,d,h,f,p){(0,s.default)(this,t),this.year=u.assertValidYear(e),this.month=u.assertValidMonth(n),this.day=u.assertValidDay(r),this.hour=u.assertValidHour(i),this.minute=u.assertValidMinute(a),this.second=u.assertValidSecond(d),this.nanosecond=u.assertValidNanosecond(h);var g=function(t,e){var n=t||0===t,r=e&&""!==e;if(n&&!r)return(0,c.assertNumberOrInteger)(t,"Time zone offset in seconds"),[t,null];if(!n&&r)return(0,c.assertString)(e,"Time zone ID"),[null,e];throw n&&r?(0,l.newError)("Unable to create DateTime with both time zone offset and id. Please specify either of them. Given offset: ".concat(t," and id: ").concat(e)):(0,l.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(t," and id: ").concat(e))}(f,p),_=(0,o.default)(g,2),v=_[0],y=_[1];this.timeZoneOffsetSeconds=v,this.timeZoneId=y,Object.freeze(this)}return(0,a.default)(t,[{key:"toString",value:function(){return m(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneId?"[".concat(this.timeZoneId,"]"):u.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds))}}],[{key:"fromStandardDate",value:function(e,n){return b(e,n),new t(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),u.totalNanoseconds(e,n),u.timeZoneOffsetInSeconds(e),null)}}]),t}();function y(t,e){return!0===(t&&t[e])}function m(t,e,n,r,i,o,s){return u.dateToIsoString(t,e,n)+"T"+u.timeToIsoString(r,i,o,s)}function b(t,e){(0,c.assertValidDate)(t,"Standard date"),null!=e&&(0,c.assertNumberOrInteger)(e,"Nanosecond")}e.DateTime=v,Object.defineProperty(v.prototype,"__isDateTime__",d)},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=e.default=void 0;var i=r(n(5)),o=r(n(6));e.DEFAULT_MAX_SIZE=100;e.DEFAULT_ACQUISITION_TIMEOUT=6e4;var s=function(){function t(e,n){(0,i.default)(this,t),this.maxSize=a(e,100),this.acquisitionTimeout=a(n,6e4)}return(0,o.default)(t,null,[{key:"defaultConfig",value:function(){return new t(100,6e4)}},{key:"fromDriverConfig",value:function(e){return new t(u(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:100,u(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:6e4)}}]),t}();function a(t,e){return 0===t||t?t:e}function u(t){return 0===t||t}e.default=s},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,o=r(n(15)),s=r(n(12)),a=r(n(16)),u=r(n(5)),c=r(n(6)),l=r(n(113)),d=n(11),h=(i={},(0,l.default)(i,"error",0),(0,l.default)(i,"warn",1),(0,l.default)(i,"info",2),(0,l.default)(i,"debug",3),i),f=function(){function t(e,n){(0,u.default)(this,t),this._level=e,this._loggerFunction=n}return(0,c.default)(t,[{key:"isErrorEnabled",value:function(){return g(this._level,"error")}},{key:"error",value:function(t){this.isErrorEnabled()&&this._loggerFunction("error",t)}},{key:"isWarnEnabled",value:function(){return g(this._level,"warn")}},{key:"warn",value:function(t){this.isWarnEnabled()&&this._loggerFunction("warn",t)}},{key:"isInfoEnabled",value:function(){return g(this._level,"info")}},{key:"info",value:function(t){this.isInfoEnabled()&&this._loggerFunction("info",t)}},{key:"isDebugEnabled",value:function(){return g(this._level,"debug")}},{key:"debug",value:function(t){this.isDebugEnabled()&&this._loggerFunction("debug",t)}}],[{key:"create",value:function(e){if(e&&e.logging){var n=e.logging;return new t(function(t){if(t&&t.level){var e=t.level,n=h[e];if(!n&&0!==n)throw(0,d.newError)("Illegal logging level: ".concat(e,". Supported levels are: ").concat(Object.keys(h)));return e}return"info"}(n),function(t){if(t&&t.logger){var e=t.logger;if(e&&"function"==typeof e)return e}throw(0,d.newError)("Illegal logger function: ".concat(t.logger))}(n))}return this.noOp()}},{key:"noOp",value:function(){return p}}]),t}(),p=new(function(t){function e(){return(0,u.default)(this,e),(0,o.default)(this,(0,s.default)(e).call(this,null,null))}return(0,a.default)(e,t),(0,c.default)(e,[{key:"isErrorEnabled",value:function(){return!1}},{key:"error",value:function(t){}},{key:"isWarnEnabled",value:function(){return!1}},{key:"warn",value:function(t){}},{key:"isInfoEnabled",value:function(){return!1}},{key:"info",value:function(t){}},{key:"isDebugEnabled",value:function(){return!1}},{key:"debug",value:function(t){}}]),e}(f));function g(t,e){return h[t]>=h[e]}var _=f;e.default=_},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=n(11),a=function(){function t(e,n,r){(0,i.default)(this,t),this._errorCode=e,this._handleUnavailability=n||u,this._handleWriteFailure=r||u}return(0,o.default)(t,[{key:"errorCode",value:function(){return this._errorCode}},{key:"handleAndTransformError",value:function(t,e){return function(t){if(t)return t.code===s.SESSION_EXPIRED||t.code===s.SERVICE_UNAVAILABLE||"Neo.TransientError.General.DatabaseUnavailable"===t.code;return!1}(t)?this._handleUnavailability(t,e):function(t){if(t)return"Neo.ClientError.Cluster.NotALeader"===t.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===t.code;return!1}(t)?this._handleWriteFailure(t,e):t}}]),t}();function u(t){return t}e.default=a},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=n(19),a=r(n(132)),u=function(){function t(e,n,r,o){(0,i.default)(this,t),this._host=(0,s.assertString)(e,"host"),this._resolved=n?(0,s.assertString)(n,"resolved"):null,this._port=(0,s.assertNumber)(r,"port"),this._hostPort=o,this._stringValue=n?"".concat(o,"(").concat(n,")"):"".concat(o)}return(0,o.default)(t,[{key:"host",value:function(){return this._host}},{key:"resolvedHost",value:function(){return this._resolved?this._resolved:this._host}},{key:"port",value:function(){return this._port}},{key:"resolveWith",value:function(e){return new t(this._host,e,this._port,this._hostPort)}},{key:"asHostPort",value:function(){return this._hostPort}},{key:"asKey",value:function(){return this._hostPort}},{key:"toString",value:function(){return this._stringValue}}],[{key:"fromUrl",value:function(e){var n=a.default.parseDatabaseUrl(e);return new t(n.host,null,n.port,n.hostAndPort)}}]),t}();e.default=u},function(t,e,n){"use strict";n.r(e),n.d(e,"audit",(function(){return o})),n.d(e,"auditTime",(function(){return l})),n.d(e,"buffer",(function(){return d})),n.d(e,"bufferCount",(function(){return g})),n.d(e,"bufferTime",(function(){return b})),n.d(e,"bufferToggle",(function(){return O})),n.d(e,"bufferWhen",(function(){return N})),n.d(e,"catchError",(function(){return D})),n.d(e,"combineAll",(function(){return U})),n.d(e,"combineLatest",(function(){return H})),n.d(e,"concat",(function(){return q})),n.d(e,"concatAll",(function(){return W.a})),n.d(e,"concatMap",(function(){return X})),n.d(e,"concatMapTo",(function(){return Z})),n.d(e,"count",(function(){return K})),n.d(e,"debounce",(function(){return $})),n.d(e,"debounceTime",(function(){return nt})),n.d(e,"defaultIfEmpty",(function(){return st})),n.d(e,"delay",(function(){return dt})),n.d(e,"delayWhen",(function(){return _t})),n.d(e,"dematerialize",(function(){return xt})),n.d(e,"distinct",(function(){return St})),n.d(e,"distinctUntilChanged",(function(){return Tt})),n.d(e,"distinctUntilKeyChanged",(function(){return Ot})),n.d(e,"elementAt",(function(){return jt})),n.d(e,"endWith",(function(){return Gt})),n.d(e,"every",(function(){return qt})),n.d(e,"exhaust",(function(){return Xt})),n.d(e,"exhaustMap",(function(){return Qt})),n.d(e,"expand",(function(){return ee})),n.d(e,"filter",(function(){return Lt.a})),n.d(e,"finalize",(function(){return ie})),n.d(e,"find",(function(){return ae})),n.d(e,"findIndex",(function(){return le})),n.d(e,"first",(function(){return he})),n.d(e,"groupBy",(function(){return fe.b})),n.d(e,"ignoreElements",(function(){return pe})),n.d(e,"isEmpty",(function(){return ve})),n.d(e,"last",(function(){return we})),n.d(e,"map",(function(){return Jt.a})),n.d(e,"mapTo",(function(){return Se})),n.d(e,"materialize",(function(){return Te})),n.d(e,"max",(function(){return Pe})),n.d(e,"merge",(function(){return Fe})),n.d(e,"mergeAll",(function(){return ze.a})),n.d(e,"mergeMap",(function(){return Y.b})),n.d(e,"flatMap",(function(){return Y.a})),n.d(e,"mergeMapTo",(function(){return Be})),n.d(e,"mergeScan",(function(){return Ue})),n.d(e,"min",(function(){return He})),n.d(e,"multicast",(function(){return qe})),n.d(e,"observeOn",(function(){return Ye.b})),n.d(e,"onErrorResumeNext",(function(){return Xe})),n.d(e,"pairwise",(function(){return Je})),n.d(e,"partition",(function(){return en})),n.d(e,"pluck",(function(){return nn})),n.d(e,"publish",(function(){return sn})),n.d(e,"publishBehavior",(function(){return un})),n.d(e,"publishLast",(function(){return ln})),n.d(e,"publishReplay",(function(){return hn})),n.d(e,"race",(function(){return pn})),n.d(e,"reduce",(function(){return Re})),n.d(e,"repeat",(function(){return gn})),n.d(e,"repeatWhen",(function(){return yn})),n.d(e,"retry",(function(){return xn})),n.d(e,"retryWhen",(function(){return Sn})),n.d(e,"refCount",(function(){return Tn.a})),n.d(e,"sample",(function(){return kn})),n.d(e,"sampleTime",(function(){return Mn})),n.d(e,"scan",(function(){return Oe})),n.d(e,"sequenceEqual",(function(){return Pn})),n.d(e,"share",(function(){return Un})),n.d(e,"shareReplay",(function(){return Vn})),n.d(e,"single",(function(){return jn})),n.d(e,"skip",(function(){return qn})),n.d(e,"skipLast",(function(){return Xn})),n.d(e,"skipUntil",(function(){return Jn})),n.d(e,"skipWhile",(function(){return tr})),n.d(e,"startWith",(function(){return rr})),n.d(e,"subscribeOn",(function(){return ar})),n.d(e,"switchAll",(function(){return hr})),n.d(e,"switchMap",(function(){return cr})),n.d(e,"switchMapTo",(function(){return fr})),n.d(e,"take",(function(){return Bt})),n.d(e,"takeLast",(function(){return be})),n.d(e,"takeUntil",(function(){return pr})),n.d(e,"takeWhile",(function(){return vr})),n.d(e,"tap",(function(){return Er})),n.d(e,"throttle",(function(){return Cr})),n.d(e,"throttleTime",(function(){return Ir})),n.d(e,"throwIfEmpty",(function(){return Rt})),n.d(e,"timeInterval",(function(){return Rr})),n.d(e,"timeout",(function(){return Vr})),n.d(e,"timeoutWith",(function(){return Fr})),n.d(e,"timestamp",(function(){return jr})),n.d(e,"toArray",(function(){return qr})),n.d(e,"window",(function(){return Wr})),n.d(e,"windowCount",(function(){return Zr})),n.d(e,"windowTime",(function(){return Qr})),n.d(e,"windowToggle",(function(){return oi})),n.d(e,"windowWhen",(function(){return ui})),n.d(e,"withLatestFrom",(function(){return di})),n.d(e,"zip",(function(){return gi})),n.d(e,"zipAll",(function(){return _i}));var r=n(0),i=n(2);function o(t){return function(e){return e.lift(new s(t))}}var s=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(t){return this.destination.error(t)}var n=Object(i.c)(e,new i.a(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(i.b),u=n(9),c=n(87);function l(t,e){return void 0===e&&(e=u.a),o((function(){return Object(c.a)(t,e)}))}function d(t){return function(e){return e.lift(new h(t))}}var h=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.closingNotifier))},t}(),f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(Object(i.c)(n,new i.a(r))),r}return r.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(){var t=this.buffer;this.buffer=[],this.destination.next(t)},e}(i.b),p=n(1);function g(t,e){return void 0===e&&(e=null),function(n){return n.lift(new _(t,e))}}var _=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?y:v}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),v=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return r.a(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(p.a),y=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r.a(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var o=r.length;o--;){var s=r[o];s.push(t),s.length===e&&(r.splice(o,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(p.a),m=n(14);function b(t){var e=arguments.length,n=u.a;Object(m.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new x(t,r,i,n))}}var x=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new w(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),E=function(){return function(){this.buffer=[]}}(),w=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=r,s.maxBufferSize=i,s.scheduler=o,s.contexts=[];var a=s.openContext();if(s.timespanOnly=null==r||r<0,s.timespanOnly){var u={subscriber:s,context:a,bufferTimeSpan:n};s.add(a.closeAction=o.schedule(S,n,u))}else{var c={subscriber:s,context:a},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:s,scheduler:o};s.add(a.closeAction=o.schedule(C,n,c)),s.add(o.schedule(A,r,l))}return s}return r.a(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(S,n,r))}},e.prototype.openContext=function(){var t=new E;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(p.a);function S(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function A(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(C,n,{subscriber:r,context:o})),this.schedule(t,e))}function C(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var T=n(7),k=n(20),I=n(23);function O(t,e){return function(n){return n.lift(new M(t,e))}}var M=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new L(t,this.openings,this.closingSelector))},t}(),L=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.closingSelector=r,i.contexts=[],i.add(Object(k.a)(i,n)),i}return r.a(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new T.a,r={buffer:[],subscription:n};e.push(r);var i=Object(k.a)(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},e}(I.a);function N(t){return function(e){return e.lift(new R(t))}}var R=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new P(t,this.closingSelector))},t}(),P=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},e.prototype.notifyNext=function(){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{e=(0,this.closingSelector)()}catch(t){return this.error(t)}t=new T.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(i.c)(e,new i.a(this))),this.subscribing=!1},e}(i.b);function D(t){return function(e){var n=new F(t),r=e.lift(n);return n.caught=r}}var F=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new z(t,this.selector,this.caught))},t}(),z=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var r=new i.a(this);this.add(r);var o=Object(i.c)(n,r);o!==r&&this.add(o)}},e}(i.b),B=n(60);function U(t){return function(e){return e.lift(new B.a(t))}}var V=n(10),j=n(18);function H(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(V.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Object(j.a)([e].concat(t)),new B.a(n))}}var G=n(44);function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(G.a.apply(void 0,[e].concat(t)))}}var W=n(84),Y=n(37);function X(t,e){return Object(Y.b)(t,e,1)}function Z(t,e){return X((function(){return t}),e)}function K(t){return function(e){return e.lift(new J(t,e))}}var J=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Q(t,this.predicate,this.source))},t}(),Q=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(p.a);function $(t){return function(e){return e.lift(new tt(t))}}var tt=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new et(t,this.durationSelector))},t}(),et=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(i.c)(e,new i.a(this)))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(i.b);function nt(t,e){return void 0===e&&(e=u.a),function(n){return n.lift(new rt(t,e))}}var rt=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new it(t,this.dueTime,this.scheduler))},t}(),it=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r.a(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ot,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(p.a);function ot(t){t.debouncedNext()}function st(t){return void 0===t&&(t=null),function(e){return e.lift(new at(t))}}var at=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new ut(t,this.defaultValue))},t}(),ut=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.a(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(p.a);function ct(t){return t instanceof Date&&!isNaN(+t)}var lt=n(25);function dt(t,e){void 0===e&&(e=u.a);var n=ct(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new ht(n,e))}}var ht=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new ft(t,this.delay,this.scheduler))},t}(),ft=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r.a(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new pt(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(lt.a.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(lt.a.createComplete()),this.unsubscribe()},e}(p.a),pt=function(){return function(t,e){this.time=t,this.notification=e}}(),gt=n(3);function _t(t,e){return e?function(n){return new mt(n,e).lift(new vt(t))}:function(e){return e.lift(new vt(t))}}var vt=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new yt(t,this.delayDurationSelector))},t}(),yt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=Object(k.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(I.a),mt=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return r.a(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new bt(t,this.source))},e}(gt.a),bt=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return r.a(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(p.a);function xt(){return function(t){return t.lift(new Et)}}var Et=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new wt(t))},t}(),wt=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(p.a);function St(t,e){return function(n){return n.lift(new At(t,e))}}var At=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new Ct(t,this.keySelector,this.flushes))},t}(),Ct=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.keySelector=n,o.values=new Set,r&&o.add(Object(i.c)(r,new i.a(o))),o}return r.a(e,t),e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(t){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(i.b);function Tt(t,e){return function(n){return n.lift(new kt(t,e))}}var kt=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new It(t,this.compare,this.keySelector))},t}(),It=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r.a(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(p.a);function Ot(t,e){return Tt((function(n,r){return e?e(n[t],r[t]):n[t]===r[t]}))}var Mt=n(34),Lt=n(24),Nt=n(36);function Rt(t){return void 0===t&&(t=Ft),function(e){return e.lift(new Pt(t))}}var Pt=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new Dt(t,this.errorFactory))},t}(),Dt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.a(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(p.a);function Ft(){return new Nt.a}var zt=n(17);function Bt(t){return function(e){return 0===t?Object(zt.b)():e.lift(new Ut(t))}}var Ut=function(){function t(t){if(this.total=t,this.total<0)throw new Mt.a}return t.prototype.call=function(t,e){return e.subscribe(new Vt(t,this.total))},t}(),Vt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(p.a);function jt(t,e){if(t<0)throw new Mt.a;var n=arguments.length>=2;return function(r){return r.pipe(Object(Lt.a)((function(e,n){return n===t})),Bt(1),n?st(e):Rt((function(){return new Mt.a})))}}var Ht=n(49);function Gt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return Object(G.a)(e,Ht.a.apply(void 0,t))}}function qt(t,e){return function(n){return n.lift(new Wt(t,e,n))}}var Wt=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Yt(t,this.predicate,this.thisArg,this.source))},t}(),Yt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return r.a(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(p.a);function Xt(){return function(t){return t.lift(new Zt)}}var Zt=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Kt(t))},t}(),Kt=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r.a(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(i.c)(t,new i.a(this))))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.b),Jt=n(13);function Qt(t,e){return e?function(n){return n.pipe(Qt((function(n,r){return Object(j.a)(t(n,r)).pipe(Object(Jt.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new $t(t))}}var $t=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new te(t,this.project))},t}(),te=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new i.a(this),n=this.destination;n.add(e);var r=Object(i.c)(t,e);r!==e&&n.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.b);function ee(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new ne(t,e,n))}}var ne=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new re(t,this.project,this.concurrent,this.scheduler))},t}(),re=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return r.a(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);try{var i=(0,this.project)(t,r);if(this.scheduler){var o={subscriber:this,result:i,value:t,index:r};this.destination.add(this.scheduler.schedule(e.dispatch,0,o))}else this.subscribeToProjection(i,t,r)}catch(t){n.error(t)}}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.destination.add(Object(i.c)(t,new i.a(this)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this._next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(i.b);function ie(t){return function(e){return e.lift(new oe(t))}}var oe=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new se(t,this.callback))},t}(),se=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new T.a(n)),r}return r.a(e,t),e}(p.a);function ae(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new ue(t,n,!1,e))}}var ue=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new ce(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),ce=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.predicate=n,s.source=r,s.yieldIndex=i,s.thisArg=o,s.index=0,s}return r.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(p.a);function le(t,e){return function(n){return n.lift(new ue(t,n,!0,e))}}var de=n(22);function he(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(Lt.a)((function(e,n){return t(e,n,r)})):de.a,Bt(1),n?st(e):Rt((function(){return new Nt.a})))}}var fe=n(78);function pe(){return function(t){return t.lift(new ge)}}var ge=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new _e(t))},t}(),_e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype._next=function(t){},e}(p.a);function ve(){return function(t){return t.lift(new ye)}}var ye=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new me(t))},t}(),me=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(p.a);function be(t){return function(e){return 0===t?Object(zt.b)():e.lift(new xe(t))}}var xe=function(){function t(t){if(this.total=t,this.total<0)throw new Mt.a}return t.prototype.call=function(t,e){return e.subscribe(new Ee(t,this.total))},t}(),Ee=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(p.a);function we(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(Lt.a)((function(e,n){return t(e,n,r)})):de.a,be(1),n?st(e):Rt((function(){return new Nt.a})))}}function Se(t){return function(e){return e.lift(new Ae(t))}}var Ae=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new Ce(t,this.value))},t}(),Ce=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return r.a(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(p.a);function Te(){return function(t){return t.lift(new ke)}}var ke=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new Ie(t))},t}(),Ie=function(t){function e(e){return t.call(this,e)||this}return r.a(e,t),e.prototype._next=function(t){this.destination.next(lt.a.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(lt.a.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(lt.a.createComplete()),t.complete()},e}(p.a);function Oe(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Me(t,e,n))}}var Me=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Le(t,this.accumulator,this.seed,this.hasSeed))},t}(),Le=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return r.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(p.a),Ne=n(50);function Re(t,e){return arguments.length>=2?function(n){return Object(Ne.a)(Oe(t,e),be(1),st(e))(n)}:function(e){return Object(Ne.a)(Oe((function(e,n,r){return t(e,n,r+1)})),be(1))(e)}}function Pe(t){return Re("function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})}var De=n(85);function Fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(De.a.apply(void 0,[e].concat(t)))}}var ze=n(61);function Be(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?Object(Y.b)((function(){return t}),e,n):("number"==typeof e&&(n=e),Object(Y.b)((function(){return t}),n))}function Ue(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new Ve(t,e,n))}}var Ve=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new je(t,this.accumulator,this.seed,this.concurrent))},t}(),je=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return r.a(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,t,e)}catch(t){return n.error(t)}this.active++,this._innerSub(r)}else this.buffer.push(t)},e.prototype._innerSub=function(t){var e=new i.a(this),n=this.destination;n.add(e);var r=Object(i.c)(t,e);r!==e&&n.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t){var e=this.destination;this.acc=t,this.hasValue=!0,e.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(i.b);function He(t){return Re("function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})}var Ge=n(80);function qe(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new We(r,e));var i=Object.create(n,Ge.b);return i.source=n,i.subjectFactory=r,i}}var We=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}(),Ye=n(82);function Xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&Object(V.a)(t[0])&&(t=t[0]),function(e){return e.lift(new Ze(t))}}var Ze=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new Ke(t,this.nextSources))},t}(),Ke=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return r.a(e,t),e.prototype.notifyError=function(){this.subscribeToNextSource()},e.prototype.notifyComplete=function(){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new i.a(this),n=this.destination;n.add(e);var r=Object(i.c)(t,e);r!==e&&n.add(r)}else this.destination.complete()},e}(i.b);function Je(){return function(t){return t.lift(new Qe)}}var Qe=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new $e(t))},t}(),$e=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return r.a(e,t),e.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},e}(p.a),tn=n(93);function en(t,e){return function(n){return[Object(Lt.a)(t,e)(n),Object(Lt.a)(Object(tn.a)(t,e))(n)]}}function nn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return Object(Jt.a)(rn(t,n))(e)}}function rn(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=null!=r?r[t[i]]:void 0;if(void 0===o)return;r=o}return r}}var on=n(8);function sn(t){return t?qe((function(){return new on.a}),t):qe(new on.a)}var an=n(81);function un(t){return function(e){return qe(new an.a(t))(e)}}var cn=n(40);function ln(){return function(t){return qe(new cn.a)(t)}}var dn=n(58);function hn(t,e,n,r){n&&"function"!=typeof n&&(r=n);var i="function"==typeof n?n:void 0,o=new dn.a(t,e,r);return function(t){return qe((function(){return o}),i)(t)}}var fn=n(86);function pn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&Object(V.a)(t[0])&&(t=t[0]),e.lift.call(fn.a.apply(void 0,[e].concat(t)))}}function gn(t){return void 0===t&&(t=-1),function(e){return 0===t?Object(zt.b)():t<0?e.lift(new _n(-1,e)):e.lift(new _n(t-1,e))}}var _n=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new vn(t,this.count,this.source))},t}(),vn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r.a(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(p.a);function yn(t){return function(e){return e.lift(new mn(t))}}var mn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new bn(t,this.notifier,e))},t}(),bn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r.a(e,t),e.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){var e;this.notifications=new on.a;try{e=(0,this.notifier)(this.notifications)}catch(e){return t.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=Object(i.c)(e,new i.a(this))},e}(i.b);function xn(t){return void 0===t&&(t=-1),function(e){return e.lift(new En(t,e))}}var En=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new wn(t,this.count,this.source))},t}(),wn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(p.a);function Sn(t){return function(e){return e.lift(new An(t,e))}}var An=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Cn(t,this.notifier,this.source))},t}(),Cn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return r.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,o=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{n=new on.a;try{r=(0,this.notifier)(n)}catch(e){return t.prototype.error.call(this,e)}o=Object(i.c)(r,new i.a(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=o,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)},e}(i.b),Tn=n(57);function kn(t){return function(e){return e.lift(new In(t))}}var In=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new On(t),r=e.subscribe(n);return r.add(Object(i.c)(this.notifier,new i.a(n))),r},t}(),On=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return r.a(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(i.b);function Mn(t,e){return void 0===e&&(e=u.a),function(n){return n.lift(new Ln(t,e))}}var Ln=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Nn(t,this.period,this.scheduler))},t}(),Nn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(Rn,n,{subscriber:i,period:n})),i}return r.a(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(p.a);function Rn(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}function Pn(t,e){return function(n){return n.lift(new Dn(t,e))}}var Dn=function(){function t(t,e){this.compareTo=t,this.comparator=e}return t.prototype.call=function(t,e){return e.subscribe(new Fn(t,this.compareTo,this.comparator))},t}(),Fn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new zn(e,i))),i}return r.a(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),o=!1;try{o=n?n(r,i):r===i}catch(t){this.destination.error(t)}o||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e}(p.a),zn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return r.a(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(p.a);function Bn(){return new on.a}function Un(){return function(t){return Object(Tn.a)()(qe(Bn)(t))}}function Vn(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,s=void 0===o?Number.POSITIVE_INFINITY:o,a=t.refCount,u=t.scheduler,c=0,l=!1,d=!1;return function(t){var r;c++,!e||l?(l=!1,e=new dn.a(i,s,u),r=e.subscribe(this),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){d=!0,n=void 0,e.complete()}})):r=e.subscribe(this),this.add((function(){c--,r.unsubscribe(),n&&!d&&a&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)}))}}(r))}}function jn(t){return function(e){return e.lift(new Hn(t,e))}}var Hn=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Gn(t,this.predicate,this.source))},t}(),Gn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r.a(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Nt.a)},e}(p.a);function qn(t){return function(e){return e.lift(new Wn(t))}}var Wn=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new Yn(t,this.total))},t}(),Yn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r.a(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(p.a);function Xn(t){return function(e){return e.lift(new Zn(t))}}var Zn=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new Mt.a}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new p.a(t)):e.subscribe(new Kn(t,this._skipCount))},t}(),Kn=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r.a(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(p.a);function Jn(t){return function(e){return e.lift(new Qn(t))}}var Qn=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new $n(t,this.notifier))},t}(),$n=function(t){function e(e,n){var r=t.call(this,e)||this;r.hasValue=!1;var o=new i.a(r);r.add(o),r.innerSubscription=o;var s=Object(i.c)(n,o);return s!==o&&(r.add(s),r.innerSubscription=s),r}return r.a(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(i.b);function tr(t){return function(e){return e.lift(new er(t))}}var er=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new nr(t,this.predicate))},t}(),nr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(p.a);function rr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(m.a)(n)?(t.pop(),function(e){return Object(G.a)(t,e,n)}):function(e){return Object(G.a)(t,e)}}var ir=n(51),or=n(42),sr=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=ir.a);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!Object(or.a)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=ir.a),i}return r.a(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=ir.a),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(gt.a);function ar(t,e){return void 0===e&&(e=0),function(n){return n.lift(new ur(t,e))}}var ur=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new sr(e,this.delay,this.scheduler).subscribe(t)},t}();function cr(t,e){return"function"==typeof e?function(n){return n.pipe(cr((function(n,r){return Object(j.a)(t(n,r)).pipe(Object(Jt.a)((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new lr(t))}}var lr=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new dr(t,this.project))},t}(),dr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r.a(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e)},e.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new i.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(i.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(i.b);function hr(){return cr(de.a)}function fr(t,e){return e?cr((function(){return t}),e):cr((function(){return t}))}function pr(t){return function(e){return e.lift(new gr(t))}}var gr=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new _r(t),r=Object(i.c)(this.notifier,new i.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),_r=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return r.a(e,t),e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(i.b);function vr(t,e){return void 0===e&&(e=!1),function(n){return n.lift(new yr(t,e))}}var yr=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new mr(t,this.predicate,this.inclusive))},t}(),mr=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())},e}(p.a),br=n(27),xr=n(35);function Er(t,e,n){return function(r){return r.lift(new wr(t,e,n))}}var wr=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Sr(t,this.nextOrObserver,this.error,this.complete))},t}(),Sr=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=br.a,o._tapError=br.a,o._tapComplete=br.a,o._tapError=r||br.a,o._tapComplete=i||br.a,Object(xr.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||br.a,o._tapError=n.error||br.a,o._tapComplete=n.complete||br.a),o}return r.a(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(p.a),Ar={leading:!0,trailing:!1};function Cr(t,e){return void 0===e&&(e=Ar),function(n){return n.lift(new Tr(t,!!e.leading,!!e.trailing))}}var Tr=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new kr(t,this.durationSelector,this.leading,this.trailing))},t}(),kr=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return r.a(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(i.c)(e,new i.a(this)))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(i.b);function Ir(t,e,n){return void 0===e&&(e=u.a),void 0===n&&(n=Ar),function(r){return r.lift(new Or(t,e,n.leading,n.trailing))}}var Or=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new Mr(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Mr=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.duration=n,s.scheduler=r,s.leading=i,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return r.a(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Lr,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(p.a);function Lr(t){t.subscriber.clearThrottle()}var Nr=n(62);function Rr(t){return void 0===t&&(t=u.a),function(e){return Object(Nr.a)((function(){return e.pipe(Oe((function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}}),{current:t.now(),value:void 0,last:void 0}),Object(Jt.a)((function(t){var e=t.current,n=t.last,r=t.value;return new Pr(r,e-n)})))}))}}var Pr=function(){return function(t,e){this.value=t,this.interval=e}}(),Dr=n(83);function Fr(t,e,n){return void 0===n&&(n=u.a),function(r){var i=ct(t),o=i?+t-n.now():Math.abs(t);return r.lift(new zr(o,i,e,n))}}var zr=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new Br(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Br=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=r,s.withObservable=i,s.scheduler=o,s.scheduleTimeout(),s}return r.a(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(i.c)(e,new i.a(t)))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(i.b),Ur=n(59);function Vr(t,e){return void 0===e&&(e=u.a),Fr(t,Object(Ur.a)(new Dr.a),e)}function jr(t){return void 0===t&&(t=u.a),Object(Jt.a)((function(e){return new Hr(e,t.now())}))}var Hr=function(){return function(t,e){this.value=t,this.timestamp=e}}();function Gr(t,e,n){return 0===n?[e]:(t.push(e),t)}function qr(){return Re(Gr,[])}function Wr(t){return function(e){return e.lift(new Yr(t))}}var Yr=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new Xr(t),r=e.subscribe(n);return r.closed||n.add(Object(i.c)(this.windowBoundaries,new i.a(n))),r},t}(),Xr=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new on.a,e.next(n.window),n}return r.a(e,t),e.prototype.notifyNext=function(){this.openWindow()},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new on.a;e.next(n)},e}(i.b);function Zr(t,e){return void 0===e&&(e=0),function(n){return n.lift(new Kr(t,e))}}var Kr=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new Jr(t,this.windowSize,this.startWindowEvery))},t}(),Jr=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new on.a],i.count=0,e.next(i.windows[0]),i}return r.a(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(t);var a=this.count-r+1;if(a>=0&&a%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var u=new on.a;i.push(u),n.next(u)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(p.a);function Qr(t){var e=u.a,n=null,r=Number.POSITIVE_INFINITY;return Object(m.a)(arguments[3])&&(e=arguments[3]),Object(m.a)(arguments[2])?e=arguments[2]:Object(or.a)(arguments[2])&&(r=Number(arguments[2])),Object(m.a)(arguments[1])?e=arguments[1]:Object(or.a)(arguments[1])&&(n=Number(arguments[1])),function(i){return i.lift(new $r(t,n,r,e))}}var $r=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new ei(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),ti=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return r.a(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(on.a),ei=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;s.destination=e,s.windowTimeSpan=n,s.windowCreationInterval=r,s.maxWindowSize=i,s.scheduler=o,s.windows=[];var a=s.openWindow();if(null!==r&&r>=0){var u={subscriber:s,window:a,context:null},c={windowTimeSpan:n,windowCreationInterval:r,subscriber:s,scheduler:o};s.add(o.schedule(ii,n,u)),s.add(o.schedule(ri,r,c))}else{var l={subscriber:s,window:a,windowTimeSpan:n};s.add(o.schedule(ni,n,l))}return s}return r.a(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new ti;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(p.a);function ni(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function ri(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),s={action:this,subscription:null},a={subscriber:n,window:o,context:s};s.subscription=r.schedule(ii,e,a),this.add(s.subscription),this.schedule(t,i)}function ii(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}function oi(t,e){return function(n){return n.lift(new si(t,e))}}var si=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new ai(t,this.openings,this.closingSelector))},t}(),ai=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(k.a)(i,n,n)),i}return r.a(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,i){if(t===this.openings){var o=void 0;try{o=(0,this.closingSelector)(e)}catch(t){return this.error(t)}var s=new on.a,a=new T.a,u={window:s,subscription:a};this.contexts.push(u);var c=Object(k.a)(this,o,u);c.closed?this.closeWindow(this.contexts.length-1):(c.context=u,a.add(c)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(I.a);function ui(t){return function(e){return e.lift(new ci(t))}}var ci=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new li(t,this.closingSelector))},t}(),li=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,r=this.window=new on.a;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(t){return this.destination.error(t),void this.window.error(t)}this.add(this.closingNotification=Object(k.a)(this,n))},e}(I.a);function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new hi(r,n))}}var hi=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new fi(t,this.observables,this.project))},t}(),fi=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var s=0;s<o;s++)i.toRespond.push(s);for(s=0;s<o;s++){var a=n[s];i.add(Object(k.a)(i,a,void 0,s))}return i}return r.a(e,t),e.prototype.notifyNext=function(t,e,n){this.values[n]=e;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(I.a),pi=n(63);function gi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(pi.b.apply(void 0,[e].concat(t)))}}function _i(t){return function(e){return e.lift(new pi.a(t))}}},function(t,e,n){"use strict";e.a=n.p+"ae01f764025fbaf04f017a9156456ef4.eot"},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.isNode=function(t){return a(t,"__isNode__")},e.isRelationship=function(t){return a(t,"__isRelationship__")},e.isUnboundRelationship=function(t){return a(t,UNBOUNT_RELATIONSHIP_IDENTIFIER_PROPERTY)},e.isPath=function(t){return a(t,"__isPath__")},e.isPathSegment=function(t){return a(t,"__isPathSegment__")},e.PathSegment=e.Path=e.UnboundRelationship=e.Relationship=e.Node=void 0;var i=r(n(5)),o=r(n(6)),s={value:!0,enumerable:!1,configurable:!1,writable:!1};function a(t,e){return!0===(t&&t[e])}var u=function(){function t(e,n,r){(0,i.default)(this,t),this.identity=e,this.labels=n,this.properties=r}return(0,o.default)(t,[{key:"toString",value:function(){for(var t="("+this.identity,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var n=Object.keys(this.properties);if(n.length>0){t+=" {";for(var r=0;r<n.length;r++)r>0&&(t+=","),t+=n[r]+":"+JSON.stringify(this.properties[n[r]]);t+="}"}return t+=")"}}]),t}();e.Node=u,Object.defineProperty(u.prototype,"__isNode__",s);var c=function(){function t(e,n,r,o,s){(0,i.default)(this,t),this.identity=e,this.start=n,this.end=r,this.type=o,this.properties=s}return(0,o.default)(t,[{key:"toString",value:function(){var t="("+this.start+")-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+JSON.stringify(this.properties[e[n]]);t+="}"}return t+="]->("+this.end+")"}}]),t}();e.Relationship=c,Object.defineProperty(c.prototype,"__isRelationship__",s);var l=function(){function t(e,n,r){(0,i.default)(this,t),this.identity=e,this.type=n,this.properties=r}return(0,o.default)(t,[{key:"bind",value:function(t,e){return new c(this.identity,t,e,this.type,this.properties)}},{key:"toString",value:function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+JSON.stringify(this.properties[e[n]]);t+="}"}return t+="]->"}}]),t}();e.UnboundRelationship=l,Object.defineProperty(l.prototype,"__isUnboundRelationship__",s);var d=function t(e,n,r){(0,i.default)(this,t),this.start=e,this.relationship=n,this.end=r};e.PathSegment=d,Object.defineProperty(d.prototype,"__isPathSegment__",s);var h=function t(e,n,r){(0,i.default)(this,t),this.start=e,this.end=n,this.segments=r,this.length=r.length};e.Path=h,Object.defineProperty(h.prototype,"__isPath__",s)},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var r=n(144);function i(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},i(e,n,o||e)}t.exports=i},function(t,e,n){var r=n(146),i=n(147),o=n(116),s=n(148);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||s()}},function(t,e,n){var r=n(117);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assertDatabaseIsEmpty=function(t,e,n){if(t){var i=(0,r.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw e._handleFatalError(i),n.onError(i),i}},e.assertTxConfigIsEmpty=function(t,e,n){if(t&&!t.isEmpty()){var i=(0,r.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw e._handleFatalError(i),n.onError(i),i}};var r=n(11);n(33)},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=r(n(100)),l=n(54),d=r(n(154)),h=function(t){function e(t,n){var r;return(0,i.default)(this,e),(r=(0,s.default)(this,(0,a.default)(e).call(this,0)))._bufferSize=n||1400,r._ch=t,r._buffer=(0,l.alloc)(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"putUInt8",value:function(t,e){this._ensure(1),this._buffer.writeUInt8(e)}},{key:"putInt8",value:function(t,e){this._ensure(1),this._buffer.writeInt8(e)}},{key:"putFloat64",value:function(t,e){this._ensure(8),this._buffer.writeFloat64(e)}},{key:"putBytes",value:function(t,e){for(;e.remaining()>0;)this._ensure(1),this._buffer.remaining()>e.remaining()?this._buffer.writeBytes(e):this._buffer.writeBytes(e.readSlice(this._buffer.remaining()));return this}},{key:"flush",value:function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,l.alloc)(this._bufferSize),this._chunkOpen=!1}return this}},{key:"messageBoundary",value:function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)}},{key:"_ensure",value:function(t){var e=this._chunkOpen?t:t+2;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)}},{key:"_closeChunkIfOpen",value:function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}}}]),e}(c.default);e.Chunker=h;var f=function(){function t(){(0,i.default)(this,t),this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return(0,o.default)(t,[{key:"AWAITING_CHUNK",value:function(t){return t.remaining()>=2?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)}},{key:"IN_HEADER",value:function(t){return this._onHeader(65535&(this._partialChunkHeader|t.readUInt8()))}},{key:"IN_CHUNK",value:function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)}},{key:"CLOSED",value:function(t){}},{key:"_onHeader",value:function(t){if(0===t){var e;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:e=this._currentMessage[0];break;default:e=new d.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK}return this._chunkSize=t,this.IN_CHUNK}},{key:"write",value:function(t){for(;t.hasRemaining();)this._state=this._state(t)}}]),t}();e.Dechunker=f},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.Structure=e.Unpacker=e.Packer=void 0;var o=i(n(72)),s=i(n(5)),a=i(n(6)),u=n(54),c=r(n(29)),l=n(11),d=n(112),h=function(){function t(e,n){(0,s.default)(this,t),this.signature=e,this.fields=n}return(0,a.default)(t,[{key:"toString",value:function(){for(var t="",e=0;e<this.fields.length;e++)e>0&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"}}]),t}();e.Structure=h;var f=function(){function t(e){(0,s.default)(this,t),this._ch=e,this._byteArraysSupported=!0}return(0,a.default)(t,[{key:"packable",value:function(t){var e=this;if(null===t)return function(){return e._ch.writeUInt8(192)};if(!0===t)return function(){return e._ch.writeUInt8(195)};if(!1===t)return function(){return e._ch.writeUInt8(194)};if("number"==typeof t)return function(){return e.packFloat(t)};if("string"==typeof t)return function(){return e.packString(t)};if((0,c.isInt)(t))return function(){return e.packInteger(t)};if(t instanceof Int8Array)return function(){return e.packBytes(t)};if(t instanceof Array)return function(){e.packListHeader(t.length);for(var n=0;n<t.length;n++)e.packable(void 0===t[n]?null:t[n])()};if(function(t){if(null==t)return!1;return"function"==typeof t[Symbol.iterator]}(t))return this.packableIterable(t);if(t instanceof d.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: ".concat(t));if(t instanceof d.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: ".concat(t));if(t instanceof d.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: ".concat(t));if(t instanceof h){for(var n=[],r=0;r<t.fields.length;r++)n[r]=this.packable(t.fields[r]);return function(){return e.packStruct(t.signature,n)}}return"object"===(0,o.default)(t)?function(){for(var n=Object.keys(t),r=0,i=0;i<n.length;i++)void 0!==t[n[i]]&&r++;e.packMapHeader(r);for(var o=0;o<n.length;o++){var s=n[o];void 0!==t[s]&&(e.packString(s),e.packable(t[s])())}}:this._nonPackableValue("Unable to pack the given value: ".concat(t))}},{key:"packableIterable",value:function(t){try{var e=Array.from(t);return this.packable(e)}catch(e){throw(0,l.newError)("Cannot pack given iterable, ".concat(e.message,": ").concat(t))}}},{key:"packStruct",value:function(t,e){e=e||[],this.packStructHeader(e.length,t);for(var n=0;n<e.length;n++)e[n]()}},{key:"packInteger",value:function(t){var e=t.high,n=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(n):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(n)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(n)):t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(n)):(this._ch.writeUInt8(203),this._ch.writeInt32(e),this._ch.writeInt32(n))}},{key:"packFloat",value:function(t){this._ch.writeUInt8(193),this._ch.writeFloat64(t)}},{key:"packString",value:function(t){var e=u.utf8.encode(t),n=e.length;if(n<16)this._ch.writeUInt8(128|n),this._ch.writeBytes(e);else if(n<256)this._ch.writeUInt8(208),this._ch.writeUInt8(n),this._ch.writeBytes(e);else if(n<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else{if(!(n<4294967296))throw(0,l.newError)("UTF-8 strings of size "+n+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(e)}}},{key:"packListHeader",value:function(t){if(t<16)this._ch.writeUInt8(144|t);else if(t<256)this._ch.writeUInt8(212),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,l.newError)("Lists of size "+t+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}}},{key:"packBytes",value:function(t){if(!this._byteArraysSupported)throw(0,l.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(t.length);for(var e=0;e<t.length;e++)this._ch.writeInt8(t[e])}},{key:"packBytesHeader",value:function(t){if(t<256)this._ch.writeUInt8(204),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,l.newError)("Byte arrays of size "+t+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}}},{key:"packMapHeader",value:function(t){if(t<16)this._ch.writeUInt8(160|t);else if(t<256)this._ch.writeUInt8(216),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,l.newError)("Maps of size "+t+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}}},{key:"packStructHeader",value:function(t,e){if(t<16)this._ch.writeUInt8(176|t),this._ch.writeUInt8(e);else if(t<256)this._ch.writeUInt8(220),this._ch.writeUInt8(t),this._ch.writeUInt8(e);else{if(!(t<65536))throw(0,l.newError)("Structures of size "+t+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256)}}},{key:"disableByteArrays",value:function(){this._byteArraysSupported=!1}},{key:"_nonPackableValue",value:function(t){return function(){throw(0,l.newError)(t,l.PROTOCOL_ERROR)}}}]),t}();e.Packer=f;var p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,s.default)(this,t),this._disableLosslessIntegers=e}return(0,a.default)(t,[{key:"unpack",value:function(t){var e=t.readUInt8(),n=240&e,r=15&e;if(192===e)return null;var i=this._unpackBoolean(e);if(null!==i)return i;var o=this._unpackNumberOrInteger(e,t);if(null!==o)return this._disableLosslessIntegers&&(0,c.isInt)(o)?o.toNumberOrInfinity():o;var s=this._unpackString(e,n,r,t);if(null!==s)return s;var a=this._unpackList(e,n,r,t);if(null!==a)return a;var u=this._unpackByteArray(e,t);if(null!==u)return u;var d=this._unpackMap(e,n,r,t);if(null!==d)return d;var h=this._unpackStruct(e,n,r,t);if(null!==h)return h;throw(0,l.newError)("Unknown packed value with marker "+e.toString(16))}},{key:"unpackInteger",value:function(t){var e=t.readUInt8(),n=this._unpackInteger(e,t);if(null==n)throw(0,l.newError)("Unable to unpack integer value with marker "+e.toString(16));return n}},{key:"_unpackBoolean",value:function(t){return 195===t||194!==t&&null}},{key:"_unpackNumberOrInteger",value:function(t,e){return 193===t?e.readFloat64():this._unpackInteger(t,e)}},{key:"_unpackInteger",value:function(t,e){if(t>=0&&t<128)return(0,c.int)(t);if(t>=240&&t<256)return(0,c.int)(t-256);if(200===t)return(0,c.int)(e.readInt8());if(201===t)return(0,c.int)(e.readInt16());if(202===t){var n=e.readInt32();return(0,c.int)(n)}if(203===t){var r=e.readInt32(),i=e.readInt32();return new c.default(i,r)}return null}},{key:"_unpackString",value:function(t,e,n,r){return 128===e?u.utf8.decode(r,n):208===t?u.utf8.decode(r,r.readUInt8()):209===t?u.utf8.decode(r,r.readUInt16()):210===t?u.utf8.decode(r,r.readUInt32()):null}},{key:"_unpackList",value:function(t,e,n,r){return 144===e?this._unpackListWithSize(n,r):212===t?this._unpackListWithSize(r.readUInt8(),r):213===t?this._unpackListWithSize(r.readUInt16(),r):214===t?this._unpackListWithSize(r.readUInt32(),r):null}},{key:"_unpackListWithSize",value:function(t,e){for(var n=[],r=0;r<t;r++)n.push(this.unpack(e));return n}},{key:"_unpackByteArray",value:function(t,e){return 204===t?this._unpackByteArrayWithSize(e.readUInt8(),e):205===t?this._unpackByteArrayWithSize(e.readUInt16(),e):206===t?this._unpackByteArrayWithSize(e.readUInt32(),e):null}},{key:"_unpackByteArrayWithSize",value:function(t,e){for(var n=new Int8Array(t),r=0;r<t;r++)n[r]=e.readInt8();return n}},{key:"_unpackMap",value:function(t,e,n,r){return 160===e?this._unpackMapWithSize(n,r):216===t?this._unpackMapWithSize(r.readUInt8(),r):217===t?this._unpackMapWithSize(r.readUInt16(),r):218===t?this._unpackMapWithSize(r.readUInt32(),r):null}},{key:"_unpackMapWithSize",value:function(t,e){for(var n={},r=0;r<t;r++){n[this.unpack(e)]=this.unpack(e)}return n}},{key:"_unpackStruct",value:function(t,e,n,r){return 176===e?this._unpackStructWithSize(n,r):220===t?this._unpackStructWithSize(r.readUInt8(),r):221===t?this._unpackStructWithSize(r.readUInt16(),r):null}},{key:"_unpackStructWithSize",value:function(t,e){var n=e.readUInt8();return 78===n?this._unpackNode(t,e):82===n?this._unpackRelationship(t,e):114===n?this._unpackUnboundRelationship(t,e):80===n?this._unpackPath(t,e):this._unpackUnknownStruct(n,t,e)}},{key:"_unpackNode",value:function(t,e){return this._verifyStructSize("Node",3,t),new d.Node(this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackRelationship",value:function(t,e){return this._verifyStructSize("Relationship",5,t),new d.Relationship(this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackUnboundRelationship",value:function(t,e){return this._verifyStructSize("UnboundRelationship",3,t),new d.UnboundRelationship(this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackPath",value:function(t,e){this._verifyStructSize("Path",3,t);for(var n=this.unpack(e),r=this.unpack(e),i=this.unpack(e),o=[],s=n[0],a=0;a<i.length;a+=2){var u=n[i[a+1]],c=i[a],l=void 0;c>0?(l=r[c-1])instanceof d.UnboundRelationship&&(r[c-1]=l=l.bind(s.identity,u.identity)):(l=r[-c-1])instanceof d.UnboundRelationship&&(r[-c-1]=l=l.bind(u.identity,s.identity)),o.push(new d.PathSegment(s,l,u)),s=u}return new d.Path(n[0],n[n.length-1],o)}},{key:"_unpackUnknownStruct",value:function(t,e,n){for(var r=new h(t,[]),i=0;i<e;i++)r.fields.push(this.unpack(n));return r}},{key:"_verifyStructSize",value:function(t,e,n){if(e!==n)throw(0,l.newError)("Wrong struct size for ".concat(t,", expected ").concat(e," but was ").concat(n),l.PROTOCOL_ERROR)}}]),t}();e.Unpacker=p},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(43)),o=r(n(48)),s=r(n(5)),a=r(n(6)),u=r(n(15)),c=r(n(12)),l=r(n(73)),d=r(n(16)),h=r(n(103)),f=r(n(160)),p=r(n(105)),g=r(n(107)),_=n(11),v=function(t){function e(t){var n,r=t.id,i=t.config,o=t.log,a=t.userAgent,d=t.authToken,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,s.default)(this,e),(n=(0,u.default)(this,(0,c.default)(e).call(this)))._id=r,n._config=i,n._log=o,n._userAgent=a,n._authToken=d,n._createChannelConnection=g||function(t){return h.default.create(t,n._config,n._createConnectionErrorHandler(),n._log)},n._connectionPool=new f.default({create:n._createConnection.bind((0,l.default)(n)),destroy:n._destroyConnection.bind((0,l.default)(n)),validate:n._validateConnection.bind((0,l.default)(n)),installIdleObserver:e._installIdleObserverOnConnection.bind((0,l.default)(n)),removeIdleObserver:e._removeIdleObserverOnConnection.bind((0,l.default)(n)),config:p.default.fromDriverConfig(i),log:n._log}),n._openConnections={},n}var n;return(0,d.default)(e,t),(0,a.default)(e,[{key:"_createConnectionErrorHandler",value:function(){return new g.default(_.SERVICE_UNAVAILABLE)}},{key:"_createConnection",value:function(t,e){var n=this,r=this._createChannelConnection(t);return r._release=function(){return e(t,r)},this._openConnections[r.id]=r,r.connect(this._userAgent,this._authToken).catch((function(t){throw n._destroyConnection(r),t}))}},{key:"_validateConnection",value:function(t){if(!t.isOpen())return!1;var e=this._config.maxConnectionLifetime;return Date.now()-t.creationTimestamp<=e}},{key:"_destroyConnection",value:function(t){return delete this._openConnections[t.id],t.close()}},{key:"close",value:(n=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._connectionPool.close();case 2:return t.next=4,Promise.all(Object.values(this._openConnections).map((function(t){return t.close()})));case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],[{key:"_installIdleObserverOnConnection",value:function(t,e){t._queueObserver(e)}},{key:"_removeIdleObserverOnConnection",value:function(t){t._updateCurrentObserver()}}]),e}(r(n(102)).default);e.default=v},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(5)),s=i(n(6)),a=i(n(15)),u=i(n(12)),c=i(n(16)),l=i(n(76)),d=r(n(158)),h=n(30),f=function(t){function e(){return(0,o.default)(this,e),(0,a.default)(this,(0,u.default)(e).apply(this,arguments))}return(0,c.default)(e,t),(0,s.default)(e,[{key:"_createPacker",value:function(t){return new d.Packer(t)}},{key:"_createUnpacker",value:function(t){return new d.Unpacker(t)}},{key:"version",get:function(){return h.BOLT_PROTOCOL_V2}}]),e}(l.default);e.default=f},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=function(t){return!0===(t&&t.__isPoint__)},e.Point=void 0;var i=r(n(5)),o=r(n(6)),s=n(19),a=function(){function t(e,n,r,o){(0,i.default)(this,t),this.srid=(0,s.assertNumberOrInteger)(e,"SRID"),this.x=(0,s.assertNumber)(n,"X coordinate"),this.y=(0,s.assertNumber)(r,"Y coordinate"),this.z=null==o?o:(0,s.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return(0,o.default)(t,[{key:"toString",value:function(){return this.z||0===this.z?"Point{srid=".concat(u(this.srid),", x=").concat(u(this.x),", y=").concat(u(this.y),", z=").concat(u(this.z),"}"):"Point{srid=".concat(u(this.srid),", x=").concat(u(this.x),", y=").concat(u(this.y),"}")}}]),t}();function u(t){return Number.isInteger(t)?t+".0":t.toString()}e.Point=a,Object.defineProperty(a.prototype,"__isPoint__",{value:!0,enumerable:!1,configurable:!1,writable:!1})},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeSecondsForDuration=function(t,e){return(0,s.int)(t).add(E(e,1e9))},e.normalizeNanosecondsForDuration=function(t){return w(t,1e9)},e.localTimeToNanoOfDay=function(t,e,n,r){t=(0,s.int)(t),e=(0,s.int)(e),n=(0,s.int)(n),r=(0,s.int)(r);var i=t.multiply(36e11);return(i=(i=i.add(e.multiply(6e10))).add(n.multiply(1e9))).add(r)},e.nanoOfDayToLocalTime=y,e.localDateTimeToEpochSecond=function(t,e,n,r,i,o,a){var u=m(t,e,n),c=function(t,e,n){t=(0,s.int)(t),e=(0,s.int)(e),n=(0,s.int)(n);var r=t.multiply(3600);return(r=r.add(e.multiply(60))).add(n)}(r,i,o);return u.multiply(86400).add(c)},e.epochSecondAndNanoToLocalDateTime=function(t,e){var n=E(t,86400),r=w(t,86400).multiply(1e9).add(e),i=b(n),o=y(r);return new a.LocalDateTime(i.year,i.month,i.day,o.hour,o.minute,o.second,o.nanosecond)},e.dateToEpochDay=m,e.epochDayToDate=b,e.durationToIsoString=function(t,e,n,r){var i=A(t),o=A(e),a=function(t,e){var n,r;t=(0,s.int)(t),e=(0,s.int)(e);var i=t.isNegative(),o=e.greaterThan(0);n=i&&o?t.equals(-1)?"-0":t.add(1).toString():t.toString();o&&(r=S(i?e.negate().add(2e9).modulo(1e9):e.add(1e9).modulo(1e9)));return r?n+r:n}(n,r);return"P".concat(i,"M").concat(o,"DT").concat(a,"S")},e.timeToIsoString=function(t,e,n,r){var i=A(t,2),o=A(e,2),s=A(n,2),a=S(r);return"".concat(i,":").concat(o,":").concat(s).concat(a)},e.timeZoneOffsetToIsoString=function(t){if((t=(0,s.int)(t)).equals(0))return"Z";var e=t.isNegative();e&&(t=t.multiply(-1));var n=e?"-":"+",r=A(t.div(3600),2),i=A(t.div(60).modulo(60),2),o=t.modulo(60),a=o.equals(0)?null:A(o,2);return a?"".concat(n).concat(r,":").concat(i,":").concat(a):"".concat(n).concat(r,":").concat(i)},e.dateToIsoString=function(t,e,n){var r=(t=(0,s.int)(t)).isNegative();r&&(t=t.multiply(-1));var i=A(t,4);r&&(i="-"+i);var o=A(e,2),a=A(n,2);return"".concat(i,"-").concat(o,"-").concat(a)},e.totalNanoseconds=function(t,e){e=e||0;var n=1e6*t.getMilliseconds();return(0,s.isInt)(e)?e.add(n):e+n},e.timeZoneOffsetInSeconds=function(t){var e=t.getTimezoneOffset();if(0===e)return 0;return-1*e*60},e.assertValidYear=function(t){return x(t,d,"Year")},e.assertValidMonth=function(t){return x(t,h,"Month")},e.assertValidDay=function(t){return x(t,f,"Day")},e.assertValidHour=function(t){return x(t,p,"Hour")},e.assertValidMinute=function(t){return x(t,g,"Minute")},e.assertValidSecond=function(t){return x(t,_,"Second")},e.assertValidNanosecond=function(t){return x(t,v,"Nanosecond")};var i=r(n(5)),o=r(n(6)),s=n(29),a=n(104),u=n(19),c=n(11),l=function(){function t(e,n){(0,i.default)(this,t),this._minNumber=e,this._maxNumber=n,this._minInteger=(0,s.int)(e),this._maxInteger=(0,s.int)(n)}return(0,o.default)(t,[{key:"contains",value:function(t){return(0,s.isInt)(t)?t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger):t>=this._minNumber&&t<=this._maxNumber}},{key:"toString",value:function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")}}]),t}(),d=new l(-999999999,999999999),h=new l(1,12),f=new l(1,31),p=new l(0,23),g=new l(0,59),_=new l(0,59),v=new l(0,999999999);function y(t){var e=(t=(0,s.int)(t)).div(36e11),n=(t=t.subtract(e.multiply(36e11))).div(6e10),r=(t=t.subtract(n.multiply(6e10))).div(1e9),i=t.subtract(r.multiply(1e9));return new a.LocalTime(e,n,r,i)}function m(t,e,n){t=(0,s.int)(t),e=(0,s.int)(e),n=(0,s.int)(n);var r=t.multiply(365);return r=(r=(r=t.greaterThanOrEqual(0)?r.add(t.add(3).div(4).subtract(t.add(99).div(100)).add(t.add(399).div(400))):r.subtract(t.div(-4).subtract(t.div(-100)).add(t.div(-400)))).add(e.multiply(367).subtract(362).div(12))).add(n.subtract(1)),e.greaterThan(2)&&(r=r.subtract(1),function(t){return!!(t=(0,s.int)(t)).modulo(4).equals(0)&&(!t.modulo(100).equals(0)||!!t.modulo(400).equals(0))}(t)||(r=r.subtract(1))),r.subtract(719528)}function b(t){var e=(t=(0,s.int)(t)).add(719528).subtract(60),n=(0,s.int)(0);if(e.lessThan(0)){var r=e.add(1).div(146097).subtract(1);n=r.multiply(400),e=e.add(r.multiply(-146097))}var i=e.multiply(400).add(591).div(146097),o=e.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=e.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(n);var u=o,c=u.multiply(5).add(2).div(153),l=c.add(2).modulo(12).add(1),d=u.subtract(c.multiply(306).add(5).div(10)).add(1);return i=i.add(c.div(10)),new a.Date(i,l,d)}function x(t,e,n){if((0,u.assertNumberOrInteger)(t,n),!e.contains(t))throw(0,c.newError)("".concat(n," is expected to be in range ").concat(e," but was: ").concat(t));return t}function E(t,e){t=(0,s.int)(t),e=(0,s.int)(e);var n=t.div(e);return t.isPositive()!==e.isPositive()&&n.multiply(e).notEquals(t)&&(n=n.subtract(1)),n}function w(t,e){return t=(0,s.int)(t),e=(0,s.int)(e),t.subtract(E(t,e).multiply(e))}function S(t){return(t=(0,s.int)(t)).equals(0)?"":"."+A(t,9)}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=(t=(0,s.int)(t)).isNegative();n&&(t=t.negate());var r=t.toString();if(e)for(;r.length<e;)r="0"+r;return n?"-"+r:r}},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=r(n(122)),l=r(n(55)),d=n(118),h=n(33),f=n(30),p=new h.StreamObserver,g=function(t){function e(){return(0,i.default)(this,e),(0,s.default)(this,(0,a.default)(e).apply(this,arguments))}return(0,u.default)(e,t),(0,o.default)(e,[{key:"transformMetadata",value:function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.userAgent,n=t.authToken,r=t.onError,i=t.onComplete,o=new h.LoginObserver({connection:this._connection,afterError:r,afterComplete:i});return this._connection.write(l.default.hello(e,n),o,!0),o}},{key:"prepareToClose",value:function(){this._connection.write(l.default.goodbye(),p,!0)}},{key:"beginTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bookmark,n=t.txConfig,r=t.database,i=t.mode,o=t.beforeError,s=t.afterError,a=t.beforeComplete,u=t.afterComplete,c=new h.ResultStreamObserver({connection:this._connection,beforeError:o,afterError:s,beforeComplete:a,afterComplete:u});return c.prepareToHandleSingleResponse(),(0,d.assertDatabaseIsEmpty)(r,this._connection,c),this._connection.write(l.default.begin({bookmark:e,txConfig:n,mode:i}),c,!0),c}},{key:"commitTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.beforeError,n=t.afterError,r=t.beforeComplete,i=t.afterComplete,o=new h.ResultStreamObserver({connection:this._connection,beforeError:e,afterError:n,beforeComplete:r,afterComplete:i});return o.prepareToHandleSingleResponse(),this._connection.write(l.default.commit(),o,!0),o}},{key:"rollbackTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.beforeError,n=t.afterError,r=t.beforeComplete,i=t.afterComplete,o=new h.ResultStreamObserver({connection:this._connection,beforeError:e,afterError:n,beforeComplete:r,afterComplete:i});return o.prepareToHandleSingleResponse(),this._connection.write(l.default.rollback(),o,!0),o}},{key:"run",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.bookmark,i=n.txConfig,o=n.database,s=n.mode,a=n.beforeKeys,u=n.afterKeys,c=n.beforeError,f=n.afterError,p=n.beforeComplete,g=n.afterComplete,_=n.flush,v=void 0===_||_,y=new h.ResultStreamObserver({connection:this._connection,beforeKeys:a,afterKeys:u,beforeError:c,afterError:f,beforeComplete:p,afterComplete:g});return(0,d.assertDatabaseIsEmpty)(o,this._connection,y),this._connection.write(l.default.runWithMetadata(t,e,{bookmark:r,txConfig:i,mode:s}),y,!1),this._connection.write(l.default.pullAll(),y,v),y}},{key:"version",get:function(){return f.BOLT_PROTOCOL_V3}}]),e}(c.default);e.default=g},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(5)),s=i(n(6)),a=i(n(15)),u=i(n(12)),c=i(n(16)),l=i(n(125)),d=r(n(55)),h=n(33),f=n(30),p=function(t){function e(){return(0,o.default)(this,e),(0,a.default)(this,(0,u.default)(e).apply(this,arguments))}return(0,c.default)(e,t),(0,s.default)(e,[{key:"beginTransaction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bookmark,n=t.txConfig,r=t.database,i=t.mode,o=t.beforeError,s=t.afterError,a=t.beforeComplete,u=t.afterComplete,c=new h.ResultStreamObserver({connection:this._connection,beforeError:o,afterError:s,beforeComplete:a,afterComplete:u});return c.prepareToHandleSingleResponse(),this._connection.write(d.default.begin({bookmark:e,txConfig:n,database:r,mode:i}),c,!0),c}},{key:"run",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.bookmark,i=n.txConfig,o=n.database,s=n.mode,a=n.beforeKeys,u=n.afterKeys,c=n.beforeError,l=n.afterError,f=n.beforeComplete,p=n.afterComplete,g=n.flush,_=void 0===g||g,v=n.reactive,y=void 0!==v&&v,m=n.fetchSize,b=void 0===m?d.ALL:m,x=new h.ResultStreamObserver({connection:this._connection,reactive:y,fetchSize:b,moreFunction:this._requestMore,discardFunction:this._requestDiscard,beforeKeys:a,afterKeys:u,beforeError:c,afterError:l,beforeComplete:f,afterComplete:p}),E=y;return this._connection.write(d.default.runWithMetadata(t,e,{bookmark:r,txConfig:i,database:o,mode:s}),x,E&&_),y||this._connection.write(d.default.pull({n:b}),x,_),x}},{key:"_requestMore",value:function(t,e,n,r){t.write(d.default.pull({stmtId:e,n:n}),r,!0)}},{key:"_requestDiscard",value:function(t,e,n){t.write(d.default.discard({stmtId:e}),n,!0)}},{key:"_noOp",value:function(){}},{key:"version",get:function(){return f.BOLT_PROTOCOL_V4_0}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=function(t){function e(t,n){var r;return(0,i.default)(this,e),r=(0,s.default)(this,(0,a.default)(e).call(this,n)),n&&(r._originalErrorHandler=t._errorHandler,t._errorHandler=r._errorHandler),r._delegate=t,r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"isOpen",value:function(){return this._delegate.isOpen()}},{key:"protocol",value:function(){return this._delegate.protocol()}},{key:"connect",value:function(t,e){return this._delegate.connect(t,e)}},{key:"write",value:function(t,e,n){return this._delegate.write(t,e,n)}},{key:"resetAndFlush",value:function(){return this._delegate.resetAndFlush()}},{key:"close",value:function(){return this._delegate.close()}},{key:"_release",value:function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()}},{key:"id",get:function(){return this._delegate.id}},{key:"databaseId",get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t}},{key:"server",get:function(){return this._delegate.server}},{key:"address",get:function(){return this._delegate.address}},{key:"version",get:function(){return this._delegate.version},set:function(t){this._delegate.version=t}}]),e}(r(n(75)).default);e.default=c},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(5)),s=i(n(6)),a=i(n(97)),u=n(19),c=r(n(74)),l=i(n(47)),d=i(n(69)),h=n(33),f=n(11),p=function(){function t(e){var n=e.connectionHolder,r=e.onClose,i=e.onBookmark,s=e.onConnection,a=e.reactive,u=e.fetchSize;(0,o.default)(this,t),this._connectionHolder=n,this._reactive=a,this._state=g.ACTIVE,this._onClose=r,this._onBookmark=i,this._onConnection=s,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=u,this._results=[]}return(0,s.default)(t,[{key:"_begin",value:function(t,e){var n=this;this._connectionHolder.getConnection().then((function(r){return n._onConnection(),r.protocol().beginTransaction({bookmark:t,txConfig:e,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),beforeError:n._onError,afterComplete:n._onComplete})})).catch((function(t){return n._onError(t)}))}},{key:"run",value:function(t,e){var n=(0,u.validateQueryAndParameters)(t,e),r=n.validatedQuery,i=n.params,o=this._state.run(r,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(o),o}},{key:"commit",value:function(){var t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise((function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(t){return n(t)}})}))}},{key:"rollback",value:function(){var t=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise((function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(t){return n(t)}})}))}},{key:"isOpen",value:function(){return this._state===g.ACTIVE}},{key:"_onErrorCallback",value:function(t){return this._state=g.FAILED,this._onClose(),this._connectionHolder.releaseConnection()}},{key:"_onCompleteCallback",value:function(t){this._onBookmark(new l.default(t.bookmark))}}]),t}(),g={ACTIVE:{commit:function(t){return{result:_(!0,t.connectionHolder,t.onError,t.onComplete,t.onConnection,t.pendingResults),state:g.SUCCEEDED}},rollback:function(t){return{result:_(!1,t.connectionHolder,t.onError,t.onComplete,t.onConnection,t.pendingResults),state:g.ROLLED_BACK}},run:function(t,e,n){var r=n.connectionHolder,i=n.onError,o=n.onComplete,s=n.onConnection,a=n.reactive,u=n.fetchSize;return v(r.getConnection().then((function(n){return s(),n.protocol().run(t,e,{bookmark:l.default.empty(),txConfig:d.default.empty(),beforeError:i,afterComplete:o,reactive:a,fetchSize:u})})).catch((function(t){return new h.FailedObserver({error:t,onError:i})})),t,e)}},FAILED:{commit:function(t){t.connectionHolder;var e=t.onError;t.onComplete;return{result:v(new h.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:e}),"COMMIT",{}),state:g.FAILED}},rollback:function(t){t.connectionHolder,t.onError,t.onComplete;return{result:v(new h.CompletedObserver,"ROLLBACK",{}),state:g.FAILED}},run:function(t,e,n){n.connectionHolder;var r=n.onError;n.onComplete;return v(new h.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),t,e)}},SUCCEEDED:{commit:function(t){t.connectionHolder;var e=t.onError;t.onComplete;return{result:v(new h.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been committed."),onError:e}),"COMMIT",{}),state:g.SUCCEEDED}},rollback:function(t){t.connectionHolder;var e=t.onError;t.onComplete;return{result:v(new h.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been committed."),onError:e}),"ROLLBACK",{}),state:g.SUCCEEDED}},run:function(t,e,n){n.connectionHolder;var r=n.onError;n.onComplete;return v(new h.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been committed."),onError:r}),t,e)}},ROLLED_BACK:{commit:function(t){t.connectionHolder;var e=t.onError;t.onComplete;return{result:v(new h.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:e}),"COMMIT",{}),state:g.ROLLED_BACK}},rollback:function(t){t.connectionHolder,t.onError,t.onComplete;return{result:v(new h.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{}),state:g.ROLLED_BACK}},run:function(t,e,n){n.connectionHolder;var r=n.onError;n.onComplete;return v(new h.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:r}),t,e)}}};function _(t,e,n,r,i,o){var s=e.getConnection().then((function(e){return i(),o.forEach((function(t){return t._cancel()})),Promise.all(o).then((function(i){return t?e.protocol().commitTransaction({beforeError:n,afterComplete:r}):e.protocol().rollbackTransaction({beforeError:n,afterComplete:r})}))})).catch((function(t){return new h.FailedObserver({error:t,onError:n})}));return new a.default(s,t?"COMMIT":"ROLLBACK",{},e)}function v(t,e,n){return new a.default(Promise.resolve(t),e,n,c.EMPTY_CONNECTION_HOLDER)}var y=p;e.default=y},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=n(11),a=(r(n(98)),n(79)),u=n(109),c=(r(n(99)),0),l=1,d=2,h=function(){function t(e){(0,i.default)(this,t);var n=e.pipe((0,u.publishReplay)(1),(0,u.refCount)());this._result=n,this._keys=n.pipe((0,u.flatMap)((function(t){return(0,a.from)(t.keys())})),(0,u.publishReplay)(1),(0,u.refCount)()),this._records=new a.Subject,this._summary=new a.ReplaySubject,this._state=c}return(0,o.default)(t,[{key:"keys",value:function(){return this._keys}},{key:"records",value:function(){var t=this;return this._result.pipe((0,u.flatMap)((function(e){return new a.Observable((function(n){return t._startStreaming({result:e,recordsObserver:n})}))})))}},{key:"consume",value:function(){var t=this;return this._result.pipe((0,u.flatMap)((function(e){return new a.Observable((function(n){return t._startStreaming({result:e,summaryObserver:n})}))})))}},{key:"_startStreaming",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.result,r=e.recordsObserver,i=void 0===r?null:r,o=e.summaryObserver,a=void 0===o?null:o,u=[];return a&&u.push(this._summary.subscribe(a)),this._state<l?(this._state=l,i&&u.push(this._records.subscribe(i)),u.push({unsubscribe:function(){n._cancel&&n._cancel()}}),0===this._records.observers.length&&n._cancel(),n.subscribe({onNext:function(e){t._records.next(e)},onCompleted:function(e){t._records.complete(),t._summary.next(e),t._summary.complete(),t._state=d},onError:function(e){t._records.error(e),t._summary.error(e),t._state=d}})):i&&i.error((0,s.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){u.forEach((function(t){return t.unsubscribe()}))}}}]),t}();e.default=h},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(168)),o=r(n(5)),s=r(n(6)),a=n(29),u=n(56),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.database,r=e.routers,i=e.readers,s=e.writers,u=e.expirationTime;(0,o.default)(this,t),this.database=n,this.databaseName=n||"default database",this.routers=r||[],this.readers=i||[],this.writers=s||[],this.expirationTime=u||(0,a.int)(0)}return(0,s.default)(t,[{key:"forget",value:function(t){this.readers=l(this.readers,t),this.writers=l(this.writers,t)}},{key:"forgetRouter",value:function(t){this.routers=l(this.routers,t)}},{key:"forgetWriter",value:function(t){this.writers=l(this.writers,t)}},{key:"isStaleFor",value:function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||t===u.READ&&0===this.readers.length||t===u.WRITE&&0===this.writers.length}},{key:"isExpiredFor",value:function(t){return this.expirationTime.add(t).lessThan(Date.now())}},{key:"allServers",value:function(){return[].concat((0,i.default)(this.routers),(0,i.default)(this.readers),(0,i.default)(this.writers))}},{key:"toString",value:function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")}}]),t}();function l(t,e){return t.filter((function(t){return t.asKey()!==e.asKey()}))}e.default=c},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(43)),s=i(n(48)),a=i(n(5)),u=i(n(6)),c=n(11),l=r(n(29)),d=(n(173),i(n(47)),i(n(77)),i(n(69))),h=i(n(108)),f="CALL dbms.cluster.routing.getRoutingTable($".concat("context",")"),p="CALL dbms.routing.getRoutingTable($".concat("context",", $").concat("database",")"),g=function(){function t(e,n){(0,a.default)(this,t),this._routingContext=e,this._initialAddress=n}var e;return(0,u.default)(t,[{key:"callRoutingProcedure",value:(e=(0,s.default)(o.default.mark((function t(e,n,r){var i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._callAvailableRoutingProcedure(e,n);case 3:return i=t.sent,t.next=6,e.close();case 6:return t.abrupt("return",i.records);case 9:if(t.prev=9,t.t0=t.catch(0),"Neo.ClientError.Database.DatabaseNotFound"!==t.t0.code){t.next=15;break}throw t.t0;case 15:if("Neo.ClientError.Procedure.ProcedureNotFound"!==t.t0.code){t.next=19;break}throw(0,c.newError)("Server at ".concat(r.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),c.SERVICE_UNAVAILABLE);case 19:return t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(t,n,r){return e.apply(this,arguments)})},{key:"parseTtl",value:function(t,e){try{var n=(0,l.int)(Date.now()),r=(0,l.int)(t.get("ttl")).multiply(1e3).add(n);return r.lessThan(n)?l.default.MAX_VALUE:r}catch(n){throw(0,c.newError)("Unable to parse TTL entry from router ".concat(e," from record:\n").concat(JSON.stringify(t),"\nError message: ").concat(n.message),c.PROTOCOL_ERROR)}}},{key:"parseServers",value:function(t,e){try{var n=t.get("servers"),r=[],i=[],o=[];return n.forEach((function(t){var e=t.role,n=t.addresses;if("ROUTE"===e)r=_(n).map((function(t){return h.default.fromUrl(t)}));else if("WRITE"===e)o=_(n).map((function(t){return h.default.fromUrl(t)}));else{if("READ"!==e)throw(0,c.newError)('Unknown server role "'+e+'"',c.PROTOCOL_ERROR);i=_(n).map((function(t){return h.default.fromUrl(t)}))}})),{routers:r,readers:i,writers:o}}catch(n){throw(0,c.newError)("Unable to parse servers entry from router ".concat(e," from record:\n").concat(JSON.stringify(t),"\nError message: ").concat(n.message),c.PROTOCOL_ERROR)}}},{key:"_callAvailableRoutingProcedure",value:function(t,e){var n=this;return t._run(null,null,(function(r){var i,o;return r.protocol().version>=4?(i=p,(o={context:n._routingContext||{},database:e||null}).context.address=n._initialAddress):(i=f,o={context:n._routingContext}),r.protocol().run(i,o,{bookmark:t._lastBookmark,txConfig:d.default.empty(),mode:t._mode,database:t._database,afterComplete:t._onComplete})}))}}]),t}();function _(t){if(!Array.isArray(t))throw new TypeError("Array expected but got: "+t);return Array.from(t)}e.default=g},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=n(174),s=n(19),a=function t(e,n,r,o,s){(0,i.default)(this,t),this.scheme=e,this.host=n,this.port=r,this.hostAndPort=o,this.query=s};function u(t,e,n){if(!(t=(t||"").trim()))throw new Error("Illegal empty ".concat(e," in URL query '").concat(n,"'"));return t}function c(t){var e="["===t.charAt(0),n="]"===t.charAt(t.length-1);if(e||n){if(e&&n)return t;throw new Error("Illegal IPv6 address ".concat(t))}return"[".concat(t,"]")}function l(t){return"http"===t?7474:"https"===t?7473:7687}var d={parseDatabaseUrl:function(t){(0,s.assertString)(t,"URL");var e=function(t){if(-1===(t=t.trim()).indexOf("://"))return{schemeMissing:!0,url:"none://".concat(t)};return{schemeMissing:!1,url:t}}(t),n=(0,o.parse)(e.url),r=e.schemeMissing?null:function(t){if(t)return":"===(t=t.trim()).charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t;return null}(n.scheme),i=function(t,e){if(!t)throw new Error("Unable to extract host from ".concat(e));return t.trim()}(n.host),d=function(t){if(!t)throw new Error("Illegal host ".concat(t));return t.indexOf(":")>=0?c(t):t}(i),h=function(t,e){var n=parseInt(t,10);return 0===n||n?n:l(e)}(n.port,r),f="".concat(d,":").concat(h),p=function(t,e){var n=function(t){(t=(t||"").trim())&&"?"===t.charAt(0)&&(t=t.substring(1,t.length));return t}(t),r={};n&&n.split("&").forEach((function(t){var n=t.split("=");if(2!==n.length)throw new Error("Invalid parameters: '".concat(n,"' in URL '").concat(e,"'."));var i=u(n[0],"key",e),o=u(n[1],"value",e);if(r[i])throw new Error("Duplicated query parameters with key '".concat(i,"' in URL '").concat(e,"'"));r[i]=o}));return r}(n.query,t);return new a(r,i,h,f,p)},defaultPortForScheme:l,formatIPv4Address:function(t,e){return"".concat(t,":").concat(e)},formatIPv6Address:function(t,e){var n=c(t);return"".concat(n,":").concat(e)}};e.default=d},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=r(n(176)),l=function(t){function e(t){var n;return(0,i.default)(this,e),(n=(0,s.default)(this,(0,a.default)(e).call(this)))._readersIndex=new c.default,n._writersIndex=new c.default,n._connectionPool=t,n}return(0,u.default)(e,t),(0,o.default)(e,[{key:"selectReader",value:function(t){return this._select(t,this._readersIndex)}},{key:"selectWriter",value:function(t){return this._select(t,this._writersIndex)}},{key:"_select",value:function(t,e){var n=t.length;if(0===n)return null;var r=e.next(n),i=r,o=null,s=Number.MAX_SAFE_INTEGER;do{var a=t[i],u=this._connectionPool.activeResourceCount(a);u<s&&(o=a,s=u),i===n-1?i=0:i++}while(i!==r);return o}}]),e}(r(n(177)).default);e.default=l},function(t,e,n){(function(t,e){
/**
 * Ogma
 * @description Graph visualization library
 * @version 3.1.0 (built on Fri Sep 04 2020 16:52:54 GMT+0200 (Central European Summer Time))
 * @author Linkurious SAS
 * @license (c) Linkurious 2020. All rights reserved.
 * @preserve
 */
e.exports=function(){"use strict";function n(t){return"function"==typeof t||"[object Function]"===i.call(t)}function r(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),o)}var i,o;Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),n=e.length>>>0,r=arguments[1]>>0,i=r<0?Math.max(n+r,0):Math.min(r,n),o=arguments[2],s=void 0===o?n:o>>0,a=s<0?Math.max(n+s,0):Math.min(s,n);i<a;)e[i]=t,i++;return e}}),Array.prototype.copyWithin||(Array.prototype.copyWithin=function(t,e){if(null==this)throw new TypeError("this is null or not defined");var n=Object(this),r=n.length>>>0,i=t>>0,o=i<0?Math.max(r+i,0):Math.min(i,r),s=e>>0,a=s<0?Math.max(r+s,0):Math.min(s,r),u=arguments[2],c=void 0===u?r:u>>0,l=c<0?Math.max(r+c,0):Math.min(c,r),d=Math.min(l-a,r-o),h=1;for(a<o&&o<a+d&&(h=-1,a+=d-1,o+=d-1);0<d;)a in n?n[o]=n[a]:delete n[o],a+=h,o+=h,d--;return n}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0==n)return-1;var r=n-1;1<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!=r&&r!=1/0&&r!=-1/0&&(r=(0<r?1:-1)*Math.floor(Math.abs(r))));for(var i=0<=r?Math.min(r,n-1):n-Math.abs(r);0<=i;i--)if(i in e&&e[i]===t)return i;return-1}),Array.from||(Array.from=(i=Object.prototype.toString,o=Math.pow(2,53)-1,function(t,e,i){var o=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var s,a=1<arguments.length?e:void 0;if(void 0!==a){if(!n(a))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(s=i)}for(var u,c=r(o.length),l=n(this)?Object(new this(c)):new Array(c),d=0;d<c;)u=o[d],l[d]=a?void 0===s?a(u,d):a.call(s,u,d):u,d+=1;return l.length=c,l})),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0==r)return!1;for(var i,o,s=0|e,a=Math.max(0<=s?s:r-Math.abs(s),0);a<r;){if((i=n[a])===(o=t)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;a++}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}},configurable:!0,writable:!0});var s=[Uint32Array,Uint16Array,Uint8Array,Int32Array,Int16Array,Int8Array,Float32Array,Float64Array],a=["join","slice","reverse","forEach","map","includes","copyWithin","reduce","indexOf","sort","filter","every","some","fill"];ArrayBuffer.isView||(ArrayBuffer.isView=function(t){for(var e=0;e<s.length;++e)if(t instanceof s[e])return!0;return!1});for(var u,c=function(t){return function(e,n){return new t(Array.prototype.slice.call(this,e,n))}},l=function(t){for(var e=0,n=a;e<n.length;e++){var r=n[e];if(!t.prototype[r]){var i="slice"===r?c(t):Array.prototype[r];t.prototype[r]=i}}t.from||(t.from=function(e,n,r){var i=t.__proto__;if("function"!=typeof this)throw new TypeError("# is not a constructor");if(this.__proto__!==i)throw new TypeError("this is not a typed array.");if("function"!=typeof(n=n||function(t){return t}))throw new TypeError("specified argument is not a function");if(!(e=Object(e)).length)return new this(0);for(var o=[],s=0;s<e.length;s++)o.push(e[s]);var a=new this((o=o.map(n,r)).length);for(s=0;s<a.length;s++)a[s]=o[s];return a})},d=0,h=s;d<h.length;d++)l(h[d]);function f(){}function p(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],b(t,this)}function g(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,p._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(n){return void v(e.promise,n)}_(e.promise,r)}else(1===t._state?_:v)(e.promise,t._value)}))):t._deferreds.push(e)}function _(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof p)return t._state=3,t._value=e,void y(t);if("function"==typeof n)return void b((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,y(t)}catch(e){v(t,e)}var r,i}function v(t,e){t._state=2,t._value=e,y(t)}function y(t){2===t._state&&0===t._deferreds.length&&p._immediateFn((function(){t._handled||p._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)g(t,t._deferreds[e]);t._deferreds=null}function m(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function b(t,e){var n=!1;try{t((function(t){n||(n=!0,_(e,t))}),(function(t){n||(n=!0,v(e,t))}))}catch(t){if(n)return;n=!0,v(e,t)}}"undefined"==typeof CanvasRenderingContext2D||CanvasRenderingContext2D.prototype.setLineDash||(CanvasRenderingContext2D.prototype.setLineDash=function(t){}),Math.log2||(Math.log2=function(t){return Math.log(t)*Math.LOG2E}),Math.sign||(Math.sign=function(t){return(0<t?1:0)-(t<0?1:0)||+t}),Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{enumerable:!1,configurable:!1,writable:!1,value:Math.pow(2,53)-1}),u=setTimeout,p.prototype.catch=function(t){return this.then(null,t)},p.prototype.then=function(t,e){var n=new this.constructor(f);return g(this,new m(t,e,n)),n},p.all=function(t){var e=Array.prototype.slice.call(t);return new p((function(t,n){if(0===e.length)return t([]);var r=e.length;function i(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){i(o,t)}),n)}e[o]=s,0==--r&&t(e)}catch(s){n(s)}}for(var o=0;o<e.length;o++)i(o,e[o])}))},p.resolve=function(t){return t&&"object"==typeof t&&t.constructor===p?t:new p((function(e){e(t)}))},p.reject=function(t){return new p((function(e,n){n(t)}))},p.race=function(t){return new p((function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)}))},p._immediateFn="object"==typeof t&&"function"==typeof t.setImmediate?function(e){t.setImmediate(e)}:function(t){u(t,0)},p._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},p._setImmediateFn=function(t){p._immediateFn=t},p._setUnhandledRejectionFn=function(t){p._unhandledRejectionFn=t},"object"!=typeof t||t.Promise||(t.exports=p),"object"!=typeof window||"Promise"in window||(window.Promise=p),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var r=n.lastIndexOf(t,e);return-1!==r&&r===e}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t}),String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){var e=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=e[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0});var x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function E(t,e){function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var w=function(){return(w=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function S(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function A(){for(var t=arguments,e=0,n=0,r=arguments.length;n<r;n++)e+=t[n].length;var i=Array(e),o=0;for(n=0;n<r;n++)for(var s=arguments[n],a=0,u=s.length;a<u;a++,o++)i[o]=s[a];return i}var C={},T={},k={},I=function(t){return null};if("object"==typeof t&&(T=t),"object"==typeof window&&(k=window),"function"==typeof e.require){var O=e.require.bind(e);I=function(t){try{return O(t)}catch(t){return null}}}else"function"==typeof T.require&&(I=function(t){var n=e.require;try{return n(t)}catch(t){return null}});function M(t,e){var n=(void 0===e?{}:e).throwOnError,r=null;if(!r&&t&&(r=C[t]),!r&&t&&(r=I(t)),!r&&t&&(r=k[t]),!r&&t&&(r=T[t]),r||!n)return r;var i=['unable to find module "'+t+'"; make sure one of these statements is true:',"- Ogma.libraries['"+t+"'] is set to the right library","- require('"+t+"') returns the right library","- window['"+t+"'] is set to the right library"].join("\n");throw new Error(i)}function L(t,e){for(var n=1,r=t.length;n<r;n++){for(var i=t[n],o=n;0<o&&e.get(t[o-1])>e.get(i);)t[o]=t[o-1],--o;t[o]=i}return t}function N(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function R(t){return Array.isArray(t)?t:[t]}function P(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;++i)e.push(r[i]);else e.push(r)}return e}function D(t,e){var n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)}function F(t,e){for(var n,r,i=0,o=t.length-1;i<=o;)if((r=t[n=(i+o)/2|0])<e)i=1+n;else{if(!(e<r))return n;o=n-1}return-1}function z(t){if(!t)return[];if("string"==typeof t)return t.split(".");if(Array.isArray(t)){for(var e=0;e<t.length;++e)if("string"!=typeof t[e])throw new TypeError(t[e]+" is not a string");return t.slice()}throw new TypeError('invalid property path "'+t+'": expected string or array of strings')}function B(t,e,n){var r,i,o;if(0===e)return function(){t.apply(n,arguments)};function s(){r=!1,i&&(o.apply(n,i),i=null)}return o=function(){var o;return r?i=arguments:(o=t.apply(n,arguments),setTimeout(s,e),r=!0),o}}function U(){return 120===new Uint8Array(new Uint32Array([305419896]).buffer)[0]}function V(t){return t.reduce((function(t,e){return t.then(e)}),Promise.resolve())}function j(t,e,n,r,i,o,s,a){return t+i+256*(e+o)+65536*(n+s)+16777216*(r+a)}function H(t){return!(null===t||"object"!=typeof t||N(t)||t instanceof RegExp||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement)}function G(t){for(var e=Object.keys(t),n=new Array(e.length),r=0;r<e.length;++r)n[r]=t[e[r]];return n}function q(t,e,n){if(Array.isArray(t))return t.forEach(e,n);if(!H(t))throw new Error("forEach: invalid argument "+JSON.stringify(t));var r=Object.keys(t);if(void 0!==n)for(var i=0;i<r.length;++i){var o=r[i];e.call(n,t[o],o)}else for(i=0;i<r.length;++i)e(t[o=r[i]],o)}function W(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=W(t[n]);return e}if(!et(t))return t;var r={},i=Object.keys(t);for(n=0;n<i.length;++n){var o=i[n];r[o]=W(t[o])}return r}function Y(t,e,n){for(var r="string"==typeof e?e.split("."):e,i=0;i<r.length-1;++i){var o=r[i],s=t[o];s||(s={},t[o]=s),t=s}t[r[r.length-1]]=n}function X(t,e){var n=z(e);if(!n.length)return t;if(t){for(var r=0;r<n.length-1;++r){var i=t[n[r]];if(!i)return;t=i}return t[n[n.length-1]]}}function Z(t,e,n){void 0===n&&(n="."),e=e||function(t){return!H(t)};for(var r={},i=Object.keys(t),o=0;o<i.length;++o){var s=i[o],a=t[s];if(e(a))r[s]=a;else for(var u=Z(a,e),c=Object.keys(u),l=0;l<c.length;l++){var d=c[l];r[""+s+n+d]=u[d]}}return r}function K(t){for(var e={},n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Y(e,i,t[i])}return e}function J(t,e,n){void 0===n&&(n=[]);for(var r=Object.keys(t),i=0;i<r.length;++i){var o=r[i],s=t[o],a=e?e+o:o;et(s)?J(s,a+".",n):n.push(a)}return n}function Q(t,e){if(void 0===e&&(e=[]),et(t))for(var n=0,r=Object.keys(t);n<r.length;n++)Q(t[r[n]],e);else e.push(t);return e}function $(t){for(var e in t)"function"==typeof t[e]&&delete t[e];return t}function tt(t,e){if(void 0===t)return W(e);if(!H(t))return t;for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var o=i[r],s=e[o],a=t[o];H(s)?n[o]=tt(a,s):n[o]=void 0===a?W(s):a}return n}function et(t){return t&&(t.constructor===Object||!t.constructor)}function nt(t,e){if(!et(e)||!et(t))return e;for(var n=Object.assign({},t),r=Object.keys(e),i=0;i<r.length;++i){var o=r[i];n[o]=nt(n[o],e[o])}return n}function rt(t,e){return null==e?t:e.reduce((function(e,n){return e[n]=t[n],e}),{})}var it,ot=(it=0,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(t){var e=Date.now(),n=Math.min(16,Math.max(0,16-(e-it))),r=it=e+n;return setTimeout((function(){return t(r)}),n)}),st="undefined"!=typeof cancelAnimationFrame?cancelAnimationFrame:function(t){return clearTimeout(t)};function at(t,e){return ot((function(n){t.call(e,n)}))}function ut(t){t&&st(t)}var ct,lt,dt,ht,ft="object"==typeof t&&null!==t&&void 0!==t.it,pt="undefined"!=typeof document,gt="undefined"!=typeof window,_t=gt&&!window.__OGMA_HEADLESS,vt=_t&&pt,yt=(mt.prototype.open=function(t,e){this.method=t,this.url=e,mt.onSend&&mt.onSend(this)},mt.prototype.respond=function(t,e,n){this.readyState=4,this.status=t,this.headers=e,this.responseText=n,this.response=n,this.onreadystatechange()},mt.prototype.send=function(){this.readyState=4},mt.onCreate=function(){},mt.onSend=function(){},mt);function mt(){this.method=null,this.url=null,this.status=0,this.readyState=0,this.headers={},this.responseText=null,this.response=null,mt.onCreate&&mt.onCreate(this)}var bt=(xt.prototype.readAsDataURL=function(t){this._blob=t,xt.onRead&&xt.onRead(this)},xt.prototype.load=function(t){this.result="function"==typeof t?t(this._blob):t,this.onload&&this.onload()},xt.onCreate=function(){},xt.onRead=function(){},xt);function xt(){this.onload=function(){},xt.onCreate&&xt.onCreate(this)}function Et(){return lt||{createElementNS:function(){return null},createElement:function(){return null},implementation:{createDocument:function(){throw new Error('unable to create XML document; if you use Node JS install the "xmldom" package')}}}}function wt(t,e){if(document&&document.defaultView){var n=t.style[e];if((!n||"auto"===n)&&Et().defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}return null}ct=M("xmldom"),lt=pt?document:ct?(new ct.DOMImplementation).createDocument():null,dt="undefined"!=typeof XMLHttpRequest?XMLHttpRequest:yt,ht="undefined"!=typeof FileReader?FileReader:bt;var St=(Object.defineProperty(At.prototype,"offsetWidth",{get:function(){return parseFloat(this.style.width||"0")},enumerable:!0,configurable:!0}),Object.defineProperty(At.prototype,"offsetHeight",{get:function(){return parseFloat(this.style.height||"0")},enumerable:!0,configurable:!0}),Object.defineProperty(At.prototype,"firstChild",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(At.prototype,"parentNode",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(At.prototype,"classList",{get:function(){return{length:0,value:"",add:function(){},remove:function(){},contains:function(t){return!1},item:null}},enumerable:!0,configurable:!0}),Object.defineProperty(At.prototype,"innerHTML",{get:function(){return""},set:function(t){},enumerable:!0,configurable:!0}),At.prototype.appendChild=function(){},At.prototype.removeChild=function(){},At.prototype.addEventListener=function(){},At.prototype.removeEventListener=function(){},At.prototype.insertBefore=function(){},At.prototype.contains=function(t){return!1},At);function At(){this.onmousewheel=function(){},this.__dummy=!0,this.style={},this.clientWidth=0,this.clientHeight=0,this.childNodes=[],this.style={width:"0px",height:"0px",top:void 0,left:void 0,position:"",backgroundColor:void 0}}function Ct(){return new St}var Tt=gt?function(){return window.devicePixelRatio}:function(){return 1};function kt(t){var e,n,r,i=";base64,";if(-1===t.indexOf(i))return n=(e=t.split(","))[0].split(":")[1],Ot(r=decodeURIComponent(e[1]),n);n=(e=t.split(i))[0].split(":")[1];for(var o=(r=window.atob(e[1])).length,s=new Uint8Array(o),a=0;a<o;++a)s[a]=r.charCodeAt(a);return Ot([s],n)}var It=function(t,e){this.data=t,this.type=e};function Ot(t,e){return"undefined"!=typeof Blob?new Blob(t,{type:e}):new It(t,e)}function Mt(t,e,n){if(!_t)return t;var r,i,o=null,s=null,a=null;if(window.Blob?(r=t,o="blob"===(i=n)?r:"dataURL"===i?kt(r):Ot([r],"text/xml"),s=window.URL.createObjectURL(o)):a="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(t),navigator.msSaveBlob)navigator.msSaveBlob(o,e);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(o,e);else{var u=document.createElement("a");u.setAttribute("href",s||a),u.setAttribute("download",e),document.body.appendChild(u),u.click(),document.body.removeChild(u)}return s&&setTimeout((function(){window.URL.revokeObjectURL(s)}),0),t}function Lt(t,e,n,r){if(void 0===r&&(r=Tt()),t.style.width=e+"px",t.style.height=n+"px","IMG"===t.tagName||"CANVAS"===t.tagName){var i=t;i.width=e*r,i.height=n*r}}function Nt(t,e){q(e,(function(e,n){void 0!==e&&t.setAttribute(n,e)}))}var Rt="http://www.w3.org/2000/svg",Pt="http://www.w3.org/2000/xmlns/",Dt="http://www.w3.org/1999/xlink";function Ft(t,e){var n=lt.createElementNS(Rt,t);return n.style||(n.style={}),e&&Nt(n,e),n}function zt(t){if(lt)return lt.createTextNode(t)}function Bt(t){return"undefined"==typeof Image?Promise.resolve(null):new Promise((function(e){var n=new Image;n.src=t,n.onload=function(){return e(n)},n.onerror=function(){return e(null)}}))}function Ut(t){if(0===t.indexOf("http://")||0===t.indexOf("https://"))return t;var e=window.location.origin,n=window.location.pathname,r=n.lastIndexOf("/");return-1===r?e+"/"+t:e+n.substr(0,r)+"/"+t}function Vt(t){return new Promise((function(e,n){var r=new dt;r.open("GET",Ut(t),!0),r.onreadystatechange=function(){if(4===r.readyState){var i=r.status;200===i?e(r.responseText):n(0!==i?new Error('cannot retrieve file at url "'+t+'"; the server responded with status code '+i+"."):new Error('cannot send XMLHttpRequest to url "'+t+"\"; if you're using the local file protocol this is most likely the cause."))}},r.onerror=function(){n(new Error('cannot retrieve file at url "'+t+'"; the XMLHttpRequest failed.'))},r.send()}))}function jt(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}function Ht(t,e){t.style.cursor=e,t.style.cursor!==e&&(t.style.cursor="-webkit-"+e)}function Gt(t){return new Promise((function(e,n){var r=new dt;r.responseType="blob",r.open("GET",Ut(t),!0),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e(r.response):n(r.status))},r.onerror=function(t){return n(t)},r.send()}))}function qt(t){return Gt(t).then((function(t){return new Promise((function(e,n){var r=new ht;r.onerror=n,r.onload=function(){return e(r.result)},r.readAsDataURL(t)}))}))}function Wt(t,e){void 0===e&&(e=!0);var n=e?"&#13;":"\n";return(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,n).replace(/[\r\n]/g,n)}var Yt={0:"left",1:"middle",2:"right"};function Xt(t){if(t.baseURI)return t.baseURI;var e=t.getElementsByTagName("base");return 0<e.length?e[0].href:t.URL||t.location.href}function Zt(t,e,n,r){return new Promise((function(i){var o=e,s=Date.now(),a=(n-e)*Math.min(1,1/(r/16));!function e(){Date.now()-s<r?(o=Math.min(1,Math.max(0,o+a)),t.style.opacity=o.toString(),at(e)):i()}()}))}var Kt="undefined"!=typeof performance&&performance.now?function(){return 0|performance.now()}:function(){return Date.now()},Jt=Kt();function Qt(){return Kt()-Jt}function $t(){var t=new Date,e=t.getDate(),n=t.getMonth()+1;return t.getFullYear()+"-"+(n<10?"0"+n:n)+"-"+(e<10?"0"+e:e)}function te(){var t=new Date;return"["+ee((t.getUTCHours()-(t.getTimezoneOffset()/60|0))%24)+":"+ee(t.getUTCMinutes())+":"+ee(t.getUTCSeconds())+":"+ee(t.getUTCMilliseconds(),3)+"]"}function ee(t,e){void 0===e&&(e=2);for(var n=Math.pow(10,e-1),r=String(t);1<n;)t<n&&(r="0"+r),n/=10;return r}var ne,re,ie=gt&&!window.PointerEvent&&!!window.MSPointerEvent,oe=gt&&!(!window.PointerEvent&&!ie),se=ie?"MSPointerDown":"pointerdown",ae=ie?"MSPointerMove":"pointermove",ue=ie?"MSPointerUp":"pointerup",ce=ie?"MSPointerCancel":"pointercancel",le={},de=0;function he(t){return"mouse"===t.pointerType||t.MSPOINTER_TYPE_MOUSE&&t.pointerType===t.MSPOINTER_TYPE_MOUSE}function fe(t){return"mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE}function pe(t){le[t.pointerId]=t}function ge(t){le[t.pointerId]&&(le[t.pointerId]=t)}function _e(t){delete le[t.pointerId]}function ve(t,e){for(var n in t.touches=[],le)t.touches.push(le[n]);t.changedTouches=[t],e(t)}function ye(t,e,n,r){return n===ne.START?t(e,se,r,!1):n===ne.MOVE?t(e,ae,r,!1):n===ne.END&&(t(e,ue,r,!1),t(e,ce,r,!1))}(re=ne=ne||{}).START="touchstart",re.MOVE="touchmove",re.END="touchend",re.CANCEL="touchcancel";var me,be,xe=(Ee.prototype.onMounted=function(t,e){},Ee.prototype.destroy=function(t){},Ee);function Ee(){}(be=me=me||{}).MOVE="move",be.DOWN="down",be.UP="up",be.CLICK="click",be.DOUBLE_CLICK="doubleClick",be.HOVER="hover",be.UNHOVER="unhover",be.WHEEL="wheel",be.DRAG_START="dragStart",be.DRAG_PROGRESS="dragProgress",be.DRAG_END="dragEnd",be.GESTURE_START="gestureStart",be.GESTURE_PROGRESS="gestureProgress",be.GESTURE_END="gestureEnd",be.RESIZE="resize",be.ADD_NODES="addNodes",be.ADD_EDGES="addEdges",be.REMOVE_NODES="removeNodes",be.REMOVE_EDGES="removeEdges",be.REQUEST_ELEMENTS_TO_DELETE="requestElementsToDelete",be.BEFORE_REMOVE_NODES="beforeRemoveNodes",be.BEFORE_REMOVE_EDGES="beforeRemoveEdges",be.CLEAR_GRAPH="clear",be.EXCLUDED_STATE_CHANGE="excludedStateChange",be.BEFORE_UPDATE_ATTRIBUTES="beforeUpdateAttributes",be.UPDATE_ATTRIBUTES="updateAttributes",be.RENDERER_STATE_CHANGE="rendererStateChange",be.UPDATE_NODE_DATA="updateNodeData",be.UPDATE_EDGE_DATA="updateEdgeData",be.SET_DATA="setData",be.START_ZOOM="startZoom",be.VIEW_CHANGED="viewChanged",be.MOVE_END="moveEnd",be.CAMERA_MOVE="cameraMove",be.CAMERA_ROTATE="cameraRotate",be.CAMERA_PAN="cameraPan",be.CAMERA_ZOOM="cameraZoom",be.NODES_DRAG_START="startMoveNodesByDragging",be.NODES_DRAG_PROGRESS="progressMoveNodesByDragging",be.NODES_DRAG_END="endMoveNodesByDragging",be.ANIMATE="animate",be.NEW_FRAME="newFrame",be.BEFORE_NEW_FRAME="beforeNewFrame",be.AFTER_NEW_FRAME="afterNewFrame",be.SET_CONTAINER="setContainer",be.RELOAD_FONTS="reloadFonts",be.SET_MULTIPLE_ATTRIBUTES="setMultipleAttributes",be.MOUSE_LEAVE="mouseLeave",be.MOUSE_DOWN="mouseDown",be.MOUSE_UP="mouseUp",be.MOUSE_MOVE="mouseMove",be.MOUSE_WHEEL="mouseWheel",be.MOUSE_CLICK="mouseClick",be.MOUSE_DOUBLE_CLICK="mouseDoubleClick",be.DOCUMENT_MOUSE_MOVE="documentMouseMove",be.DOCUMENT_MOUSE_UP="documentMouseUp",be.DROP="drop",be.VIRTUAL_DOWN="virtualDown",be.VIRTUAL_UP="virtualUp",be.VIRTUAL_MOVE="virtualMove",be.VIRTUAL_CLICK="virtualClick",be.VIRTUAL_DOUBLE_CLICK="virtualDoubleClick",be.VIRTUAL_WHEEL="virtualWheel",be.TOUCH_DOWN="touchDown",be.TOUCH_UP="touchUp",be.TOUCH_TAP="touchTap",be.TOUCH_DOUBLE_TAP="touchDoubleTap",be.TOUCH_MOVE="touchMove",be.TOUCH_START_GESTURE="touchStartGesture",be.TOUCH_PROGRESS_GESTURE="touchProgressGesture",be.TOUCH_END_GESTURE="touchEndGesture",be.DOCUMENT_TOUCH_MOVE="documentTouchMove",be.DOCUMENT_TOUCH_UP="documentTouchUp",be.GEO_LOADED="geoLoaded",be.GEO_ENABLED="geoEnabled",be.GEO_DISABLED="geoDisabled",be.GEO_READY="geoReady",be.TOOLTIP_HIDE="hideTooltip",be.TOOLTIP_SHOW="showTooltip",be.CONNECT_NODES="connectNodes",be.LAYOUT_START="layoutStart",be.LAYOUT_END="layoutEnd",be.LAYOUT_COMPUTED="layoutComputed";var we,Se=["graphics","legend","brand"],Ae=(E(Ce,we=xe),Ce.prototype.onMounted=function(t,e){e.container&&t.setContainer(e.container)},Ce.prototype.addWindowEventListener=function(t,e,n){this._isRealBrowser&&this.addElementEventListener(window,t,e,n)},Ce.prototype.addDirectWindowEventListener=function(t,e,n){this._isRealBrowser&&window.addEventListener(t,e,n)},Ce.prototype.removeDirectWindowEventListener=function(t,e){this._isRealBrowser&&window.removeEventListener(t,e)},Ce.prototype.addDocumentEventListener=function(t,e,n){return this._isDocumentReady&&this.addElementEventListener(document.documentElement,t,e,n),e},Ce.prototype.removeDocumentEventListener=function(t,e){this._isDocumentReady&&document.documentElement.removeEventListener(t,e)},Ce.prototype.addMediaListener=function(t,e){if(this._isDocumentReady&&"function"==typeof window.matchMedia){var n=window.matchMedia(t);n.addListener(e),this._onDetachDom.push((function(){return n.removeListener(e)}))}},Ce.prototype.addElementEventListener=function(t,e,n,r){return this._isDestroyed||(t.addEventListener(e,n,r),this._onDetachDom.push((function(){return t.removeEventListener(e,n,r)}))),n},Ce.prototype.detachFromDom=function(){this._onDetachDom.forEach((function(t){return t()})),this._onDetachDom=[],this._emptyContainer()},Ce.prototype.setTimeout=function(t,e){var n=this;void 0===e&&(e=0);var r=setTimeout((function(){n._timeouts.splice(n._timeouts.indexOf(r),1),t()}),e);return this._timeouts.push(r),r},Ce.prototype.clearTimeout=function(t){return t&&(clearTimeout(t),this._timeouts.splice(this._timeouts.indexOf(t),1)),null},Ce.prototype.clearAllTimeouts=function(){this._timeouts.forEach(clearTimeout),this._timeouts=[]},Ce.prototype.stopFrames=function(){this._isDestroyed=!0,this._nextFrame&&(ut(this._nextFrame),this._nextFrame=null)},Ce.prototype.isDestroyed=function(){return this._isDestroyed},Ce.prototype.getDimensions=function(){return{width:this._width,height:this._height}},Ce.prototype.setDimensions=function(t){this._resize(t)},Ce.prototype.setLayer=function(t,e,n){var r=(void 0===n?{}:n).automaticResize,i=void 0!==r&&r;e&&(e._ogmaLayer=t,i&&(e.style.position="absolute",e.style.top="0px",e.style.left="0px",Lt(e,this._width,this._height,Tt()))),this._layers[t]={element:e,automaticResize:i},this._updateContainerContent()},Ce.prototype.setContainer=function(t){var e,n=this;if("string"==typeof t){if(!(e=document.getElementById(t)))throw new Error('unable to find DOM element with id "'+t+'"')}else e=t;if(e!==this._container){null===e&&this._emptyContainer();var r=this._container;this._isFullScreen=!1,this._container=e,this._container&&["fullscreenchange","webkitfullscreenchange"].forEach((function(t){n.addElementEventListener(n._container,t,n._onFullscreenChange)})),this._resize(),this._updateContainerContent(),this._events.fire(me.SET_CONTAINER,{element:e,prevElement:r})}},Ce.prototype.getContainer=function(){return this._container},Ce.prototype.appendElement=function(t){null!==this._container&&this._container.appendChild(t)},Ce.prototype.focus=function(){this._focus=!0},Ce.prototype.blur=function(){this._focus=!1},Ce.prototype.hasFocus=function(){return this._focus},Ce.prototype.forceResize=function(){this._resize()},Ce.prototype._beforeOrAfterNextFrame=function(t){var e=t?this._afterNextFramePromises:this._beforeNextFramePromises,n=new Promise((function(t){e.push((function(){return t(),n}))}));return this._refresh(),n},Ce.prototype.beforeNextFrame=function(){return this._beforeOrAfterNextFrame(!1)},Ce.prototype.afterNextFrame=function(){return this._beforeOrAfterNextFrame(!0)},Ce.prototype.refresh=function(t){t&&(this._refreshUntil=Math.max(this._refreshUntil,t)),this._refresh()},Ce.prototype._emptyContainer=function(){if(this._container){for(var t=[],e=0;e<this._container.childNodes.length;++e){var n=this._container.childNodes[e];n._ogmaLayer&&t.push(n)}for(e=0;e<t.length;++e)this._container.removeChild(t[e])}},Ce.prototype._fillContainer=function(){var t=this;if(this._container){var e=wt(this._container,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(this._container.style.position="relative");var n=this._container.firstChild;Se.forEach((function(e){var r=t._layers[e];r&&r.element&&t._container&&t._container.insertBefore(r.element,n)}))}},Ce.prototype._updateContainerContent=function(){this._emptyContainer(),this._fillContainer()},Ce.prototype._resize=function(t){if(this._container||t){var e,n,r=this._width,i=this._height;if(this._container){var o=this._settings.get("minimumWidth"),s=this._settings.get("minimumHeight"),a=this._container.clientWidth||1,u=this._container.clientHeight||1;e=Math.max(o,t?t.width:a),n=Math.max(s,t?t.height:u)}else null!=t&&(e=t.width,n=t.height);e===r&&n===i||(this._width=e,this._height=n,q(this._layers,(function(t){var r=t.element;t.automaticResize&&Lt(r,e,n)})),this._events.fire(me.RESIZE,{prevWidth:r,prevHeight:i,width:e,height:n,difWidth:e-r,difHeight:n-i}))}},Ce.prototype._refresh=function(){var t=this;this._inFrame?this._mustRefresh=!0:this._nextFrame||this._isDestroyed||(this._nextFrame=at((function(){return t._playFrame()})))},Ce.prototype._playFrame=function(){var t=this,e=Qt(),n=e-this._currentTime,r=P([this._beforeNextFramePromises,function(){return t._events.fire(me.BEFORE_NEW_FRAME,{elapsed:n})},function(){return t._events.fire(me.NEW_FRAME,{elapsed:n})},function(){return t._events.fire(me.AFTER_NEW_FRAME,{elapsed:n})},this._afterNextFramePromises,function(){t._inFrame=!1,(t._mustRefresh||e<t._refreshUntil+17)&&(t._mustRefresh=!1,t._refresh())}]);this._inFrame=!0,this._nextFrame=null,this._mustRefresh=!1,this._currentTime=e,this._beforeNextFramePromises=[],this._afterNextFramePromises=[],r.reduce((function(e,n){return e.then((function(){if(!t._isDestroyed)return n()}))}),Promise.resolve())},Ce.prototype.isPlayingFrame=function(){return this._inFrame||!!this._nextFrame},Ce.prototype.setFullScreen=function(t){var e=this,n=Promise.resolve();return t!==this._isFullScreen?(this._container&&(n=t?function(t){return Te()?Promise.resolve():t.requestFullscreen?t.requestFullscreen():t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?Promise.resolve(t.webkitRequestFullScreen()):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():Promise.resolve()}(this._container):Te()&&"undefined"!=typeof document?document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen?Promise.resolve(document.webkitCancelFullScreen()):document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():Promise.resolve():Promise.resolve()),n.then((function(){return new Promise((function(t){e.setTimeout((function(){e._isFullScreen=Te(),t(void 0)}),200)}))}))):n},Ce.prototype.isFullScreen=function(){return Te()},Ce.prototype.debounceBeforeFrame=function(t){function e(){var e=i;r=!1,i=[],t(),e.forEach((function(t){return t()}))}var n=this,r=!1,i=[];return function(){return new Promise((function(t){i.push(t),r||(r=!0,n.beforeNextFrame().then(e))}))}},Ce.prototype.destroy=function(){!function(){if(de--,pt&&0===de){var t=document.documentElement;t.removeEventListener(se,pe,!0),t.removeEventListener(ae,ge,!0),t.removeEventListener(ue,_e,!0),t.removeEventListener(ce,_e,!0)}}(),this.detachFromDom(),this.clearAllTimeouts(),this.stopFrames()},Ce);function Ce(t,e){var n=t.events,r=t.settings,i=void 0===e?{}:e,o=i.width,s=void 0===o?300:o,a=i.height,u=void 0===a?300:a,c=we.call(this)||this;return c._layers={},c._focus=!1,c._container=null,c._isFullScreen=!1,c._beforeNextFramePromises=[],c._afterNextFramePromises=[],c._refreshUntil=0,c._currentTime=Qt(),c._timeouts=[],c._isDestroyed=!1,c._onDetachDom=[],c._isRealBrowser=_t,c._isDocumentReady=vt,c._inFrame=!1,c._mustRefresh=!1,c._nextFrame=null,c._onWindowResize=function(){return c._resize()},c._onWindowFocus=function(){return c.refresh()},c._onFullscreenChange=function(){c._isFullScreen=Te()},c._events=n,c._settings=r,c._width=s,c._height=u,c._settings.register("minimumWidth",300,(function(){return c._resize()}),!1),c._settings.register("minimumHeight",300,(function(){return c._resize()}),!1),c._events.register([me.BEFORE_NEW_FRAME,me.NEW_FRAME,me.AFTER_NEW_FRAME,me.SET_CONTAINER,me.RESIZE]),c._onDetachDom=[],function(){if(pt&&0===de&&oe){var t=document.documentElement;t.addEventListener(se,pe,!0),t.addEventListener(ae,ge,!0),t.addEventListener(ue,_e,!0),t.addEventListener(ce,_e,!0)}de++}(),c.addWindowEventListener("resize",c._onWindowResize),c.addWindowEventListener("focus",c._onWindowFocus),c}function Te(){return"undefined"!=typeof document&&!!(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}var ke,Ie=(E(Oe,ke=xe),Oe.prototype.setProperty=function(t,e,n,r){var i=(void 0===r?{}:r).dispatch,o=void 0!==i&&i;this._setDataProperty(t.isNode,t._indexes,e,n,o),this._events.fire(me.SET_DATA,{elements:t})},Oe.prototype.getProperty=function(t,e){return this._getDataProperty(t.isNode,t._indexes,e)},Oe.prototype._setDataProperty=function(t,e,n,r,i){i&&"function"==typeof r&&(i=!1);for(var o=Me(n),s="function"==typeof r,a=t?this._nodeList:this._edgeList,u=t?this._nodeDataList:this._edgeDataList,c=function(t,e){for(var n=0;n<t.length;++n){var r=t[n],i=r.property;if(null===e&&null===i)return r;if(e&&i&&i.length===e.length){for(var o=!0,s=0;s<i.length;++s)if(i[s]!==e[s]){o=!1;break}if(o)return r}}var a={property:e&&e.slice(),indexes:[],previousValues:[],newValues:[],nodes:null,edges:null};return t.push(a),a}(t?this._nodeChanges:this._edgeChanges,o),l=0;l<e.length;++l){var d=e[l],h=u.get(d),f=a.get(d),p=i?r[l]:r,g=void 0,_=void 0;if(null===o)g=h,_=s?p(f):p,u.set(d,_);else{null==h&&(h={},u.set(d,h));for(var v=o.length,y=0;y<v;y++){var m=o[y],b=h[m];y<v-1?(null==b&&(b={},h[m]=b),h=b):(g=b,_=s?p(f):p,h[m]=_)}}c.indexes.push(d),c.previousValues.push(g),c.newValues.push(_)}this._scheduleEvents()},Oe.prototype._getDataProperty=function(t,e,n,r){var i=Me(n);r=r||new Array(e.length);for(var o=t?this._nodeDataList:this._edgeDataList,s=0;s<e.length;++s){var a=e[s],u=o.get(a),c=void 0;if(null!==i&&i.length)if(null==u)c=void 0;else for(var l=i.length,d=0;d<l&&u;++d)c=u=u[i[d]];else c=u;r[s]=c}return r},Oe.prototype._scheduleEvents=function(){this._shouldTriggerEvents=!0,this._dom.refresh()},Oe.prototype._triggerEvents=function(){var t=this._prepareEvtPayload(!0),e=this._prepareEvtPayload(!1);this._events.fire(me.UPDATE_NODE_DATA,t),this._events.fire(me.UPDATE_EDGE_DATA,e)},Oe.prototype._prepareEvtPayload=function(t){var e=t?this._graph.nodeList:this._graph.edgeList,n=t?"_nodeChanges":"_edgeChanges",r=[],i=this[n];this[n]=[];for(var o=[],s=0;s<i.length;++s){var a=i[s],u=a.indexes,c=a.property,l=a.newValues,d=a.previousValues;r=r.concat(u||[]),t?o.push({property:c,newValues:l,previousValues:d,nodes:e(u)}):o.push({property:c,newValues:l,previousValues:d,edges:e(u)})}return t?{nodes:e(r).dedupe(),isNode:t,changes:o}:{edges:e(r).dedupe(),isNode:t,changes:o}},Oe);function Oe(t){var e,n=t.dom,r=t.graph,i=t.events,o=ke.call(this)||this;return o._nodeChanges=[],o._edgeChanges=[],o._shouldTriggerEvents=!1,o._dom=n,o._graph=r,o._events=i,o._nodeDataList=o._graph.createAttribute(!0,{name:"data",storage:"any"}),o._edgeDataList=o._graph.createAttribute(!1,{name:"data",storage:"any"}),o._nodeList=o._graph.getNodeAttribute("object"),o._edgeList=o._graph.getEdgeAttribute("object"),o._events.register([me.SET_DATA,me.UPDATE_NODE_DATA,me.UPDATE_EDGE_DATA]),o._events.on(((e={})[me.ADD_NODES+" "+me.ADD_EDGES]=function(t){for(var e=t.nodes,n=t.edges,r=t.objects,i=e||n,s=i.isNode,a=i.size,u=i._indexes,c=o[s?"_nodeDataList":"_edgeDataList"],l=0;l<a;++l)c.set(u[l],r[l].data)},e[me.BEFORE_NEW_FRAME]=function(){o._shouldTriggerEvents&&(o._shouldTriggerEvents=!1,o._triggerEvents())},e)),o}function Me(t){return"string"==typeof t?t.split("."):N(t)?t:null}var Le={1:De(1),2:De(2),4:De(4),8:Re(),16:Re(),32:Re(),int8:Re(),int16:Re(),int32:Re(),float:Re(),any:Re()},Ne={1:Fe(1),2:Fe(2),4:Fe(4),8:Pe(),16:Pe(),32:Pe(),int8:Pe(),int16:Pe(),int32:Pe(),float:Pe(),any:Pe()};function Re(){return new Function("array","index","return array[index];")}function Pe(){return new Function("array","index","value","array[index] = value;")}function De(t){var e=8/t;return new Function("array","index","return (array[index / "+e+" | 0] >> ((index % "+e+") * "+t+")) & "+((1<<t)-1)+";")}function Fe(t){return new Function("array","index","value","\n    var offset = (index % "+8/t+") * "+t+";\n    var finalIndex = index / "+8/t+" | 0;\n    var orMask = value << offset;\n    var andMask = 255 - (("+(Math.pow(2,t)-1)+" - value) << offset);\n\n    array[finalIndex] = (array[finalIndex] & andMask) | orMask;")}var ze={get:function(t){return this._getArrayElt(this._buffer,t)},set:function(t,e){this._setArrayElt(this._buffer,t,e)}},Be={get:function(t){return this._byIndex[this._getArrayElt(this._buffer,t)]},set:function(t,e){var n=this._byName[e];void 0===n&&(n=this._nextIndex++,this._byIndex.push(e),this._getElementBitSize()>this._elementSize&&this.increaseElementSize(),this._byName[e]=n),this._setArrayElt(this._buffer,t,n)}},Ue=(Ve.prototype.getValues=function(){return Object.keys(this._byName||{})},Ve.prototype.getName=function(){return this._name},Ve.prototype.get=function(t){return this._get(t)},Ve.prototype.set=function(t,e){this._set(t,e)},Ve.prototype._get=function(t){return this._defaultValue},Ve.prototype._set=function(t,e){e!==this._defaultValue&&(this._initialize(),this._set(t,e))},Ve.prototype.setFallback=function(t){this._fallback=t,this.get=this._getWithFallback},Ve.prototype._getWithFallback=function(t){var e=this._get(t);return void 0===e&&this._fallback?this._fallback.get(t):e},Ve.prototype._initialize=function(){this._initialized=!0,this._buffer=He(this._nbElements,this._elementSize),this._get=this._methods.get,this._set=this._methods.set,"resource"!==this._storage&&this._defaultValue!==this._BASE_VALUE&&this._reset(0)},Ve.prototype.increaseNbElements=function(t){var e=je(t+1);if(!(e<=this._nbElements)){if(this._initialized)if("any"===this._elementSize)for(var n=this._nbElements;n<e;++n)this._buffer.push(this._defaultValue);else{var r=He(e,this._elementSize);r.set(this._buffer),this._buffer=r,"resource"!==this._storage&&this._defaultValue!==this._BASE_VALUE&&this._reset(this._nbElements)}this._nbElements=e}},Ve.prototype.increaseElementSize=function(){var t=this._elementSize;if("number"!=typeof t||32===t)throw new Error("FlexArray: cannot increase element size");var e=2*t,n=Le[e],r=Ne[e];if(this._initialized){var i=this._nbElements,o=this._getArrayElt,s=this._buffer,a=He(i,e);if(8<=t)a.set(s);else for(var u=0;u<i;++u)r(a,u,o(s,u));this._buffer=a}this._elementSize=e,this._getArrayElt=n,this._setArrayElt=r},Ve.prototype.buffer=function(){if(!this._buffer)throw new Error("FlexArray: buffer not instantiated");return this._buffer},Ve.prototype.elementBitSize=function(){return this._elementSize},Ve.prototype.capacity=function(){return this._nbElements},Ve.prototype.byteSize=function(){return this._nbElements*this._elementSize/8},Ve.prototype.isInitialized=function(){return this._initialized||this._fallback&&this._fallback.isInitialized()},Ve.prototype.getMultiple=function(t,e){var n=t.length;void 0===e&&(e=new Array(n));for(var r=0,i=n;r<i;++r)e[r]=this.get(t[r]);return e},Ve.prototype.fill=function(t,e){for(var n=0,r=t.length;n<r;++n)this.set(t[n],e)},Ve.prototype.setMultiple=function(t,e,n){if(n||!Array.isArray(e)&&!ArrayBuffer.isView(e))for(r=0,i=t.length;r<i;++r)this.set(t[r],e);else for(var r=0,i=t.length;r<i;++r)this.set(t[r],e[r])},Ve.prototype.reset=function(){return this._initialized&&this._reset(0),this},Ve.prototype._reset=function(t){var e="resource"===this._storage?0:this._defaultValue;if(this._buffer)if("number"!=typeof this._elementSize||8<=this._elementSize)this._buffer.fill(e,t);else{for(var n=8/this._elementSize,r=0,i=0;i<n;++i)r<<=this._elementSize,r+=e;if(void 0===t)this._buffer.fill(r);else{var o=t+(8-t%8);for(i=t;i<o;++i)this._setArrayElt(this._buffer,i,e);this._buffer.fill(r,o/8)}}},Ve.prototype._getElementBitSize=function(){if(this._nextIndex)return Math.pow(2,Math.ceil(Math.log2(Math.log2(this._nextIndex))))},Ve);function Ve(t){this._initialized=!1;var e,n,r=t.name,i=t.storage,o=t.size||0,s=(n=i,void 0===(e=t.default)&&"any"!==n&&"resource"!==n?0:e),a=Math.max(8,je(o+1)),u="resource"===i?1:i;this._name=r,this._storage=i,this._getArrayElt=Le[u],this._setArrayElt=Ne[u],this._elementSize=u,this._nbElements=a,this._fallback=null,this._byName=void 0,this._byIndex=void 0,this._nextIndex=void 0,this._defaultValue=s,this._BASE_VALUE="any"===i?void 0:0,this._methods=ze,this._initialized=!1,this._buffer=null,"resource"===i&&(this._methods=Be,this._byName={},this._byIndex=[],this._nextIndex=1,this._byName[s]=0,this._byIndex.push(s))}function je(t){for(var e=2;e<t;)e*=2;return e}function He(t,e){return"any"===e?new Array(t):"float"===e?new Float32Array(t):"int8"===e?new Int8Array(t):"int16"===e?new Int16Array(t):"int32"===e?new Int32Array(t):32===e?new Uint32Array(t):16===e?new Uint16Array(t):new Uint8Array(Math.ceil(t/8*e))}function Ge(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function qe(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return e}function We(t,e,n){return Math.max(e,Math.min(n,t))}function Ye(t,e,n){return t+(e-t)*n}function Xe(t,e,n){return t*(1-n)+e*n}function Ze(t){if(!t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n){var i=t[n];e<i&&(e=i)}return e}function Ke(t){if(!t.length)return 1/0;for(var e=t[0],n=1,r=t.length;n<r;++n){var i=t[n];i<e&&(e=i)}return e}function Je(t,e){return Math.log(t)/Math.log(e)}var Qe=($e.prototype.isBusy=function(){return this._busy},$e.prototype.markBusy=function(){return this._busy=!0,this},$e.prototype.sliceAndReset=function(){this._busy=!1;var t=this.slice(0,this._size);return this.reset(),t},$e.prototype.reset=function(){return this._size=0,this},$e.prototype.reserve=function(t){return t>this._capacity&&this._setCapacity(Ge(t)),this},$e.prototype._setCapacity=function(t){var e=new Uint32Array(t);e.set(this._buffer),this._buffer=e,this._capacity=t},$e.prototype.push=function(t){return this._size===this._capacity&&this._setCapacity(2*this._capacity),this._buffer[this._size++]=t,this},$e.prototype.pushUnchecked=function(t){return this._buffer[this._size++]=t,this},$e.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this._size),this._buffer.slice(t,e)},$e.prototype.getBuffer=function(){return this._buffer},$e.prototype.getLength=function(){return this._size},$e.prototype.getCapacity=function(){return this._capacity},$e.prototype.setLength=function(t){return this._size=t,this},$e.prototype.isEmpty=function(){return 0===this._size},$e);function $e(){this._buffer=new Uint32Array(4),this._capacity=4,this._size=0,this._busy=!1}var tn=(en.prototype.addElements=function(t){for(var e=[],n=0,r=t.length;n<r;++n){var i=t[n],o=this._idToIndex[i];void 0===o&&(o=this._getNextIndex(),this._idToIndex[i]=o,this._indexToId[o]=i),e.push(o)}for(var s=0,a=this._flexArrays;s<a.length;s++)a[s].increaseNbElements(this._nextIndex);for(var u=0,c=this._indexLists;u<c.length;u++)c[u].reserve(this._nextIndex);return new Uint32Array(e)},en.prototype.removeElements=function(t){for(var e=0,n=t.length;e<n;++e){var r=t[e],i=this._indexToId[r];void 0!==i&&(delete this._idToIndex[i],this._removeIndex(r))}},en.prototype.clear=function(){this._idToIndex=Object.create(null),this._indexToId=[void 0],this._nextIndex=1,this._freeIndexes=[];for(var t=0,e=this._flexArrays;t<e.length;t++)e[t].reset();for(var n=0,r=this._indexLists;n<r.length;n++)r[n].reset()},en.prototype.has=function(t){return void 0!==this._indexToId[t]},en.prototype.getIndex=function(t,e){void 0===e&&(e=!1);var n=this._idToIndex[t];if(void 0===n&&e)throw new Error(this._name+' id "'+t+'" not found');return n},en.prototype.createFlexArray=function(t){var e=t.name;if(e&&this._flexArraysByName[e])throw new Error(this._name+' flexArray "'+e+'" already exists');var n=t.default;void 0===n&&"any"!==t.storage&&"resource"!==t.storage&&(n=0);var r,i=this._nextIndex,o={storage:t.storage,size:i,name:e,default:n};return void 0===n&&"any"!==t.storage&&t.storage,r=new Ue(o),this._flexArrays.push(r),this._defaultValues.push(t.default),e&&(this._flexArraysByName[e]=r),r},en.prototype.getFlexArray=function(t){return this._flexArraysByName[t]},en.prototype.getAllFlexArrays=function(){return this._flexArraysByName},en.prototype.createIndexList=function(){var t=new Qe;return t.reserve(this._nextIndex),this._indexLists.push(t),t},en.prototype.getId=function(t){return this._indexToId[t]},en.prototype.getMaxIndex=function(){return this._nextIndex-1},en.prototype._removeIndex=function(t){this._indexesToBeFreed.push(t)},en.prototype._getNextIndex=function(){var t=this._freeIndexes.pop();return void 0===t&&(t=this._nextIndex++),t},en.prototype.freeIndexes=function(){for(var t=0,e=this._indexesToBeFreed;t<e.length;t++){var n=e[t];this._indexToId[n]=void 0,this._freeIndexes.push(n)}for(var r=0;r<this._flexArrays.length;++r)for(var i=this._flexArrays[r],o=this._defaultValues[r],s=0,a=this._indexesToBeFreed;s<a.length;s++)n=a[s],i.set(n,o);this._indexesToBeFreed=[]},en);function en(t){var e=this;this._nextIndex=1,this._freeIndexes=[],this._indexesToBeFreed=[],this._idToIndex=Object.create(null),this._indexToId=[void 0],this._flexArrays=[],this._defaultValues=[],this._flexArraysByName={},this._indexLists=[],this._name=t?"node":"edge",this._nextIndex=1,this._freeIndexes=[],this._indexesToBeFreed=[],this._idToIndex=Object.create(null),this._indexToId=[void 0],this._idFlexArray=new Ue({storage:"int32"}),this._idFlexArray.get=function(t){return e._indexToId[t]},this._idFlexArray.getMultiple=function(t){for(var n=new Array(t.length),r=0;r<t.length;++r)n[r]=e._indexToId[t[r]];return n},this._flexArraysByName.id=this._idFlexArray}var nn=(rn.prototype.addEntry=function(t){return void 0===t&&(t=this._nextIndex++),t>=this._capacity&&this._reserve(t+1),this._sizes[t]=0,t},rn.prototype.get=function(t){var e=this._sizes[t],n=this._MAX_LIST_SIZE*t;if(e<=this._MAX_LIST_SIZE){for(var r=0,i=this._constList.length=e;r<i;++r)this._constList[r]=this._buffer[n+r];return this._constList}if(e!==this._BIG_LIST)throw new Error("Table: "+t+" out of bounds ("+e+")");var o=this._buffer[n];return this._bigLists[o]},rn.prototype.size=function(t){var e=this._sizes[t];return e<=this._MAX_LIST_SIZE?e:this._bigLists[this._buffer[t*this._MAX_LIST_SIZE]].length},rn.prototype.sizes=function(t){for(var e=this._sizes,n=this._bigLists,r=this._buffer,i=this._MAX_LIST_SIZE,o=t.length,s=new Array(o),a=0;a<o;a++){var u=t[a],c=e[u];s[a]=c<=i?c:n[r[u*i]].length}return s},rn.prototype.addTo=function(t,e){var n=this._sizes[t],r=t*this._MAX_LIST_SIZE;if(n<this._MAX_LIST_SIZE)this._buffer[r+n]=e,this._sizes[t]=n+1;else if(n===this._BIG_LIST){var i=this._buffer[r];this._bigLists[i].push(e)}else{for(var o=new Array(this._MAX_LIST_SIZE),s=0;s<this._MAX_LIST_SIZE;++s)o[s]=this._buffer[r+s];o.push(e),this._bigLists.push(o),this._sizes[t]=this._BIG_LIST,this._buffer[r]=this._bigLists.length-1}return this},rn.prototype.removeFrom=function(t,e){return this.removeFromAndGetSize(t,e),this},rn.prototype.removeFromAndGetSize=function(t,e){var n=this._MAX_LIST_SIZE*t,r=this._sizes[t];if(r<=this._MAX_LIST_SIZE){for(var i=n,o=n+r;i<o;++i)if(this._buffer[i]===e)return--r,this._buffer[i]=this._buffer[o-1],this._sizes[t]=r}else if(r===this._BIG_LIST){var s=this._buffer[n],a=this._bigLists[s];if(-1!==(i=a.indexOf(e)))return a.splice(i,1),a.length}throw new Error('topology: Table: "removeFrom" failed, should not happen')},rn.prototype.reserve=function(t){return this._capacity<t&&this._reserve(t),this},rn.prototype._reserve=function(t){this._capacity=Math.pow(2,Math.ceil(Math.log2(t))),this._buffer=on(this._buffer,this._capacity*this._MAX_LIST_SIZE),this._sizes=on(this._sizes,this._capacity)},rn);function rn(){this._BIG_LIST=255,this._MAX_LIST_SIZE=8,this._capacity=8,this._buffer=new Uint32Array(this._capacity*this._MAX_LIST_SIZE),this._sizes=new Uint8Array(this._capacity),this._bigLists=[],this._nextIndex=0,this._constList=new Array(this._MAX_LIST_SIZE)}function on(t,e){var n=new t.constructor(e);return n.set(t),n}var sn="_visible",an="_data",un="_hovered",cn="_hoverExtremityHighlighted",ln="_selected",dn="_selectionExtremityHighlighted",hn="_dragged",fn="_rewirable",pn="_export",gn="_faded",_n="_transparent",vn="out",yn="both",mn=[ln,hn,dn,un,cn,fn,pn,gn,_n,"_visual_groups"],bn=["hover","zoom","panning","rotation","gesture","drag","selection","tooltip","user","interactions","resizing","rewiring","connectNodes","lasso"],xn=void 0,En=(wn.prototype.getAdjacentDirections=function(t){return this._neighborTable.get(t)},wn.prototype.getEdgeIndexesInDirection=function(t){return this._parallelTable.get(t)},wn.prototype.allocateNodes=function(t){this._neighborTable.reserve(t.length);for(var e=0;e<t.length;++e)this._neighborTable.addEntry(t[e])},wn.prototype.allocateEdges=function(t,e,n){this._parallelTable.reserve(Math.floor(t.length/2));for(var r=0;r<t.length;r++){var i=t[r],o=e[r],s=n[r];this._sourceList.set(i,o),this._targetList.set(i,s),this.addToAdjacencyList(i)}},wn.prototype.getExtremity=function(t,e){var n=t?this._sourceList:this._targetList;if(e.isList){for(var r=this._graph.acquireIndexList(!0),i=0;i<e._indexes.length;i++)r.push(n.get(e._indexes[i]));return this._graph.nodeList(r.sliceAndReset())}return this._graph.getObjectList(!0).get(n.get(e._index))},wn.prototype.setExtremities=function(t,e,n){for(var r=0;r<t.length;++r)this.removeFromAdjacencyList(t[r]);for(null!==e&&this._sourceList.setMultiple(t,e),null!==n&&this._targetList.setMultiple(t,n),r=0;r<t.length;++r)this.addToAdjacencyList(t[r])},wn.prototype.addToAdjacencyList=function(t){var e=this._sourceList.get(t),n=this._targetList.get(t),r=Sn(e,n),i=this._parallelEdgesIndex[r];i===xn&&(i=this._parallelTable.addEntry(),this._parallelEdgesIndex[r]=i,this._neighborTable.addTo(e,i),e!==n&&this._neighborTable.addTo(n,i)),this._parallelTable.addTo(i,t)},wn.prototype.removeFromAdjacencyList=function(t){var e=this._sourceList.get(t),n=this._targetList.get(t),r=Sn(e,n),i=this._parallelEdgesIndex[r];i!==xn&&0===this._parallelTable.removeFromAndGetSize(i,t)&&(this._neighborTable.removeFrom(e,i),e!==n&&this._neighborTable.removeFrom(n,i),this._parallelEdgesIndex[r]=xn)},wn.prototype.getParallelEdges=function(t,e){void 0===e&&(e={});for(var n=e.filter||"visible",r=this._graph.acquireIndexList(!1),i=this._graph.getFilter(!1,n),o=0;o<t._indexes.length;o++){var s=t._indexes[o],a=Sn(this._sourceList.get(s),this._targetList.get(s)),u=this._parallelEdgesIndex[a];if(u!==xn){var c=this._parallelTable.get(+u);if(c)for(var l=0,d=c;l<d.length;l++){var h=d[l];i(h)&&r.push(h)}}}return this._graph.edgeList(r.sliceAndReset())},wn.prototype.fastGetNodesAdjacentElements=function(t){for(var e=this._graph.acquireIndexList(!0),n=this._graph.acquireIndexList(!1),r=this._sourceList,i=this._targetList,o=0;o<t.length;o++)for(var s=t[o],a=0,u=this._neighborTable.get(s);a<u.length;a++){var c=u[a],l=this._parallelTable.get(c),d=l[0],h=r.get(d),f=i.get(d);e.push(h+f-s);for(var p=0,g=l;p<g.length;p++){var _=g[p];n.push(_)}}return{nodes:this._graph.nodeList(e.sliceAndReset()),edges:this._graph.edgeList(n.sliceAndReset())}},wn.prototype.fastGetEdgesAdjacentElements=function(t){for(var e=this._graph.acquireIndexList(!0),n=this._graph.acquireIndexList(!1),r=this._sourceList,i=this._targetList,o=0;o<t.length;o++){var s=t[o],a=r.get(s),u=i.get(s),c=Sn(a,u),l=this._parallelEdgesIndex[c];if(l!==xn){var d=this._parallelTable.get(+l);if(d)for(var h=0,f=d;h<f.length;h++){var p=f[h];n.push(p)}}e.push(a),e.push(u)}return{nodes:this._graph.nodeList(e.sliceAndReset()),edges:this._graph.edgeList(n.sliceAndReset())}},wn.prototype.getDeduper=function(t){return(t?this.nodeDeduper:this.edgeDeduper).reset()},wn.prototype.collectAdjacentEdges=function(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1);var o="in"===e,s=!(e===vn||o||i),a=this._graph.acquireIndexList(!1),u=this._graph.getFilter(!1,n),c=r?this.getDeduper(!1):this._fakeDeduper,l=this._fakeInvertedDeduper,d=this._sourceList,h=this._targetList;if(i){l=this.getDeduper(!0);for(var f=0;f<t.length;f++)l.set(t[f],1)}for(f=0;f<t.length;f++)for(var p=t[f],g=0,_=this._neighborTable.get(p);g<_.length;g++){var v=_[g],y=this._parallelTable.get(v);if(s)for(var m=0,b=y;m<b.length;m++)u(w=b[m])&&0===c.get(w)&&(a.push(w),c.set(w,1));else for(var x=0,E=y;x<E.length;x++){var w=E[x],S=d.get(w),A=h.get(w),C=S+A-p;o!=(A===p)&&S!==A||!u(w)||0!==c.get(w)||1!==l.get(C)||(a.push(w),c.set(w,1))}}return a.sliceAndReset()},wn.prototype.collectAdjacentNodes=function(t,e,n,r,i,o){void 0===r&&(r=!1);var s="in"!==e,a=e!==vn,u=this._graph.acquireIndexList(!0),c=this._graph.getFilter(!1,n),l=r?this.getDeduper(!0):this._fakeDeduper,d=this._sourceList,h=this._targetList;if(i)for(var f=0;f<i.length;f++){var p=i[f];u.push(p),l.set(p,1)}if(o)for(f=0;f<o.length;f++)p=o[f],l.set(p,1);for(f=0;f<t.length;f++)for(var g=t[f],_=0,v=this._neighborTable.get(g);_<v.length;_++)for(var y=v[_],m=0,b=this._parallelTable.get(y);m<b.length;m++){var x=b[m];if(c(x)){var E=d.get(x),w=h.get(x);if(p=E+w-g,(a&&g===w||s&&g===E)&&0===l.get(p)){u.push(p),l.set(p,1);break}}}return u.sliceAndReset()},wn.prototype.getAdjacentElements=function(t,e,n){void 0===n&&(n={});var r=n.direction||yn,i=n.filter||"visible",o=n.policy||"union",s=!!n.bothExtremities,a=n.includeSources;if(!0===a?o="include-sources":!1===a&&(o="exclude-sources"),t){var u="include-sources"===o?e:null,c="exclude-sources"===o?e:null;return this.collectAdjacentNodes(e,r,i,!0,u,c)}return this.collectAdjacentEdges(e,r,i,!0,s)},wn.prototype.getEdgesBetweenTwoNodes=function(t,e){var n=Sn(t,e),r=this._parallelEdgesIndex[n];if(r===xn)return new Uint32Array;var i=this._parallelTable.get(+r);return new Uint32Array(i)},wn.prototype.getConnectedComponents=function(t,e){var n,r=void 0===e?{}:e,i=r.filter,o=void 0===i?"visible":i,s=r.returnIds,a=void 0!==s&&s,u=r.internalIndexes,c=void 0!==u&&u,l=this._graph,d=[],h={},f=l.acquireIndexList(!0);"string"==typeof o?n=l.getFilter(!0,o):(n=o,o="visible");for(var p=0;p<t.length;p++)n(v=t[p])&&f.push(v);var g=f.sliceAndReset(),_={filter:o};for(p=0;p<g.length;p++){var v;if(!h[v=g[p]]){for(var y=[v],m=[];0!==y.length;){var b=y.pop();!h[b]&&n(b)&&(y.push.apply(y,this.getAdjacentElements(!0,new Uint32Array([b]),_)),h[b]=!0,m.push(b))}0<m.length&&d.push(m)}}if(a){var x=l.getNodeAttribute("id");for(p=0;p<d.length;p++)d[p]=x.getMultiple(d[p])}else if(!c)for(p=0;p<d.length;p++)d[p]=l.nodeList(new Uint32Array(d[p]));return d},wn.prototype.getAdjacencyList=function(t){for(var e=t.directed,n=t.ids,r=t.weight,i=t.nodes,o=e?vn:yn,s=new Array(i.length),a=this._graph,u=0;u<i.length;++u)s[u]=this.collectAdjacentEdges(new Uint32Array([i[u]]),o,"all");var c=a.getEdgeAttribute("source"),l=a.getEdgeAttribute("target"),d=a.getEdgeAttribute("width"),h=a.getNodeAttribute("id"),f=[],p="number"==typeof r,g=!("function"==typeof r||p||!r);for(u=0;u<s.length;u++){for(var _=s[u],v=i[u],y=_.length,m=new(n?Array:Uint32Array)(y),b=new Array(y),x=0;x<y;x++){var E=_[x],S=c.get(E),A=l.get(E),C=e||v===S?A:S;if(n&&(C=h.get(C)),m[x]=C,r){if(p&&(b[x]=r),"function"==typeof r){var T=a.getNode(S),k=a.getNode(A);b[x]=r(T,k)}g&&(b[x]=d.get(E)||1)}}var I=w({nodes:m,id:n?h.get(v):v},r&&{weights:b});f.push(I)}return f},wn.prototype.degrees=function(t,e){if("in"!==e&&e!==vn)return this._neighborTable.sizes(t);for(var n=new Array(t.length),r="in"===e,i=0,o=t.length;i<o;i++)n[i]=this._degree(t[i],r);return n},wn.prototype._degree=function(t,e){for(var n=this._neighborTable.get(t),r=this._sourceList,i=this._targetList,o=0,s=0;s<n.length;++s)for(var a=this._parallelTable.get(n[s]),u=0;u<a.length;++u){var c=a[u],l=r.get(c),d=i.get(c);if(e&&d===t||!e&&l===t){o+=1;break}}return o},wn.prototype.getDegree=function(t,e){for(var n=this._getDegreeOptions(e),r=n.direction,i=n.filter,o=new Array(t.length),s=new Uint32Array(1),a=0;a<t.length;++a)s[0]=t[a],o[a]=this.collectAdjacentNodes(s,r,i).length;return o},wn.prototype._getDegreeOptions=function(t){var e={direction:yn,filter:"visible"};return"string"==typeof t?e.direction=t:t&&("string"==typeof t.direction&&(e.direction=t.direction),"string"==typeof t.filter&&(e.filter=t.filter)),e},wn);function wn(t){this._neighborTable=new nn,this._parallelTable=new nn,this._parallelEdgesIndex=[],this._fakeDeduper={get:function(){return 0},set:function(){},reset:function(){return this}},this._fakeInvertedDeduper={get:function(){return 1},set:function(){},reset:function(){return this}},this._graph=t,this.nodeDeduper=t.createNodeAttribute({storage:1}),this.edgeDeduper=t.createEdgeAttribute({storage:1}),this._sourceList=t.getEdgeAttribute("source"),this._targetList=t.getEdgeAttribute("target")}function Sn(t,e){var n=t<e?t:e;return 67108864*n+(t+e-n)}function An(t){ft||console.warn(te()+" "+t)}var Cn=[];function Tn(t){"object"==typeof t&&null!==t||(t={});var e="function"==typeof t.data?t.data:function(t){return t};return{attributes:Array.isArray(t.attributes)?t.attributes:t.attributes||Cn,data:e}}function kn(t){1<t&&An("getData: more than one argument were specified, you probably want to use a single array argument instead of multiple arguments")}function In(t,e){for(var n=function(t){var n=e;Object.keys(n).forEach((function(e){var r=n[e];t.prototype[e]=function(t,n){return An('Deprecated method "'+e+'"; please use "'+r+'" instead.'),this[r](t,n)}}))},r=0,i=t;r<i.length;r++)n(i[r])}function On(t){var e=t.getFlexArray("removed"),n=t.getFlexArray("excluded"),r=t.getFlexArray("virtual");return{all:function(t){return 0===e.get(t)},visible:function(t){return 0===n.get(t)},raw:function(t){return 0===r.get(t)&&0===e.get(t)},_all:function(t){return!0}}}function Mn(t,e,n){return{all:Ln(n.all,t,e),visible:Ln(n.visible,t,e),raw:Ln(n.raw,t,e),_all:Ln(n._all,t,e)}}function Ln(t,e,n){var r=null;return{getList:function(){if(!r){var i=e(),o=n();o.reset();for(var s=1;s<=i;++s)t(s)&&o.push(s);r=o.sliceAndReset()}return r},invalidList:function(){r=null}}}function Nn(t){if(void 0===t)return Math.round(Math.random()*Number.MAX_SAFE_INTEGER);if("string"!=typeof t&&("number"!=typeof t||!isFinite(t)))throw new Error(t+" is not a valid id, expected string or number");return t}function Rn(t,e,n){for(var r=t.getObjectList(e.isNode),i=0;i<e._indexes.length;++i){var o=e._indexes[i];n(r.get(o),i)}}function Pn(t,e,n){for(var r=new Array(e.size),i=t.getObjectList(e.isNode),o=0;o<e._indexes.length;++o){var s=e._indexes[o],a=i.get(s);r[o]=n(a,o)}return r}function Dn(t,e,n){n=n||function(){return!0};for(var r=e.isNode,i=t.acquireIndexList(r),o=t.getObjectList(r),s=t.getListFactory(r),a=0;a<e._indexes.length;++a){var u=e._indexes[a],c=o.get(u);c&&n(c,a)&&i.push(u)}return s(i.sliceAndReset())}function Fn(t,e,n,r){var i=t.getListFactory(e.isNode);if(!n)return{valid:e,invalid:i()};for(var o=t.acquireIndexList(e.isNode),s=t.acquireIndexList(e.isNode),a=t.getObjectList(e.isNode),u=0;u<e._indexes.length;u++){var c=e._indexes[u],l=a.get(c);void 0!==l&&(n(l,r)?o:s).pushUnchecked(c)}return{valid:i(o.sliceAndReset()),invalid:i(s.sliceAndReset())}}function zn(t,e,n,r){for(var i=t.getObjectList(e.isNode),o=r,s=0;s<e._indexes.length;++s){var a=e._indexes[s];o=n(o,i.get(a),s)}return o}function Bn(t,e){for(var n=e.isNode,r=t.topology.getDeduper(n),i=t.acquireIndexList(n),o=t.getListFactory(n),s=0;s<e._indexes.length;s++){var a=e._indexes[s];0===r.get(a)&&(r.set(a,1),i.push(a))}return o(i.sliceAndReset())}function Un(t,e){for(var n=e.isNode,r=t.storage.fetch(n),i=r.getFlexArray("excluded"),o=r.getMaxIndex(),s=t.topology.getDeduper(n),a=t.acquireIndexList(n),u=t.getListFactory(n),c=0;c<e._indexes.length;c++)s.set(e._indexes[c],1);for(var l=1;l<=o;++l)0===s.get(l)&&0===i.get(l)&&a.push(l);return u(a.sliceAndReset())}function Vn(t,e,n){var r=t.getListFactory(e.isNode),i=new Uint32Array(e._indexes.length+n._indexes.length);return i.set(e._indexes),i.set(n._indexes,e._indexes.length),r(i)}function jn(t,e){return t.getObjectList(e.isNode).getMultiple(e._indexes)}function Hn(t,e){var n=t.getStorage(e.isNode);if(e.isList){for(var r=new Array(e.size),i=0;i<e._indexes.length;++i)r[i]=n.getId(e._indexes[i]);return r}return n.getId(e._index)}function Gn(t,e){return t.topology.getExtremity(!0,e)}function qn(t,e){return t.topology.getExtremity(!1,e)}function Wn(t,e,n){return t.getObjectList(e.isNode).get(e._indexes[n])}function Yn(t,e,n){var r=t.getListFactory(e.isNode),i=t.getObjectList(e.isNode),o=e._indexes.slice();return o.sort((function(t,e){var r=i.get(t),o=i.get(e);return n(r,o)})),r(o)}var Xn=new Uint32Array(1),Zn=(Object.defineProperty(Kn.prototype,"_indexes",{get:function(){return Xn[0]=this._index,Xn},enumerable:!0,configurable:!0}),Kn.prototype.setAttributes=function(t,e,n){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e,n)},Kn.prototype.setAttribute=function(t,e,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,n)},Kn.prototype.getAttributes=function(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)[0]},Kn.prototype.getAttribute=function(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)[0]},Kn.prototype.resetAttributes=function(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)},Kn.prototype.replaceOriginalAttributes=function(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)},Kn.prototype.getPreviousAttributes=function(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)[0]},Kn.prototype.isInView=function(t){return this._ogma.modules.locate.isElementInView(this,t)},Kn.prototype.getParallelEdges=function(t){return this._ogma.modules.graph.getParallelEdges(this,t)},Kn.prototype.fastGetAdjacentElements=function(){return this._ogma.modules.graph.fastGetEdgesAdjacentElements(this)},Kn.prototype.isVisible=function(){return!this.isExcluded()},Kn.prototype.isExcluded=function(){return this._ogma.modules.graph.isExcluded(this)[0]},Kn.prototype.setExcluded=function(t){return this._ogma.modules.graph.setExcluded(this,t)},Kn.prototype.setVisible=function(t){return this.setExcluded(!t)},Kn.prototype.toList=function(){return this._ogma.modules.graph.edgeList(new Uint32Array([this._index]))},Kn.prototype.getId=function(){return Hn(this._ogma.modules.graph,this)},Kn.prototype.getSource=function(){return Gn(this._ogma.modules.graph,this)},Kn.prototype.getTarget=function(){return qn(this._ogma.modules.graph,this)},Kn.prototype.getExtremities=function(){return this._ogma.modules.graph.nodeList(new Uint32Array([this.getSource()._index,this.getTarget()._index]))},Kn.prototype.setSource=function(t){this._ogma.modules.graph.setSource(this,t)},Kn.prototype.setTarget=function(t){this._ogma.modules.graph.setTarget(this,t)},Kn.prototype.slice=function(){return this.toList()},Kn.prototype.toJSON=function(t){void 0===t&&(t={});var e=Tn(t),n=e.attributes,r=e.data;return{id:this.getId(),source:this.getSource().getId(),target:this.getTarget().getId(),attributes:this.getAttributes(n),data:r(W(this.getData()))}},Kn.prototype.get=function(t){return 0===t?this:void 0},Kn.prototype.setSelected=function(t){this._ogma.modules.selection.setActive(this,t)},Kn.prototype.isSelected=function(){return this._ogma.modules.selection.areActive(this)},Kn.prototype.locate=function(t){return this._ogma.modules.locate.locateElements(this,t)},Kn.prototype.getBoundingBox=function(t){return this._ogma.modules.locate.getBoundingBox(this,t)},Kn.prototype.setData=function(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e),this},Kn.prototype.getData=function(t){return kn(arguments.length),this._ogma.modules.data.getProperty(this,t||null)[0]},Kn.prototype.addClass=function(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)},Kn.prototype.addClasses=function(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)},Kn.prototype.removeClass=function(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)},Kn.prototype.removeClasses=function(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)},Kn.prototype.hasClass=function(t){return this._ogma.modules.classes.hasSingleElementClass(t,this)},Kn.prototype.getClassList=function(){return this._ogma.modules.classes.getElementsClassList(this)[0]},Kn.prototype.getAnimationInformation=function(){return this._ogma.modules.graphics.getAnimationInformation(this)[0]},Kn.prototype.isVirtual=function(){return this._ogma.modules.transformations.isElementVirtual(this)},Kn.prototype.getTransformation=function(){return this._ogma.modules.transformations.getElementTransformation(this)},Kn.prototype.getMetaEdge=function(){return this._ogma.modules.grouping.getMetaElement(this)[0]},Kn.prototype.getSubEdges=function(){return this._ogma.modules.grouping.getSubElements(this)[0]},Kn.prototype.pulse=function(t){this._ogma.modules.pulses.pulse(this,t)},Kn);function Kn(t,e){this.size=1,this.isNode=!1,this.isList=!1,this._index=t,this._ogma=e}In([Zn],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute"});var Jn=(Object.defineProperty(Qn.prototype,"size",{get:function(){return this._indexes.length},enumerable:!0,configurable:!0}),Qn.prototype.setAttributes=function(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)},Qn.prototype.setAttribute=function(t,e,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,n)},Qn.prototype.getAttributes=function(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)},Qn.prototype.getAttribute=function(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)},Qn.prototype.resetAttributes=function(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)},Qn.prototype.replaceOriginalAttributes=function(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)},Qn.prototype.getPreviousAttributes=function(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)},Qn.prototype.getPreviousAttribute=function(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)},Qn.prototype.getParallelEdges=function(t){return this._ogma.modules.graph.getParallelEdges(this,t)},Qn.prototype.fastGetAdjacentElements=function(){return this._ogma.modules.graph.fastGetEdgesAdjacentElements(this)},Qn.prototype.isVisible=function(){return this.isExcluded().map((function(t){return!t}))},Qn.prototype.isExcluded=function(){return this._ogma.modules.graph.isExcluded(this)},Qn.prototype.setExcluded=function(t){return this._ogma.modules.graph.setExcluded(this,t)},Qn.prototype.setVisible=function(t){return this.setExcluded(!t)},Qn.prototype.toList=function(){return this},Qn.prototype.toArray=function(){return jn(this._ogma.modules.graph,this)},Qn.prototype.clone=function(){return this._ogma.modules.graph.edgeList(this._indexes.slice())},Qn.prototype.getId=function(){return Hn(this._ogma.modules.graph,this)},Qn.prototype.getSource=function(){return Gn(this._ogma.modules.graph,this)},Qn.prototype.getTarget=function(){return qn(this._ogma.modules.graph,this)},Qn.prototype.getExtremities=function(){return this.getSource().concat(this.getTarget())},Qn.prototype.get=function(t){return Wn(this._ogma.modules.graph,this,t)},Qn.prototype.forEach=function(t){Rn(this._ogma.modules.graph,this,t)},Qn.prototype.map=function(t){return Pn(this._ogma.modules.graph,this,t)},Qn.prototype.filter=function(t){return Dn(this._ogma.modules.graph,this,t)},Qn.prototype.reduce=function(t,e){return zn(this._ogma.modules.graph,this,t,e)},Qn.prototype.concat=function(t){return Vn(this._ogma.modules.graph,this,t)},Qn.prototype.dedupe=function(){return Bn(this._ogma.modules.graph,this)},Qn.prototype.slice=function(t,e){return this._ogma.modules.graph.edgeList(this._indexes.slice(t,e))},Qn.prototype.indexOf=function(t){return t instanceof Zn?this._indexes.indexOf(t._index):-1},Qn.prototype.includes=function(t){return-1!==this.indexOf(t)},Qn.prototype.sort=function(t){return Yn(this._ogma.modules.graph,this,t)},Qn.prototype.inverse=function(){return Un(this._ogma.modules.graph,this)},Qn.prototype.toJSON=function(t){return void 0===t&&(t={}),this.map((function(e){return e.toJSON(t)}))},Qn.prototype.setSelected=function(t){this._ogma.modules.selection.setActive(this,t)},Qn.prototype.isSelected=function(){return this._ogma.modules.selection.areActive(this)},Qn.prototype.locate=function(t){return this._ogma.modules.locate.locateElements(this,t)},Qn.prototype.getBoundingBox=function(t){return this._ogma.modules.locate.getBoundingBox(this,t)},Qn.prototype.setData=function(t,e){if(arguments.length<2&&(e=t,t=null),"function"!=typeof e&&!N(e))throw new Error("invalid argument "+e+"; expected array or function");return this._ogma.modules.data.setProperty(this,t,e,{dispatch:!0}),this},Qn.prototype.fillData=function(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e,{dispatch:!1}),this},Qn.prototype.getData=function(t){return kn(arguments.length),this._ogma.modules.data.getProperty(this,t||null)},Qn.prototype.addClass=function(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)},Qn.prototype.addClasses=function(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)},Qn.prototype.removeClass=function(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)},Qn.prototype.removeClasses=function(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)},Qn.prototype.hasClass=function(t){var e=this;return this.map((function(n){return e._ogma.modules.classes.hasSingleElementClass(t,n)}))},Qn.prototype.getClassList=function(){return this._ogma.modules.classes.getElementsClassList(this)},Qn.prototype.getAnimationInformation=function(){return this._ogma.modules.graphics.getAnimationInformation(this)},Qn.prototype.getMetaEdge=function(){return this._ogma.modules.grouping.getMetaElement(this)},Qn.prototype.getSubEdges=function(){return this._ogma.modules.grouping.getSubElements(this)},Qn.prototype.pulse=function(t){this._ogma.modules.pulses.pulse(this,t)},Qn);function Qn(t,e){this.isList=!0,this.isNode=!1,this._indexes=t,this._ogma=e}In([Jn],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute"});var $n="geo.latitude",tr="geo.longitude",er=85.0511287798,nr={latitudePath:"latitude",longitudePath:"longitude",maxZoomLevel:22,minZoomLevel:0,wrapCoordinates:!0,tileUrlTemplate:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",tileUrlSubdomains:"abc",attribution:null,attributionOptions:void 0,backgroundColor:"silver",opacity:1,duration:0,detectRetina:!1,disableNodeDragging:!0,tileBuffer:1,sizeRatio:1,tiles:{url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",subdomains:"abc",tms:!1,wms:!1},crs:void 0},rr={maxBoundsViscosity:1,worldCopyJump:!0,zoomControl:!1,attributionControl:!1};function ir(){return gt||void 0!==t&&!t.process}function or(t){return Math.log2(t)+1}function sr(t){return null!=t&&!isNaN(t)}function ar(t,e){return cr(t,e,"longitude")}function ur(t,e){return cr(t,e,"latitude")}function cr(t,e,n){if(isNaN(e))throw new TypeError("node "+t+": "+e+" is not a valid "+n)}var lr=Et().createElement("div");function dr(t,e,n,r){var i,o,s,a,u,c,l;o=e,s=n,a=r,u=(i=t).getAttribute(!0,s),c=i.getAttribute(!0,a),l=o._indexes,c.setMultiple(l,u.getMultiple(l))}var hr=new Uint32Array(1),fr=(Object.defineProperty(pr.prototype,"_indexes",{get:function(){return hr[0]=this._index,hr},enumerable:!0,configurable:!0}),pr.prototype.setAttributes=function(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)},pr.prototype.setAttribute=function(t,e,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,n)},pr.prototype.resetAttributes=function(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)},pr.prototype.getAttributes=function(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)[0]},pr.prototype.getAttribute=function(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)[0]},pr.prototype.getPosition=function(){return this.getAttributes(["x","y"])},pr.prototype.getPositionOnScreen=function(){return this._ogma.modules.camera.graphToScreenCoordinates(this.getPosition())},pr.prototype.isInScreen=function(){var t=this.getPositionOnScreen(),e=this._ogma.modules.camera;return 0<=t.x&&t.x<=e.width&&0<=t.y&&t.y<=e.height},pr.prototype.replaceOriginalAttributes=function(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)},pr.prototype.getPreviousAttributes=function(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)[0]},pr.prototype.getPreviousAttribute=function(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)},pr.prototype.isInView=function(t){return this._ogma.modules.locate.isElementInView(this,t)},pr.prototype.getAdjacentNodes=function(t){return this._ogma.modules.graph.getAdjacentNodes(this,t)},pr.prototype.getAdjacentEdges=function(t){return this._ogma.modules.graph.getAdjacentEdges(this,t)},pr.prototype.getDegree=function(t){return this._ogma.modules.graph.getDegree(this,t)[0]},pr.prototype.fastGetAdjacentElements=function(){return this._ogma.modules.graph.fastGetNodesAdjacentElements(this)},pr.prototype.getConnectedComponent=function(t){return this._ogma.modules.graph.getConnectedComponentByNode(this,t)[0]},pr.prototype.isVisible=function(){return!this.isExcluded()},pr.prototype.isExcluded=function(){return this._ogma.modules.graph.isExcluded(this)[0]},pr.prototype.setExcluded=function(t){return this._ogma.modules.graph.setExcluded(this,t)},pr.prototype.setVisible=function(t){return this.setExcluded(!t)},pr.prototype.toList=function(){return this._ogma.nodeList(new Uint32Array([+this._index]))},pr.prototype.getId=function(){return Hn(this._ogma.modules.graph,this)},pr.prototype.slice=function(){return this.toList()},pr.prototype.toJSON=function(t){void 0===t&&(t={});var e=Tn(t),n=e.attributes,r=e.data;return{id:this.getId(),attributes:this.getAttributes(n),data:r(W(this.getData()))}},pr.prototype.get=function(t){return 0===t?this:void 0},pr.prototype.setSelected=function(t){this._ogma.modules.selection.setActive(this,t)},pr.prototype.isSelected=function(){return this._ogma.modules.selection.areActive(this)},pr.prototype.locate=function(t){return this._ogma.modules.locate.locateElements(this,t)},pr.prototype.getBoundingBox=function(){return this._ogma.modules.locate.getBoundingBox(this)},pr.prototype.setData=function(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e),this},pr.prototype.getData=function(t){return kn(arguments.length),this._ogma.modules.data.getProperty(this,t||null)[0]},pr.prototype.addClass=function(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)},pr.prototype.addClasses=function(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)},pr.prototype.removeClass=function(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)},pr.prototype.removeClasses=function(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)},pr.prototype.hasClass=function(t){return this._ogma.modules.classes.hasSingleElementClass(t,this)},pr.prototype.getClassList=function(){return this._ogma.modules.classes.getElementsClassList(this)[0]},pr.prototype.getGeoCoordinates=function(){var t=this._ogma.modules.graph,e=t.getNodeAttribute($n).get(this._index),n=t.getNodeAttribute(tr).get(this._index);return{latitude:sr(e)?e:void 0,longitude:sr(n)?n:void 0}},pr.prototype.setGeoCoordinates=function(t){var e=this;return this.toList().setGeoCoordinates([t]).then((function(){return e}))},pr.prototype.getAnimationInformation=function(){return this._ogma.modules.graphics.getAnimationInformation(this)[0]},pr.prototype.isVirtual=function(){return this._ogma.modules.transformations.isElementVirtual(this)},pr.prototype.getTransformation=function(){return this._ogma.modules.transformations.getElementTransformation(this)},pr.prototype.getMetaNode=function(){return this._ogma.modules.grouping.getMetaElement(this)[0]},pr.prototype.getSubNodes=function(){return this._ogma.modules.grouping.getSubElements(this)[0]},pr.prototype.pulse=function(t){this._ogma.modules.pulses.pulse(this,t)},pr);function pr(t,e){this.size=1,this.isNode=!0,this.isList=!1,this._index=t,this._ogma=e}In([fr],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute",setPosition:"setAttributes"});var gr=(Object.defineProperty(_r.prototype,"size",{get:function(){return this._indexes.length},enumerable:!0,configurable:!0}),_r.prototype.setAttributes=function(t,e){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,t,e)},_r.prototype.setAttribute=function(t,e,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,t,e,n)},_r.prototype.getAttributes=function(t){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,t)},_r.prototype.getAttribute=function(t){return this._ogma.modules.individualAttributes.getSingleAttribute(this,t)},_r.prototype.resetAttributes=function(t,e){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,t,e)},_r.prototype.getPosition=function(){return this.getAttributes(["x","y"])},_r.prototype.getPositionOnScreen=function(){var t=this;return this.getPosition().map((function(e){return t._ogma.modules.camera.graphToScreenCoordinates(e)}))},_r.prototype.replaceOriginalAttributes=function(t,e){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,t,e)},_r.prototype.getPreviousAttributes=function(t){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,t)},_r.prototype.getPreviousAttribute=function(t){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,t)},_r.prototype.getAdjacentNodes=function(t){return this._ogma.modules.graph.getAdjacentNodes(this,t)},_r.prototype.getAdjacentEdges=function(t){return this._ogma.modules.graph.getAdjacentEdges(this,t)},_r.prototype.getDegree=function(t){return this._ogma.modules.graph.getDegree(this,t)},_r.prototype.getConnectedComponents=function(t){return this._ogma.modules.graph.getConnectedComponents(this,t)},_r.prototype.fastGetAdjacentElements=function(){return this._ogma.modules.graph.fastGetNodesAdjacentElements(this)},_r.prototype.isVisible=function(){return this.isExcluded().map((function(t){return!t}))},_r.prototype.isExcluded=function(){return this._ogma.modules.graph.isExcluded(this)},_r.prototype.setExcluded=function(t){return this._ogma.modules.graph.setExcluded(this,t)},_r.prototype.setVisible=function(t){return this.setExcluded(!t)},_r.prototype.toList=function(){return this},_r.prototype.toArray=function(){return jn(this._ogma.modules.graph,this)},_r.prototype.clone=function(){return this._ogma.modules.graph.nodeList(this._indexes.slice())},_r.prototype.getId=function(){return Hn(this._ogma.modules.graph,this)},_r.prototype.get=function(t){return Wn(this._ogma.modules.graph,this,t)},_r.prototype.forEach=function(t){Rn(this._ogma.modules.graph,this,t)},_r.prototype.map=function(t){return Pn(this._ogma.modules.graph,this,t)},_r.prototype.filter=function(t){return Dn(this._ogma.modules.graph,this,t)},_r.prototype.reduce=function(t,e){return zn(this._ogma.modules.graph,this,t,e)},_r.prototype.concat=function(t){return Vn(this._ogma.modules.graph,this,t)},_r.prototype.dedupe=function(){return Bn(this._ogma.modules.graph,this)},_r.prototype.slice=function(t,e){return this._ogma.modules.graph.nodeList(this._indexes.slice(t,e))},_r.prototype.indexOf=function(t){return t instanceof fr?this._indexes.indexOf(t._index):-1},_r.prototype.includes=function(t){return-1!==this.indexOf(t)},_r.prototype.inverse=function(){return Un(this._ogma.modules.graph,this)},_r.prototype.sort=function(t){return Yn(this._ogma.modules.graph,this,t)},_r.prototype.toJSON=function(t){return void 0===t&&(t={}),this.map((function(e){return e.toJSON(t)}))},_r.prototype.setSelected=function(t){this._ogma.modules.selection.setActive(this,t)},_r.prototype.isSelected=function(){return this._ogma.modules.selection.areActive(this)},_r.prototype.locate=function(t){return this._ogma.modules.locate.locateElements(this,t)},_r.prototype.getBoundingBox=function(){return this._ogma.modules.locate.getBoundingBox(this)},_r.prototype.setData=function(t,e){if(arguments.length<2&&(e=t,t=null),"function"!=typeof e&&!N(e))throw new Error("invalid argument "+e+"; expected array or function");return this._ogma.modules.data.setProperty(this,t,e,{dispatch:!0}),this},_r.prototype.fillData=function(t,e){return arguments.length<2&&(e=t,t=null),this._ogma.modules.data.setProperty(this,t,e,{dispatch:!1}),this},_r.prototype.getData=function(t){return kn(arguments.length),this._ogma.modules.data.getProperty(this,t||null)},_r.prototype.addClass=function(t,e){return this._ogma.modules.classes.addClassesToElements([t],this,e)},_r.prototype.addClasses=function(t,e){return this._ogma.modules.classes.addClassesToElements(t,this,e)},_r.prototype.removeClass=function(t,e){return this._ogma.modules.classes.removeClassesFromElements([t],this,e)},_r.prototype.removeClasses=function(t,e){return this._ogma.modules.classes.removeClassesFromElements(t,this,e)},_r.prototype.hasClass=function(t){var e=this;return this.map((function(n){return e._ogma.modules.classes.hasSingleElementClass(t,n)}))},_r.prototype.getClassList=function(){return this._ogma.modules.classes.getElementsClassList(this)},_r.prototype.getGeoCoordinates=function(){for(var t=this._ogma.modules.graph,e=new Array(this._indexes.length),n=t.getNodeAttribute($n).getMultiple(this._indexes),r=t.getNodeAttribute(tr).getMultiple(this._indexes),i=0,o=this._indexes.length;i<o;i++)e[i]={latitude:n[i],longitude:r[i]};return e},_r.prototype.setGeoCoordinates=function(t){var e=this,n=this._ogma.modules.geo,r=this._ogma.modules.graph,i=this.getId(),o=this._indexes,s=new Array(o.length),a=new Array(o.length);if(null===t&&(t=new Array(o.length).fill(null)),t.length!==o.length)throw new RangeError("You must provide coordinates for each node in the NodeList");for(var u=0,c=o.length;u<c;u++){var l=t[u]||{latitude:void 0,longitude:void 0},d=l.latitude,h=l.longitude,f=i[u];null==d&&null==h?d=h=void 0:(ur(f,d),ar(f,h)),s[u]=d,a[u]=h}return this.setData(n.latitudePath,s),this.setData(n.longitudePath,a),r.getNodeAttribute($n).setMultiple(o,s),r.getNodeAttribute(tr).setMultiple(o,a),this._ogma.modules.transformations.refresh().then((function(){return e}))},_r.prototype.getAnimationInformation=function(){return this._ogma.modules.graphics.getAnimationInformation(this)},_r.prototype.getMetaNode=function(){return this._ogma.modules.grouping.getMetaElement(this)},_r.prototype.getSubNodes=function(){return this._ogma.modules.grouping.getSubElements(this)},_r.prototype.pulse=function(t){this._ogma.modules.pulses.pulse(this,t)},_r);function _r(t,e){this.isList=!0,this.isNode=!0,this._indexes=t,this._ogma=e}function vr(t,e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),mr(t,e,[n],r).get(0)}function yr(t,e,n,r){if(void 0===r&&(r={}),r.batchSize){for(var i=[],o=0;o<n.length;o+=r.batchSize)i.push(n.slice(o,o+r.batchSize));var s=e?t.nodeList():t.edgeList();return i.reduce((function(n,i){var o;return n.then((function(e){return o=e,t.getDom().afterNextFrame()})).then((function(){return mr(t,e,i,r)})).then((function(t){return o.concat(t)}))}),Promise.resolve(s))}return Promise.resolve(mr(t,e,n,r))}function mr(t,e,n,r){t.setIndexFreeStep(0);for(var i=t.storage.fetch(e),o=[],s=[],a=[],u=[],c=new Set,l=r.virtual,d=void 0!==l&&l,h=0,f=n;h<f.length;h++){var p=f[h];if("object"!=typeof p||null===p||Array.isArray(p))throw new Error(p+" is not a valid "+(e?"node":"edge"));var g=Nn(p.id);if(!i.getIndex(g,!1)&&!c.has(g)&&(s.push(g),o.push(p),c.add(g),!e)){var _=p,v=t.getExtremityIndex(g,_.source,"source"),y=t.getExtremityIndex(g,_.target,"target");a.push(v),u.push(y)}}var m=i.addElements(s);e?t.topology.allocateNodes(m):t.topology.allocateEdges(m,a,u);for(var b=i.getFlexArray("object"),x=i.getFlexArray("excluded"),E=i.getFlexArray("removed"),w=i.getFlexArray("virtual"),S=e?t.node:t.edge,A=e?t.nodeList:t.edgeList,C=t.getCacheLists(e),T=A(m),k=0;k<m.length;k++){var I=m[k];b.set(I,S(I))}return x.setMultiple(m,0),E.setMultiple(m,0),w.setMultiple(m,d?1:0),C.visible.invalidList(),C.all.invalidList(),C._all.invalidList(),d||C.raw.invalidList(),0!==T.size&&(e?t.fireEvent(me.ADD_NODES,{virtual:d,objects:o,nodes:T}):t.fireEvent(me.ADD_EDGES,{virtual:d,objects:o,edges:T})),T}In([gr],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute",setPosition:"setAttributes"});var br,xr=(E(Er,br=xe),Er.prototype.onMounted=function(t,e){if(e.graph){var n=e.graph,r=n.nodes,i=n.edges;r&&this.addNodes(r),i&&this.addEdges(i)}},Er.prototype.createIndexList=function(t){return this.storage.fetch(t).createIndexList()},Er.prototype.setIndexFreeStep=function(t){this._indexFreeStep=t},Er.prototype.getDom=function(){return this._dom},Er.prototype.acquireIndexList=function(t){var e=t?this._nodeIndexLists:this._edgeIndexLists,n=e.find((function(t){return!t.isBusy()}));return n||(n=this.createIndexList(t),e.push(n)),n.markBusy(),n},Er.prototype.getObjectList=function(t){return t?this._nodes:this._edges},Er.prototype.getListFactory=function(t){return t?this.nodeList:this.edgeList},Er.prototype.getStorage=function(t){return t?this.storage.nodes:this.storage.edges},Er.prototype.getFilter=function(t,e){var n=t?this._nodeFilters:this._edgeFilters;return n[e]||n.visible},Er.prototype.fireEvent=function(t,e){this._events.fire(t,e)},Er.prototype.getCacheLists=function(t){return t?this._nodeCacheLists:this._edgeCacheLists},Er.prototype._resolvePromises=function(){var t=this._promisesToResolve;this._promisesToResolve=[],t.forEach((function(t){return t()}))},Er.prototype._initialize=function(){var t=this;this._nodeCacheLists=Mn((function(){return t.getNodeMaxIndex()}),(function(){return t.acquireIndexList(!0)}),this._nodeFilters),this._edgeCacheLists=Mn((function(){return t.getEdgeMaxIndex()}),(function(){return t.acquireIndexList(!1)}),this._edgeFilters),this.topology=new En(this),this._resolvePromises()},Er.prototype.getNodeMaxIndex=function(){return this.storage.nodes.getMaxIndex()},Er.prototype.getEdgeMaxIndex=function(){return this.storage.edges.getMaxIndex()},Er.prototype.isExcluded=function(t){return this.storage.fetch(t.isNode).getFlexArray("excluded").getMultiple(t._indexes)},Er.prototype.setExcluded=function(t,e){for(var n=e?1:0,r=t.isNode,i=this.storage.fetch(r),o=i.getFlexArray("excluded"),s=i.getFlexArray("removed"),a=this.acquireIndexList(r),u=this.getListFactory(r),c=0;c<t._indexes.length;c++){var l=t._indexes[c],d=o.get(l),h=s.get(l);n!==d&&0===h&&a.push(l)}var f=a.sliceAndReset();if(f.length){this.getCacheLists(t.isNode).visible.invalidList();var p=u(f);o.setMultiple(f,n),this._events.fire(me.EXCLUDED_STATE_CHANGE,{elements:p,value:e})}},Er.prototype.addNode=function(t,e){return vr(this,!0,t,e)},Er.prototype.addEdge=function(t,e){return vr(this,!1,t,e)},Er.prototype.addNodes=function(t,e){return yr(this,!0,t,e)},Er.prototype.addEdges=function(t,e){return yr(this,!1,t,e)},Er.prototype.getExtremityIndex=function(t,e,n){if(e instanceof fr)return e._index;var r=this.storage.nodes.getIndex(e);if(!r)throw new Error("addEdge(s): invalid "+n+' for edge "'+t+'"; node "'+e+'" does not exist');return r},Er.prototype.getNodes=function(t){return this.getElements(!0,t)},Er.prototype.getEdges=function(t){return this.getElements(!1,t)},Er.prototype.getElements=function(t,e){var n=t?this.nodeList:this.edgeList,r=t?gr:Jn,i=t?fr:Zn;if(e&&"string"!=typeof e){var o=this.acquireIndexList(t),s=this.storage.fetch(t);if(e instanceof i)o.push(e._index);else if(N(e))for(var a=0,u=e;a<u.length;a++){var c=u[a];c instanceof i?o.push(c._index):(f=s.getIndex(c))&&o.push(f)}else if(e instanceof r)for(var l=this.getFilter(t,"all"),d=e,h=0;h<d._indexes.length;h++){var f;l(f=d._indexes[h])&&o.push(f)}return n(o.sliceAndReset())}var p=e||"visible",g=this.getCacheLists(t)[p];if(!g)throw new Error('getNodes/getEdges: unexpected argument "'+p+'"');return n(g.getList())},Er.prototype.getNode=function(t){return this._getElement(!0,t)},Er.prototype.getEdge=function(t){return this._getElement(!1,t)},Er.prototype._getElement=function(t,e){if(e instanceof(t?fr:Zn))return e;var n=this.getStorage(t),r=this.getObjectList(t),i=n.getIndex(e);return i?r.get(i):void 0},Er.prototype.clear=function(){this._events.fire(me.CLEAR_GRAPH),this.storage.nodes.clear(),this.storage.edges.clear(),this._initialize()},Er.prototype.createAttribute=function(t,e){return this.storage.fetch(t).createFlexArray(e)},Er.prototype.createNodeAttribute=function(t){return this.createAttribute(!0,t)},Er.prototype.createEdgeAttribute=function(t){return this.createAttribute(!1,t)},Er.prototype.getAttribute=function(t,e){return this.storage.fetch(t).getFlexArray(e)},Er.prototype.getAttributes=function(t,e){var n=this;return e.map((function(e){return n.getAttribute(t,e)}))},Er.prototype.getNodeAttribute=function(t){return this.storage.nodes.getFlexArray(t)},Er.prototype.getNodeAttributes=function(t){return this.getAttributes(!0,t)},Er.prototype.getEdgeAttribute=function(t){return this.storage.edges.getFlexArray(t)},Er.prototype.getEdgeAttributes=function(t){return this.getAttributes(!1,t)},Er.prototype.getAllNodeAttributes=function(){return this.storage.nodes.getAllFlexArrays()},Er.prototype.getAllEdgeAttributes=function(){return this.storage.edges.getAllFlexArrays()},Er.prototype.setSource=function(t,e){var n=this.getNode(e);n&&this.topology.setExtremities(t._indexes,n._indexes,null)},Er.prototype.setTarget=function(t,e){var n=this.getNode(e);n&&this.topology.setExtremities(t._indexes,null,n._indexes)},Er.prototype.getParallelEdges=function(t,e){return void 0===e&&(e={}),this.topology.getParallelEdges(t,e)},Er.prototype.getEdgesBetweenTwoNodes=function(t,e){return this.edgeList(this.topology.getEdgesBetweenTwoNodes(t._index,e._index))},Er.prototype.getAdjacentDirections=function(t){return this.topology.getAdjacentDirections(t)},Er.prototype.getEdgeIndexesInDirection=function(t){return this.topology.getEdgeIndexesInDirection(t)},Er.prototype.fastGetNodesAdjacentElements=function(t){return this.topology.fastGetNodesAdjacentElements(t._indexes)},Er.prototype.fastGetEdgesAdjacentElements=function(t){return this.topology.fastGetEdgesAdjacentElements(t._indexes)},Er.prototype.getAdjacentNodes=function(t,e){return this.nodeList(this.topology.getAdjacentElements(!0,t._indexes,e))},Er.prototype.getAdjacentEdges=function(t,e){return this.edgeList(this.topology.getAdjacentElements(!1,t._indexes,e))},Er.prototype.getDegree=function(t,e){return this.topology.getDegree(t._indexes,e)},Er.prototype.degrees=function(t,e){return this.topology.degrees(t,e)},Er.prototype.getAdjacencyList=function(t){var e=void 0===t?{}:t,n=e.directed,r=void 0!==n&&n,i=e.internalIndexes,o=void 0!==i&&i,s=e.weight,a=void 0===s?1:s,u=e.nodes,c=e.indexes;return this.topology.getAdjacencyList({directed:r,weight:a,ids:!o,nodes:c||this.getNodes(u)._indexes})},Er.prototype.getConnectedComponents=function(t,e){return this.topology.getConnectedComponents(t._indexes,e)},Er.prototype.getConnectedComponentByNode=function(t,e){return this.topology.getConnectedComponents(t._indexes,e)},Er);function Er(t,e){var n=t.dom,r=t.events,i=br.call(this)||this;return i.storage={nodes:new tn(!0),edges:new tn(!1),fetch:function(t){return t?this.nodes:this.edges}},i._promisesToResolve=[],i._indexFreeStep=0,i._nodeIndexLists=[],i._edgeIndexLists=[],i._onNewFrame=function(){1===i._indexFreeStep?i._indexFreeStep=2:2===i._indexFreeStep&&(i.storage.nodes.freeIndexes(),i.storage.edges.freeIndexes(),i._indexFreeStep=0)},i._events=r,i._dom=n,i._events.register([me.ADD_NODES,me.ADD_EDGES,me.EXCLUDED_STATE_CHANGE],[me.CLEAR_GRAPH,me.BEFORE_REMOVE_NODES,me.REQUEST_ELEMENTS_TO_DELETE,me.REMOVE_NODES,me.BEFORE_REMOVE_EDGES,me.REMOVE_EDGES]),[{name:"excluded",storage:1,default:1},{name:"removed",storage:1,default:1},{name:"virtual",storage:1,default:0}].forEach((function(t){i.createNodeAttribute(t),i.createEdgeAttribute(t)})),i.node=e.node,i.edge=e.edge,i.nodeList=e.nodeList,i.edgeList=e.edgeList,i._nodes=i.createAttribute(!0,{name:"object",storage:"any"}),i._edges=i.createAttribute(!1,{name:"object",storage:"any"}),i.createAttribute(!1,{name:"source",storage:32}),i.createAttribute(!1,{name:"target",storage:32}),i._nodeFilters=On(i.storage.nodes),i._edgeFilters=On(i.storage.edges),i._initialize(),i._events.on(me.NEW_FRAME,i._onNewFrame),i}var wr=["AliceBlue","#F0F8FF","AntiqueWhite","#FAEBD7","Aqua","#00FFFF","Aquamarine","#7FFFD4","Azure","#F0FFFF","Beige","#F5F5DC","Bisque","#FFE4C4","Black","#000000","BlanchedAlmond","#FFEBCD","Blue","#0000FF","BlueViolet","#8A2BE2","Brown","#A52A2A","BurlyWood","#DEB887","CadetBlue","#5F9EA0","Chartreuse","#7FFF00","Chocolate","#D2691E","Coral","#FF7F50","CornflowerBlue","#6495ED","Cornsilk","#FFF8DC","Crimson","#DC143C","Cyan","#00FFFF","DarkBlue","#00008B","DarkCyan","#008B8B","DarkGoldenRod","#B8860B","DarkGray","#A9A9A9","DarkGrey","#A9A9A9","DarkGreen","#006400","DarkKhaki","#BDB76B","DarkMagenta","#8B008B","DarkOliveGreen","#556B2F","DarkOrange","#FF8C00","DarkOrchid","#9932CC","DarkRed","#8B0000","DarkSalmon","#E9967A","DarkSeaGreen","#8FBC8F","DarkSlateBlue","#483D8B","DarkSlateGray","#2F4F4F","DarkSlateGrey","#2F4F4F","DarkTurquoise","#00CED1","DarkViolet","#9400D3","DeepPink","#FF1493","DeepSkyBlue","#00BFFF","DimGray","#696969","DimGrey","#696969","DodgerBlue","#1E90FF","FireBrick","#B22222","FloralWhite","#FFFAF0","ForestGreen","#228B22","Fuchsia","#FF00FF","Gainsboro","#DCDCDC","GhostWhite","#F8F8FF","Gold","#FFD700","GoldenRod","#DAA520","Gray","#808080","Grey","#808080","Green","#008000","GreenYellow","#ADFF2F","HoneyDew","#F0FFF0","HotPink","#FF69B4","IndianRed","#CD5C5C","Indigo","#4B0082","Ivory","#FFFFF0","Khaki","#F0E68C","Lavender","#E6E6FA","LavenderBlush","#FFF0F5","LawnGreen","#7CFC00","LemonChiffon","#FFFACD","LightBlue","#ADD8E6","LightCoral","#F08080","LightCyan","#E0FFFF","LightGoldenRodYellow","#FAFAD2","LightGray","#D3D3D3","LightGrey","#D3D3D3","LightGreen","#90EE90","LightPink","#FFB6C1","LightSalmon","#FFA07A","LightSeaGreen","#20B2AA","LightSkyBlue","#87CEFA","LightSlateGray","#778899","LightSlateGrey","#778899","LightSteelBlue","#B0C4DE","LightYellow","#FFFFE0","Lime","#00FF00","LimeGreen","#32CD32","Linen","#FAF0E6","Magenta","#FF00FF","Maroon","#800000","MediumAquaMarine","#66CDAA","MediumBlue","#0000CD","MediumOrchid","#BA55D3","MediumPurple","#9370DB","MediumSeaGreen","#3CB371","MediumSlateBlue","#7B68EE","MediumSpringGreen","#00FA9A","MediumTurquoise","#48D1CC","MediumVioletRed","#C71585","MidnightBlue","#191970","MintCream","#F5FFFA","MistyRose","#FFE4E1","Moccasin","#FFE4B5","NavajoWhite","#FFDEAD","Navy","#000080","OldLace","#FDF5E6","Olive","#808000","OliveDrab","#6B8E23","Orange","#FFA500","OrangeRed","#FF4500","Orchid","#DA70D6","PaleGoldenRod","#EEE8AA","PaleGreen","#98FB98","PaleTurquoise","#AFEEEE","PaleVioletRed","#DB7093","PapayaWhip","#FFEFD5","PeachPuff","#FFDAB9","Peru","#CD853F","Pink","#FFC0CB","Plum","#DDA0DD","PowderBlue","#B0E0E6","Purple","#800080","RebeccaPurple","#663399","Red","#FF0000","RosyBrown","#BC8F8F","RoyalBlue","#4169E1","SaddleBrown","#8B4513","Salmon","#FA8072","SandyBrown","#F4A460","SeaGreen","#2E8B57","SeaShell","#FFF5EE","Sienna","#A0522D","Silver","#C0C0C0","SkyBlue","#87CEEB","SlateBlue","#6A5ACD","SlateGray","#708090","SlateGrey","#708090","Snow","#FFFAFA","SpringGreen","#00FF7F","SteelBlue","#4682B4","Tan","#D2B48C","Teal","#008080","Thistle","#D8BFD8","Tomato","#FF6347","Turquoise","#40E0D0","Violet","#EE82EE","Wheat","#F5DEB3","White","#FFFFFF","WhiteSmoke","#F5F5F5","Yellow","#FFFF00","YellowGreen","#9ACD32"],Sr=/^rgba?\((\d+),?\s*(\d+),?\s*(\d+),?\s*((\d+)?\.?\d+)*\)$/;function Ar(t,e){void 0===e&&(e=[0,0,0,0]);var n=Sr.exec(t);return n?(e[0]=parseInt(n[1])/255,e[1]=parseInt(n[2])/255,e[2]=parseInt(n[3])/255,e[3]=void 0===n[4]?1:parseFloat(n[4]),e):null}function Cr(t){return t<16?"0"+t.toString(16):t.toString(16)}function Tr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return"rgba("+(256*e|0)+","+(256*n|0)+","+(256*r|0)+","+(void 0===i?1:i)+")"}function kr(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1]:null}var Ir=[0,0,0,0],Or=(Mr.prototype.parseColor=function(t){var e=this._colorByName.get(t);if(void 0===e){var n=t+"",r=("#"===n.charAt(0)?kr:Ar)(n);this._colorByName.set(t,r),e=r}return e},Mr.prototype.toHexa=function(t){var e=this.parseColor(t);if(!e)return null;var n=e[0],r=e[1],i=e[2];return"#"+Cr(255*n)+Cr(255*r)+Cr(255*i)},Mr.prototype.rgbaToRgb=function(t){var e=1,n=t;return n&&Ar(t,Ir)&&(n="rgb("+255*Ir[0]+","+255*Ir[1]+","+255*Ir[2]+")",e=parseFloat(Ir[3].toString())),{color:n,opacity:e}},Mr);function Mr(){this._colorByName=new Map,this._colorByName.set(null,[0,0,0,0]),this._colorByName.set("transparent",[0,0,0,0]);for(var t=0;t<wr.length;t+=2){var e=wr[t].toLowerCase(),n=wr[t+1];this._colorByName.set(e,kr(n))}}var Lr,Nr=((Lr={})[2]="image",Lr[4]="piechart",Lr[3]="text",Lr[5]="icon",Lr[6]="badge",Lr),Rr=(Pr.prototype.reset=function(){this._init_()},Pr.prototype._init_=function(){this._mustUpdate=!0,this._nextPatternId=1,this._patterns=[null],this._patternsByHash={},this._pixelRatio=1,this._nullPattern={id:-1,type:1,attributes:{}}},Pr.prototype._increaseNextId=function(){var t=this._nextPatternId++;for(t%256==255&&(t=this._nextPatternId++);this._patterns.length<=t;)this._patterns.push(void 0);return t},Pr.prototype._createPattern=function(t){var e=t.type,n=t.attributes,r={id:this._increaseNextId(),type:e,attributes:this._cloneAttributes(e,n)};return this._patterns[r.id]=r,this._mustUpdate=!0,r},Pr.prototype._cloneAttributes=function(t,e){return 2===t?{image:e.image,scaled:e.scaled,duplicated:e.duplicated}:3===t||5===t||6===t?{font:e.font,size:e.size,style:e.style,text:e.text,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,align:e.align||"center",offset:e.offset||0}:4===t&&e.colors?{colors:e.colors,colorArray:e.colors.split(";").map((function(t){return t.trim()}))}:{}},Pr.prototype.getPatternList=function(){return this._patterns.filter((function(t){return t}))},Pr.prototype.update=function(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1)},Pr.prototype.setPixelRatio=function(t){t!==this._pixelRatio&&(this._pixelRatio=t,this._mustUpdate=!0)},Pr.prototype.getPixelRatio=function(){return this._pixelRatio},Pr.prototype.notifyUpdate=function(){this._mustUpdate=!0},Pr.prototype.getIdFromDefinition=function(t){var e=t.type,n=t.attributes,r=3===e||5===e||6===e,i=0;return e&&1!==e&&7!==e&&(2!==e||n.image)&&(!r||n.text&&n.font)&&(i=this._addPattern(t),3===e&&"normal"===n.style&&(n.style="bold",this._addPattern(t))),i},Pr.prototype._addPattern=function(t){var e=this._getPatternHash(t),n=this._patternsByHash[e];return n||(65500<this._nextPatternId?An("maximum number of pattern exceeded"):(n=this._createPattern(t).id,this._patternsByHash[e]=n)),n},Pr.prototype._getPatternHash=function(t){var e=t.type,n=t.attributes,r=[Nr[e]];return 2===e?r.push(n.scaled?"scaled":"non-scaled",n.duplicated?"duplicated":"non-duplicated",n.image.src||n.image.toDataURL()):3===e?r.push(n.text,n.font,n.style,n.size,n.align||"center",n.offset||0):5===e||6===e?r.push(n.text,n.font,n.style,n.size,n.paddingLeft,n.paddingTop):r.push(n.colors),r.join("+")},Pr.prototype.getDefinitionFromId=function(t){if(t&&this._patterns[t]){var e=this._patterns[t];if(e)return e}return this._nullPattern},Pr.prototype.getVersion=function(){return this._version},Pr);function Pr(){this._pixelRatio=1,this._nextPatternId=1,this._version=0,this._init_()}var Dr=Math.round(Math.log2(512)),Fr=Math.round(Math.log2(128)),zr=Dr+Fr,Br=Math.round(Math.sqrt(16)),Ur=128*Br,Vr=256;function jr(t){return t.map((function(t){var e=t.x,n=t.y,r=t.r;return{x:e,y:n,r:void 0===r?0:r}}))}var Hr=(Gr.prototype.register=function(t,e){var n=e.getDistanceFromStrokeVertically,r=e.getDistanceFromStrokeHorizontally,i=e.points,o=e.hole,s=e.isSimple;if(!this._byName[t]){for(var a=s?1:8,u=s?7:15;this._byId[a];)a+=1;if(u<a)throw new Error("max number of shape exceeded");var c={id:a,name:t,getDistanceFromStrokeVertically:n,getDistanceFromStrokeHorizontally:r,points:jr(i.slice()),hole:o?jr(o.slice()):null,isSimple:!!s};return this._mustUpdate=!0,this._byId[a]=c,this._byName[t]=c}},Gr.prototype.getIdFromName=function(t){return this._byName[t].id},Gr.prototype.getNameFromId=function(t){var e=this._byId[t];return e?e.name:""},Gr.prototype.getDefinitionFromName=function(t){return this._byName[t]},Gr.prototype.update=function(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1)},Gr.prototype.getVersion=function(){return this._version},Gr.prototype.getShapeList=function(){return this._byId.filter((function(t){return t}))},Gr);function Gr(){this._version=0,this._mustUpdate=!0,this._byName={},this._byId=new Array(16)}var qr=(Wr.prototype.update=function(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1,this._isFullyAllocated&&this._nbCellsFreed===this._nbCellsAllocated&&(this._isFullyFreed=!0))},Wr.prototype.allocate=function(t){var e=-1;return!this._isFullyAllocated&&this._nbCellsAllocated+t<=this._capacity?(e=this._nbCellsAllocated,this._nbCellsAllocated+=t,this._mustUpdate=!0):this._isFullyAllocated=!0,e},Wr.prototype.free=function(t,e){for(var n=0;n<e;n++){var r=(t+n)*this._elementSize;if(0===this._dataView.getUint16(r))throw new Error('"free": invalid address provided');this._dataView.setUint16(r,0)}this._mustUpdate=!0,this._nbCellsFreed+=e},Wr.prototype.triggerUpdate=function(){this._mustUpdate=!0},Wr.prototype.isEmpty=function(){return this._nbCellsFreed===this._nbCellsAllocated},Wr.prototype.isFullyFreed=function(){return this._isFullyFreed},Wr.prototype.getId=function(){return this._id},Wr.prototype.getDepth=function(){return this._depth},Wr.prototype.getElementType=function(){return this._elementType},Wr.prototype.getDataView=function(){return this._dataView},Wr.prototype.getByteArray=function(){return this._byteArray},Wr.prototype.getElementSize=function(){return this._elementSize},Wr.prototype.isAnimated=function(){return this._animated},Wr.prototype.getCapacity=function(){return this._capacity},Wr.prototype.getSize=function(){return this._nbCellsAllocated},Wr.prototype.getNbSideElementsPerMainElement=function(){return this._nbSideElementsPerMainElement},Wr.prototype.hasSideData=function(){return 0<this._nbSideElementsPerMainElement},Wr.prototype.getSideDataView=function(){return this._sideDataView},Wr.prototype.getSideByteArray=function(){return this._sideByteArray},Wr.prototype.getTotalSideElementsSize=function(){return this._totalSideElementsSize},Wr.prototype.getVersion=function(){return this._version},Wr.prototype.getStencilUsage=function(){return this._stencilUsage},Wr);function Wr(t){var e=t.elementSize,n=t.sideElementSize,r=t.nbSideElementsPerMainElement,i=t.id,o=t.depth,s=t.elementType,a=t.animated,u=t.stencilUsage;this._version=0,this._nbCellsAllocated=0,this._nbCellsFreed=0,this._isFullyAllocated=!1,this._isFullyFreed=!1,this._mustUpdate=!0,this._capacity=512,this._id=i,this._depth=o,this._elementType=s,this._animated=a,this._stencilUsage=u,this._elementSize=e,this._sideElementSize=n,this._nbSideElementsPerMainElement=r,this._totalSideElementsSize=r*n,this._byteCapacity=this._capacity*this._elementSize,this._byteArray=new Uint8Array(this._byteCapacity),this._dataView=new DataView(this._byteArray.buffer),this._sideByteCapacity=this._capacity*this._totalSideElementsSize,this._sideByteArray=new Uint8Array(this._sideByteCapacity),this._sideDataView=new DataView(this._sideByteArray.buffer)}var Yr=(Xr.prototype.reset=function(){this._init_()},Xr.prototype._init_=function(){this._buffersByDepth=new Array(100),this._buffersById=[],this._buffersByAscendingDepth=[],this._buffersByDescendingDepth=[],this._mustUpdate=!0},Xr.prototype._fillBlockInfo=function(t,e,n,r){return this._blockInfo.buffer=t,this._blockInfo.offset=e,this._blockInfo.size=n,this._blockInfo.address=r,this._blockInfo},Xr.prototype._createBuffer=function(t,e,n,r,i){var o=e?128:56,s=this._buffersById.length,a=new qr({elementSize:o,sideElementSize:6,nbSideElementsPerMainElement:r,id:s,depth:n,elementType:t,animated:e,stencilUsage:i});return this._buffersById.push(a),a},Xr.prototype.getBlockInfo=function(t){return this._getBlockInfo(t)},Xr.prototype._getBlockInfo=function(t){return this._fillBlockInfo(this._buffersById[t>>zr],(t>>Fr)%512,t%128,t)},Xr.prototype.allocateBlock=function(t,e,n,r,i,o,s){var a=function(t,e){for(var n=0;n<t;)n+=8;return n}(o);this._mustUpdate=!0;var u=null,c=-1;if(t){var l=this._getBlockInfo(t),d=l.buffer,h=l.offset,f=l.size,p=l.size===i,g=d.getDepth()===r,_=d.getElementType()===e,v=d.isAnimated()===n,y=d.getNbSideElementsPerMainElement()===a,m=d.getStencilUsage()===s;p&&g&&_&&v&&y&&m?(d.triggerUpdate(),u=d,c=h):d.free(h,f)}if(-1===c){var b=+n,x=a/8,E=this._buffersByDepth[r]||Array(2),w=(this._buffersByDepth[r]=E)[b]||[],S=(E[b]=w)[e]||Array(16),A=(w[e]=S)[x]||Array(4),C=(S[x]=A)[s]||[],T=(A[s]=C)[C.length-1];T&&(c=(u=T).allocate(i)),-1===c&&(c=(u=this._createBuffer(e,n,r,a,s)).allocate(i),C.push(u))}var k=((u.getId()<<Dr)+c<<Fr)+i;return this._fillBlockInfo(u,c,i,k)},Xr.prototype.freeBlock=function(t){if(t){this._mustUpdate=!0;var e=this._getBlockInfo(t);e.buffer.free(e.offset,e.size)}return 0},Xr.prototype._sortBuffersByDepth=function(){for(var t=[],e=0;e<this._buffersByDepth.length;e++){var n=this._buffersByDepth[e];if(n)for(var r=0;r<n.length;r++){var i=n[r];if(i)for(var o=0;o<i.length;o++){var s=i[o];if(s)for(var a=0;a<s.length;a++){var u=s[a];if(u)for(var c=0;c<u.length;c++){var l=u[c];if(l)for(var d=0;d<l.length;d++){var h=l[d];h.update(),h.isFullyFreed()?(this._buffersById[h.getId()]=void 0,l.splice(d,1),--d):t.push(h)}}}}}}this._buffersByAscendingDepth=t,this._buffersByDescendingDepth=t.slice().reverse()},Xr.prototype.update=function(){this._mustUpdate&&(this._sortBuffersByDepth(),this._version+=1,this._mustUpdate=!1)},Xr.prototype.getBuffers=function(){return this._buffersById},Xr.prototype.getBuffersByAscendingDepth=function(){return this._buffersByAscendingDepth},Xr.prototype.getBuffersByDescendingDepth=function(){return this._buffersByDescendingDepth},Xr.prototype.getVersion=function(){return this._version},Xr);function Xr(){this._version=0,this._version=0,this._blockInfo={buffer:null,offset:0,size:0,address:0},this._init_()}var Zr=(Object.defineProperty(Kr.prototype,"__dummy",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(Kr.prototype,"parentNode",{get:function(){return null},enumerable:!0,configurable:!0}),Kr.prototype.getContext=function(t){return"2d"===t?this.__context:null},Kr.prototype.toDataURL=function(t){return void 0===t&&(t="png"),"data:image/"+t+";base64,"},Kr.prototype.addEventListener=function(){},Kr.prototype.removeEventListener=function(){},Kr.prototype.getBoundingClientRect=function(){return{left:0,top:0,bottom:0,right:0,width:this.width,height:this.height}},Kr);function Kr(){this.style={},this.width=300,this.height=150,this.__context=new Jr,this.style={},this.width=300,this.height=150}var Jr=(Object.defineProperty(Qr.prototype,"font",{set:function(t){var e=t.match(/\d+/);e&&(this._fontSize=parseFloat(e[0]))},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"fillStyle",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"textBaseline",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"textAlign",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"strokeStyle",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"lineWidth",{set:function(t){},enumerable:!0,configurable:!0}),Qr.prototype.fill=function(){},Qr.prototype.stroke=function(){},Qr.prototype.clearRect=function(){},Qr.prototype.fillRect=function(){},Qr.prototype.strokeRect=function(){},Qr.prototype.beginPath=function(){},Qr.prototype.closePath=function(){},Qr.prototype.moveTo=function(){},Qr.prototype.lineTo=function(){},Qr.prototype.rect=function(){},Qr.prototype.arc=function(){},Qr.prototype.save=function(){},Qr.prototype.restore=function(){},Qr.prototype.clip=function(){},Qr.prototype.translate=function(){},Qr.prototype.rotate=function(){},Qr.prototype.fillText=function(){},Qr.prototype.setLineDash=function(){},Qr.prototype.quadraticCurveTo=function(){},Qr.prototype.bezierCurveTo=function(){},Qr.prototype.drawImage=function(){},Qr.prototype.measureText=function(t){return{width:t.length*Math.ceil(.625*this._fontSize)}},Qr.prototype.getImageData=function(){return{width:0,height:0,data:new Uint8ClampedArray(0)}},Qr);function Qr(){this._fontSize=10}var $r=M("canvas")||M("canvas-prebuilt");function ti(){if(pt)return document.createElement("canvas");if($r){var t=null;return(t="createCanvas"in $r?$r.createCanvas(300,150):new $r(300,150)).style={},t}return new Zr}function ei(t,e,n,r){void 0===n&&(n=t.width),void 0===r&&(r=t.height),e.clearRect(0,0,n,r)}function ni(t,e,n,r){void 0===r&&(r=""),t.font=r+" "+n+"px "+e}function ri(){return null!==ii(ti(),{})}function ii(t,e){var n=t.getContext("webgl",e);return(n=n||t.getContext("experimental-webgl",e))||null}function oi(t){return void 0===t&&(t={}),t.pieceId=0,t.shape="",t.x1=0,t.y1=0,t.x2=0,t.y2=0,t.rectWidthOrSourceRadiusScaled=0,t.rectWidthOrSourceRadiusFixed=0,t.rectHeightOrTargetRadiusScaled=0,t.rectHeightOrTargetRadiusFixed=0,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern=t.pattern||{type:0,attributes:{}},t.pattern.type=0,t.opacity=1,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=0,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isBodyTriangle=!1,t.isSelfLoop=!1,t.isText=!1,t.adjustTextAngle=!1,t.isBadge=!1,t.unusedFlag2=!1,t.unusedFlag3=!1,t}function si(t,e,n,r){t.width=e*r,t.height=n*r,t.style.width=e+"px",t.style.height=n+"px"}var ai=(ui.createInitData=function(){return null},ui.getName=function(){return null},ui.isAvailable=function(){return!0},ui.prototype.getDomElement=function(){return null},ui.prototype._initCanvas=function(t){t.style.touchAction="none"},ui.prototype.export=function(t){return Promise.resolve()},ui.prototype.extractElement=function(t,e){return this._memoryManager.extractGenericElement(t,e,this._scales)},ui.prototype._compareDimensions=function(t,e,n){return(t!==this._width||e!==this._height||n!==this._pixelRatio)&&(this._width=t,this._height=e,this._pixelRatio=n,!0)},ui.prototype._compareView=function(t,e,n,r){return(t!==this._viewX||e!==this._viewY||n!==this._viewZoom||r!==this._viewAngle)&&(this._viewX=t,this._viewY=e,this._viewZoom=n,this._viewAngle=r,this._viewAngleCos=Math.cos(r),this._viewAngleSin=Math.sin(r),!0)},ui.prototype._compareCurrentTime=function(t){return t!==this._currentTime&&(this._currentTime=t,!0)},ui.prototype._compareBackgroundColor=function(t,e){return(t!==this._backgroundColor||e!==this._renderBackground)&&(this._renderBackground=e,this._backgroundColor=t,this._backgroundRgba=this._colorManager.parseColor(this._backgroundColor),!0)},ui.prototype._compareShapes=function(){return this._shapesVersion!==this._shapeManager.getVersion()&&(this._shapesVersion=this._shapeManager.getVersion(),!0)},ui.prototype._comparePatterns=function(){return this._patternsVersion!==this._patternManager.getVersion()&&(this._patternsVersion=this._patternManager.getVersion(),!0)},ui.prototype._compareBoundaries=function(){return this._boundariesVersion!==this._boundariesManager.getVersion()&&(this._boundariesVersion=this._boundariesManager.getVersion(),!0)},ui.prototype._compareTexts=function(){return this._textsVersion!==this._textManager.getVersion()&&(this._textsVersion=this._textManager.getVersion(),!0)},ui.prototype._compareIsDisplayableBuffer=function(t){return this._isBufferDisplayable!==t&&(this._isBufferDisplayable=t,!0)},ui.prototype._compareHideImages=function(t){return this._hideImages!==t&&(this._hideImages=t,!0)},ui.prototype.renderFrame=function(t){var e=t.x,n=t.y,r=t.zoom,i=t.angle,o=t.width,s=t.height,a=t.pixelRatio,u=t.backgroundColor,c=t.currentTime,l=t.isBufferDisplayable,d=t.hideImages,h=t.renderBackground,f=this._compareShapes(),p=this._comparePatterns(),g=this._compareBoundaries(),_=this._compareTexts(),v=this._compareDimensions(o,s,a),y=this._compareView(e,n,r,i),m=this._compareCurrentTime(c),b=this._compareBackgroundColor(u,h),x=this._compareIsDisplayableBuffer(l),E=this._compareHideImages(d);if(g){var w=this._boundariesManager,S=this._scales;S.bytesToActualCoord=1,S.bytesToActualScaledSize=w.maxScaledSize/65535,S.bytesToActualMinVisibleSize=w.maxMinVisibleSize/15,S.bytesToActualSymbolicSize=w.maxSymbolicSize/255,S.bytesToActualDashLength=w.maxDashLength/3,S.bytesToActualGapLength=w.maxGapLength/3,S.bytesToActualPatternScale=w.maxPatternScale/255}this._firstFrame&&this._beforeFirstFrame(),this._render({shapesChanged:f,patternsChanged:p,boundariesChanged:g,textsChanged:_,dimensionsChanged:v,viewChanged:y,currentTimeChanged:m,backgroundColorChanged:b,isBufferDisplayableChanged:x,isHideImagesChanged:E}),this._firstFrame&&(this._afterFirstFrame(),this._firstFrame=!1)},ui.prototype._render=function(t){},ui.prototype._beforeFirstFrame=function(){},ui.prototype._afterFirstFrame=function(){},ui.prototype.destroy=function(){},ui.prototype.ensureAnimationsReady=function(){},ui.prototype.getImageData=function(){return null},ui.prototype.setViewportClipping=function(t){},ui);function ui(t){var e=t.bufferList,n=t.patternManager,r=t.boundariesManager,i=t.colorManager,o=t.shapeManager,s=t.textManager,a=t.easingManager,u=t.memoryManager;this._firstFrame=!0,this._width=0,this._height=0,this._pixelRatio=0,this._viewX=0,this._viewY=0,this._viewZoom=0,this._viewAngle=0,this._viewAngleCos=0,this._viewAngleSin=0,this._currentTime=0,this._scales={bytesToActualCoord:0,bytesToActualScaledSize:0,bytesToActualMinVisibleSize:0,bytesToActualSymbolicSize:0,bytesToActualDashLength:0,bytesToActualGapLength:0,bytesToActualPatternScale:0},this._shapesVersion=0,this._patternsVersion=0,this._boundariesVersion=0,this._textsVersion=0,this._backgroundRgba=[1,1,1,0],this._renderBackground=!1,this._hideImages=!1,this._genericObject={valid:!1,id:void 0,end:{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:0,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,unusedFlag2:!1,unusedFlag3:!1},start:{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:0,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,unusedFlag2:!1,unusedFlag3:!1},animation:{duration:0,beginTime:-1,easing:"linear"}},this._littleEndian=U(),this._bufferList=e,this._shapeManager=o,this._patternManager=n,this._boundariesManager=r,this._textManager=s,this._colorManager=i,this._easingManager=a,this._memoryManager=u}var ci,li,di="#define D3D9_FIX 0\n#define ANIMATED 0\nprecision highp float;\nprecision mediump int;\nattribute /*ushort*/ vec4 a_final_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature;\nattribute /*ushort*/ vec4 a_final_patternId_fillRGBA_strokeRGBA_patternRGBA;\nattribute /*float*/ vec4 a_final_x1_y1_x2_y2;\nattribute /*ushort*/ vec4 a_final_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed;\nattribute /*ushort*/ vec4 a_final_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed;\nattribute /*ushort*/ vec4 a_final_offsetScaled_offsetFixed_paddingTop_paddingLeft;\nattribute /*ushort*/ vec4 a_prev_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature;\nattribute /*ushort*/ vec4 a_prev_patternId_fillRGBA_strokeRGBA_patternRGBA;\nattribute /*float*/ vec4 a_prev_x1_y1_x2_y2;\nattribute /*ushort*/ vec4 a_prev_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed;\nattribute /*ushort*/ vec4 a_prev_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed;\nattribute /*ushort*/ vec4 a_prev_offsetScaled_offsetFixed_paddingTop_paddingLeft;\nattribute /*float*/ vec2 a_animationBeginTime_animationDuration; \nattribute /*ushort*/ vec4 a_animationEasing; \nattribute /*ushort*/ vec3 a_text_charId_charOffsetXY; \nattribute vec3 a_vertexInfo;\nuniform float u_viewWidth;\nuniform float u_viewHeight;\nuniform float u_viewX;\nuniform float u_viewY;\nuniform float u_viewAngle;\nuniform float u_viewZoom;\nuniform float u_currentTime;\nuniform float u_pixelRatio;\nuniform sampler2D u_patternInfoTexture;\nvarying vec4 a;\nvarying vec4 b;\nvarying vec4 c;\nvarying vec2 d;\nvarying vec2 e;\n#if D3D9_FIX\n#else\nvarying float j;\nvarying vec2 k;\nvarying vec2 l;\nvarying vec2 m;\nvarying float n;\nvarying float o;\nvarying vec2 p;\nvarying vec2 q;\nvarying float r;\nvarying float s;\n#endif\nconst float EPSILON = 0.000001;\nconst float INFINITY = 10000000.0;\nconst float PI = 3.14159265359;\nconst float P2_17 = 131072.0;\nconst float P2_16 = 65536.0;\nconst float P2_14 = 32768.0;\nconst float P2_12 = 4096.0;\nconst float P2_8 = 256.0;\nconst float P2_7 = 128.0;\nconst float P2_6 = 64.0;\nconst float P2_5 = 32.0;\nconst float P2_4 = 16.0;\nconst float P2_3 = 8.0;\nconst float P2_2 = 4.0;\nconst float P2_1 = 2.0;\nuniform float BYTES_TO_COORD;\nuniform float BYTES_TO_SCALED_SIZE;\nuniform float BYTES_TO_MIN_VISIBLE_SIZE;\nuniform float BYTES_TO_SYMBOLIC_SIZE;\nuniform float BYTES_TO_CURVATURE;\nuniform float BYTES_TO_DASH_LENGTH;\nuniform float BYTES_TO_GAP_LENGTH;\nuniform float BYTES_TO_PATTERN_SCALE;\nuniform float PATTERN_POSITION_GRANULARITY;\nuniform float PATTERN_INFO_TEXTURE_SIZE;\nuniform float PATTERN_NEAREST_TEXTURE_SIZE;\nuniform float PATTERN_LINEAR_TEXTURE_SIZE;\nuniform float PATTERN_LINEAR_SDF_TEXTURE_SIZE;\nuniform float PATTERN_MIPMAP_TEXTURE_SIZE;\nconst float BYTES_TO_OFFSET_ANGLE = 0.0;\nconst float BYTES_TO_COLOR = 0.0;\nconst float SDF_FONT_SIZE = 0.0;\nconst float SDF_GAMMA = 0.0;\nconst float CURVATURE_RATIO = 0.0;\nconst float PATTERN_MARGIN = 0.0;\nconst float TEXT_WIDTH_MULTIPLIER = 0.0;\nconst float TEXT_HEIGHT_MULTIPLIER = 0.0;\nconst float SELF_LOOP_CURVATURE_MULTIPLIER = 0.0;\nconst float EDGE_ARROW_SIZE_RATIO = 0.0;\nconst float NB_PIECES_PER_CURVE = 0.0;\nconst float PIECE_NODE_COMPONENT = 0.0;\nconst float PIECE_EDGE_BODY = 0.0;\nconst float PIECE_EDGE_HEAD = 0.0;\nconst float PIECE_EDGE_TAIL = 0.0;\nconst float PIECE_EDGE_TEXT = 0.0;\nconst float MAX_TEXT_SIZE = 0.0;\nconst float BYTES_TO_TEXT_OFFSET_X = 0.0;\nconst float BYTES_TO_TEXT_OFFSET_Y = 0.0;\nconst float FILTER_NEAREST = 0.0;\nconst float FILTER_LINEAR = 0.0;\nconst float FILTER_LINEAR_SDF = 0.0;\nconst float FILTER_MIPMAP = 0.0;\nconst float SHAPE_TEXTURE_SIZE = 0.0;\nconst float SIMPLE_SHAPE_SAMPLING_SIZE = 0.0;\nconst float COMPLEX_SHAPE_SAMPLING_SIZE = 0.0;\nconst float SHAPE_SAMPLING_BUFFER_RATIO = 0.0;\nconst float MAX_NB_SHAPES = 0.0;\nconst float FIRST_COMPLEX_SHAPE_ID = 0.0;\nconst float SELF_LOOP_TO_CIRCLE_APPROX = 0.0;\nconst float NB_SHAPES_BY_SIDE = SHAPE_TEXTURE_SIZE / COMPLEX_SHAPE_SAMPLING_SIZE;\nconst float SHAPE_FILL_PERCENT = 1.0 - SHAPE_SAMPLING_BUFFER_RATIO;\nconst float T_STEP_PER_CURVE_PIECE = 1.0 / NB_PIECES_PER_CURVE;\nconst float HEAD_TAIL_PX_ADJUST = 1.5;\nconst float SDF_SMOOTH_FACTOR = 2.0;\nstruct nv {\nfloat nw;\nfloat nx;\nfloat ny;\nfloat nz;\nfloat oa;\nfloat ob;\nfloat oc;\nfloat od;\n};\nstruct oe {\nfloat of;\nfloat og;\nfloat oh;\nfloat oi;\nfloat oj;\nfloat ok;\nfloat ol;\n};\nstruct om {\nfloat nw;\nfloat nx;\nfloat ny;\nfloat nz;\nfloat oa;\nfloat ob;\nfloat oc;\nfloat od;\nfloat of;\nfloat og;\nfloat oh;\nfloat oi;\nfloat oj;\nfloat ok;\nfloat ol;\nfloat bu;\nfloat on;\nfloat oo;\nfloat op;\nfloat oq;\nfloat or;\nfloat os;\nvec4 bd;\nvec4 be;\nvec4 bz;\nfloat ot;\nfloat ou;\nfloat ov;\nfloat ow;\nfloat ox;\nfloat oy;\nfloat oz;\nfloat pa;\nfloat pb;\nfloat pc;\nfloat pd;\nfloat pe;\nfloat pf;\nfloat pg;\nfloat ph;\nfloat pi;\nfloat pj;\nfloat pk;\nfloat pl;\n};\nstruct pm {\nfloat pn;\nvec2 po;\nvec4 bd;\nvec4 be;\nfloat bu;\nfloat pp;\nfloat pq;\nfloat ny;\nfloat pr;\nvec2 ps;\nfloat pt;\nvec2 bi;\nvec2 pu;\nvec2 pv;\nfloat pw;\nfloat px;\nvec4 bz;\nvec2 py;\nfloat pz;\nfloat qa;\nvec2 qb;\nvec2 qc;\nvec2 qd;\n};\nfloat qe(float ly, float qf, float qg) {\nfloat qh = mod(ly, pow(2.0, qg));\nreturn floor(qh / pow(2.0, qf));\n}\nnv qi(float ly) {\nnv qj;\nqj.nw = qe(ly, 0.0, 4.0);\nqj.nx = qe(ly, 4.0, 8.0);\nqj.ny = qe(ly, 8.0, 10.0);\nqj.nz = qe(ly, 10.0, 12.0);\nqj.oa = qe(ly, 12.0, 13.0);\nqj.ob = qe(ly, 13.0, 14.0);\nqj.oc = qe(ly, 14.0, 15.0);\nqj.od = qe(ly, 15.0, 16.0);\nreturn qj;\n}\noe qk(float ly) {\noe qj;\nqj.of = qe(ly, 0.0, 8.0);\nqj.og = qe(ly, 8.0, 11.0);\nqj.oh = qe(ly, 11.0, 12.0);\nqj.oi = qe(ly, 12.0, 13.0);\nqj.oj = qe(ly, 13.0, 14.0);\nqj.ok = qe(ly, 14.0, 15.0);\nqj.ol = qe(ly, 15.0, 16.0);\nreturn qj;\n}\nvec4 ql(in float ly) {\nreturn vec4(\nqe(ly, 0.0, 4.0),\nqe(ly, 4.0, 8.0),\nqe(ly, 8.0, 12.0),\nqe(ly, 12.0, 16.0)\n);\n}\nvec2 qm(in float ly) {\nreturn vec2(mod(ly, 256.0), floor(ly / 256.0));\n}\nvec2 qn(in float ly) {\nfloat qo = floor(ly / P2_6);\nfloat qp = ly - (qo * P2_6);\nreturn vec2(qo, qp);\n}\nvec2 qq(in float ly) {\nfloat qr = floor(ly / P2_7);\nfloat qs = ly - (qr * P2_7);\nreturn vec2(qr, qs);\n}\nvec2 qt(in vec2 qu, in float qv) {\nfloat qw = cos(qv);\nfloat qx = sin(qv);\nreturn vec2(qw * qu.x + qx * qu.y, -qx * qu.x + qw * qu.y);\n}\nvec4 qy(in vec4 qz) {\nreturn floor(qz / 256.0) - 128.0;\n}\nvec4 ra(in vec4 qz) {\nreturn mod(qz, 256.0) - 128.0;\n}\nfloat rb(float ly) {\nreturn ly - 128.0;\n}\nvec2 rb(vec2 ly) {\nreturn ly - 128.0;\n}\nvec2 rc(vec2 rd) {\nreturn vec2(-rd.y, rd.x);\n}\nvec2 re(vec2 rf, vec2 gj, vec2 rg, float t) {\nfloat rh = 1.0 - t;\nreturn (rh * rh * rf) + (2.0 * rh * t * gj) + (t * t * rg);\n}\nvec2 ri(vec2 rf, vec2 rj, vec2 rk, vec2 rg, float t) {\nfloat rh = 1.0 - t;\nfloat rl = rh * rh;\nfloat rm = rl * rh;\nfloat rn = t * t;\nfloat ro = rn * t;\nreturn (rm * rf) + (3.0 * rl * t * rj) + (3.0 * rh * rn * rk) + (ro * rg);\n}\nvec2 rp(vec2 rf, vec2 gj, vec2 rg, float t) {\nfloat rh = (1.0 - t);\nvec2 qu = (rh * gj + t * rg) - (rh * rf + t * gj);\nreturn normalize(qu);\n}\nvec2 rq(vec2 rf, vec2 gj, vec2 rg, float t) {\nreturn rc(rp(rf, gj, rg, t));\n}\nvec2 rr(vec2 rf, vec2 rj, vec2 rk, vec2 rg, float t) {\nfloat rh = 1.0 - t;\nfloat rl = rh * rh;\nfloat rn = t * t;\nvec2 qu = rl * (rj - rf) + 2.0 * rh * t * (rk - rj) + rn * (rg - rk);\nreturn normalize(qu);\n}\nvec2 rs(vec2 rf, vec2 rj, vec2 rk, vec2 rg, float t) {\nreturn rc(rr(rf, rj, rk, rg, t));\n}\nfloat sd(float or, float se, float t) {\nfloat y = abs(or) / CURVATURE_RATIO + EPSILON;\nfloat ow = y * y;\nfloat rh = t - 0.5;\nfloat rl = rh * rh;\nfloat sf = 1.0 / (16.0 * ow);\nfloat sg = sqrt(rl + sf);\nfloat sh = (0.5 / y) * sqrt(ow + 0.25);\nfloat si = (abs(2.0 * y)) * ((rh * sg) + (0.5 * sh) + (sf * log(abs((rh + sg) / (-0.5 + sh)))));\nreturn si * se;\n}\nfloat sj(vec2 rf, vec2 sk, vec2 sl, vec2 rg, float sm) {\nvec2 py = (rf + sk + sl) / 3.0;\nvec2 sn = py - sk;\nvec2 so = sk - sl;\nfloat sp = dot(sn, sn);\nfloat sq = dot(so, so) / 4.0;\nfloat sy = sqrt(sp - sq) * SELF_LOOP_TO_CIRCLE_APPROX * 1.55;\nreturn 2.0 * PI * sy * sm;\n}\nfloat sz(float ly) {\nreturn ly - 32.0;\n}\nfloat ta(float ly) {\nreturn ly - 512.0;\n}\nfloat tb(float ly) {\nreturn ly - P2_14;\n}\nvoid tc() {\ngl_Position = vec4(-10.0, -10.0, 1.0, 1.0);\n}\nvec4 td(vec2 te) {\nreturn vec4(((vec2(te.x, u_viewHeight - te.y) / vec2(u_viewWidth, u_viewHeight)) * 2.0 - 1.0), 0.5, 1.0);\n}\nfloat ti(float ap, float aq) {\nreturn step(ap - EPSILON, aq) * step(aq, ap + EPSILON);\n}\nbool ao(float ap, float aq) {\nreturn abs(ap - aq) < EPSILON;\n}\nbool tj(float ly) {\nreturn ly > 0.5;\n}\nvec2 tk(vec2 tl) {\nreturn qt((tl - vec2(u_viewX, u_viewY)) * u_viewZoom, u_viewAngle) + vec2(u_viewWidth, u_viewHeight) / 2.0;\n}\nfloat tm(float qa) {\nreturn qa * EDGE_ARROW_SIZE_RATIO;\n}\nfloat tn(float to, float tp) {\nreturn to * BYTES_TO_SCALED_SIZE * u_viewZoom + tp;\n}\nfloat tv(float pp, float tt, float tu) {\nfloat tw = tu - tt;\nfloat a = 1.0 / tw;\nfloat b = -tt / tw;\nreturn pp * a + b;\n}\nstruct tx {\nvec2 ty;\nvec2 tz;\n};\ntx ua(vec2 ub, float sy, float or) {\ntx ma;\nfloat uc = (sy + sy / SELF_LOOP_CURVATURE_MULTIPLIER * or) * SELF_LOOP_CURVATURE_MULTIPLIER;\nfloat ud = -u_viewAngle + PI;\nfloat ue = -u_viewAngle + PI / 2.0;\nma.ty = ub + vec2(cos(ud), sin(ud)) * uc;\nma.tz = ub + vec2(cos(ue), sin(ue)) * uc;\nreturn ma;\n}\nfloat uj(vec2 uk, vec2 sk, vec2 sl, vec2 ul, float um) {\nvec2 un = uk;\nfloat t = 0.0;\nfloat uo = 0.0;\nfloat up = sj(uk, sk, sl, ul, 1.0);\nreturn um / up;\n}\nom uq(\nvec4 ur,\nvec4 us,\nvec4 ut,\nvec4 uu,\nvec4 uv,\nvec4 uw,\nvec3 ux\n) {\nom a;\nnv ax = qi(ur.x);\noe uy = qk(ur.y);\nvec4 uz = ql(ur.z);\nvec2 va = qm(ur.w);\na.nw = ax.nw;\na.nx = ax.nx;\na.ny = ax.ny;\na.nz = ax.nz;\na.oa = ax.oa;\na.ob = ax.ob;\na.oc = ax.oc;\na.od = ax.od;\na.of = uy.of;\na.og = uy.og;\na.oh = uy.oh;\na.oi = uy.oi;\na.oj = uy.oj;\na.ok = uy.ok;\na.ol = uy.ol;\na.bu = uz.x;\na.on = uz.y;\na.oo = uz.z;\na.op = uz.w;\na.oq = va.x;\na.or = va.y;\na.os = us.x;\na.bd = ql(us.y);\na.be = ql(us.z);\na.bz = ql(us.w);\na.ot = ut.x;\na.ou = ut.y;\na.ov = ut.z;\na.ow = ut.w;\na.ox = uu.x;\na.oy = uu.y;\na.oz = uu.z;\na.pa = uu.w;\na.pb = uv.x;\na.pc = uv.y;\na.pd = uv.z;\na.pe = uv.w;\na.pf = uw.x;\na.pg = uw.y;\na.pk = tb(uw.z);\na.pl = tb(uw.w);\na.ph = ux.x;\nfloat x = ux.y;\nfloat y = mod(x, P2_8);\nif (ux.z > 0.0) x += ux.z * P2_16;\na.pi = ((x - y) / P2_8) - P2_16;\na.pj = (y - P2_7) * BYTES_TO_TEXT_OFFSET_Y;\nreturn a;\n}\n/**\n* vq a pm cj aa vr om.\n* dw dx cy dm vs vt, aa vr om ds dm\n* vu fx aa vv bg vw vx cy aa vt,\n* vy dj aa vz wa.\n*/\nbool wb(const in om a, out pm ma) {\nfloat nw = a.nw;\nfloat nx = a.nx;\nfloat ny = a.ny * BYTES_TO_DASH_LENGTH;\nfloat nz = a.nz * BYTES_TO_GAP_LENGTH;\nfloat oa = a.oa;\nfloat ob = a.ob;\nfloat oc = a.oc;\nfloat od = a.od;\nfloat of = a.of * BYTES_TO_PATTERN_SCALE;\nfloat og = a.og * BYTES_TO_OFFSET_ANGLE;\nfloat oh = a.oh;\nfloat oi = a.oi;\nfloat oj = a.oj;\nfloat ok = a.ok;\nfloat ol = a.ol;\nfloat bu = a.bu * BYTES_TO_COLOR;\nfloat on = a.on * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;\nfloat oo = a.oo * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;\nfloat op = a.op * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;\nfloat oq = a.oq * BYTES_TO_SYMBOLIC_SIZE * u_viewZoom + step(a.oq, EPSILON) * INFINITY;\nfloat or = rb(a.or);\nfloat os = a.os;\nvec4 bd = a.bd * BYTES_TO_COLOR;\nvec4 be = a.be * BYTES_TO_COLOR;\nvec4 bz = a.bz * BYTES_TO_COLOR;\nvec2 wc = vec2(a.ot, a.ou) * BYTES_TO_COORD;\nvec2 wd = vec2(a.ov, a.ow) * BYTES_TO_COORD;\nvec2 uk = tk(wc);\nvec2 ul = tk(wd);\nfloat we = tn(a.ox, a.oy);\nfloat wf = tn(a.oz, a.pa);\nfloat wg = tn(a.pb, a.pc);\nfloat pn = tn(a.pd, a.pe);\nfloat vb = tn(a.pf, a.pg);\nvec2 wh = a_vertexInfo.xy;\nvec2 wi = vec2(0.0, 0.0);\nfloat wj = we;\nfloat wk = wf;\nfloat wl = wf * of;\nif (oh > EPSILON) {\nif (a.ph < EPSILON) return false;\nwl = wg;\nos = a.ph;\nwe = wl * TEXT_WIDTH_MULTIPLIER * u_pixelRatio;\nwf = wl * TEXT_HEIGHT_MULTIPLIER * u_pixelRatio;\n}\nbool xe = abs(or) > EPSILON && ti(nx, PIECE_EDGE_BODY) < EPSILON;\nbool xf = xe && a_vertexInfo.z > EPSILON;\nif (nw < EPSILON || nx < EPSILON || oq < on || xf) {\nreturn false;\n}\npn *= step(oo, oq);\nfloat xs = 0.0;\nfloat xt = 1.0;\nfloat xp = 0.0;\nfloat xr = 1.0;\nfloat xu = 0.0;\nfloat ye = 1.0;\nfloat yg = 1.0;\nfloat yr = 0.0;\nfloat ys = 0.0;\nvec2 py;\nvec2 qb;\nvec2 qc;\nvec2 qd;\nfloat qa;\nfloat pz;\nfloat zl = 0.0;\nfloat zm = 1.0;\nif (ti(nx, PIECE_NODE_COMPONENT) > EPSILON) {\npy = ceil((uk + ul) / 2.0);\nqb = normalize(vec2(wd.x - wc.x + 0.001, wc.y - wd.y));\nqc = rc(qb);\nqd = qc;\nqa = we;\npz = wf;\n} else {\nyg = 0.0;\nfloat aaa = distance(uk, ul);\nvec2 aab = normalize(ul - uk);\nvec2 aac = (uk + ul) / 2.0;\nvec2 aad = rc(aab);\nvec2 aae = aac + (aad * aaa * -or / CURVATURE_RATIO);\nif (ti(nx, PIECE_EDGE_TEXT) > 0.0) {\nfloat aaf;\nfloat aag = pn;\npn = 0.0;\nif (od > EPSILON) {\ntx gj = ua(uk, aag / 2.0, or);\npy = ri(uk, gj.ty, gj.tz, ul, 0.5);\nqb = rr(uk, gj.ty, gj.tz, ul, 0.5);\nqc = rc(qb);\nqd = qc;\naaf = sj(uk, gj.ty, gj.tz, ul, 0.5);\n} else if (abs(or) > EPSILON) {\npy = re(uk, aae, ul, 0.5);\nqb = rp(uk, aae, ul, 0.5);\nqc = rc(qb);\nqd = qc;\naaf = sd(or, aaa, 1.0);\n} else {\npy = aac;\nqb = aab;\nqc = aad;\nqd = aad;\naaf = aaa;\n}\nqa = we;\npz = wf;\nif (oi > EPSILON\n&& od < EPSILON\n&& wj > aaf - aag) {\nqb = vec2(1.0, 0.0);\nqc = vec2(0.0, 1.0);\nqd = vec2(0.0, 1.0);\n} else {\nfloat qv = -atan(qb.y, qb.x);\nzl = qv;\nog -= qv;\nif ((qv > PI / 2.0 || qv < -PI / 2.0)) {\nog += (1.0 - od) * PI;\nzm = -1.0;\nqb *= -1.0;\nqc *= -1.0;\nqd *= -1.0;\n}\n}\n} else {\nfloat yk = wg;\nfloat aao = we;\nfloat aap = wf;\nfloat aaq = oa + ob;\nfloat aar = tm(yk);\nfloat aas = oa * aar;\nfloat aat = ob * aar;\nfloat aau = ti(nx, PIECE_EDGE_HEAD);\nfloat aav = ti(nx, PIECE_EDGE_TAIL);\nfloat aaw = INFINITY * od + aaa - aao - aap;\nfloat aax = min(aaw / aaq, aar);\nfloat abg =\nob * (aar + max(aao + aax - aat, 0.0))\n+ (1.0 - ob) * oc * aao;\nfloat abh =\noa * (aar + max(aap + aax - aas, 0.0))\n+ (1.0 - oa) * oc * aap;\nif (aau > EPSILON || aav > EPSILON) {\nvec2 abk = aau * ul + aav * uk;\nfloat vb = aau * abh + aav * abg + (HEAD_TAIL_PX_ADJUST - 0.5);\nfloat abl = aau * aas + aav * aat;\nvec2 abm;\nif (od > EPSILON) {\ntx gj = ua(uk, aao, or);\nfloat aaf = sj(uk, gj.ty, gj.tz, ul, 1.0);\nfloat um = aau * (aaf - abh) + aav * abg;\nfloat t = uj(uk, gj.ty, gj.tz, ul, um);\nabm = ri(uk, gj.ty, gj.tz, ul, t);\n} else {\nfloat aaf = sd(or, aaa, 1.0);\nfloat t = (aau * (aaf - abh) + aav * abg) / aaf;\nabm = re(uk, aae, ul, t);\n}\nqb = normalize(abk - abm);\nqc = rc(qb);\nqd = qc;\npy = abk - qb * (vb - abl / 2.0);\nqa = abl;\npz = abl;\nny = 0.0;\nnz = 0.0;\n} else {\nfloat abq;\nfloat abr;\nfloat abt;\nif (abs(or) < EPSILON) {\npy = aac;\nqb = aab;\nqc = aad;\nqd = qc;\nqa = aaa;\nabq = aaa;\nabr = 0.0;\nabt = aaa;\n} else {\nfloat abv = a_vertexInfo.z;\nfloat abw = abv * T_STEP_PER_CURVE_PIECE;\nfloat rn = abw + T_STEP_PER_CURVE_PIECE;\nif (od < EPSILON) {\nvec2 abx = re(uk, aae, ul, abw);\nvec2 aby = re(uk, aae, ul, rn);\npy = (abx + aby) / 2.0;\nqb = normalize(aby - abx);\nqc = rq(uk, aae, ul, abw);\nqd = rq(uk, aae, ul, rn);\nqa = distance(abx, aby);\nabq = sd(or, aaa, 1.0);\nabr = sd(or, aaa, abw);\nabt = sd(or, aaa, rn);\n} else {\ntx gj = ua(uk, aao, or);\nvec2 sk = gj.ty;\nvec2 sl = gj.tz;\nvec2 abx = ri(uk, sk, sl, ul, abw);\nvec2 aby = ri(uk, sk, sl, ul, rn);\npy = (abx + aby) / 2.0;\nqb = normalize(aby - abx);\nqc = rs(uk, sk, sl, ul, abw);\nqd = rs(uk, sk, sl, ul, rn);\nqa = distance(abx, aby);\nabq = sj(uk, sk, sl, ul, 1.0);\nabr = sj(uk, sk, sl, ul, abw);\nabt = sj(uk, sk, sl, ul, rn);\n}\n}\npz = wg;\nxp = (abg - 1.0) / abq;\nxr = 1.0 - (abh - HEAD_TAIL_PX_ADJUST) / abq;\nxs = abr / abq;\nxt = abt / abq;\nxu = abq;\nif (oc > 0.0 && aaw > 5.0) {\nfloat ace = (abq * pz) / (abq - abg);\nfloat up = abq;\nfloat ot = abg;\nfloat ov = abq - abh;\nfloat a = -ace / up;\nfloat b = ace;\nfloat ou = a * ot + b;\nfloat ow = a * ov + b;\nfloat acf = ou / (ot - ov);\nfloat acg = -acf * ov;\npz = acg;\nys = acf * up + acg + 1.0;\n}\n}\n}\n}\nvec2 bi = vec2(0.0, 0.0);\nvec2 pu = vec2(EPSILON, EPSILON);\nvec2 pv = vec2(-EPSILON, -EPSILON);\nfloat pw = -1.0;\nfloat px = 0.0;\nbool ach = false;\nvec2 aci = vec2(0,0);\nvec2 acj = vec2(0,0);\nvec2 ack = vec2(0,0);\nif (os > EPSILON && oq > op) {\nfloat acn = floor(os / PATTERN_INFO_TEXTURE_SIZE);\nfloat aco = os - (acn * PATTERN_INFO_TEXTURE_SIZE);\nvec4 acp = texture2D(u_patternInfoTexture, vec2(aco, acn) / 255.0) * 255.0;\nvec2 acq = qq(acp.z);\nvec2 acr = qq(acp.w);\npw = acq.x * 2.0 + acr.x;\nfloat acs = 0.0;\nif (ao(pw, FILTER_NEAREST)) { \nacs = PATTERN_NEAREST_TEXTURE_SIZE;\n} else if (ao(pw, FILTER_LINEAR)) { \nacs = PATTERN_LINEAR_TEXTURE_SIZE;\n} else if (ao(pw, FILTER_LINEAR_SDF)) { \nacs = PATTERN_LINEAR_SDF_TEXTURE_SIZE;\nach = true;\n} else if (ao(pw, FILTER_MIPMAP)) { \nacs = PATTERN_MIPMAP_TEXTURE_SIZE;\n}\nfloat acv = 1.0 / acs;\nvec2 acw = (vec2(acq.y, acr.y) * PATTERN_POSITION_GRANULARITY) * acv / 2.0;\nacj += (acp.xy * PATTERN_POSITION_GRANULARITY * acv) + acw;\nacj += PATTERN_MARGIN * acv;\nacw -= PATTERN_MARGIN * acv * 2.0;\nvec2 acx = vec2(qa / 2.0, pz / 2.0) * acv;\nvec2 acy = vec2(pn, pn) * acv;\nfloat ada = 1.0 * u_pixelRatio;\nfloat adb = SDF_SMOOTH_FACTOR;\nif (of > EPSILON) {\nif (ach) { \nif (a.oj > EPSILON) {\nadb = SDF_SMOOTH_FACTOR * u_pixelRatio / SDF_GAMMA;\naci = vec2(-a.pl,-a.pk) / (1.0 /of);\n}\npx = adb * SDF_GAMMA / wl / u_pixelRatio;\nada = SDF_FONT_SIZE / wl;\n} else { \nada = (acw.y / acx.y) / of;\n}\n}\nack = (acx + acy) * ada;\nacw += PATTERN_MARGIN * acv;\npu = acj - acw;\npv = acj + acw;\n}\nif (oh > EPSILON) {\nwi.y = (a.pj) * wl;\nye = 0.0;\nyg = 0.0;\nwi.x = a.pi * wl * BYTES_TO_TEXT_OFFSET_X;\nwi += vec2(1.0, 1.0);\nwi = qt(wi, zl);\nwi *= zm;\n}\nvec2 adg = vec2(cos(og), sin(og)) * vb;\nvec2 adh = py + adg + wi;\nfloat adi = pn * 2.0;\nfloat adj = qa + yg * (adi + 1.0);\nfloat adk = pz + ye * (adi + 1.0);\nvec2 adl = qb * adj / 2.0;\nvec2 adm = qc * adk / 2.0;\nvec2 adn = qd * adk / 2.0;\nfloat ado = (xt - xs);\nfloat adp = wh.x / 2.0 + 0.5;\nfloat pp = xs + ado * adp;\nfloat pt = yr + (ys - yr) * pp / 2.0;\nfloat adq = step(nw, FIRST_COMPLEX_SHAPE_ID - EPSILON);\nfloat adr = adq * SIMPLE_SHAPE_SAMPLING_SIZE + (1.0 - adq) * COMPLEX_SHAPE_SAMPLING_SIZE;\nfloat ads = adr / COMPLEX_SHAPE_SAMPLING_SIZE;\nfloat adt = ads * SHAPE_SAMPLING_BUFFER_RATIO / 2.0;\nfloat adu = ads * (1.0 - SHAPE_SAMPLING_BUFFER_RATIO);\nvec2 aec = vec2(\nmod(nw, NB_SHAPES_BY_SIDE),\nfloor(nw / NB_SHAPES_BY_SIDE)\n);\nvec2 aed = aec + vec2(adt) +\nvec2(xs * adu, 0.0);\nvec2 aeg = vec2(ado, 1.0) * adu;\nvec2 po = (aed + aeg * (wh / 2.0 + 0.5)) / NB_SHAPES_BY_SIDE;\nvec2 ps = vec2(adj / ado, adk) / 2.0;\nfloat aen = ny * wg;\nfloat aeo = nz * wg;\nfloat pq = aen + aeo;\nfloat pr = (pp * xu) / pq;\nbi = acj \n+ ack \n* (wh + aci/ps* u_viewZoom * 2.0);\nma.po = po;\nma.ps = ps;\nma.pn = pn;\nma.bd = bd;\nma.be = be;\nma.bu = bu;\nma.pp = tv(pp, xp, xr);\nma.pq = pq;\nma.ny = aen;\nma.pr = pr;\nma.pt = pt;\nma.bi = bi;\nma.pu = pu;\nma.pv = pv;\nma.pw = pw;\nma.px = px;\nma.bz = bz;\nma.py = adh;\nma.qa = adj;\nma.pz = adk;\nma.qb = qb;\nma.qc = qc;\nma.qd = qd;\nreturn true;\n}\nfloat aer(float aes, float aet, vec4 aeu) {\nfloat aev = clamp(((u_currentTime - aes) / aet), 0.0, 1.0);\nfloat r = aev;\nfloat aew = r * r;\nfloat aex = aew * r;\nvec4 aey = aev < 0.5 ? qy(aeu) : ra(aeu);\nfloat aez = aey.x;\nfloat afa = aey.y;\nfloat afb = aey.z;\nfloat afc = aey.w;\nfloat afd = aez + afa * r + afb * aew + afc * aex;\nreturn afd;\n}\nvoid main() {\nom a_final = uq(\na_final_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature,\na_final_patternId_fillRGBA_strokeRGBA_patternRGBA,\na_final_x1_y1_x2_y2,\na_final_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed,\na_final_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed,\na_final_offsetScaled_offsetFixed_paddingTop_paddingLeft,\na_text_charId_charOffsetXY\n);\n#if ANIMATED\nfloat aes = a_animationBeginTime_animationDuration.x;\nfloat aet = a_animationBeginTime_animationDuration.y;\nvec4 aeu = a_animationEasing;\nfloat wa = aer(aes, aet, aeu);\nom a_prev = uq(\na_prev_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature,\na_prev_patternId_fillRGBA_strokeRGBA_patternRGBA,\na_prev_x1_y1_x2_y2,\na_prev_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed,\na_prev_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed,\na_prev_offsetScaled_offsetFixed_paddingTop_paddingLeft,\na_text_charId_charOffsetXY\n);\nconst float ONE = 1.0;\na_final.nw = mix(a_prev.nw, a_final.nw, ONE);\na_final.ny = mix(a_prev.ny, a_final.ny, wa);\na_final.nz = mix(a_prev.nz, a_final.nz, wa);\na_final.oa = mix(a_prev.oa, a_final.oa, ONE);\na_final.ob = mix(a_prev.ob, a_final.ob, ONE);\na_final.nx = mix(a_prev.nx, a_final.nx, ONE);\na_final.of = mix(a_prev.of, a_final.of, ONE);\na_final.oh = mix(a_prev.oh, a_final.oh, ONE);\na_final.oi = mix(a_prev.oi, a_final.oi, ONE);\na_final.oj = mix(a_prev.oj, a_final.oj, ONE);\na_final.ok = mix(a_prev.ok, a_final.ok, ONE);\na_final.od = mix(a_prev.od, a_final.od, ONE);\na_final.og = mix(a_prev.og, a_final.og, wa);\na_final.bu = mix(a_prev.bu, a_final.bu, wa);\na_final.on = mix(a_prev.on, a_final.on, wa);\na_final.oo = mix(a_prev.oo, a_final.oo, wa);\na_final.op = mix(a_prev.op, a_final.op, wa);\na_final.oq = mix(a_prev.oq, a_final.oq, wa);\na_final.or = mix(a_prev.or, a_final.or, wa);\na_final.os = mix(a_prev.os, a_final.os, ONE);\na_final.bd = mix(a_prev.bd, a_final.bd, wa);\na_final.be = mix(a_prev.be, a_final.be, wa);\na_final.bz = mix(a_prev.bz, a_final.bz, wa);\na_final.ot = mix(a_prev.ot, a_final.ot, wa);\na_final.ou = mix(a_prev.ou, a_final.ou, wa);\na_final.ov = mix(a_prev.ov, a_final.ov, wa);\na_final.ow = mix(a_prev.ow, a_final.ow, wa);\na_final.ox = mix(a_prev.ox, a_final.ox, wa);\na_final.oy = mix(a_prev.oy, a_final.oy, wa);\na_final.oz = mix(a_prev.oz, a_final.oz, wa);\na_final.pa = mix(a_prev.pa, a_final.pa, wa);\na_final.pb = mix(a_prev.pb, a_final.pb, wa);\na_final.pc = mix(a_prev.pc, a_final.pc, wa);\na_final.pd = mix(a_prev.pd, a_final.pd, wa);\na_final.pe = mix(a_prev.pe, a_final.pe, wa);\na_final.pf = mix(a_prev.pf, a_final.pf, wa);\na_final.pg = mix(a_prev.pg, a_final.pg, wa);\na_final.ph = mix(a_prev.ph, a_final.ph, ONE);\na_final.pi = mix(a_prev.pi, a_final.pi, ONE);\na_final.pj = mix(a_prev.pj, a_final.pj, ONE);\n#endif\npm ma;\nbool afh = wb(a_final, ma);\nif (!afh) {\ntc();\nreturn;\n}\nvec2 wh = a_vertexInfo.xy;\na = ma.bd;\nb = ma.be;\nc = ma.bz;\nd = ma.po;\ne = ma.bi;\n#if D3D9_FIX\n#else\nj = ma.pn;\nk = ma.pu;\nl = ma.pv;\nm = vec2(ma.bu, ma.pt);\nn = ma.pp;\no = ma.pq;\np = vec2(ma.ny, ma.pr);\nq = ma.ps;\nr = ma.px;\ns = ma.pw;\n#endif\nfloat afk = step(wh.x, 0.0);\nfloat afl = 1.0 - afk;\nvec2 te = ma.py\n+ (ma.qb * (ma.qa / 2.0) * wh.x)\n+ ((afk * ma.qc + afl * ma.qd) * (ma.pz / 2.0) * wh.y);\ngl_Position = td(te);\n}\n",hi="#define D3D9_FIX 0\nprecision highp float;\nprecision mediump int;\nuniform vec3 u_backgroundColor;\nuniform sampler2D u_patternNearestTexture;\nuniform sampler2D u_patternLinearTexture;\nuniform sampler2D u_patternLinearSdfTexture;\nuniform sampler2D u_patternMipmapTexture;\nuniform sampler2D u_shapeTexture;\nvarying vec4 a;\nvarying vec4 b;\nvarying vec4 c;\nvarying vec2 d;\nvarying vec2 e;\n#if D3D9_FIX\n#else\nvarying float j;\nvarying vec2 k;\nvarying vec2 l;\nvarying vec2 m;\nvarying float n;\nvarying float o;\nvarying vec2 p;\nvarying vec2 q;\nvarying float r;\nvarying float s;\n#endif\nconst float FILTER_NEAREST = 0.0;\nconst float FILTER_LINEAR = 0.0;\nconst float FILTER_LINEAR_SDF = 0.0;\nconst float FILTER_MIPMAP = 0.0;\nconst float SDF_GAMMA = 0.0;\nconst float EPSILON = 0.000000001;\nconst float SDF_BUFFER = (256.0 - 64.0) / 256.0; \nvec4 ad(in vec4 ae, in vec4 af) {\nfloat ag = af.a;\nfloat ah = ae.a + EPSILON;\nfloat ai = min(ag + ah, 1.0);\nfloat r = ag / ai;\nreturn vec4(mix(ae.rgb, af.rgb, r), ai);\n}\nfloat aj(in float ak, in float al) {\nfloat am = (ak * 256.0 + al) * 256.0;\nfloat an = am / 32768.0;\nreturn an * 2.0 - 1.0;\n}\nbool ao(float ap, float aq) {\nreturn abs(ap - aq) < EPSILON;\n}\nvoid main() {\n#if D3D9_FIX\n#else\nfloat ar = m.x;\nfloat as = m.y;\nfloat at = p.x;\nfloat au = p.y;\n#endif\nvec4 ax = texture2D(u_shapeTexture, d);\nfloat ay = aj(ax.b, ax.a) * q.x;\nfloat az = aj(ax.r, ax.g) * q.y;\naz += as;\nfloat bc = min(ay, az);\nvec4 bd = a;\nvec4 be = b;\nif (s > -EPSILON) {\nvec2 bi = e;\nfloat bv =\nstep(k.x, bi.x) *\nstep(bi.x, l.x) *\nstep(k.y, bi.y) *\nstep(bi.y, l.y);\nfloat bw = bv;\nvec4 bz;\nif (ao(s, FILTER_NEAREST)) {\nbz = texture2D(u_patternNearestTexture, bi);\n} else if (ao(s, FILTER_LINEAR)) { \nbz = texture2D(u_patternLinearTexture, bi);\n} else if (ao(s, FILTER_LINEAR_SDF)) { \nbz = texture2D(u_patternLinearSdfTexture, bi);\nbz.a = smoothstep(SDF_BUFFER - r, SDF_BUFFER + r, bz.a);\n} else if (ao(s, FILTER_MIPMAP)) { \nbz = texture2D(u_patternMipmapTexture, bi);\n}\nbz.rgb += c.rgb;\nbz.a *= bw;\nbd = ad(bd, bz);\n}\nfloat cl = clamp(bc, 0.0, 1.0);\nfloat cm = clamp(bc - j, 0.0, 1.0);\nfloat cn = cl - cm;\ncn = 1.0 - clamp(bc - j, 0.0, 1.0);\nbd.a *= cm;\nbe.a *= cn;\nvec4 co = ad(bd, be);\nfloat cp = cl;\nco.rgb = mix(u_backgroundColor, co.rgb, ar);\nif (o > EPSILON) {\nfloat de = fract(au) * o;\nfloat df = clamp(min(de, at - de), 0.0, 1.0);\ncp *= df;\n}\nif (n < 0.0 || n > 1.0 || cp < EPSILON) {\ndiscard;\n}\nco.a *= cp;\nco.rgb *= co.a;\ngl_FragColor = co;\n}\n";(li=ci=ci||{})[li.INIT=0]="INIT",li[li.COMPILING=1]="COMPILING",li[li.DONE=2]="DONE";var fi=(pi.prototype.setConstant=function(t,e){this._constants[t]=e},pi.prototype.setMacro=function(t,e){this._macros[t]=e},pi.prototype.getState=function(){return this._state},pi.prototype.getProgram=function(){return this._program},pi.prototype.compile=function(){var t=this._gl,e=gi(this._vertexSource,this._macros,this._constants),n=gi(this._fragmentSource,this._macros,this._constants);this._program&&(t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader));var r=t.createProgram(),i=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER);if(!(r&&i&&o))throw new Error("Error instantiating WebGL program");this._program=r,this._vertexShader=i,this._fragmentShader=o,t.shaderSource(this._vertexShader,e),t.compileShader(this._vertexShader),t.attachShader(this._program,this._vertexShader),t.shaderSource(this._fragmentShader,n),t.compileShader(this._fragmentShader),t.attachShader(this._program,this._fragmentShader),t.linkProgram(this._program),this._state=ci.COMPILING},pi.prototype.getError=function(){var t=this._gl;return t.getShaderParameter(this._vertexShader,t.COMPILE_STATUS)?t.getShaderParameter(this._fragmentShader,t.COMPILE_STATUS)?t.getProgramParameter(this._program,t.LINK_STATUS)?(this._state=ci.DONE,null):{step:"link",message:t.getProgramInfoLog(this._program)||""}:{step:"fragment",message:t.getShaderInfoLog(this._fragmentShader)||""}:{step:"vertex",message:t.getShaderInfoLog(this._vertexShader)||""}},pi);function pi(t,e){var n=e.vertex,r=e.fragment,i=e.constants,o=e.macros;this._state=ci.INIT,this._gl=t,this._vertexSource=n,this._fragmentSource=r,this._constants=W(i||{}),this._macros=W(o||{})}function gi(t,e,n){for(var r=Object.keys(e),i=Object.keys(n),o=0;o<r.length;++o){var s=r[o],a=e[s];t=t.replace("#define "+s+" 0","#define "+s+" "+a)}for(o=0;o<i.length;++o){var u=i[o],c=n[u],l=c+(c%1==0?".0":"");t=t.replace("const float "+u+" = 0.0;","const float "+u+" = "+l+";")}return t}var _i,vi,yi=((_i={})[0]={min:"NEAREST",mag:"NEAREST",mipmap:!1},_i[1]={min:"LINEAR",mag:"LINEAR",mipmap:!1},_i[2]={min:"LINEAR",mag:"LINEAR",mipmap:!1},_i[3]={min:"LINEAR_MIPMAP_LINEAR",mag:"LINEAR",mipmap:!0},_i),mi=((vi={})[0]="ALPHA",vi[1]="RGBA",vi);function bi(t){return 16*Math.ceil((t+2)/16)}function xi(t,e,n,r,i){for(var o=0,s=t.length;o<s;++o){var a=t[o],u=a.x,c=a.y,l=u+r,d=c+i,h=l<n&&d<n;if(h)for(var f=u;f<l;++f)if(1===e[f+c*n]){h=!1;break}if(h)for(f=c;f<d;++f)if(1===e[u+f*n]){h=!1;break}if(h){for(f=u;f<l;++f)for(var p=c;p<d;++p)e[f+p*n]=1;return t.splice(o,1),t.push({x:u,y:d},{x:l,y:c}),a}}return null}function Ei(t,e,n,r,i,o,s){var a=4*t,u=e>>1<<7,c=e%2<<7;s[a]=n/16,s[1+a]=r/16,s[2+a]=u+i/16,s[3+a]=c+o/16}function wi(t,e,n,r,i,o,s){r|=0,i|=0,o|=0,s|=0,e|=0;for(var a=0;a<o;++a)for(var u=0;u<s;++u){var c=4*(r+a+(i+u)*e),l=4*(a+u*o);t[c]=n[l],t[1+c]=n[1+l],t[2+c]=n[2+l],t[3+c]=n[3+l]}}function Si(t,e){for(var n=0,r=4,i=0;i<t.length;++i){var o=t[i],s=o.width,a=o.height,u=bi(s),c=bi(a);n+=u*c,r=Math.max(r,Math.max(u,c))}var l=Ge(Math.max(r,Math.sqrt(n)));return Math.min(l,e)}function Ai(t,e){return Math.floor((e-t)/2)}function Ci(t,e,n,r,i,o,s){var a=yi[o],u=a.min,c=a.mag,l=a.mipmap,d=t[mi[s]];if(0===s){for(var h=new Uint8Array(i*i),f=0;f<h.length;++f)h[f]=r[4*f+3];r=h}t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,d,i,i,0,d,t.UNSIGNED_BYTE,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[c]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[u]),l&&t.generateMipmap(t.TEXTURE_2D)}function Ti(t,e,n,r,i){for(var o=new Uint8Array(n*n*4),s=Math.ceil(n/16),a=new Uint8Array(s*s),u=[{x:0,y:0}],c=0;c<e.length;++c){var l=e[c],d=l.id,h=bi(l.width)/16,f=bi(l.height)/16,p=xi(u,a,s,h,f);if(p){var g=l.width,_=l.height,v=l.pixels,y=16*h,m=16*f,b=16*p.x+Ai(g,y),x=16*p.y+Ai(_,m);wi(o,n,v,b,x,g,_),Ei(d,t,b,x,y,m,i)}else{if(n<r)return Ti(t,e,2*n,r,i);An("exceeded max WebGL texture size of "+r+"; some texts/icons/images won't be displayed"),Ei(d,t,0,0,0,0,i)}}return{texture:o,size:n}}function ki(t,e,n,r){for(var i=t.getDistanceFromStrokeVertically,o=t.getDistanceFromStrokeHorizontally,s=e*(1-n)/2,a=(e-1)/2,u=0;u<e;++u)for(var c=0;c<e;++c){var l=4*(c*e+u),d=(u-a)/s,h=(c-a)/s,f=We(i(d,h),-1,1),p=We(o(d,h),-1,1);Oi(r,l,Ii(f),Ii(p))}}function Ii(t){return(t+1)/2*32768}function Oi(t,e,n,r){t[e]=n>>8,t[e+1]=n%256,t[e+2]=r>>8,t[e+3]=r%256}function Mi(t,e){for(var n=-Math.PI/2,r=2*Math.PI/t.length,i=0,o=t;i<o.length;i++){var s=n+r;e(o[i],n,s),n=s}}function Li(t,e,n,r,i){Mi(e,(function(e,o,s){t.beginPath(),t.moveTo(n,r),t.arc(n,r,i,o,s),t.fillStyle=e,t.fill()}))}var Ni=(Ri.prototype.refresh=function(t){for(var e=0,n=t.getShapeList();e<n.length;e++){var r=n[e];if(!this._shapesWritten.includes(r.id)){var i=r.isSimple?32:128,o=r.isSimple?this._simpleShapePixels:this._complexShapePixels;ki(r,i,1/16,o),this._loadShapeInGpu(r.id,i,o),this._shapesWritten.push(r.id)}}},Ri.prototype._loadShapeInGpu=function(t,e,n){var r=this._gl,i=Ur,o=t%Br*128,s=128*Math.floor(t/Br);if(this._texture)r.bindTexture(r.TEXTURE_2D,this._texture);else{var a=new Uint8Array(i*i*4);this._texture=r.createTexture(),r.activeTexture(r.TEXTURE0+this._glTextureUnit),r.bindTexture(r.TEXTURE_2D,this._texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,i,i,0,r.RGBA,r.UNSIGNED_BYTE,a)}r.texSubImage2D(r.TEXTURE_2D,0,o,s,e,e,r.RGBA,r.UNSIGNED_BYTE,n)},Ri.prototype.getTextureSize=function(){return Ur},Ri.prototype.getSamplingSize=function(){return 128},Ri.prototype.getBufferRatio=function(){return 1/16},Ri.prototype.getTextureUnit=function(){return this._glTextureUnit},Ri);function Ri(t,e){this._gl=t,this._glTextureUnit=e,this._simpleShapePixels=new Uint8Array(4096),this._complexShapePixels=new Uint8Array(65536),this._shapesWritten=[]}var Pi=1e20,Di=(Fi.prototype.setOptions=function(t){var e=t.fontSize,n=void 0===e?24:e,r=t.buffer,i=void 0===r?8:r,o=t.cutoff,s=void 0===o?.25:o,a=t.radius,u=void 0===a?6:a;this._fontSize=n,this._buffer=i,this._cutoff=s,this._radius=u,this._height=Math.ceil(this._fontSize+2*this._buffer*1.5)},Fi.prototype.draw=function(t,e,n){ni(this._ctx,e,this._fontSize,n);var r,i=(r=this._ctx.measureText(t).width+2*this._buffer,16*Math.ceil((r+2)/16)-2),o=this._height,s=i*o,a=Math.max(i,o);this._canvas.width<i&&(this._canvas.width=i,ni(this._ctx,e,this._fontSize,n),this._ctx.textAlign="center",this._ctx.fillStyle="black"),s>this._gridSize&&(this._gridOuter=new Float64Array(s),this._gridInner=new Float64Array(s),this._gridSize=s),a>this._maxDimension&&(this._f=new Float64Array(a),this._d=new Float64Array(a),this._z=new Float64Array(a+1),this._v=new Int16Array(a),this._maxDimension=a);var u=this._ctx.measureText(")").actualBoundingBoxAscent/2;this._ctx.clearRect(0,0,i,o),this._ctx.fillText(t,i/2,o/2+u);for(var c=this._ctx.getImageData(0,0,i,o),l=new Uint8ClampedArray(s),d=0;d<s;d++){var h=c.data[4*d+3]/255;this._gridOuter[d]=1==h?0:0==h?Pi:Math.pow(Math.max(0,.5-h),2),this._gridInner[d]=1==h?Pi:0==h?0:Math.pow(Math.max(0,h-.5),2)}for(zi(this._gridOuter,i,o,this._f,this._d,this._v,this._z),zi(this._gridInner,i,o,this._f,this._d,this._v,this._z),d=0;d<s;d++){var f=this._gridOuter[d]-this._gridInner[d];l[d]=Math.max(0,Math.min(255,Math.round(255-255*(f/this._radius+this._cutoff))))}return{height:o,width:i,distance:l}},Fi);function Fi(t){var e=void 0===t?{}:t,n=e.fontSize,r=void 0===n?24:n,i=e.buffer,o=void 0===i?8:i,s=e.radius,a=void 0===s?6:s,u=e.cutoff,c=void 0===u?.25:u;this._maxDimension=1,this._gridSize=1,this._fontSize=r,this._buffer=o,this._radius=a,this._cutoff=c,this._height=Math.ceil(this._fontSize+2*this._buffer*1.5),this._canvas=ti(),this._canvas.height=this._height,this._canvas.width=1;var l=this._canvas.getContext("2d");(this._ctx=l).textBaseline="middle",l.textAlign="center",l.fillStyle="black"}function zi(t,e,n,r,i,o,s){for(var a=0;a<e;a++){for(var u=0;u<n;u++)r[u]=t[u*e+a];for(Bi(r,i,o,s,n),u=0;u<n;u++)t[u*e+a]=i[u]}for(u=0;u<n;u++){for(a=0;a<e;a++)r[a]=t[u*e+a];for(Bi(r,i,o,s,e),a=0;a<e;a++)t[u*e+a]=Math.sqrt(i[a])}}function Bi(t,e,n,r,i){r[n[0]=0]=-Pi,r[1]=+Pi;for(var o=1,s=0;o<i;o++){for(var a=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);a<=r[s];)s--,a=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);n[++s]=o,r[s]=a,r[s+1]=+Pi}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;e[o]=(o-n[s])*(o-n[s])+t[n[s]]}}var Ui={fontSize:24,cutoff:.275,radius:6},Vi={fontSize:24,cutoff:.25,radius:8},ji=(Hi.prototype.refresh=function(t){this._pixelRatio=t.getPixelRatio();for(var e=this._gl,n=this._getPatternsByFilter(t.getPatternList()),r=0;r<n.length;++r){var i=r,o=n[r],s=Ti(i,o,Si(o,this._maxTextureSize),this._maxTextureSize,this._patternIdToInfoTexture),a=s.texture,u=s.size,c=this._glTextures[i]||(this._glTextures[i]=e.createTexture()),l=0===i?0:1;Ci(e,c,this._glUnit+1+i,a,u,i,l),this._textureSizes[i]=u}var d=this._glTextureInfo||(this._glTextureInfo=e.createTexture()),h=this._patternIdToInfoTexture;Ci(e,d,this._glUnit,h,256,0,1)},Hi.prototype.bindMetDataTexture=function(){var t=this._gl;t.activeTexture(t.TEXTURE0+this._glUnit),t.bindTexture(t.TEXTURE_2D,this._glTextureInfo)},Hi.prototype.getGranularity=function(){return 16},Hi.prototype.getInfoTextureUnit=function(){return this._glUnit},Hi.prototype.getNearestTextureUnit=function(){return this._glUnit+1+0},Hi.prototype.getLinearTextureUnit=function(){return this._glUnit+1+1},Hi.prototype.getLinearSdfTextureUnit=function(){return this._glUnit+1+2},Hi.prototype.getMipmapTextureUnit=function(){return this._glUnit+1+3},Hi.prototype.getInfoTextureSize=function(){return 256},Hi.prototype.getNearestTextureSize=function(){return this._textureSizes[0]},Hi.prototype.getLinearTextureSize=function(){return this._textureSizes[1]},Hi.prototype.getLinearSdfTextureSize=function(){return this._textureSizes[2]},Hi.prototype.getMipmapTextureSize=function(){return this._textureSizes[3]},Hi.prototype._getPatternsByFilter=function(t){for(var e=new Array(4),n=0;n<4;++n)e[n]=[];for(n=0;n<t.length;++n){var r=this._getPatternPixels(t[n]);e[r.filter].push(r)}return e},Hi.prototype._getPatternPixels=function(t){var e,n=t.id,r=t.type,i=t.attributes,o=i.text,s=i.font,a=i.style,u=i.image,c=i.scaled,l=i.duplicated,d=i.colorArray;switch(r){case 2:e=l?this._getDuplicatedImagePixels(u):c?this._getScaledImagePixels(u):this._getNonScaledImagePixels(u);break;case 3:e=this._getSdfTextPixels(o,s,a);break;case 5:e=this._getIconPixels(o,s,a);break;case 6:e=this._getBadgeIconPixels(o,s,a);break;case 4:e=this._getPieChartPixels(d);break;default:throw new Error('pattern type "'+r+'" does not exist')}return e.id=n,e},Hi.prototype._getScaledImagePixels=function(t){var e=t.width,n=t.height;if(Vr<e||Vr<n){var r=Vr/Math.max(t.width,t.height);e*=r,n*=r}return e&&n&&(e=bi(e),n=bi(n)),e-=2,n-=2,this._getImagePixels(t,e,n)},Hi.prototype._getNonScaledImagePixels=function(t){return this._getImagePixels(t,t.width,t.height)},Hi.prototype._getDuplicatedImagePixels=function(t){if(0===t.width||0===t.height)return this._getImagePixels(t,0,0);this._canvasForDuplicatedImage||(this._canvasForDuplicatedImage=ti(),this._canvasForDuplicatedImage.width=Vr,this._canvasForDuplicatedImage.height=Vr);for(var e=this._canvasForDuplicatedImage,n=e.getContext("2d"),r=t.width,i=t.height,o=(Vr-r)/2,s=(Vr-i)/2;0<o;)o-=r;for(;0<s;)s-=i;for(var a=o;a<Vr;a+=r)for(var u=s;u<Vr;u+=i)n.drawImage(t,a,u);return this._getImagePixels(e,Vr,Vr)},Hi.prototype._getImagePixels=function(t,e,n){var r;if(0===e||0===n)r=new Uint8Array(0);else{(this._imageCanvas.width<e||this._imageCanvas.height<n)&&(this._imageCanvas.width=e,this._imageCanvas.height=n);var i=this._imageCanvasContext;ei(this._imageCanvas,i,e,n);try{i.drawImage(t,0,0,e,n)}catch(t){}r=i.getImageData(0,0,e,n).data}return{width:e,height:n,pixels:r,filter:3}},Hi.prototype._getPieChartPixels=function(t){var e=126,n=this._imageCanvasContext;return ei(this._imageCanvas,n,e,e),n.save(),n.rect(0,0,e,e),n.clip(),Li(n,t,63,63,e),n.restore(),{width:e,height:e,pixels:n.getImageData(0,0,e,e).data,filter:1}},Hi.prototype._getTextPixels=function(t,e,n,r,i,o){var s=this._imageCanvasContext,a=i*this._pixelRatio;ni(s,n,a,r);var u=Math.ceil(s.measureText(e).width);0===u&&(u=a);var c=0,l=0;3===t||(c=2*Math.ceil(1.5*a/2),l=2*Math.ceil(u/2));var d=Math.ceil(u+l),h=Math.ceil(a+c),f=this._imageCanvas.height<h||this._imageCanvas.width<d;return this._imageCanvas.height<h&&(this._imageCanvas.height=h),this._imageCanvas.width<d&&(this._imageCanvas.width=d),f&&ni(s,n,a,r),s.clearRect(0,0,d,h),s.fillStyle="black",s.textBaseline="middle",s.textAlign="left",s.fillText(e,o+l/2,h/2),{width:d,height:h,pixels:s.getImageData(0,0,d,h).data,filter:t}},Hi.prototype._getIconPixels=function(t,e,n){return this._getTextPixels(3,t,e,n,126,0)},Hi.prototype._getBadgeIconPixels=function(t,e,n){return this._sdfGenerator.setOptions(Vi),this._getSdfPixels(t,e,n)},Hi.prototype._getSdfTextPixels=function(t,e,n){return this._sdfGenerator.setOptions(Ui),this._getSdfPixels(t,e,n)},Hi.prototype._getSdfPixels=function(t,e,n){for(var r=this._sdfGenerator.draw(t,e,n),i=r.width,o=r.height,s=r.distance,a=new Uint8Array(i*o*4),u=0;u<s.length;++u)a[4*u+3]=s[u];return{width:i,height:o,pixels:a,filter:2}},Hi);function Hi(t,e){this._patternIdToInfoTexture=new Uint8Array(262144),this._glTextures=[],this._textureSizes=[],this._pixelRatio=1,this._gl=t,this._glUnit=e;var n=ti();n.width=Vr,n.height=Vr,this._imageCanvasContext=n.getContext("2d"),this._imageCanvas=n,this._canvasForDuplicatedImage,this._sdfGenerator=new Di(Ui),this._maxTextureSize=Math.min(4096,t.getParameter(t.MAX_TEXTURE_SIZE))}function Gi(){var t=Et(),e=t.styleSheets;if(!e||!t.location)return Promise.resolve([]);for(var n=Xt(t),r=[],i=[],o=0;o<e.length;o++){var s=e[o];null===s.href?r.push({href:n,content:s.ownerNode.textContent}):i.push(s.href)}var a=/@font-face\s*\{[^}]+\}/g;return Promise.all(i.map((function(t){return Vt(t).then((function(e){return{href:t,content:e}})).catch((function(){return null}))}))).then((function(t){return t.concat(r)})).then((function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(null!==r){var i=r.href,o=r.content.match(a);if(o){var s=Yi(o,i);e.push.apply(e,s)}}}return e}))}function qi(t,e){return Promise.all(t.map((function(t){var n=t.formats,r=t.originalRule;return Promise.all(n.map((function(t){var n=t.format,r=t.url;return e?qt(r).then((function(t){return{format:n,src:t}})).catch((function(){return null})):{format:n,src:r}}))).then((function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];null!==i&&e.push("url('"+i.src+"') format('"+i.format+"')")}if(0===e.length)return r;var o="src: "+e.join(",")+";";return r.replace(/src\s*:[^;]+;/g,o)}))})))}var Wi={"embedded-opentype":!0,svg:!0};function Yi(t,e){for(var n=/url\(['"]?([^'")]+)['"]?\)\s+format\(['"]?([^'")]+)['"]?\)/g,r=/font-family\s*:\s*['"]?([^;'"]+)['"]?;/,i=[],o=0;o<t.length;o++){var s=t[o],a=s.match(r);if(a){for(var u=a[1],c=[],l=void 0;l=n.exec(s);){var d=l[1],h=l[2];Wi[h.toLowerCase()]||c.push({format:h,url:Xi(d,e)})}i.push({name:u,formats:c,originalRule:s})}}return i}function Xi(t,e){if(/^http(s)?:/.test(t))return t;if("/"===t[0]){var n=e.match(/((\w+:\/\/)([^/]+))/);return n?n[1]+t:t}var r=t.split("/"),i=e.split("/");for("/"!==e[e.length-1]&&i.pop();".."===r[0];)r.shift(),i.pop();return i.concat(r).join("/").replace(/[\w](\/{2,})/g,(function(t){return t[0]+"/"}))}function Zi(t){if(t.keys)return Array.from(t.keys());var e=[];return t.forEach((function(t,n){return e.push(n)})),e}function Ki(t){if(t.values)return Array.from(t.values());var e=[];return t.forEach((function(t){return e.push(t)})),e}var Ji=(Qi.prototype.reserve=function(t){if(this._capacity<t){t=Math.pow(2,Math.ceil(Math.log2(t+1)));var e=new Uint32Array(t);e.set(this._array),this._capacity=t,this._array=e}},Qi.prototype.has=function(t){var e=$i(this._array,t,0,this.length);return e<this.length&&this._array[e]===t},Qi.prototype.add=function(t){var e=$i(this._array,t,0,this.length),n=e<this.length&&this._array[e]===t;return n||(this.length===this._capacity&&this.reserve(this.length+1),this._array.copyWithin(e+1,e,this.length),this._array[e]=t,this.length+=1),!n},Qi.prototype.remove=function(t){var e=$i(this._array,t,0,this.length),n=e<this.length&&this._array[e]===t;return n&&(this._array.copyWithin(e,e+1,this.length),--this.length),n},Qi.prototype.removeByPosition=function(t){return!(t>=this.length||(this._array.copyWithin(t,t+1,this.length),--this.length,0))},Qi.prototype.get=function(t){return this._array[t]},Qi.prototype.clear=function(){this.length=0},Qi.prototype.slice=function(){return this._array.slice(0,this.length)},Qi);function Qi(){this._array=new Uint32Array(8),this._capacity=8,this.length=0,this._array=new Uint32Array(8),this._capacity=8,this.length=0}function $i(t,e,n,r){if(n===r)return n;var i=n+((r-n)/2|0),o=e-t[i];return 0==o?i:o<0?$i(t,e,n,i):$i(t,e,i+1,r)}var to="undefined"==typeof HTMLElement?function(t){return!1}:function(t){return t instanceof HTMLElement};function eo(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=[]),!to(t)){if(function(t){return"object"!=typeof t||null===t||N(t)||(e=t)instanceof RegExp||e instanceof Date;var e}(t))e.push({path:n.slice(),value:t});else for(var r=Object.keys(t),i=0;i<r.length;++i){var o=r[i],s=n.slice();s.push(o),eo(t[o],e,s)}return e}}var no=(Object.defineProperty(ro.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),ro.prototype.set=function(t,e){var n=this._getIndex(t);-1!==n?this._values[n]=e:(io(this._cachedPath,t)&&(this._cachedIndex=this._keys.length),this._keys.push(t),this._values.push(e),this._size+=1)},ro.prototype.get=function(t){var e=this._getIndex(t);if(-1!==e)return this._values[e]},ro.prototype.has=function(t){return-1!==this._getIndex(t)},ro.prototype.keys=function(){return this._keys.slice()},ro.prototype._getIndex=function(t){if(io(t,this._cachedPath))return this._cachedIndex;this._cachedPath=t.slice();for(var e=this._keys,n=0;n<e.length;++n)if(io(e[n],t))return this._cachedIndex=n;return this._cachedIndex=-1},ro);function ro(){this._keys=[],this._values=[],this._size=0,this._cachedPath=[],this._cachedIndex=-1}function io(t,e){if(t.length===e.length){for(var n=0;n<t.length;++n)if(t[n]!==e[n])return;return 1}}var oo=Set.prototype.keys?function(t){return Array.from(t.keys())}:function(t){var e=[];return t.forEach((function(t){return e.push(t)})),e},so=Set.prototype.values?function(t){return Array.from(t.values())}:function(t){var e=[];return t.forEach((function(t,n){return e.push(n)})),e},ao=M("webworker-threads"),uo=ao?ao.Worker:null;function co(t){return uo?function t(e){if(ArrayBuffer.isView(e))return Array.from(e);if(Array.isArray(e)){for(var n=0;n<e.length;++n)e[n]=t(e[n]);return e}if(et(e)){for(var r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];e[o]=t(e[o])}return e}return e}(t):t}function lo(t){return uo?function(t){if(uo)return new uo(new Function(t))}(t):"undefined"==typeof URL||-1!==navigator.appVersion.indexOf("MSIE 10")?new ho(t):function(t){try{var e=new Blob([t],{type:"application/javascript"}),n=URL.createObjectURL(e);return new Worker(n)}catch(e){return new ho(t)}}(t)}var ho=(fo.prototype.terminate=function(){this._terminated=!1,this._otherSide._terminated=!0},fo.prototype.addEventListener=function(t,e){this._listeners.push(e)},fo.prototype.postMessage=function(t){setTimeout(vo,0,this._otherSide,{data:t})},fo);function fo(t){this._main=!0,this._listeners=[],this._terminated=!1,this._f=new Function("self",t),this._otherSide=new go(this),this._f(this._otherSide)}var po,go=(_o.prototype.addEventListener=function(t,e){this._listeners.push(e)},_o.prototype.postMessage=function(t){setTimeout(vo,0,this._otherSide,{data:t})},_o);function _o(t){this._listeners=[],this._main=!1,this._terminated=!1,this._otherSide=t}function vo(t,e){if(!t._terminated)for(var n=0;n<t._listeners.length;++n)t._listeners[n](e)}var yo=M("xmldom");po="undefined"!=typeof XMLSerializer?XMLSerializer:yo?yo.XMLSerializer:null;var mo=(bo.prototype.setAttribute=function(t,e){this._attributes[t]=e},bo.prototype.appendChild=function(t){this._children.push(t)},Object.defineProperty(bo.prototype,"tagName",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"childNodes",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"firstChild",{get:function(){return this._children[0]||null},enumerable:!0,configurable:!0}),bo.prototype.serialize=function(){var t=this._name,e=this._attributes,n=this._children,r=Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return" "+t+'="'+e[t]+'"'})).join(""),i=n.map((function(t){return t.serialize()})).join("");return i.length?"<"+t+r+">"+i+"</"+t+">":"<"+t+r+"/>"},bo.prototype.cloneNode=function(t){for(var e=new bo(this._name),n=0,r=Object.keys(this._attributes);n<r.length;n++){var i=r[n];e.setAttribute(i,this._attributes[i])}if(t)for(var o=0;o<this._children.length;o++)e.appendChild(this._children[o].cloneNode(t));return e},bo);function bo(t){this._attributes={},this._children=[],this._name=t}var xo=(Eo.prototype.serialize=function(){return this._text},Eo.prototype.cloneNode=function(){return new Eo(this._text)},Eo);function Eo(t){this._text=t}var wo=(So.prototype.appendChild=function(t){this._children.push(t)},So.prototype.serialize=function(){return this._meta.concat(this._children.map((function(t){return t.serialize()}))).join("")},So.prototype.createElement=function(t){return new mo(t)},So.prototype.createTextNode=function(t){return new xo(t)},So);function So(){this._children=[],this._meta=[],this._children=[],this._meta=[]}function Ao(){return new wo}function Co(t){if(po)return(new po).serializeToString(t)}function To(){return Et().implementation.createDocument("","",null)}var ko=(Io.prototype.add=function(t){var e=this._keyToIndex[t];-1===e&&(e=this._size++,this._heap[e]=t),this._keyToIndex[t]=this._bubble(e)},Io.prototype.removeMin=function(){if(0===this._size)return NaN;var t=this._heap[0];return this._heap[0]=this._heap[--this._size],this._bubble(0),t},Io.prototype.isEmpty=function(){return 0===this._size},Io.prototype.has=function(t){return-1!==this._keyToIndex[t]},Io.prototype._bubble=function(t){var e=this._indexToValue(t),n=this._getParentIndex(t),r=this._indexToValue(n),i=t;if(0!==t&&e<r)i=this._swap(t,n);else{var o=this._getLeftChildIndex(t),s=this._getRightChildIndex(t),a=this._indexToValue(o),u=this._indexToValue(s),c=Math.min(e,a,u);c===e||(i=c===a?this._swap(t,o):this._swap(t,s))}return i===t?t:this._bubble(i)},Io.prototype._indexToValue=function(t){return t>=this._size?1/0:this._keyToValue[this._heap[t]]},Io.prototype._getParentIndex=function(t){return(t-1)/2|0},Io.prototype._getLeftChildIndex=function(t){return 2*t+1},Io.prototype._getRightChildIndex=function(t){return 2*t+2},Io.prototype._swap=function(t,e){var n=this._heap[t],r=this._heap[e];return this._heap[t]=r,this._heap[e]=n,this._keyToIndex[n]=e,this._keyToIndex[r]=t,e},Io);function Io(t){this._heap=[],this._size=0,this._keyToValue=t,this._keyToIndex=new Int32Array(t.length),this._keyToIndex.fill(-1)}var Oo=(Mo.prototype._get=function(t){return t.isNode?this._nodes:this._edges},Mo.prototype.addOrRemoveElements=function(t,e){return e?this.addElements(t):this.removeElements(t)},Mo.prototype.addElements=function(t){for(var e=this._get(t),n=e.elementList,r=e.flexArray,i=e.indexList,o=i.getLength(),s=0;s<t._indexes.length;s++){var a=t._indexes[s];1!==r.get(a)&&(r.set(a,1),i.pushUnchecked(a))}return n(i.slice(o))},Mo.prototype.removeElements=function(t){for(var e=this._get(t),n=e.elementList,r=e.flexArray,i=e.indexList,o=i.getLength(),s=i.getBuffer(),a=0,u=0;u<t._indexes.length;u++){var c=t._indexes[u];0!==r.get(c)&&(r.set(c,0),a+=1)}if(a===o)return n(i.sliceAndReset());if(0===a)return n();var l=this._graph.acquireIndexList(t.isNode),d=0;for(u=0;u<o;++u)c=s[u],0===r.get(c)?(d+=1,l.pushUnchecked(c)):s[u-d]=c;return i.setLength(o-a),n(l.sliceAndReset())},Mo.prototype.hasElement=function(t){return!!this._get(t).flexArray.get(t._index)},Mo.prototype.clear=function(){this._nodes.indexList.isEmpty()||(this._nodes.indexList.reset(),this._nodes.flexArray.reset()),this._edges.indexList.isEmpty()||(this._edges.indexList.reset(),this._edges.flexArray.reset())},Mo.prototype.isEmpty=function(){return this._nodes.indexList.isEmpty()&&this._edges.indexList.isEmpty()},Mo.prototype.getElements=function(){return{nodes:this._nodes.elementList(this._nodes.indexList.slice()),edges:this._edges.elementList(this._edges.indexList.slice())}},Mo);function Mo(t,e){this._graph=t,this._nodes={elementList:t.nodeList,flexArray:t.createNodeAttribute({storage:1,name:e}),indexList:t.createIndexList(!0)},this._edges={elementList:t.edgeList,flexArray:t.createEdgeAttribute({storage:1,name:e}),indexList:t.createIndexList(!1)}}var Lo=(No.prototype.reset=function(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.minScaledSize=1/0,this.maxScaledSize=-1/0,this.minFixedSize=1/0,this.maxFixedSize=-1/0,this.width=0,this.height=0,this.cx=0,this.cy=0,this},No.prototype.addPoint=function(t,e,n,r){return this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,e),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,e),void 0!==n&&void 0!==r&&("scaled"===r?(this.minScaledSize=Math.min(this.minScaledSize,n),this.maxScaledSize=Math.max(this.maxScaledSize,n)):(this.minFixedSize=Math.min(this.minFixedSize,n),this.maxFixedSize=Math.max(this.maxFixedSize,n))),this.cx=this.minX+(this.maxX-this.minX)/2,this.cy=this.minY+(this.maxY-this.minY)/2,this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this},No.prototype.computeForZoom=function(t){var e=Math.max(this.maxScaledSize,this.maxFixedSize/t);return No.from({minX:this.minX-e/2,minY:this.minY-e/2,maxX:this.maxX+e/2,maxY:this.maxY+e/2,width:this.width+e,height:this.height+e})},No.from=function(t){var e=void 0===t?{}:t,n=e.minX,r=e.minY,i=e.maxX,o=e.maxY,s=e.width,a=e.height,u=new No;return null!=n&&(u.minX=n),null!=r&&(u.minY=r),null!=i&&(u.maxX=i),null!=o&&(u.maxY=o),null!=i&&null!=n&&(u.width=s||(i-n)/2,u.cx=(n+i)/2),null!=o&&null!=r&&(u.height=a||(o-r)/2,u.cy=(r+o)/2),u},No.fromValues=function(t,e,n){for(var r=1/0,i=1/0,o=-1/0,s=-1/0,a=-1/0,u=0;u<t.length;u++){var c=t[u],l=e[u],d=n[u];c-d<r&&(r=c-d),l-d<i&&(i=l-d),o<c+d&&(o=c+d),s<l+d&&(s=l+d),a<d&&(a=d)}var h=No.from({minX:r,minY:i,maxX:o,maxY:s});return h.maxScaledSize=a,h},No.prototype.pad=function(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,this.width+=2*t,this.height+=2*t,this},No.prototype.isValid=function(){return isFinite(this.width)&&isFinite(this.height)},No.prototype.extend=function(t){return this.addPoint(t.minX,t.minY),this.addPoint(t.maxX,t.maxY),this},No.prototype.bottomLeft=function(){return{x:this.minX,y:this.minY}},No.prototype.topRight=function(){return{x:this.maxX,y:this.maxY}},No);function No(t){void 0===t&&(t={});var e=t.xValues,n=void 0===e?[]:e,r=t.yValues,i=void 0===r?[]:r,o=t.scaledSizeValues,s=void 0===o?[]:o,a=t.fixedSizeValues,u=void 0===a?[]:a;this.minX=Ke(n),this.minY=Ke(i),this.maxX=Ze(n),this.maxY=Ze(i),this.minScaledSize=Ke(s),this.maxScaledSize=Ze(s),this.minFixedSize=Ke(u),this.maxFixedSize=Ze(u),this.cx=this.minX+(this.maxX-this.minX)/2,this.cy=this.minY+(this.maxY-this.minY)/2,this.width=this.maxX-this.minX,this.height=this.maxY-this.minY}var Ro=(Po.prototype.on=function(t,e){if("string"!=typeof t)throw new TypeError("Event name must be string");if("function"!=typeof e)throw new TypeError("Event handler must be function");var n=this._events=this._events||{};return(n[t]=n[t]||[]).push(e),this},Po.prototype.off=function(t,e){if("string"!=typeof t)throw new TypeError("Event name must be string");var n=this._events=this._events||{},r=n[t];if(N(r))if("function"!=typeof e)n[t]=null;else{var i=r.indexOf(e);-1!==i&&r.splice(i,1),0===r.length&&(n[t]=null)}return this},Po.prototype.fire=function(t){for(var e=arguments,n=[],r=1;r<arguments.length;r++)n[r-1]=e[r];if("string"!=typeof t)throw new TypeError("Event name must be string");var i=(this._events=this._events||{})[t];if(N(i))for(var o=n,s=0;s<i.length;s++){var a=i[s];a&&a.apply(this,o)}return this},Po.prototype.once=function(t,e){var n=this,r=function(){for(var i=arguments,o=[],s=0;s<arguments.length;s++)o[s]=i[s];e.apply(n,o),n.off(t,r)};return r.handler=e,this.on(t,r)},Po.prototype.hasListener=function(t,e){if(!t||!e)return!1;var n=(this._events=this._events||{})[t];if(N(n))for(var r=0,i=n.length;r<i;r++){var o=n[r];if(o===e||o.handler===e)return!0}return!1},Po.prototype.getListeners=function(t){return(this._events=this._events||{})[t]},Po);function Po(){}var Do=Object.freeze({__proto__:null,BoundingBox:Lo,FlexArray:Ue,EventTarget:Ro,ColorManager:Or,Table:nn,requestAnimFrame:at,cancelAnimFrame:ut,getDocument:Et,getStyle:wt,DummyDomElement:St,createDummyDomElement:Ct,getPixelRatio:Tt,dataUrlToBlob:kt,createBlob:Ot,isBlob:function(t){return"undefined"!=typeof Blob&&t instanceof Blob||t instanceof It},promptDownload:Mt,resizeElement:Lt,setAttributes:Nt,SVG_NS:Rt,XML_NS:Pt,XLINK:Dt,createSvgElement:Ft,createTextNode:zt,getImage:Bt,fetch:Vt,isHTMLElement:jt,applyCursorStyle:Ht,fetchBinary:Gt,fetchBinaryAsBase64:qt,escapeDOMAttribute:Wt,BUTTON_MAPPING:Yt,baseURI:Xt,fadeElement:Zt,DummyCanvas:Zr,DummyCanvasRenderingContext2D:Jr,createCanvas:ti,clearCanvas:ei,setCtxFont:ni,isWebGLSupported:ri,getWebglContext:ii,getDocumentFontRules:Gi,getEmbeddedFontRules:qi,resolvePath:Xi,IndexList:Qe,mapKeys:Zi,mapValues:Ki,isInteger:function(t){return"number"==typeof t&&t%1==0},toPropertyPath:z,throttle:B,debounce:function(t,e,n){var r,i,o,s,a,u=0===e||void 0===e?100:e;function c(){var e=Date.now()-s;e<u&&0<=e?r=setTimeout(c,u-e):(r=null,n||(a=t.apply(o,i),o=i=null))}function l(){o=this,i=arguments,s=Date.now();var u=n&&!r;return r=r||setTimeout(c,e),u&&(a=t.apply(o,i),o=i=null),a}return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(a=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},l},processQueue:function(t,e){return new Promise((function(n,r){return function t(e,n,r,i,o){r(e[n],n,e,i,o).then((function(s){n===e.length-1?i(s):t(e,n+1,r,i,o)})).catch(o)}(t,0,e,n,r)}))},isLittleEndian:U,promiseQueue:V,hash8:j,unorderedHash:function(t,e){return t<e?t*e+Math.pow(e-t-1,2)/4:t*e+Math.pow(t-e-1,2)/4},isRawObject:H,getValues:G,forEach:q,deepCopy:W,updateObject:function t(e,n){q(n,(function(n,r){"object"==typeof r&&null!==r?("object"==typeof e[n]&&null!==e[n]||(e[n]={}),t(e[n],r)):e[n]=r}))},extendList:function(t,e){e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)}))},setProperty:Y,getProperty:X,flatten:Z,unflatten:K,getFlattenedKeys:J,getLeafValues:Q,ensureTransferable:$,getOptions:tt,isObject:et,mergeValues:nt,pick:rt,objToValueList:eo,PathMap:no,smartRequire:M,setKeys:oo,setValues:so,getCurrentTime:Qt,getDate:$t,getTime:te,formatWorkerMessage:co,createWorker:lo,insertSortAsc:L,insertSortDesc:function(t,e){for(var n=1,r=t.length;n<r;n++){for(var i=t[n],o=n;0<o&&e.get(t[o-1])<e.get(i);)t[o]=t[o-1],--o;t[o]=i}return t},isArray:N,toArray:R,flattenArray:P,concatenateArrays:function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(0===e.length)return[];for(var r=e[0].constructor,i=0,o=0,s=e;o<s.length;o++)i+=(d=s[o]).length;for(var a=new r(i),u=0,c=0,l=e;c<l.length;c++){for(var d=l[c],h=0;h<d.length;h++)a[u+h]=d[h];u+=d.length}return a},removeFromArray:D,binaryIndexOf:F,parseColorRgba:Ar,toHexa:Cr,componentsToRGBA:Tr,parseColorHex:kr,createDummyXmlDocument:Ao,serializeXMLDocument:Co,createXmlDocument:To,PrioritySet:ko,nextPowerOfTwo:Ge,computeSum:qe,clamp:We,mix:Ye,lerp:Xe,computeMax:Ze,computeMin:Ke,getBaseLog:Je,ElementSet:Oo,displayPixelsOnScreen:function(t,e,n,r){void 0===r&&(r=0),void 0===e&&(e=n=Math.sqrt(t.length/4)),void 0===n&&(n=e);var i=document.createElement("canvas"),o=i.getContext("2d");if(o){var s=o.createImageData(e,n);i.style.imageRendering="pixelated",i.style.border="1px solid black",i.style.margin="2px",i.style.position="absolute",i.style.top=i.style.left="0px",i.width=e,i.height=n,s.data.set(t),o.putImageData(s,0,0);var a=document.getElementById("graph-container");a&&(a.style.position="static"),setTimeout((function(){return document.body.appendChild(i)}),r)}}}),Fo={byte:1,ubyte:1,short:2,ushort:2,ulong:4,float:4},zo={byte:"BYTE",ubyte:"UNSIGNED_BYTE",short:"SHORT",ushort:"UNSIGNED_SHORT",ulong:"UNSIGNED_LONG",float:"FLOAT"},Bo=(Uo.prototype._finishInit=function(){var t=this,e=this._gl,n=this._ext,r=this._programWrapper.getError();if(r)throw new Error('WebGL compilation at step "'+r.step+":\n"+r.message+'"');var i=this._programWrapper.getProgram();this._program=i,e.useProgram(i),this._metaData.attributes.forEach((function(n){n.location=e.getAttribLocation(t._program,n.name),n.byteSize=n.size*Fo[n.type],n.glType=zo[n.type]})),this._specialAttributes=this._createSpecialAttributesFunctions();for(var o=[],s=[],a=0,u=this._metaData.attributes;a<u.length;a++){var c=u[a];-1!==c.location&&(c.name.startsWith("a_text")?s.push(c):o.push(c))}this._baseAttributes=jo(o,e,n),this._textAttributes=jo(s,e,n),this._setupUniforms=function(t,e,n){for(var r={},i=[],o=0;o<t.length;++o){var s=t[o],a=s.id,u=s.name,c=s.type,l=e.getUniformLocation(n,u),d=Vo[c](a);l&&(r[a]=l,i.push(d))}var h=new Function("gl","l","u",i.join("\n"));return function(t){return h(e,r,t)}}(this._metaData.uniforms,e,i)},Uo.prototype._createSpecialAttributesFunctions=function(){return jo([{location:this._gl.getAttribLocation(this._program,this._metaData.vertexInfoAttribute),size:3,glType:"BYTE",byteSize:3,type:"byte",name:"special"}],this._gl,this._ext)},Uo.prototype.startPass=function(t){this._program||this._finishInit(),this._gl.useProgram(this._program),this._resetStencil(),this._setupUniforms(t),this._specialAttributes.enable(),this._specialAttributes.setup(this._specialGlBuffers.vertexInfo,null,0)},Uo.prototype._setupAttributes=function(t,e){var n=e.glBuffer,r=e.dataBuffer,i=e.divisor;t.enabled&&!n?t.disable():!t.enabled&&n&&t.enable(),n&&t.setup(n,r,i)},Uo.prototype.setupBaseAttributes=function(t){this._setupAttributes(this._baseAttributes,t)},Uo.prototype.setupTextAttributes=function(t){this._setupAttributes(this._textAttributes,t)},Uo.prototype._resetStencil=function(){var t=this._gl;this._stencilUsage=1,t.disable(t.STENCIL_TEST)},Uo.prototype.setupStencil=function(t){if(t!==this._stencilUsage){var e=this._gl;1!==t?(e.enable(e.STENCIL_TEST),2===t?(e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.stencilFunc(e.ALWAYS,1,1)):3===t&&(e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(e.EQUAL,0,1))):e.disable(e.STENCIL_TEST),this._stencilUsage=t}},Uo.prototype.endPass=function(){this._specialAttributes.disable(),this._baseAttributes.disable(),this._textAttributes.disable()},Uo);function Uo(t){var e=t.gl,n=t.ext,r=t.specialGlBuffers,i=t.metaData,o=t.programWrapper;this._stencilUsage=1,this._gl=e,this._ext=n,this._specialGlBuffers=r,this._metaData=W(i),this._programWrapper=o}var Vo={int:function(t){return"gl.uniform1i(l."+t+", u."+t+");"},sampler2D:function(t){return"gl.uniform1i(l."+t+", u."+t+");"},float:function(t){return"gl.uniform1f(l."+t+", u."+t+");"},vec2:function(t){return"gl.uniform2f(l."+t+", u."+t+"[0], u."+t+"[1]);"},vec3:function(t){return"gl.uniform3f(l."+t+", u."+t+"[0], u."+t+"[1], u."+t+"[2]);"},vec4:function(t){return"gl.uniform4f(l."+t+", u."+t+"[0], u."+t+"[1], u."+t+"[2], u."+t+"[3]);"}};function jo(t,e,n){var r,i,o,s,a,u,c,l,d,h,f,p,g,_=(r=e,i=t.map((function(t){return"gl.enableVertexAttribArray("+t.location+");"})).join("\n"),o=new Function("gl",i),function(){return o(r)}),v=(s=e,a=t.map((function(t){return"gl.disableVertexAttribArray("+t.location+");"})).join("\n"),u=new Function("gl",a),function(){return u(s)});return{enable:function(){_(),this.enabled=!0},disable:function(){v(),this.enabled=!1},setup:(l=e,d=n,h=(c=t).reduce((function(t,e){return t+e.byteSize}),0),f=0,p=A(["gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);","if (dataBuffer) gl.bufferData(gl.ARRAY_BUFFER, dataBuffer, gl.STATIC_DRAW);"],c.map((function(t){var e=t.location,n=t.size,r=t.glType,i=t.byteSize,o="gl.vertexAttribPointer(\n        "+e+", "+n+", gl."+r+",\n        false, "+h+", "+f+"\n      );";return f+=i,o})),c.map((function(t){return"ext.vertexAttribDivisorANGLE("+t.location+", divisor);"}))).join("\n"),g=new Function("gl","ext","glBuffer","dataBuffer","divisor",p),function(t,e,n){return g(l,d,t,e,n)}),enabled:!1}}var Ho=(Go.prototype.setDataBuffer=function(t){this._dataBuffer!==t&&(this._program=t.isAnimated()?this._animationProgram:this._staticProgram,this._dataBuffer=t,this._dataBufferChanged=!0,t.hasSideData()&&!this._sideGlBuffer?this._sideGlBuffer=this._gl.createBuffer():!t.hasSideData()&&this._sideGlBuffer&&(this._gl.deleteBuffer(this._sideGlBuffer),delete this._sideGlBuffer))},Go.prototype.markAsUnused=function(){return this._used=!1,this},Go.prototype.getProgram=function(){return this._program},Go.prototype.markAsUsed=function(){return this._used=!0,this},Go.prototype.isUsed=function(){return this._used},Go.prototype.draw=function(){var t=this._gl,e=this._dataBuffer.getElementType(),n=2===e,r=n?this._dataBuffer.getNbSideElementsPerMainElement():1,i=3===e?41:1,o=this._dataBuffer.getSize(),s=this._dataBuffer.getStencilUsage(),a=this._dataBuffer.getVersion(),u=this._version!==a||this._dataBufferChanged;this._program.setupBaseAttributes({glBuffer:this._glBuffer,dataBuffer:u?this._dataBuffer.getByteArray():null,divisor:r}),this._program.setupTextAttributes({glBuffer:this._sideGlBuffer,dataBuffer:u&&n?this._dataBuffer.getSideByteArray():null,divisor:1}),this._program.setupStencil(s),u&&(this._version=a,this._dataBufferChanged=!1),this._ext.drawArraysInstancedANGLE(t.TRIANGLES,0,6*i,o*r)},Go.prototype.destroy=function(){this._gl.deleteBuffer(this._glBuffer),this._sideGlBuffer&&this._gl.deleteBuffer(this._sideGlBuffer)},Go);function Go(t){var e=t.gl,n=t.ext,r=t.staticProgram,i=t.animationProgram;this._version=0,this._used=!1,this._dataBufferChanged=!1,this._gl=e,this._ext=n,this._staticProgram=r,this._animationProgram=i,this._glBuffer=this._gl.createBuffer()}function qo(t,e){if(e<2)return t;for(var n=t.split("\n"),r=[],i=0;i<n.length;++i){var o=n[i];if(o.length<e)r.push(o);else for(var s=Wo(n[i],e),a=0;a<s.length;++a)r.push(s[a])}return r.join("\n")}function Wo(t,e){for(var n=t.split(" "),r=[],i=0,o=-1,s=!0,a=0;a<n.length;++a)if(s){if(n[a].length>e){for(var u=Yo(n[a],e),c=0;c<u.length;++c)r.push([u[c]]),++o;i=u[u.length-1].length}else r.push([n[a]]),++o,i=n[a].length+1;s=!1}else i+n[a].length<=e?(r[o].push(n[a]),i+=n[a].length+1):(s=!0,--a);var l=[];for(a=0;a<r.length;++a)l.push(r[a].join(" "));return l}function Yo(t,e){for(var n=[],r=0;r<t.length;r+=e-1)n.push(t.substr(r,e-1)+"-");var i=n[n.length-1].length;return n[n.length-1]=n[n.length-1].substr(0,i-1)+" ",n}function Xo(t,e){if(null===t)return null;for(var n=(t=t.toString()).split("\n"),r=[],i=0,o=0;o<n.length;o++){var s=n[o];if(!e||e<=1||s.length<e)r.push(s),i=Math.max(i,s.length);else for(var a=Wo(n[o],e),u=0;u<a.length;u++)s=a[u],r.push(s),i=Math.max(i,s.length)}return{data:r,maxLength:i,lines:r.length}}function Zo(){var t=M("@mapbox/mapbox-gl-rtl-text")||M("mapbox-gl-rtl-text"),e=t?t.processBidirectionalText:gt?window.processBidirectionalText:null,n=t?t.applyArabicShaping:gt?window.applyArabicShaping:null;return{processBidirectionalText:e?function(t){return e(t,[]).join("")}:function(t){return t},applyArabicShaping:n?function(t){return null===t?null:"number"==typeof t?t.toString():n(t)}:function(t){return null===t?null:t.toString()}}}var Ko=U(),Jo="\n".charCodeAt(0),Qo=($o.prototype._init=function(){this._mustClear=!1,this._clear()},$o.prototype.reset=function(){this._init()},$o.prototype.clear=function(){this._mustClear=!0},$o.prototype._measureChar=function(t,e,n){return ni(this._ctx,e,24,n),this._ctx.measureText(t).width/24},$o.prototype._getAtlas=function(t,e,n){var r=-1===n?0:n,i=this._byFont[t]||(this._byFont[t]={}),o=i[e]||(i[e]=new Array(50));return o[r]||(o[r]=new Array(256))},$o.prototype._getMeasurementAtlas=function(t,e){var n=this._widthAtlases[e];return n[t]||(n[t]=new Array(256))},$o.prototype.measureText=function(t,e,n,r){if(void 0===r&&(r=1),!e)return this._textDimensions.width=0,this._textDimensions.height=0,this._textDimensions;for(var i=this._getMeasurementAtlas(e,n),o=0,s=0,a=1,u=0;u<t.length;++u){var c=t.charCodeAt(u);if(c===Jo)o<s&&(o=s),s=0,a+=1;else{var l=i[c];void 0===l&&(l=this._measureChar(t[u],e,n),i[c]=l),s+=l}}return o<s&&(o=s),this._textDimensions.width=o*r,this._textDimensions.height=a*r,this._textDimensions},$o.prototype._getCharInfo=function(t,e,n,r,i,o){var s=t[e];if(!s){var a=String.fromCharCode(e);s={ratio:this._measureChar(a,n,r),patternId:new Array(1)};for(var u=0;u<1;++u){var c=+u;s.patternId[u]=this._patternManager.getIdFromDefinition({id:0,type:3,attributes:{text:a,font:n,style:r,size:i,align:o,offset:c}})}t[e]=s}return s},$o.prototype.storeTextInDataView=function(t,e,n,r){var i=e;if(r&&7===r.type){for(var o=r.attributes,s=o.font,a=o.style,u=o.size,c=o.align,l="center"===c,d=this._getAtlas(s,a,u),h=0,f=1,p=0,g=0,_=this._lineWidthList,v=this._processBidirectionalText(r.attributes.text),y=0;y<v.length;++y)(E=v.charCodeAt(y))===Jo?(h<p&&(h=p),_[g]=p,g++,p=0,f++):p+=(w=this._getCharInfo(d,E,s,a,u,c)).ratio;h<(_[g]=p)&&(h=p),g=0;var m=-(l?_[g]:h)/2,b=(1-f)/2,x=0;for(y=0;y<v.length;++y){var E,w=d[E=v.charCodeAt(y)];if(E===Jo)g+=1,m=-(l?_[g]:h)/2,b+=1,x=0;else{var S=w.ratio,A=w.patternId[0];m+=(S+x)/2,x=S;var C=(We(1e3*m+65536,0,131071)<<8)+We(2*b+128,0,255);t.setUint16(i,A,Ko),t.setUint32(i+2,C,Ko),i+=6}}}this._fillWithZeros(t,i,n)},$o.prototype.extractTextFromDataView=function(t,e,n){for(var r=t,i=Ko,o=r.getUint16(e,i),s=this._textPattern,a=this._patternManager.getDefinitionFromId(o).attributes,u=a.font,c=a.style,l=a.size,d=a.align,h=this._getAtlas(u,c,l),f=[],p=0,g=0,_=0,v=null,y=e;y<n;y+=6){var m=r.getUint16(y,i);if(!m)break;var b=(r.getUint8(y+2)-128)/2,x=this._patternManager.getDefinitionFromId(m);if(!x||!x.attributes||!x.attributes.text)break;var E=x.attributes.text.charCodeAt(0),w=h[E];null===v?v=b:v<b&&(g<p&&(g=p),p=0,_+=1,f.push(Jo),v=b),f.push(E),w&&(p+=w.ratio)}g<p&&(g=p);var S=String.fromCharCode.apply(null,f);return s.attributes.style=c,s.attributes.font=u,s.attributes.size=l,s.attributes.align=d,s.attributes.text=this._processBidirectionalText(S),s.dimensions&&(s.dimensions.width=g,s.dimensions.height=_),s},$o.prototype._fillWithZeros=function(t,e,n){for(var r=e;r<n;r+=6)t.setUint16(r,0)},$o.prototype._clear=function(){this._byFont={},this._widthAtlases={normal:{},bold:{},italic:{}}},$o.prototype.update=function(){this._mustClear&&(this._clear(),this._mustClear=!1)},$o.prototype.getVersion=function(){return 0},$o);function $o(t){this._patternManager=t,this._canvas=ti(),this._ctx=this._canvas.getContext("2d"),this._processBidirectionalText=Zo().processBidirectionalText,this._textPattern={id:0,type:7,attributes:{text:"",font:"",size:0,style:"normal",align:"center"},dimensions:{width:0,height:0}},this._textDimensions={width:0,height:0},this._lineWidthList=new Array(64),this._init()}var ts,es=ri(),ns={stencil:!0,antialias:!1,alpha:!0,premultipliedAlpha:!0,failIfMajorPerformanceCaveat:!("undefined"!=typeof window&&window.FORCE_WEBGL)},rs={NO_WEBGL:'Unable to create a WebGL context: `canvas.getContext("webgl")` and `canvas.getContext("experimental-webgl")` returned `null`',NO_ANGLE_INSTANCED_ARRAYS:'WebGL extension "ANGLE_instanced_arrays" unavailable: `gl.getExtension("ANGLE_instanced_arrays")` returned `null`'},is=(E(os,ts=Error),os);function os(){return null!==ts&&ts.apply(this,arguments)||this}function ss(t,e){if(!t&&e){var n=new is(rs[e]);throw n.code=e,n}}var as,us=(E(cs,as=ai),cs.isAvailable=function(){return es||ss(null,"NO_WEBGL"),es},cs.createInitData=function(){var t=ti(),e=ii(t,ns),n=e&&"function"==typeof e.getExtension?e.getExtension("ANGLE_instanced_arrays"):null,r={BYTES_TO_OFFSET_ANGLE:2*Math.PI/8,BYTES_TO_COLOR:1/15,SDF_FONT_SIZE:24,CURVATURE_RATIO:5,PATTERN_MARGIN:1,TEXT_WIDTH_MULTIPLIER:1,TEXT_HEIGHT_MULTIPLIER:1.5,SELF_LOOP_CURVATURE_MULTIPLIER:5,EDGE_ARROW_SIZE_RATIO:3,NB_PIECES_PER_CURVE:41,PIECE_NODE_COMPONENT:1,PIECE_EDGE_BODY:2,PIECE_EDGE_HEAD:3,PIECE_EDGE_TAIL:4,PIECE_EDGE_TEXT:5,MAX_TEXT_SIZE:25,BYTES_TO_TEXT_OFFSET_X:.001,BYTES_TO_TEXT_OFFSET_Y:.5,FILTER_NEAREST:0,FILTER_LINEAR:1,FILTER_LINEAR_SDF:2,FILTER_MIPMAP:3,SHAPE_TEXTURE_SIZE:Ur,SIMPLE_SHAPE_SAMPLING_SIZE:32,COMPLEX_SHAPE_SAMPLING_SIZE:128,SHAPE_SAMPLING_BUFFER_RATIO:1/16,MAX_NB_SHAPES:15..toString(),FIRST_COMPLEX_SHAPE_ID:8,SELF_LOOP_TO_CIRCLE_APPROX:.9721,SDF_GAMMA:1.4142},i=new fi(e,{vertex:di,fragment:hi,constants:r,macros:{ANIMATED:0}}),o=new fi(e,{vertex:di,fragment:hi,constants:r,macros:{ANIMATED:1}});return e&&n&&(i.compile(),e.flush()),{canvas:t,gl:e,ext:n,staticProgramWrapper:i,animationProgramWrapper:o}},cs.getName=function(){return"WebGL"},cs.prototype._afterFirstFrame=function(){this._animationProgramWrapper.getState()===ci.INIT&&this._animationProgramWrapper.compile()},cs.prototype.ensureAnimationsReady=function(){var t=this._animationProgramWrapper.getState();t!==ci.DONE&&(t===ci.INIT&&this._animationProgramWrapper.compile(),this._animationProgramWrapper.getError())},cs.prototype.getDomElement=function(){return this._glCanvas},cs.prototype._initGl=function(){var t=this._gl;t.clearColor(0,0,0,0),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)},cs.prototype._computeShaderInfo=function(){var t;this._shaderMetadata=(ds(t={vertexInfoAttribute:"a_vertexInfo",attributes:[],uniforms:[]},di),ds(t,"#define D3D9_FIX 0\nprecision highp float;\nprecision mediump int;\nuniform vec3 u_backgroundColor;\nuniform sampler2D u_patternNearestTexture;\nuniform sampler2D u_patternLinearTexture;\nuniform sampler2D u_patternLinearSdfTexture;\nuniform sampler2D u_patternMipmapTexture;\nuniform sampler2D u_shapeTexture;\nvarying vec4 a;\nvarying vec4 b;\nvarying vec4 c;\nvarying vec2 d;\nvarying vec2 e;\n#if D3D9_FIX\n#else\nvarying float j;\nvarying vec2 k;\nvarying vec2 l;\nvarying vec2 m;\nvarying float n;\nvarying float o;\nvarying vec2 p;\nvarying vec2 q;\nvarying float r;\nvarying float s;\n#endif\nconst float FILTER_NEAREST = 0.0;\nconst float FILTER_LINEAR = 0.0;\nconst float FILTER_LINEAR_SDF = 0.0;\nconst float FILTER_MIPMAP = 0.0;\nconst float SDF_GAMMA = 0.0;\nconst float EPSILON = 0.000000001;\nconst float SDF_BUFFER = (256.0 - 64.0) / 256.0; \nvec4 ad(in vec4 ae, in vec4 af) {\nfloat ag = af.a;\nfloat ah = ae.a + EPSILON;\nfloat ai = min(ag + ah, 1.0);\nfloat r = ag / ai;\nreturn vec4(mix(ae.rgb, af.rgb, r), ai);\n}\nfloat aj(in float ak, in float al) {\nfloat am = (ak * 256.0 + al) * 256.0;\nfloat an = am / 32768.0;\nreturn an * 2.0 - 1.0;\n}\nbool ao(float ap, float aq) {\nreturn abs(ap - aq) < EPSILON;\n}\nvoid main() {\n#if D3D9_FIX\n#else\nfloat ar = m.x;\nfloat as = m.y;\nfloat at = p.x;\nfloat au = p.y;\n#endif\nvec4 ax = texture2D(u_shapeTexture, d);\nfloat ay = aj(ax.b, ax.a) * q.x;\nfloat az = aj(ax.r, ax.g) * q.y;\naz += as;\nfloat bc = min(ay, az);\nvec4 bd = a;\nvec4 be = b;\nif (s > -EPSILON) {\nvec2 bi = e;\nfloat bv =\nstep(k.x, bi.x) *\nstep(bi.x, l.x) *\nstep(k.y, bi.y) *\nstep(bi.y, l.y);\nfloat bw = bv;\nvec4 bz;\nif (ao(s, FILTER_NEAREST)) {\nbz = texture2D(u_patternNearestTexture, bi);\n} else if (ao(s, FILTER_LINEAR)) { \nbz = texture2D(u_patternLinearTexture, bi);\n} else if (ao(s, FILTER_LINEAR_SDF)) { \nbz = texture2D(u_patternLinearSdfTexture, bi);\nbz.a = smoothstep(SDF_BUFFER - r, SDF_BUFFER + r, bz.a);\n} else if (ao(s, FILTER_MIPMAP)) { \nbz = texture2D(u_patternMipmapTexture, bi);\n}\nbz.rgb += c.rgb;\nbz.a *= bw;\nbd = ad(bd, bz);\n}\nfloat cl = clamp(bc, 0.0, 1.0);\nfloat cm = clamp(bc - j, 0.0, 1.0);\nfloat cn = cl - cm;\ncn = 1.0 - clamp(bc - j, 0.0, 1.0);\nbd.a *= cm;\nbe.a *= cn;\nvec4 co = ad(bd, be);\nfloat cp = cl;\nco.rgb = mix(u_backgroundColor, co.rgb, ar);\nif (o > EPSILON) {\nfloat de = fract(au) * o;\nfloat df = clamp(min(de, at - de), 0.0, 1.0);\ncp *= df;\n}\nif (n < 0.0 || n > 1.0 || cp < EPSILON) {\ndiscard;\n}\nco.a *= cp;\nco.rgb *= co.a;\ngl_FragColor = co;\n}\n"),t)},cs.prototype._initGlPrograms=function(){this._staticProgram=new Bo({gl:this._gl,ext:this._ext,specialGlBuffers:this._specialGlBuffers,metaData:this._shaderMetadata,programWrapper:this._staticProgramWrapper}),this._animationProgram=new Bo({gl:this._gl,ext:this._ext,specialGlBuffers:this._specialGlBuffers,metaData:this._shaderMetadata,programWrapper:this._animationProgramWrapper})},cs.prototype._initSpecialGlBuffers=function(){for(var t=this._gl,e=t.createBuffer(),n=new Int8Array(738),r=0;r<41;++r)for(var i=[-1,-1,r,1,-1,r,1,1,r,-1,-1,r,-1,1,r,1,1,r],o=r*i.length,s=0;s<i.length;s++)n[s+o]=i[s];t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this._specialGlBuffers={vertexInfo:e}},cs.prototype._computeUniforms=function(){return{viewWidth:this._width,viewHeight:this._height,viewX:this._viewX,viewY:this._viewY,viewZoom:this._viewZoom,viewAngle:this._viewAngle,currentTime:this._currentTime,pixelRatio:this._pixelRatio,backgroundColor:this._backgroundRgba,patternInfoTexture:this._patternTexture.getInfoTextureUnit(),patternNearestTexture:this._patternTexture.getNearestTextureUnit(),patternLinearTexture:this._patternTexture.getLinearTextureUnit(),patternLinearSdfTexture:this._patternTexture.getLinearSdfTextureUnit(),patternMipmapTexture:this._patternTexture.getMipmapTextureUnit(),shapeTexture:this._shapeTexture.getTextureUnit(),BYTES_TO_COORD:this._scales.bytesToActualCoord,BYTES_TO_SCALED_SIZE:this._scales.bytesToActualScaledSize,BYTES_TO_MIN_VISIBLE_SIZE:this._scales.bytesToActualMinVisibleSize,BYTES_TO_SYMBOLIC_SIZE:this._scales.bytesToActualSymbolicSize,BYTES_TO_DASH_LENGTH:this._scales.bytesToActualDashLength,BYTES_TO_GAP_LENGTH:this._scales.bytesToActualGapLength,BYTES_TO_PATTERN_SCALE:this._scales.bytesToActualPatternScale,PATTERN_INFO_TEXTURE_SIZE:this._patternTexture.getInfoTextureSize(),PATTERN_NEAREST_TEXTURE_SIZE:this._patternTexture.getNearestTextureSize(),PATTERN_LINEAR_TEXTURE_SIZE:this._patternTexture.getLinearTextureSize(),PATTERN_LINEAR_SDF_TEXTURE_SIZE:this._patternTexture.getLinearSdfTextureSize(),PATTERN_MIPMAP_TEXTURE_SIZE:this._patternTexture.getMipmapTextureSize(),PATTERN_POSITION_GRANULARITY:this._patternTexture.getGranularity(),SHAPE_TEXTURE_SIZE:this._shapeTexture.getTextureSize(),SHAPE_SAMPLING_SIZE:this._shapeTexture.getSamplingSize(),SHAPE_SAMPLING_BUFFER_RATIO:this._shapeTexture.getBufferRatio(),NB_SHAPES_BY_SIDE:this._shapeTexture.getTextureSize()/this._shapeTexture.getSamplingSize(),SHAPE_DIMENSIONS:this._shapeTexture.getSamplingSize()/this._shapeTexture.getTextureSize(),SHAPE_ACTUAL_RATIO:1-this._shapeTexture.getBufferRatio()}},cs.prototype._render=function(t){var e=t.shapesChanged,n=t.patternsChanged,r=t.dimensionsChanged,i=t.backgroundColorChanged,o=this._gl;if(e&&(this._shapeTexture.refresh(this._shapeManager),this._patternTexture.bindMetDataTexture()),n&&this._patternTexture.refresh(this._patternManager),r&&(this._mustResize=!0),i){var s=this._renderBackground?this._backgroundRgba:[0,0,0,0],a=s[0],u=s[1],c=s[2],l=s[3];o.clearColor(a*l,u*l,c*l,l)}var d=this._computeUniforms(),h=this._startFrame();this._mustResize&&h.length&&(Lt(this._glCanvas,this._width,this._height,this._pixelRatio),o.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),this._mustResize=!1),o.clear(o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT);for(var f=0;f<h.length;++f)this._displayBuffer(h[f],d);this._endFrame()},cs.prototype._displayBuffer=function(t,e){var n=t.getProgram();n!==this._currentProgram&&(this._currentProgram&&this._currentProgram.endPass(),this._currentProgram=n,this._currentProgram.startPass(e)),t.markAsUsed(),t.draw()},cs.prototype._startFrame=function(){for(var t=this._bufferList.getBuffersByAscendingDepth(),e=[],n=0;n<this._glBuffers.length;++n)(i=this._glBuffers[n])&&i.markAsUnused();for(n=0;n<t.length;++n){var r=t[n];(i=this._getAssociatedGlBuffer(r)).markAsUsed(),!r.isEmpty()&&this._isBufferDisplayable(r)&&e.push(i)}for(n=0;n<this._glBuffers.length;++n){var i;(i=this._glBuffers[n])&&!i.isUsed()&&(i.destroy(),this._glBuffers[n]=void 0)}return e},cs.prototype._endFrame=function(){this._currentProgram&&(this._currentProgram.endPass(),this._currentProgram=null)},cs.prototype._getAssociatedGlBuffer=function(t){var e=t.getId(),n=this._glBuffers[e];if(!n){for(;this._glBuffers.length<=e;)this._glBuffers.push(void 0);n=new Ho({gl:this._gl,ext:this._ext,staticProgram:this._staticProgram,animationProgram:this._animationProgram}),this._glBuffers[e]=n}return n.setDataBuffer(t),n},cs.prototype.destroy=function(){var t=this._gl.getExtension("WEBGL_lose_context");t&&t.loseContext()},cs.prototype.getImageData=function(){var t=this._glCanvas.width,e=this._glCanvas.height;return(this._2dcanvas.width<t||this._2dcanvas.height<e)&&(this._2dcanvas.width=t,this._2dcanvas.height=e),this._ctx.drawImage(this._glCanvas,0,0),this._ctx.getImageData(0,0,t,e)},cs.prototype._getImageDataFlippedYAxis=function(){var t=this._gl,e=this._glCanvas.width,n=this._glCanvas.height,r=this._ctx.createImageData(e,n),i=new Uint8Array(r.data.buffer);return t.readPixels(0,0,e,n,t.RGBA,t.UNSIGNED_BYTE,i),r},cs);function cs(t){var e=as.call(this,t)||this;e._2dcanvas=ti(),e._ctx=e._2dcanvas.getContext("2d"),e._glBuffers=[],e._mustResize=!1;var n=t.initData||cs.createInitData(),r=n.canvas,i=n.gl,o=n.ext,s=n.staticProgramWrapper,a=n.animationProgramWrapper;return ss(i,"NO_WEBGL"),ss(o,"NO_ANGLE_INSTANCED_ARRAYS"),e._glCanvas=r,e._gl=i,e._ext=o,e._staticProgramWrapper=s,e._animationProgramWrapper=a,e._shapeTexture=new Ni(e._gl,0),e._patternTexture=new ji(e._gl,1),e._initCanvas(e._glCanvas),e._computeShaderInfo(),e._initSpecialGlBuffers(),e._initGlPrograms(),e._initGl(),e}var ls={float:1,vec2:2,vec3:3,vec4:4};function ds(t,e){for(var n=/(?:attribute\s+\/\*\s*(byte|ubyte|short|ushort|float)\s*\*\/\s*(float|vec2|vec3|vec4)\s+(\w+)\s*;)|(?:#if\s*(\w+))|(?:#endif)/g,r=/uniform\s+(float|vec2|vec3|vec4|sampler2D|int)\s+(\w+)\s*;/g,i=[],o=n.exec(e);o;){var s=o[0];"#endif"===s?i.pop():s.startsWith("#if")?i.push(o[4]):t.attributes.push({name:o[3],size:ls[o[2]],type:o[1],tags:i.slice(),location:null,byteSize:0,glType:null}),o=n.exec(e)}for(o=r.exec(e);o;){if(!t.uniforms.some((function(t){return t.id===o[1]}))){var a=o[1],u=o[2],c=u.replace("u_","");t.uniforms.push({id:c,name:u,type:a})}o=r.exec(e)}}var hs=Math.PI,fs=2*Math.PI,ps=hs*(5/4),gs=hs*(7/4),_s=.75*hs,vs=.25*hs,ys=-hs/2,ms=hs/2,bs={plain:{dash:0,gap:0},dashed:{dash:3,gap:1},dotted:{dash:1,gap:3}},xs={right:0,top:-Math.PI/2,left:Math.PI,bottom:Math.PI/2,center:0},Es={right:Math.PI,top:-Math.PI/2,left:0,bottom:Math.PI/2,center:0};function ws(t,e,n,r,i){var o=1-i;return o*o*o*t+3*i*o*o*e+3*i*i*o*n+i*i*i*r}function Ss(t,e,n,r){var i=1-r;return i*i*t+2*i*r*e+r*r*n}function As(t,e,n,r,i,o){var s=o||{x:0,y:0},a=(t+n)/2,u=(e+r)/2,c=t-n,l=e-r,d=Math.sqrt(c*c+l*l);if(0===d)return s.x=a,s.y=u,s;var h=l/d,f=-c/d,p=-d*i/5;return s.x=a+h*p,s.y=u+f*p,s}function Cs(t,e,n,r,i,o){var s=o||{x1:0,y1:0,x2:0,y2:0},a=5*(r+r/5*n),u=-i+hs,c=hs/2-i;return s.x1=t+Math.cos(u)*a,s.y1=e+Math.sin(u)*a,s.x2=t+Math.cos(c)*a,s.y2=e+Math.sin(c)*a,s}var Ts,ks=(E(Is,Ts=ai),Is.prototype._resetCachePoints=function(){this._nextCachePoint=0},Is.prototype._point=function(t,e){var n=this._cachePoints[this._nextCachePoint++];return n||(n={x:0,y:0},this._cachePoints.push(n)),n.x=t,n.y=e,n},Is.prototype.setViewportClipping=function(t){this._clipViewport=t},Is.prototype._formatAngle=function(t){return t<-Math.PI?t+2*Math.PI:t>Math.PI?t-2*Math.PI:t},Is.prototype._computeAnimationRatio=function(t){var e=t.beginTime,n=t.duration,r=t.easing,i=(this._currentTime-e)/n,o=i*i,s=o*i,a=this._easingManager.getCoefficients(r),u=i<.5?0:4;return We(a[u]+a[1+u]*i+a[2+u]*o+a[3+u]*s,0,1)},Is.prototype._mixColor=function(t,e,n,r){if(t===e)return t;var i=this._colorManager.parseColor(t),o=i[0],s=i[1],a=i[2],u=i[3],c=this._colorManager.parseColor(e),l=c[0],d=c[1],h=c[2],f=c[3];return"rgba("+Math.round(255*Xe(o,l,n))+","+Math.round(255*Xe(s,d,n))+","+Math.round(255*Xe(a,h,n))+","+Xe(u,f,r)+")"},Is.prototype._displayBuffer=function(t){for(var e=t.getSize(),n=t.isAnimated(),r=0;r<e;++r){var i=this.extractElement(t,r);i.valid&&this._displayElement(i,n)}},Is.prototype._mixAttributes=function(t,e,n){var r=this._computeAnimationRatio(n);return t.dashLength=Xe(e.dashLength,t.dashLength,r),t.gapLength=Xe(e.gapLength,t.gapLength,r),t.offsetAngle=Xe(e.offsetAngle,t.offsetAngle,r),t.opacity=Xe(e.opacity,t.opacity,r),t.globalMinVisibleSize=Xe(e.globalMinVisibleSize,t.globalMinVisibleSize,r),t.strokeMinVisibleSize=Xe(e.strokeMinVisibleSize,t.strokeMinVisibleSize,r),t.patternMinVisibleSize=Xe(e.patternMinVisibleSize,t.patternMinVisibleSize,r),t.symbolicSize=Xe(e.symbolicSize,t.symbolicSize,r),t.curvature=Xe(e.curvature,t.curvature,r),t.fillColor=this._mixColor(e.fillColor,t.fillColor,r,r),t.strokeColor=this._mixColor(e.strokeColor,t.strokeColor,r,r),t.patternColor=this._mixColor(e.patternColor,t.patternColor,r,r),t.x1=Xe(e.x1,t.x1,r),t.y1=Xe(e.y1,t.y1,r),t.x2=Xe(e.x2,t.x2,r),t.y2=Xe(e.y2,t.y2,r),t.rectWidthOrSourceRadiusScaled=Xe(e.rectWidthOrSourceRadiusScaled,t.rectWidthOrSourceRadiusScaled,r),t.rectWidthOrSourceRadiusFixed=Xe(e.rectWidthOrSourceRadiusFixed,t.rectWidthOrSourceRadiusFixed,r),t.rectHeightOrTargetRadiusScaled=Xe(e.rectHeightOrTargetRadiusScaled,t.rectHeightOrTargetRadiusScaled,r),t.rectHeightOrTargetRadiusFixed=Xe(e.rectHeightOrTargetRadiusFixed,t.rectHeightOrTargetRadiusFixed,r),t.thicknessOrFontSizeScaled=Xe(e.thicknessOrFontSizeScaled,t.thicknessOrFontSizeScaled,r),t.thicknessOrFontSizeFixed=Xe(e.thicknessOrFontSizeFixed,t.thicknessOrFontSizeFixed,r),t.strokeWidthScaled=Xe(e.strokeWidthScaled,t.strokeWidthScaled,r),t.strokeWidthFixed=Xe(e.strokeWidthFixed,t.strokeWidthFixed,r),t.offsetScaled=Xe(e.offsetScaled,t.offsetScaled,r),t.offsetFixed=Xe(e.offsetFixed,t.offsetFixed,r),t},Is.prototype._computeRenderInfo=function(t){var e=this._viewZoom,n=this._point(t.x1,t.y1),r=this._point(t.x2,t.y2);return{shape:this._shapeManager.getDefinitionFromName(t.shape),pieceId:t.pieceId,dashLength:t.dashLength,gapLength:t.gapLength,hasHead:t.hasHead,hasTail:t.hasTail,isBodyTriangle:t.isBodyTriangle,isSelfLoop:t.isSelfLoop,patternScale:t.patternScale,offsetAngle:this._formatAngle(t.offsetAngle),isText:t.isText,adjustTextAngle:t.adjustTextAngle,isBadge:t.isBadge,unusedFlag2:t.unusedFlag2,unusedFlag3:t.unusedFlag3,opacity:t.opacity,globalMinVisibleSize:t.globalMinVisibleSize,strokeMinVisibleSize:t.strokeMinVisibleSize,patternMinVisibleSize:t.patternMinVisibleSize,symbolicSize:0===t.symbolicSize?1/0:t.symbolicSize*e,curvature:t.curvature,pattern:t.pattern,fillColor:t.fillColor,strokeColor:t.strokeColor,patternColor:t.patternColor,pos1OnGraph:n,pos2OnGraph:r,pos1:this._graphToScreenCoordinates(n),pos2:this._graphToScreenCoordinates(r),rectWidthOrSourceRadius:t.rectWidthOrSourceRadiusScaled*e+t.rectWidthOrSourceRadiusFixed,rectHeightOrTargetRadius:t.rectHeightOrTargetRadiusScaled*e+t.rectHeightOrTargetRadiusFixed,thicknessOrFontSize:t.thicknessOrFontSizeScaled*e+t.thicknessOrFontSizeFixed,strokeWidth:t.strokeWidthScaled*e+t.strokeWidthFixed,offset:t.offsetScaled*e+t.offsetFixed}},Is.prototype._applyBackgroundBlending=function(t){1!==t.opacity&&(t.fillColor=this._blendColor(t.fillColor,t.opacity),t.strokeColor=this._blendColor(t.strokeColor,t.opacity),t.textColor=this._blendColor(t.textColor,t.opacity))},Is.prototype._pointArray=function(t){var e=this._pointCopies[t];if(!e){e=new Array(t),this._pointCopies[t]=e;for(var n=0;n<t;++n)e[n]={x:0,y:0,r:0}}return e},Is.prototype._scalePoints=function(t,e,n,r){for(var i=t.shape.points.length,o=this._pointArray(i),s=0;s<i;++s){var a=t.shape.points[s],u=o[s];u.x=e.x+a.x*n,u.y=e.y+a.y*r,u.r=a.r*n}var c=t.pos2OnGraph.x-t.pos1OnGraph.x,l=t.pos2OnGraph.y-t.pos1OnGraph.y;if(0!=c||0!=l)for(var d=Math.sqrt(c*c+l*l),h=c/d,f=l/d,p=0,g=o;p<g.length;p++){var _=g[p],v=_.x-e.x,y=_.y-e.y;_.x=e.x+h*v+f*y,_.y=e.y-f*v+h*y}return o},Is.prototype._drawPoints=function(t){1===t.length?this._drawCircle(t[0],t[0].r):this._drawPolygon(t)},Is.prototype._computeCenter=function(t){var e=Math.cos(t.offsetAngle),n=Math.sin(t.offsetAngle),r=(t.pos1.x+t.pos2.x)/2+e*t.offset,i=(t.pos1.y+t.pos2.y)/2+n*t.offset;return this._point(r,i)},Is.prototype._displayNodeComponent=function(t,e,n,r){var i=this,o=this._computeCenter(t);if(7!==t.pattern.type){var s=t.rectWidthOrSourceRadius/2,a=t.rectHeightOrTargetRadius/2,u=this._scalePoints(t,o,s,a);if((e||r)&&this._drawPoints(u),e&&this._fill(t.fillColor),r){if(this._startClip(),4===t.pattern.type){var c=t.pattern.attributes.colorArray;1!==t.opacity&&(c=c.map((function(e){return i._blendColor(e,t.opacity)}))),this._displayPieChart(o,s,c)}else if(5===t.pattern.type||6===t.pattern.type){var l=0,d=Math.round(t.rectHeightOrTargetRadius*t.patternScale),h=t.pattern.attributes.text,f=t.patternColor,p=t.pattern.attributes.font,g=t.pattern.attributes.style,_=t.pattern.attributes.align,v=t.rectWidthOrSourceRadius,y=t.pattern.attributes.paddingTop,m=t.pattern.attributes.paddingLeft;this._displayText(o,l,h,f,p,d,g,_,v,m,y)}else if(2===t.pattern.type){var b=t.pattern.attributes.image;if(b.isDummy||b.width&&b.height){var x=t.pattern.attributes.duplicated,E=x?1:t.patternScale,w=t.rectWidthOrSourceRadius*E,S=t.rectHeightOrTargetRadius*E,A=t.pattern.attributes.scaled,C=t.opacity;this._displayImage(o,w,S,b,A,x,C)}}this._endClip()}if(n){var T=t.strokeWidth/2,k=this._scalePoints(t,o,s+T,a+T);this._drawPoints(k),this._stroke(t.strokeColor,t.strokeWidth)}}else r&&(l=0,d=t.thicknessOrFontSize,h=t.pattern.attributes.text,f=t.patternColor,p=t.pattern.attributes.font,g=t.pattern.attributes.style,_=t.pattern.attributes.align,v=t.rectWidthOrSourceRadius,this._displayText(o,l,h,f,p,d,g,_,v))},Is.prototype._displayElement=function(t,e){if(t.end&&t.end.shape&&t.end.pieceId&&(!e||t.start&&t.animation)){this._resetCachePoints();var n=e?this._mixAttributes(t.end,t.start,t.animation):t.end,r=this._computeRenderInfo(n);if(!(r.symbolicSize<r.globalMinVisibleSize||0===r.opacity)){this._applyBackgroundBlending(r);var i=!!(r.strokeColor&&0<r.strokeWidth&&r.symbolicSize>=r.strokeMinVisibleSize),o=!!(1!==r.pattern.type&&r.symbolicSize>=r.patternMinVisibleSize),s=!!r.fillColor;if(1===r.pieceId)return this._displayNodeComponent(r,s,i,o);var a,u,c,l,d,h,f,p,g,_,v,y,m,b,x,E,w,S,A,C,T=r.pos2.x-r.pos1.x,k=r.pos2.y-r.pos1.y,I=Math.sqrt(T*T+k*k),O=null,M=null;if(r.isSelfLoop){var L=5===r.pieceId?r.strokeWidth/2:r.rectWidthOrSourceRadius,N=this._getSelfLoopControlPoints(r.pos1,r.curvature,L),R=N.x1,P=N.y1,D=N.x2,F=N.y2;O=this._point(R,P),M=this._point(D,F),_=r.pos1,v=O,y=M,r.pos2,m=(_.x+v.x+y.x)/3,b=(_.y+v.y+y.y)/3,A=(x=m-v.x)*x+(E=b-v.y)*E,C=((w=v.x-y.x)*w+(S=v.y-y.y)*S)/4,a=1.9442*Math.sqrt(A-C)*3.14159265359*1}else a=r.curvature?(O=this._getQuadraticCurveControlPoint(r),u=r.curvature,c=I,h=.25,f=1/(16*(d=(l=Math.abs(u)/5+1e-6)*l)),p=Math.sqrt(h+f),g=.5/l*Math.sqrt(.25+d),Math.abs(2*l)*(.5*p+.5*g+f*Math.log(Math.abs((.5+p)/(g-.5))))*c):I;if(5===r.pieceId){var z=r.strokeWidth,B=this._getPointOnLine(r.pos1,O,M,r.pos2,.5),U=this._getTangentOnLine(r.pos1,O,M,r.pos2,.5);r.adjustTextAngle&&!r.isSelfLoop&&r.rectWidthOrSourceRadius>=a-z&&(U.x=1,U.y=0,r.offset=0);var V=-Math.atan2(U.y,U.x),j=this._formatAngle(r.offsetAngle-V);(!r.isSelfLoop&&j<0||r.isSelfLoop&&r.offsetAngle<0)&&(U.x*=-1,U.y*=-1),(V>Math.PI/2||V<-Math.PI/2)&&(V+=Math.PI);var H=this._getOrthogonal(U),G=B.x+H.x*r.offset,q=B.y+H.y*r.offset;if(r.fillColor){var W=this._pointArray(4),Y=r.rectWidthOrSourceRadius/2,X=r.rectHeightOrTargetRadius/2,Z=U.x*Y,K=U.y*Y,J=H.x*X,Q=H.y*X,$=W[0],tt=W[1],et=W[2],nt=W[3];$.x=G+Z+J,$.y=q+K+Q,tt.x=G+Z-J,tt.y=q+K-Q,et.x=G-Z-J,et.y=q-K-Q,nt.x=G-Z+J,nt.y=q-K+Q,this._drawPoints(W),this._fill(r.fillColor)}else{var rt=this._point(G,q),it=V,ot=r.thicknessOrFontSize,st=r.pattern.attributes.text,at=r.patternColor,ut=r.pattern.attributes.font,ct=r.pattern.attributes.style,lt=r.pattern.attributes.align,dt=r.rectWidthOrSourceRadius;this._displayText(rt,it,st,at,ut,ot,ct,lt,dt)}}else{var ht=3===r.pieceId,ft=4===r.pieceId,pt=Math.cos(r.offsetAngle),gt=Math.sin(r.offsetAngle);r.pos1.x+=pt*r.offset,r.pos1.y+=gt*r.offset,r.pos2.x+=pt*r.offset,r.pos2.y+=gt*r.offset;var _t="line"===r.shape.name,vt=r.thicknessOrFontSize,yt=r.rectWidthOrSourceRadius,mt=r.rectHeightOrTargetRadius,bt=+r.hasHead,xt=+r.hasTail,Et=+r.isBodyTriangle,wt=bt+xt,St=3*vt,At=bt*St,Ct=xt*St,Tt=r.isSelfLoop?1/0:I-yt-mt,kt=Math.min(Tt/wt,St),It=xt*(St+Math.max(yt+kt-Ct,0))+(1-xt)*Et*yt,Ot=bt*(St+Math.max(mt+kt-At,0))+(1-bt)*Et*mt;if(ht||ft){var Mt=ft?-1:1,Lt=(ht?a-Ot:It)-Mt,Nt=null,Rt=null;if(r.isSelfLoop&&O&&M){var Pt=this._getTFromLengthOnCubicCurve(r.pos1,O,M,r.pos2,Lt-r.strokeWidth/2*Mt);Nt=this._getPointOnCubicCurve(r.pos1,O,M,r.pos2,Pt),Rt=this._getTangentOnCubicCurve(r.pos1,O,M,r.pos2,Pt)}else Rt=r.curvature&&O?(Pt=this._getTFromLengthOnQuadraticCurve(r.pos1,O,r.pos2,Lt-r.strokeWidth/2*Mt),Nt=this._getPointOnQuadraticCurve(r.pos1,O,r.pos2,Pt),this._getTangentOnQuadraticCurve(r.pos1,O,r.pos2,Pt)):(Pt=Lt/a,Nt=this._mixPoints(r.pos1,r.pos2,Pt),this._point(T/I,k/I));if(Rt.x*=Mt,Rt.y*=Mt,s){if(r.shape.hole){var Dt=this._makeEdgeExtremityPoints(Nt,Rt,St,r.shape.hole);this._drawPoints(Dt),this._startReverseClip()}W=this._makeEdgeExtremityPoints(Nt,Rt,St,r.shape.points),this._drawPoints(W),this._fill(r.fillColor),r.shape.hole&&this._endReverseClip()}if(i){r.shape.hole&&(Dt=this._makeEdgeExtremityPoints(Nt,Rt,St,r.shape.hole),this._drawPoints(Dt),this._stroke(r.strokeColor,r.strokeWidth));var Ft=St+r.strokeWidth/2;W=this._makeEdgeExtremityPoints(Nt,Rt,Ft,r.shape.points),this._drawPoints(W),this._stroke(r.strokeColor,r.strokeWidth)}}else{if(a-It-Ot<=0)return;if(_t){var zt=function(t,e,n,r,i,o){var s=[];if(n&&s.push(0,n),i&&o){for(var a=i*e,u=o*e,c=a+u,l=t-r-n-c,d=0;d<l;)s.push(a,u),d+=c;var h=t-r-n-d,f=Math.min(a,h),p=Math.max(h-f,0);s.push(f,p)}else s.push(t-r-n,0);return r&&s.push(0,r),s}(a,vt,It,Ot,r.dashLength,r.gapLength);i&&(this._drawLine(r.pos1,O,M,r.pos2),this._stroke(r.strokeColor,vt+2*r.strokeWidth,zt)),s&&(this._drawLine(r.pos1,O,M,r.pos2),this._stroke(r.fillColor,vt,zt))}else{var Bt=It,Ut=a-Ot;i&&(W=this._makeTriangleEdgeBody(r.pos1,O,M,r.pos2,Bt,Ut,vt+r.strokeWidth/2,r.strokeWidth/2),this._drawPoints(W),this._stroke(r.strokeColor,r.strokeWidth)),s&&(W=this._makeTriangleEdgeBody(r.pos1,O,M,r.pos2,Bt,Ut,vt,0),this._drawPoints(W),this._fill(r.fillColor))}}}}}},Is.prototype._makeTriangleEdgeBody=function(t,e,n,r,i,o,s,a){return e?n?this._makeSelfLoopTriangleEdge(t,e,n,r,i,o,s,a):this._makeCurveTriangleEdge(t,e,r,i,o,s,a):this._makeStraightTriangleEdge(t,r,i,o,s,a)},Is.prototype._makeCurveTriangleEdge=function(t,e,n,r,i,o,s){for(var a=this._pointArray(84),u=this._getTFromLengthOnQuadraticCurve(t,e,n,r),c=(this._getTFromLengthOnQuadraticCurve(t,e,n,i)-u)/41,l=(s-o)/41/2,d=o/2,h=u,f=0;f<=41;++f){var p=this._getPointOnQuadraticCurve(t,e,n,h),g=this._getTangentOnQuadraticCurve(t,e,n,h),_=this._getOrthogonal(g),v=_.x*d,y=_.y*d,m=a[f],b=a[83-f];m.x=p.x+v,m.y=p.y+y,b.x=p.x-v,b.y=p.y-y,h+=c,d+=l}return a},Is.prototype._makeSelfLoopTriangleEdge=function(t,e,n,r,i,o,s,a){for(var u=this._pointArray(84),c=this._getTFromLengthOnCubicCurve(t,e,n,r,i),l=(this._getTFromLengthOnCubicCurve(t,e,n,r,o)-c)/41,d=(a-s)/41/2,h=s/2,f=c,p=0;p<=41;++p){var g=this._getPointOnCubicCurve(t,e,n,r,f),_=this._getTangentOnCubicCurve(t,e,n,r,f),v=this._getOrthogonal(_),y=v.x*h,m=v.y*h,b=u[p],x=u[83-p];b.x=g.x+y,b.y=g.y+m,x.x=g.x-y,x.y=g.y-m,f+=l,h+=d}return u},Is.prototype._makeStraightTriangleEdge=function(t,e,n,r,i,o){var s=e.x-t.x,a=e.y-t.y,u=Math.sqrt(s*s+a*a),c=this._point(s/u,a/u),l=this._getOrthogonal(c),d=i/2,h=o/2,f=this._pointArray(4),p=f[0],g=f[1],_=f[2],v=f[3],y=t.x+c.x*n,m=t.y+c.y*n,b=t.x+c.x*r,x=t.y+c.y*r,E=l.x*d,w=l.y*d,S=l.x*h,A=l.y*h;return p.x=y+E,p.y=m+w,g.x=y-E,g.y=m-w,_.x=b-S,_.y=x-A,v.x=b+S,v.y=x+A,f},Is.prototype._makeEdgeExtremityPoints=function(t,e,n,r){for(var i=this._pointArray(r.length),o=n/2,s=t.x+e.x*o,a=t.y+e.y*o,u=e.x,c=e.y,l=0;l<r.length;++l){var d=r[l],h=i[l],f=(u*d.x-c*d.y)*o,p=(c*d.x+u*d.y)*o;h.x=s+f,h.y=a+p,h.r=d.r*o}return i},Is.prototype._drawLine=function(t,e,n,r){e?n?this._drawCubicCurve(t,e,n,r):this._drawQuadraticCurve(t,e,r):this._drawStraightLine(t,r)},Is.prototype._getSelfLoopControlPoints=function(t,e,n){return Cs(t.x,t.y,e,n,this._viewAngle,this._tmp)},Is.prototype._getQuadraticCurveControlPoint=function(t){return As(t.pos1.x,t.pos1.y,t.pos2.x,t.pos2.y,t.curvature,this._point(0,0))},Is.prototype._graphToScreenCoordinates=function(t){var e=this._width/2,n=this._height/2,r=(t.x-this._viewX)*this._viewZoom,i=(t.y-this._viewY)*this._viewZoom,o=this._viewAngleCos,s=this._viewAngleSin,a=o*r+s*i+e,u=-s*r+o*i+n;return this._point(a,u)},Is.prototype._blendColor=function(t,e){return t&&this._backgroundColor?this._mixColor(this._backgroundColor,t,e,1):null},Is.prototype._getTangentOnLine=function(t,e,n,r,i){return e?n?this._getTangentOnCubicCurve(t,e,n,r,i):this._getTangentOnQuadraticCurve(t,e,r,i):this._getTangentOnStraightLine(t,r)},Is.prototype._getTangentOnStraightLine=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);return this._point(n/i,r/i)},Is.prototype._getTangentOnQuadraticCurve=function(t,e,n,r){var i=1-r,o=i*e.x+r*n.x-(i*t.x+r*e.x),s=i*e.y+r*n.y-(i*t.y+r*e.y),a=Math.sqrt(o*o+s*s);return this._point(o/a,s/a)},Is.prototype._getTangentOnCubicCurve=function(t,e,n,r,i){var o=1-i,s=o*o,a=i*i,u=s*(e.x-t.x)+2*o*i*(n.x-e.x)+a*(r.x-n.x),c=s*(e.y-t.y)+2*o*i*(n.y-e.y)+a*(r.y-n.y),l=Math.sqrt(u*u+c*c);return this._point(u/l,c/l)},Is.prototype._mixPoints=function(t,e,n){var r=Xe(t.x,e.x,n),i=Xe(t.y,e.y,n);return this._point(r,i)},Is.prototype._getOrthogonal=function(t){return this._point(-t.y,t.x)},Is.prototype._getPointOnLine=function(t,e,n,r,i){return e?n?this._getPointOnCubicCurve(t,e,n,r,i):this._getPointOnQuadraticCurve(t,e,r,i):this._mixPoints(t,r,i)},Is.prototype._getPointOnQuadraticCurve=function(t,e,n,r){var i=Ss(t.x,e.x,n.x,r),o=Ss(t.y,e.y,n.y,r);return this._point(i,o)},Is.prototype._getPointOnCubicCurve=function(t,e,n,r,i){var o=ws(t.x,e.x,n.x,r.x,i),s=ws(t.y,e.y,n.y,r.y,i);return this._point(o,s)},Is.prototype._getTFromLengthOnCubicCurve=function(t,e,n,r,i){for(var o=t.x,s=t.y,a=0,u=0,c=0;c<41;++c){a+=1/41;var l=ws(t.x,e.x,n.x,r.x,a),d=ws(t.y,e.y,n.y,r.y,a),h=l-o,f=d-s,p=Math.sqrt(h*h+f*f),g=u+p;if(i<g)return a-1/41*((g-i)/p);u=g,o=l,s=d}return 1},Is.prototype._getTFromLengthOnQuadraticCurve=function(t,e,n,r){for(var i=t.x,o=t.y,s=0,a=0,u=0;u<41;++u){s+=1/41;var c=Ss(t.x,e.x,n.x,s),l=Ss(t.y,e.y,n.y,s),d=c-i,h=l-o,f=Math.sqrt(d*d+h*h),p=a+f;if(r<p)return s-1/41*((p-r)/f);a=p,i=c,o=l}return 1},Is);function Is(t){var e=Ts.call(this,t)||this;return e._cachePoints=[],e._nextCachePoint=0,e._tmp={x1:0,y1:0,x2:0,y2:0},e._pointCopies=Array(128),e._clipViewport=!0,e}var Os,Ms=!ti().__dummy,Ls=(E(Ns,Os=ks),Ns.getName=function(){return"Canvas"},Ns.isAvailable=function(){return Ms},Ns.prototype.getDomElement=function(){return this._canvas},Ns.prototype._render=function(t){t.dimensionsChanged&&si(this._canvas,this._width,this._height,this._pixelRatio);var e=this._ctx,n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;e.clearRect(0,0,n,r),this._backgroundColor&&this._renderBackground&&(e.fillStyle=this._backgroundColor,e.fillRect(0,0,n,r));for(var i=this._bufferList.getBuffersByAscendingDepth(),o=0;o<i.length;++o){var s=i[o];this._isBufferDisplayable(s)&&this._displayBuffer(s)}},Ns.prototype._drawCircle=function(t,e){var n=this._ctx,r=this._pixelRatio,i=t.x*r,o=t.y*r,s=e*r;n.beginPath(),n.arc(i,o,s,0,2*Math.PI)},Ns.prototype._drawPolygon=function(t){var e=this._ctx,n=this._pixelRatio;e.beginPath();var r=t[0];e.moveTo(r.x*n,r.y*n);for(var i=1;i<t.length;++i){var o=t[i];e.lineTo(o.x*n,o.y*n)}e.closePath()},Ns.prototype._drawStraightLine=function(t,e){var n=this._ctx,r=this._pixelRatio;n.beginPath(),n.moveTo(t.x*r,t.y*r),n.lineTo(e.x*r,e.y*r)},Ns.prototype._drawQuadraticCurve=function(t,e,n){var r=this._ctx,i=this._pixelRatio;r.beginPath(),r.moveTo(t.x*i,t.y*i),r.quadraticCurveTo(e.x*i,e.y*i,n.x*i,n.y*i)},Ns.prototype._drawCubicCurve=function(t,e,n,r){var i=this._ctx,o=this._pixelRatio;i.beginPath(),i.moveTo(t.x*o,t.y*o),i.bezierCurveTo(e.x*o,e.y*o,n.x*o,n.y*o,r.x*o,r.y*o)},Ns.prototype._fill=function(t){var e=this._ctx;e.fillStyle=t,e.fill()},Ns.prototype._stroke=function(t,e,n){var r=this;void 0===n&&(n=[]);var i=this._ctx,o=this._pixelRatio;i.setLineDash(n.map((function(t){return t*r._pixelRatio}))),i.lineWidth=e*o,i.strokeStyle=t,i.stroke()},Ns.prototype._startClip=function(){this._ctx.save(),this._ctx.clip()},Ns.prototype._endClip=function(){this._ctx.restore()},Ns.prototype._startReverseClip=function(){this._ctx.save(),this._ctx.rect(0,0,this._canvas.width,this._canvas.height),this._ctx.clip("evenodd")},Ns.prototype._endReverseClip=function(){this._ctx.restore()},Ns.prototype._displayText=function(t,e,n,r,i,o,s,a,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var d=this._ctx,h=this._pixelRatio,f=t.x*h,p=t.y*h,g=o*h,_="center"===a?0:-u/2;if(l=l*this._viewZoom*this._pixelRatio,c=c*this._viewZoom*this._pixelRatio,d.save(),d.translate(f,p),d.rotate(-e),d.textBaseline="middle",d.textAlign=a,ni(d,i,g,s),d.fillStyle=r,-1!==n.indexOf("\n"))for(var v=n.split("\n"),y=v.length,m=(1-y)/2*g,b=0;b<y;++b)d.fillText(v[b],c+_,l+m),m+=g;else d.fillText(n,c+_,l-1);d.restore()},Ns.prototype._displayImage=function(t,e,n,r,i,o,s){if(!this._hideImages&&!("isDummy"in r)){var a=r;1!==s&&(a=this._blendImageOnBackground(r,s));var u=this._ctx,c=this._pixelRatio,l=t.x*c,d=t.y*c,h=e*c,f=n*c,p=a.width*c,g=a.height*c;if(i)u.drawImage(a,l-h/2,d-f/2,h,f);else if(o){for(var _=l-h/2,v=d-f/2,y=l+h/2,m=d+f/2,b=l-p/2,x=d-g/2;_<b;)b-=p;for(;v<x;)x-=g;for(var E=x;b<y;){for(;x<m;)u.drawImage(a,b,x,p,g),x+=g;b+=p,x=E}}else u.drawImage(a,l-p/2,d-g/2,p,g)}},Ns.prototype._displayPieChart=function(t,e,n){var r=this._ctx,i=this._pixelRatio,o=t.x*i,s=t.y*i,a=e*i*2,u=2*a;1===n.length&&(r.fillStyle=n[0],r.fillRect(o-a,s-a,u,u)),1<n.length&&Li(r,n,o,s,a)},Ns.prototype._blendImageOnBackground=function(t,e){var n=this._backgroundRgba,r="rgb("+Math.round(255*n[0])+","+Math.round(255*n[1])+","+Math.round(255*n[2])+")";return this._imgCanvas.width=t.width,this._imgCanvas.height=t.height,this._imgCtx.clearRect(0,0,t.width,t.height),this._imgCtx.globalAlpha=1,this._imgCtx.fillStyle=r,this._imgCtx.fillRect(0,0,t.width,t.height),this._imgCtx.globalAlpha=e,this._imgCtx.drawImage(t,0,0),this._imgCanvas},Ns.prototype.getImageData=function(){return this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height)},Ns);function Ns(t){var e=Os.call(this,t)||this;return e._canvas=ti(),e._imgCanvas=ti(),e._initCanvas(e._canvas),e._ctx=e._canvas.getContext("2d"),e._imgCtx=e._imgCanvas.getContext("2d"),e}var Rs=[1/0,1/0,-1/0,-1/0];function Ps(t,e,n,r,i,o){void 0===o&&(o={x:0,y:0});var s=Math.cos(i),a=Math.sin(i),u=t-n,c=e-r;return o.x=s*u-a*c+n,o.y=a*u+s*c+r,o}function Ds(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}function Fs(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function zs(t){return 180*t/Math.PI}function Bs(t,e){return t.minX-=e,t.minY-=e,t.maxX+=e,t.maxY+=e,void 0===t.width&&(t.width=t.maxX-t.minX),void 0===t.height&&(t.height=t.maxY-t.minY),t.width+=2*e,t.height+=2*e,t}var Us=!1;try{Us=!!Ft("svg")}catch(l){}var Vs="none",js={left:"start",center:"middle",right:"end"},Hs="data-element-id";function Gs(t){return Math.round(1e3*t)/1e3}function qs(t,e,n,r,i,o){var s=Ft("image");return s.setAttribute("width",Gs(r)),s.setAttribute("height",Gs(i)),s.setAttribute("x",Gs(e)),s.setAttribute("y",Gs(n)),s.setAttribute("href",t),o&&o.appendChild(s),s}var Ws,Ys=(E(Xs,Ws=ks),Xs.getName=function(){return"SVG"},Xs.isAvailable=function(){return Us},Xs.prototype.getDomElement=function(){return this._svg},Xs.prototype._render=function(t){if(t.dimensionsChanged&&Nt(this._svg,{width:this._width,height:this._height}),this._backgroundColor&&this._renderBackground){var e=this._colorManager.rgbaToRgb(this._backgroundColor);this._background.setAttribute("fill",e.color),this._background.setAttribute("fill-opacity",e.opacity)}var n=this._bufferList.getBuffersByAscendingDepth();this._clear(),this._svg.removeChild(this._container);for(var r=0;r<n.length;++r){var i=n[r];this._isBufferDisplayable(i)&&this._displayBuffer(i)}this._svg.appendChild(this._container)},Xs.prototype._clear=function(){this._container&&this._svg.removeChild(this._container),this._container=Ft("g"),this._svg.appendChild(this._container),this._clipPaths&&this._defs.removeChild(this._clipPaths),this._clipPaths=Ft("g"),this._defs.appendChild(this._clipPaths),this._filters&&this._defs.removeChild(this._filters),this._filters=Ft("g"),this._defs.appendChild(this._filters)},Xs.prototype._displayElement=function(t,e){this._currentElementId=0<=t.id?"n"+t.id:"e"+-t.id,Ws.prototype._displayElement.call(this,t,e)},Xs.prototype._addBackgroundBlendingFilter=function(t){var e=this._colorManager.parseColor(this._backgroundColor),n=1-t,r=[t,0,0,0,e[0]*n,0,t,0,0,e[1]*n,0,0,t,0,e[2]*n,0,0,0,1,0].join(" "),i="filter-"+this._currentElementId,o=Ft("filter",{id:i}),s=Ft("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:r});return o.appendChild(s),this._filters.appendChild(o),i},Xs.prototype._drawCircle=function(t,e){var n="M "+(t.x-e)+", "+t.y+" a "+e+","+e+" 0 1,0 "+2*e+",0 a "+e+","+e+" 0 1,0 -"+2*e+",0",r=Ft("path");r.setAttribute("d",n),r.setAttribute("fill",Vs),r.setAttribute(Hs,this._currentElementId),this._container.appendChild(r),this._element=r},Xs.prototype._drawPolygon=function(t){for(var e=Ft("path"),n="",r=0;r<t.length;r++){var i=t[r];n+=(0===r?"M":"L")+i.x+","+i.y+" "}n+="Z",e.setAttribute("d",n),e.setAttribute(Hs,this._currentElementId),e.setAttribute("fill",Vs),this._container.appendChild(e),this._element=e},Xs.prototype._drawStraightLine=function(t,e){var n=Ft("path"),r="M "+t.x+","+t.y+" L"+e.x+","+e.y;n.setAttribute("d",r),n.setAttribute(Hs,this._currentElementId),this._container.appendChild(n),this._element=n},Xs.prototype._drawQuadraticCurve=function(t,e,n){var r=Ft("path"),i="M "+t.x+","+t.y+" Q"+e.x+","+e.y+" "+n.x+","+n.y;r.setAttribute("d",i),r.setAttribute("fill",Vs),r.setAttribute(Hs,this._currentElementId),this._container.appendChild(r),this._element=r},Xs.prototype._drawCubicCurve=function(t,e,n,r){var i=Ft("path"),o="M "+t.x+","+t.y+" C"+e.x+","+e.y+" "+n.x+","+n.y+" "+r.x+","+r.y;i.setAttribute("d",o),i.setAttribute("fill",Vs),i.setAttribute(Hs,this._currentElementId),this._container.appendChild(i),this._element=i},Xs.prototype._fill=function(t){var e=this._colorManager.rgbaToRgb(t);this._element.setAttribute("fill",e.color),this._element.setAttribute("fill-opacity",e.opacity),this._currentClipPathId&&this._element.setAttribute("clip-path","url(#"+this._currentClipPathId+")")},Xs.prototype._stroke=function(t,e,n){void 0===n&&(n=[]);var r=this._element;r.setAttribute("stroke-width",e);var i=this._colorManager.rgbaToRgb(t);r.setAttribute("stroke",i.color),r.setAttribute("stroke-opacity",i.opacity),0<n.length&&r.setAttribute("stroke-dasharray",n.map(Gs).toString())},Xs.prototype._startClip=function(){var t=Ft("clipPath"),e=this._element.cloneNode(!1);this._currentClipPathId="clip-path-"+this._clipPathCounter++,t.appendChild(e),this._clipPaths.appendChild(t),t.setAttribute("id",this._currentClipPathId)},Xs.prototype._endClip=function(){this._currentClipPathId=null},Xs.prototype._startReverseClip=function(){var t=Ft("clipPath"),e=this._element.cloneNode(!1),n=e.getAttribute("d");e.setAttribute("clip-rule","evenodd"),e.setAttribute("d",n+" M 0 0 L "+this._width+" 0 L "+this._width+" "+this._height+" L 0 "+this._height),this._currentClipPathId="clip-path-"+this._clipPathCounter++,t.appendChild(e),this._clipPaths.appendChild(t),t.setAttribute("id",this._currentClipPathId)},Xs.prototype._endReverseClip=function(){this._currentClipPathId=null},Xs.prototype._displayText=function(t,e,n,r,i,o,s,a,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var d=Ft("text");d.setAttribute(Hs,this._currentElementId);var h=this._colorManager.rgbaToRgb(r),f=h.opacity,p=this._colorManager.rgbaToRgb(h.color),g=t.x+c*this._viewZoom,_=t.y+l*this._viewZoom;s=s||"normal";var v=Gs(g);d.setAttribute("x",v),d.setAttribute("font-family",i),d.setAttribute("font-size",o),"bold"===s?d.setAttribute("font-weight",s):d.setAttribute("font-style",s),d.setAttribute("fill",p.color),d.setAttribute("fill-opacity",f),e&&d.setAttribute("transform","rotate("+zs(-e)+" "+g+", "+_+")"),d.setAttribute("text-anchor",js[a]||"middle");var y=n.split("\n"),m=y.length,b=(m+1)/2-1/3;d.setAttribute("y",Gs(_-b*o));for(var x="center"===a?0:-u/2,E=0;E<m;E++){var w=Ft("tspan");w.appendChild(zt(y[E])),w.setAttribute("x",v+x),w.setAttribute("dy",o),d.appendChild(w)}this._currentClipPathId&&d.setAttribute("clip-path","url(#"+this._currentClipPathId+")"),this._container.appendChild(d)},Xs.prototype._displayImage=function(t,e,n,r,i,o,s){var a=t.x,u=t.y;if(!this._hideImages&&("isDummy"in r||r.width&&r.height)){var c,l=r.width,d=r.height;if(i&&(l=e,d=n),o){var h=a-e/2,f=u-n/2,p=a+e/2,g=u+n/2,_=a-l/2,v=u-d/2;for((c=Ft("g")).setAttribute(Hs,this._currentElementId);h<_;)_-=l;for(;f<v;)v-=d;for(var y=v;_<p;){for(;v<g;)qs(r.src,_,v,l,d,c),v+=d;v=y,_+=l}}else(c=qs(r.src,a-l/2,u-d/2,l,d)).setAttribute(Hs,this._currentElementId);if(this._currentClipPathId&&c.setAttribute("clip-path","url(#"+this._currentClipPathId+")"),1!==s){var m=this._addBackgroundBlendingFilter(s);c.setAttribute("filter","url(#"+m+")")}this._container.appendChild(c)}},Xs.prototype._displayPieChart=function(t,e,n){var r,i=2*e,o=2*i,s=t.x,a=t.y,u=Ft("g");u.setAttribute(Hs,this._currentElementId),1===n.length&&(r=function(t,e,n,r,i,o,s){void 0===o&&(o=1);var a=Ft("rect");return a.setAttribute("x",t),a.setAttribute("y",e),a.setAttribute("width",n),a.setAttribute("height",r),a.setAttribute("fill",i),a.setAttribute("fill-opacity",o),s&&s.appendChild(a),a}(s-i,a-i,o,o,n[0],1,u)),1<n.length&&Mi(n,(function(t,n,i){var o=s+e*Math.cos(i),c=a+e*Math.sin(i),l=s+e*Math.cos(n),d=a+e*Math.sin(n),h=i-n<=Math.PI?0:1,f="M "+o+","+c+" A "+e+","+e+" 0 "+h+" 0 "+l+","+d+" L "+s+","+a+" L "+o+","+c;(r=Ft("path")).setAttribute("d",f),r.setAttribute("fill",t),r.setAttribute("stroke-width",0),u.appendChild(r)})),this._currentClipPathId&&u.setAttribute("clip-path","url(#"+this._currentClipPathId+")"),this._container.appendChild(u)},Xs);function Xs(t){var e=Ws.call(this,t)||this;return e._svg=Ft("svg"),e._defs=Ft("defs"),e._styles=Ft("g",{class:"styles"}),e._background=Ft("rect",{width:"100%",height:"100%",fill:"none",class:"ogma-svg-background"}),e._currentElementId="0",e._currentClipPathId=null,e._clipPathCounter=1,e._defs.appendChild(e._styles),e._svg.setAttribute("pointer-events","none"),e._svg.style.userSelect="none",e._svg.appendChild(e._defs),e._svg.appendChild(e._background),e._clear(),e}var Zs=(Ks.prototype.reset=function(){this._initialize()},Ks.prototype._initialize=function(){this._mustUpdate=!0,this.maxCoord=0,this.maxScaledSize=0,this.maxMinVisibleSize=0,this.maxSymbolicSize=0,this.maxDashLength=0,this.maxGapLength=0,this.maxPatternScale=0},Ks.prototype.set=function(t){var e=t.maxCoord,n=t.maxScaledSize,r=t.maxMinVisibleSize,i=t.maxSymbolicSize,o=t.maxDashLength,s=t.maxGapLength,a=t.maxPatternScale,u=this.maxCoord<e||this.maxScaledSize<n||this.maxMinVisibleSize<r||this.maxSymbolicSize<i||this.maxDashLength<o||this.maxGapLength<s||this.maxPatternScale<a;return u&&(this.maxCoord=e,this.maxScaledSize=n,this.maxMinVisibleSize=r,this.maxSymbolicSize=i,this.maxDashLength=o,this.maxGapLength=s,this.maxPatternScale=a,this._mustUpdate=!0),u},Ks.prototype.update=function(){return this._mustUpdate&&(this._version+=1,this._mustUpdate=!1),this},Ks.prototype.getVersion=function(){return this._version},Ks);function Ks(){this._version=0,this._initialize()}var Js={linear:[0,1,0,0],quadraticIn:[0,0,1,0],quadraticOut:[0,2,-1,0],quadraticInOut:[0,0,2,0,-1,4,-2,0],cubicIn:[0,0,0,1],cubicOut:[0,3,-3,1],cubicInOut:[0,0,0,4,-3,12,-12,4]},Qs=($s.prototype.add=function(t){var e=this;Object.keys(t).forEach((function(n){var r=t[n].slice();r.length<8&&(r[4]=r[0],r[5]=r[1],r[6]=r[2],r[7]=r[3]);var i=j(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);e._nameToPolygon[n]=r,e._polygonToName[i]=n}))},$s.prototype.getCoefficients=function(t){return this._nameToPolygon[t]||this._linearEasing},$s.prototype.getName=function(t,e,n,r,i,o,s,a){var u=j(t,e,n,r,i,o,s,a);return this._polygonToName[u]||"linear"},$s);function $s(){this._linearEasing=[0,1,0,0,0,1,0,0],this._nameToPolygon={},this._polygonToName={},this.add(Js)}var ta=(ea.prototype.resizeBoundaries=function(t,e,n,r,i,o){this._maxScaledSize=t,this._maxMinVisibleSize=e,this._maxSymbolicSize=n,this._maxDashLength=r,this._maxGapLength=i,this._maxPatternScale=o,this._actualScaledSizeToBytes=65535/t,this._actualMinVisibleSizeToBytes=15/e,this._actualSymbolicSizeToBytes=255/n,this._actualDashLengthToBytes=3/r,this._actualGapLengthToBytes=3/i,this._actualPatternScaleToBytes=255/o},ea.prototype.storeGenericObject=function(t,e,n){var r=this._shapeManager.getIdFromName(n.shape),i=n.pieceId,o=this._dashLengthToBytes(n.dashLength),s=this._gapLengthToBytes(n.gapLength),a=+n.hasHead,u=+n.hasTail,c=+n.isBodyTriangle,l=+n.isSelfLoop,d=this._patternScaleToBytes(n.patternScale),h=this._offsetAngleToBytes(n.offsetAngle),f=+n.isText,p=+n.adjustTextAngle,g=+n.isBadge,_=+n.unusedFlag2,v=+n.unusedFlag3,y=this._opacityToBytes(n.opacity),m=this._minVisibleSizeToBytes(n.globalMinVisibleSize),b=this._minVisibleSizeToBytes(n.strokeMinVisibleSize),x=this._minVisibleSizeToBytes(n.patternMinVisibleSize),E=this._symbolicSizeToBytes(n.symbolicSize),w=this._curvatureToBytes(n.curvature),S=this._patternManager.getIdFromDefinition(n.pattern),A=this._colorToBytes(n.fillColor),C=this._colorToBytes(n.strokeColor),T=this._colorToBytes(n.patternColor),k=this._coordToBytes(n.x1),I=this._coordToBytes(n.y1),O=this._coordToBytes(n.x2),M=this._coordToBytes(n.y2),L=this._scaledSizeToBytes(n.rectWidthOrSourceRadiusScaled),N=this._fixedSizeToBytes(n.rectWidthOrSourceRadiusFixed),R=this._scaledSizeToBytes(n.rectHeightOrTargetRadiusScaled),P=this._fixedSizeToBytes(n.rectHeightOrTargetRadiusFixed),D=this._scaledSizeToBytes(n.thicknessOrFontSizeScaled),F=this._fixedSizeToBytes(n.thicknessOrFontSizeFixed),z=this._scaledSizeToBytes(n.strokeWidthScaled),B=this._fixedSizeToBytes(n.strokeWidthFixed),U=this._scaledSizeToBytes(n.offsetScaled),V=this._fixedSizeToBytes(n.offsetFixed),j=this._fixedSizeToBytes(n.pattern.attributes.paddingTop||0),H=this._fixedSizeToBytes(n.pattern.attributes.paddingLeft||0),G=r+(i<<4)+(o<<8)+(s<<10)+(a<<12)+(u<<13)+(c<<14)+(l<<15),q=d+(h<<8)+(f<<11)+(p<<12)+(g<<13)+(_<<14)+(v<<15),W=y+(m<<4)+(b<<8)+(x<<12),Y=E+(w<<8);this._setUint16(t,e+0,G),this._setUint16(t,e+2,q),this._setUint16(t,e+4,W),this._setUint16(t,e+6,Y),this._setUint16(t,e+8,S),this._setUint16(t,e+10,A),this._setUint16(t,e+12,C),this._setUint16(t,e+14,T),this._setFloat32(t,e+16,k),this._setFloat32(t,e+20,I),this._setFloat32(t,e+24,O),this._setFloat32(t,e+28,M),this._setUint16(t,e+32,L),this._setUint16(t,e+34,N),this._setUint16(t,e+36,R),this._setUint16(t,e+38,P),this._setUint16(t,e+40,D),this._setUint16(t,e+42,F),this._setUint16(t,e+44,z),this._setUint16(t,e+46,B),this._setUint16(t,e+48,U),this._setUint16(t,e+50,V),this._setInt16(t,e+52,j),this._setInt16(t,e+54,H)},ea.prototype._setUint16=function(t,e,n){t.setUint16(e,n,this._littleEndian)},ea.prototype._setInt16=function(t,e,n){t.setUint16(e,this._signedToUnsignedInt16(n),this._littleEndian)},ea.prototype._setFloat32=function(t,e,n){t.setFloat32(e,n,this._littleEndian)},ea.prototype._colorToBytes=function(t){var e=this._colorParser(t);return Math.round(15*e[0])+(Math.round(15*e[1])<<4)+(Math.round(15*e[2])<<8)+(Math.round(15*e[3])<<12)},ea.prototype._coordToBytes=function(t){return t},ea.prototype._scaledSizeToBytes=function(t){return Math.ceil(Math.min(t,this._maxScaledSize)*this._actualScaledSizeToBytes)},ea.prototype._fixedSizeToBytes=function(t){return t},ea.prototype._minVisibleSizeToBytes=function(t){return Math.round(Math.min(t,this._maxMinVisibleSize)*this._actualMinVisibleSizeToBytes)},ea.prototype._symbolicSizeToBytes=function(t){return Math.round(Math.min(t,this._maxSymbolicSize)*this._actualSymbolicSizeToBytes)},ea.prototype._dashLengthToBytes=function(t){return Math.round(Math.min(t,this._maxDashLength)*this._actualDashLengthToBytes)},ea.prototype._gapLengthToBytes=function(t){return Math.round(Math.min(t,this._maxGapLength)*this._actualGapLengthToBytes)},ea.prototype._patternScaleToBytes=function(t){return Math.round(Math.min(t,this._maxPatternScale)*this._actualPatternScaleToBytes)},ea.prototype._offsetAngleToBytes=function(t){return Math.round((t+fs)%fs*(8/fs))},ea.prototype._opacityToBytes=function(t){return Math.round(15*Math.min(t,1))},ea.prototype._curvatureToBytes=function(t){return this._signedToUnsignedByte(t)},ea.prototype._signedToUnsignedByte=function(t){return We(t,-128,127)+128},ea.prototype._signedToUnsignedInt16=function(t){return We(t,-32768,32767)+32768},ea.prototype.storeAnimationInformation=function(t,e,n,r){var i=n.beginTime,o=n.duration;this._setAnimationBeginTime(t,e,i),this._setAnimationDuration(t,e,o),this._setAnimationEasing(t,e,r)},ea.prototype._setAnimationBeginTime=function(t,e,n){this._setFloat32(t,e,n)},ea.prototype._setAnimationDuration=function(t,e,n){this._setFloat32(t,e+4,n)},ea.prototype._setAnimationEasing=function(t,e,n){this._setUint16(t,e+8,(n[0]+128<<8)+(n[4]+128)),this._setUint16(t,e+10,(n[1]+128<<8)+(n[5]+128)),this._setUint16(t,e+12,(n[2]+128<<8)+(n[6]+128)),this._setUint16(t,e+14,(n[3]+128<<8)+(n[7]+128))},ea.prototype.extractGenericElement=function(t,e,n){var r=t.getElementType(),i=t.isAnimated(),o=t.getDataView(),s=e*t.getElementSize(),a=this._genericObject;if(a.valid=!1,o.getUint16(s)&&(a.valid=!0,this._extractGenericObject(a.end,o,s,n),i&&(this._extractGenericObject(a.start,o,56+s,n),this._extractAnimationInformation(a.animation,o,112+s)),a.id=this._idRecorder.get(t,e),2===r)){var u=t.getSideDataView(),c=e*t.getTotalSideElementsSize(),l=c+t.getTotalSideElementsSize();a.end.pattern=this._textManager.extractTextFromDataView(u,c,l)}return a},ea.prototype._extractGenericObject=function(t,e,n,r){var i=r.bytesToActualCoord,o=r.bytesToActualScaledSize,s=r.bytesToActualMinVisibleSize,a=r.bytesToActualPatternScale,u=r.bytesToActualSymbolicSize,c=r.bytesToActualDashLength,l=r.bytesToActualGapLength,d=e,h=n,f=this._littleEndian,p=d.getUint16(h,f),g=na(p,0,4),_=na(p,4,8),v=na(p,8,10),y=na(p,10,12),m=na(p,12,13),b=na(p,13,14),x=na(p,14,15),E=na(p,15,16),w=d.getUint16(h+2,f),S=na(w,0,8),A=na(w,8,11),C=na(w,11,12),T=na(w,12,13),k=na(w,13,14),I=na(w,14,15),O=na(w,15,16),M=d.getUint16(h+4,f),L=na(M,0,4),N=na(M,4,8),R=na(M,8,12),P=na(M,12,16),D=d.getUint16(h+6,f),F=na(D,0,8),z=na(D,8,16),B=d.getUint16(h+8,f),U=d.getUint16(h+10,f),V=d.getUint16(h+12,f),j=d.getUint16(h+14,f),H=d.getFloat32(h+16,f),G=d.getFloat32(h+20,f),q=d.getFloat32(h+24,f),W=d.getFloat32(h+28,f),Y=d.getUint16(h+32,f),X=d.getUint16(h+34,f),Z=d.getUint16(h+36,f),K=d.getUint16(h+38,f),J=d.getUint16(h+40,f),Q=d.getUint16(h+42,f),$=d.getUint16(h+44,f),tt=d.getUint16(h+46,f),et=d.getUint16(h+48,f),nt=d.getUint16(h+50,f),rt=ra(d.getUint16(h+52,f)),it=ra(d.getUint16(h+54,f));t.pieceId=_,t.shape=this._shapeManager.getNameFromId(g),t.x1=ia(H,i),t.y1=ia(G,i),t.x2=ia(q,i),t.y2=ia(W,i),t.rectWidthOrSourceRadiusScaled=ia(Y,o),t.rectWidthOrSourceRadiusFixed=X,t.rectHeightOrTargetRadiusScaled=ia(Z,o),t.rectHeightOrTargetRadiusFixed=K,t.thicknessOrFontSizeScaled=ia(J,o),t.thicknessOrFontSizeFixed=Q,t.strokeWidthScaled=ia($,o),t.strokeWidthFixed=tt,t.offsetScaled=ia(et,o),t.offsetFixed=nt,t.pattern=this._patternManager.getDefinitionFromId(B),t.pattern.attributes.paddingTop=rt,t.pattern.attributes.paddingLeft=it,t.opacity=L/15,t.fillColor=sa(U),t.strokeColor=sa(V),t.patternColor=sa(j),t.globalMinVisibleSize=ia(N,s),t.strokeMinVisibleSize=ia(R,s),t.patternMinVisibleSize=ia(P,s),t.offsetAngle=A*(2*Math.PI/8),t.patternScale=S*a,t.symbolicSize=F*u,t.curvature=z-128,t.dashLength=v*c,t.gapLength=y*l,t.hasHead=!!m,t.hasTail=!!b,t.isBodyTriangle=!!x,t.isSelfLoop=!!E,t.isText=!!C,t.adjustTextAngle=!!T,t.isBadge=!!k,t.unusedFlag2=!!I,t.unusedFlag3=!!O},ea.prototype._extractAnimationInformation=function(t,e,n){var r=this._littleEndian,i=e.getFloat32(n,r),o=e.getFloat32(n+4,r),s=e.getUint16(n+8,r),a=e.getUint16(n+10,r),u=e.getUint16(n+12,r),c=e.getUint16(n+14,r),l=(s>>8)-128,d=(a>>8)-128,h=(u>>8)-128,f=(c>>8)-128,p=s%256-128,g=a%256-128,_=u%256-128,v=c%256-128;t.beginTime=i,t.duration=o,t.easing=this._easingManager.getName(l,d,h,f,p,g,_,v)},ea);function ea(t,e,n,r,i,o){this._littleEndian=U(),this._maxScaledSize=0,this._maxMinVisibleSize=0,this._maxSymbolicSize=0,this._maxDashLength=0,this._maxGapLength=0,this._maxPatternScale=0,this._actualScaledSizeToBytes=32767,this._actualMinVisibleSizeToBytes=15,this._actualSymbolicSizeToBytes=255,this._actualDashLengthToBytes=3,this._actualGapLengthToBytes=3,this._actualPatternScaleToBytes=255,this._genericObject={valid:!1,id:void 0,end:{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:0,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,unusedFlag2:!1,unusedFlag3:!1},start:{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:0,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,unusedFlag2:!1,unusedFlag3:!1},animation:{duration:0,beginTime:-1,easing:"linear"}},this._shapeManager=e,this._patternManager=t,this._textManager=n,this._idRecorder=r,this._easingManager=i,this._colorParser=o}function na(t,e,n){return t%(1<<n)>>e}function ra(t){return t-32768}function ia(t,e){return t*e}var oa=new Array(65535);function sa(t){var e=oa[t];if(!e){var n=na(t,0,4)/15,r=na(t,4,8)/15,i=na(t,8,12)/15,o=na(t,12,16)/15;e="rgba("+(255*n|0)+", "+(255*r|0)+", "+(255*i|0)+", "+o+")",n+r+i+o==0&&(e=null),oa[t]=e}return e}var aa=(ua.prototype.setDepth=function(t){return this._depth=t,this},ua.prototype.reset=function(t,e,n,r){return this._elementType=t,this._animated=e,this._depth=n,void 0!==r&&(this._id=r),this._stencilUsage=1,this._size=0,this},ua.prototype.setStencilUsage=function(t){this._stencilUsage=t},ua.prototype.next=function(){if(this._size>=this._capacity)throw new Error("internal error: block.next() was called on a full block");return this._list[this._size++]},ua.prototype.nextAndReset=function(){var t,e=this.next();return e.end=oi(e.end),e.start=oi(e.start),e.animation=(void 0===(t=e.animation)&&(t={}),t.duration=0,t.beginTime=-1,t.easing="linear",t),e},ua.prototype.forEach=function(t){this._list.forEach(t)},ua.prototype.getElement=function(t){return this._list[t]},ua.prototype.getCurrentElement=function(){return this._list[this._size-1]},ua.prototype.getSize=function(){return this._size},ua.prototype.getDepth=function(){return this._depth},ua.prototype.getElements=function(){return this._list},ua.prototype.getType=function(){return this._elementType},ua.prototype.getId=function(){return this._id},ua.prototype.isAnimated=function(){return this._animated},ua.prototype.getStencilUsage=function(){return this._stencilUsage},ua.prototype.setGlobalAnimation=function(t,e,n){for(var r=0;r<this._size;++r){var i=this._list[r].animation;i.duration=t,i.beginTime=e,i.easing=n}},ua);function ua(){this._elementType=1,this._animated=!1,this._size=0,this._capacity=128,this._depth=0,this._id=0,this._stencilUsage=1,this._list=Array(this._capacity);for(var t=0;t<this._capacity;++t)this._list[t]={valid:!1,id:void 0,end:{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:0,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,unusedFlag2:!1,unusedFlag3:!1},start:{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:0,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,unusedFlag2:!1,unusedFlag3:!1},animation:{duration:0,beginTime:-1,easing:"linear"}}}var ca=(la.prototype.reset=function(){this._maps=[]},la.prototype.set=function(t,e,n){for(var r=t.getId();this._maps.length<=r;)this._maps.push(new Array(512));this._maps[r][e]=n},la.prototype.get=function(t,e){return this._maps[t.getId()][e]},la);function la(){this._maps=[]}var da={x:0,y:0,zoom:1,angle:0,width:80,height:60,pixelRatio:1,backgroundColor:null,currentTime:0,isBufferDisplayable:function(){return!0},hideImages:!1,renderBackground:!1},ha={webgl:us,canvas:Ls,svg:Ys},fa=[0,0,0,0],pa={webgl:null,svg:null,canvas:null},ga=(_a.createInitData=function(){var t={};for(var e in ha)t[e]=ha[e].createInitData();return t},_a.cacheInitData=function(t){pa=t},_a.getCachedInitData=function(){return pa},_a.clearCachedInitData=function(){pa={webgl:null,svg:null,canvas:null}},_a.prototype.addCanvas=function(t){t.style.touchAction="none",t.style.msContentZooming="none",this._resizeCanvas(t),this._additionalCanvases.push(t),this._updateDomElement()},_a.prototype.removeCanvas=function(t){t.style.touchAction="",t.style.msContentZooming="",D(this._additionalCanvases,t),this._updateDomElement()},_a.prototype._ensureDomElementsFitParent=function(){if(this._domElement.offsetWidth!==this._view.width||this._domElement.offsetHeight!==this._view.height){this._domElement.style.width=this._view.width+"px",this._domElement.style.height=this._view.height+"px";for(var t=0;t<this._additionalCanvases.length;++t)this._resizeCanvas(this._additionalCanvases[t])}},_a.prototype._ensureCorrectBackgroundColor=function(){this._backgroundColor!==this._view.backgroundColor&&(this._domElement.style.backgroundColor=this._view.backgroundColor||"",this._backgroundColor=this._view.backgroundColor)},_a.prototype.createBlock=function(){return new aa},_a.prototype.parseColor=function(t){return this._colorManager.parseColor(t)},_a.prototype.clear=function(){this._blockIdToAddress.fill(0),this._patternManager.reset(),this._boundariesManager.reset(),this._textManager.reset(),this._bufferList.reset(),this._idRecorder.reset()},_a.prototype.notifyFontsReloaded=function(){this._patternManager.notifyUpdate(),this._textManager.clear(),this._refreshTexts=!0},_a.prototype.notifyPatternUpdate=function(){this._patternManager.notifyUpdate()},_a.prototype.getShapePoints=function(t){return this._shapeManager.getDefinitionFromName(t).points},_a.prototype.checkShapeHit=function(t,e,n){var r=this._shapeManager.getDefinitionFromName(t),i=r.getDistanceFromStrokeVertically,o=r.getDistanceFromStrokeHorizontally;return 0<=Math.min(i(e,n),o(e,n))},_a.prototype.setGlobalBoundaries=function(t){var e=t.maxBlockId,n=void 0===e?0:e,r=t.maxScaledSize,i=t.maxMinVisibleSize,o=t.maxSymbolicSize,s=t.maxDashLength,a=t.maxGapLength,u=t.maxPatternScale;return n>this._blockIdToAddress.length&&this._resizeBlockArray(n),!!this._boundariesManager.set(t)&&(this._memoryManager.resizeBoundaries(r,i,o,s,a,u),!0)},_a.prototype._resizeBlockArray=function(t){var e=new Uint32Array(t);e.set(this._blockIdToAddress),this._blockIdToAddress=e},_a.prototype.registerShape=function(t,e){this._shapeManager.register(t,e)},_a.prototype._bindBlock=function(t,e,n,r,i,o,s){this._checkBlockId(t);var a=this._blockIdToAddress[t],u=this._bufferList.allocateBlock(a,e,n,r,i,o,s);return this._blockIdToAddress[t]=u.address,this._currentDataView=u.buffer.getDataView(),this._currentElementSize=u.buffer.getElementSize(),this._currentBlockOffset=u.offset,this._currentByteOffset=this._currentBlockOffset*this._currentElementSize,this._currentSideDataView=u.buffer.getSideDataView(),this._currentSideElementSize=u.buffer.getTotalSideElementsSize(),this._currentSideByteOffset=this._currentBlockOffset*this._currentSideElementSize,u},_a.prototype._setItemIndex=function(t){var e=this._currentBlockOffset+t;this._currentByteOffset=e*this._currentElementSize,this._currentSideByteOffset=e*this._currentSideElementSize},_a.prototype._freeBlock=function(t){this._checkBlockId(t);var e=this._blockIdToAddress[t],n=this._bufferList.freeBlock(e);return this._blockIdToAddress[t]=n},_a.prototype._checkBlockId=function(t){t>=this._blockIdToAddress.length&&this._resizeBlockArray(Ge(t+1))},_a.prototype._setTextCharacters=function(t){this._textManager.storeTextInDataView(this._currentSideDataView,this._currentSideByteOffset,this._currentSideByteOffset+this._currentSideElementSize,t)},_a.prototype._storeElement=function(t,e){this._memoryManager.storeGenericObject(this._currentDataView,this._currentByteOffset,t.end),e&&(this._memoryManager.storeGenericObject(this._currentDataView,this._currentByteOffset+56,t.start),this._memoryManager.storeAnimationInformation(this._currentDataView,this._currentByteOffset+112,t.animation,this._easingManager.getCoefficients(t.animation.easing)))},_a.prototype.storeBlock=function(t,e){if(!e||!e.getSize())return this._freeBlock(t);var n=e.getType(),r=e.getDepth(),i=e.getSize(),o=e.getElements(),s=e.isAnimated(),a=e.getStencilUsage(),u=e.getId(),c=0;if(2===n)for(var l=0;l<i;++l){var d=(_=o[l]).start,h=_.end;if(7===h.pattern.type){var f=h.pattern.attributes.text;c=Math.max(c,f.length)}s&&7===d.pattern.type&&(f=d.pattern.attributes.text,c=Math.max(c,f.length))}var p=this._bindBlock(t,n,s,r,i,c,a);for(l=0;l<i;++l){var g=o[l];this._setItemIndex(l),this._storeElement(g,s),this._idRecorder.set(p.buffer,p.offset+l,u)}if(2===n)for(l=0;l<i;++l){var _=o[l];this._setItemIndex(l),this._setTextCharacters(_.end.pattern)}return p.address},_a.prototype.freeBlock=function(t){return this._freeBlock(t)},_a.prototype._refreshTextElements=function(){for(var t=0,e=this._bufferList.getBuffers();t<e.length;t++){var n=e[t];if(n&&2===n.getElementType()){for(var r=n.getSideDataView(),i=n.getTotalSideElementsSize(),o=n.getSize(),s=0,a=i,u=0;u<o;++u){var c=this._textManager.extractTextFromDataView(r,s,a);this._textManager.storeTextInDataView(r,s,a,c),s=a,a+=i}n.triggerUpdate()}}},_a.prototype.extractElement=function(t,e){if(void 0===e&&(e=0),!t)return null;var n=this._bufferList.getBlockInfo(t);return this._renderer.extractElement(n.buffer,n.offset+e)},_a.prototype.getDomElement=function(){return this._domElement},_a.prototype.measureText=function(t,e,n,r){return void 0===r&&(r=1),this._textManager.measureText(t,e,n,r)},_a.prototype.setRenderType=function(t){this._renderType!==t&&(this._renderType=t,this._switchMainRenderer=!0)},_a.prototype._ensureMainRendererReady=function(){if(this._switchMainRenderer){null===this._renderType&&(this._renderType="canvas");var t=ha[this._renderType];t&&t.isAvailable()||(this._renderType="canvas"),this._renderer=this._renderersByType[this._renderType],this._renderer||(this._renderer=this._instanciateRenderer(this._renderType),this._renderersByType[this._renderType]=this._renderer),this._updateDomElement()}},_a.prototype._updateDomElement=function(){for(var t=this._renderer&&this._renderer.getDomElement(),e=this._domElement;e.firstChild;)e.removeChild(e.firstChild);t&&this._appendDomChild(t);for(var n=0;n<this._additionalCanvases.length;++n)this._appendDomChild(this._additionalCanvases[n])},_a.prototype._appendDomChild=function(t){t.style.position="absolute",t.style.left="0",t.style.top="0",this._domElement.appendChild(t)},_a.prototype._instanciateRenderer=function(t){return new(null===t?ai:ha[t])({initData:null===t?null:this._initData[t],bufferList:this._bufferList,shapeManager:this._shapeManager,patternManager:this._patternManager,boundariesManager:this._boundariesManager,textManager:this._textManager,colorManager:this._colorManager,easingManager:this._easingManager,memoryManager:this._memoryManager})},_a.prototype.setView=function(t){this._view=w(w({},this._view),t)},_a.prototype._updateManagers=function(){this._patternManager.setPixelRatio(this._view.pixelRatio),this._shapeManager.update(),this._patternManager.update(),this._textManager.update(),this._boundariesManager.update(),this._bufferList.update(),this._refreshTexts&&(this._refreshTexts=!1,this._refreshTextElements())},_a.prototype._resizeCanvas=function(t){si(t,this._view.width,this._view.height,this._view.pixelRatio)},_a.prototype.render=function(){this._ensureMainRendererReady(),this._ensureDomElementsFitParent(),this._ensureCorrectBackgroundColor(),this._updateManagers(),this._renderer.renderFrame(this._view)},_a.prototype.ensureAnimationsReady=function(){this._ensureMainRendererReady(),this._renderer.ensureAnimationsReady()},_a.prototype.export=function(t,e,n){var r=this._instanciateRenderer(t),i=w(w({},this._view),e);return"setViewportClipping"in r&&r.setViewportClipping(!1),i.renderBackground=!0,this._updateManagers(),r.renderFrame(i),r.export(n).then((function(){return r.getDomElement()}))},_a.prototype.getCurrentTime=function(){return Qt()},_a.prototype.getImageData=function(){return this._renderer&&this._renderer.getImageData()},_a.prototype.destroy=function(){for(var t=0,e=Object.keys(this._renderersByType);t<e.length;t++){var n=e[t],r=this._renderersByType[n];r&&r.destroy()}},_a.prototype.transparentify=function(t){var e=this.parseColor(t)||fa;return"rgba("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+",0)"},_a.prototype.initDebugRenderingLoop=function(t){var e=this,n=void 0===t?{}:t,r=n.triggerKey,i=void 0===r?"r":r,o=n.start,s=void 0===o||o;document.addEventListener("keydown",(function(t){t.key===i&&(s=!s)}));var a=function(t){(s||t)&&(e.setView({currentTime:Qt()}),e.render()),window.requestAnimationFrame((function(){a()}))};window.requestAnimationFrame((function(){document.body.appendChild(e.getDomElement()),a(!0)}))},_a);function _a(t){var e=this;this._view=W(da),this._domElement=pt?document.createElement("div"):Ct(),this._currentElementSize=0,this._currentBlockOffset=0,this._currentByteOffset=0,this._blockIdToAddress=new Uint32Array(0),this._renderersByType={},this._switchMainRenderer=!0,this._additionalCanvases=[],this._refreshTexts=!1,this._backgroundColor=null,this._initData=t||{},this._colorManager=new Or,this._easingManager=new Qs,this._patternManager=new Rr,this._shapeManager=new Hr,this._boundariesManager=new Zs,this._textManager=new Qo(this._patternManager),this._idRecorder=new ca,this._memoryManager=new ta(this._patternManager,this._shapeManager,this._textManager,this._idRecorder,this._easingManager,(function(t){return e.parseColor(t)||fa})),this._bufferList=new Yr}var va,ya=(E(ma,va=Ro),Object.defineProperty(ma.prototype,"src",{get:function(){return this._src},set:function(t){var e=this;t&&(this._src=t,setTimeout((function(){e.onload&&e.onload.call(e),e.width=1,e.height=1,e.fire("load")}),10))},enumerable:!0,configurable:!0}),ma.prototype.addEventListener=function(t,e){this.on(t,e)},ma);function ma(t,e){var n=va.call(this)||this;return n.isDummy=!0,n.width=0,n.height=0,n}var ba=(xa.prototype.setImgCrossOrigin=function(t){this._crossOrigin=t},xa.prototype.clear=function(){this._images={},this._nbLoaded=0,this._nbToLoad=0},xa.prototype.getImage=function(t){var e=this,n=this._images[t];return void 0===n&&(this._nbToLoad+=1,(n=new("undefined"!=typeof Image?Image:ya)(void 0,void 0)).crossOrigin=this._crossOrigin,n.onload=function(){return e._onImgLoad(t)},n.onerror=function(){e._onImgLoad(t),e._images[t]=null},n.src=t,this._images[t]=n),n},xa.prototype._onImgLoad=function(t){this._nbLoaded+=1,this._onFetch.forEach((function(e){return e(t)})),this._nbLoaded===this._nbToLoad&&(this._whenReady.forEach((function(t){return t()})),this._whenReady=[])},xa.prototype.onFetch=function(t){this._onFetch.push(t)},xa.prototype.whenReady=function(){var t=this;return this._nbLoaded===this._nbToLoad?Promise.resolve():new Promise((function(e){return t._whenReady.push(e)}))},xa.prototype.destroy=function(){this._whenReady=[],this._onFetch=[]},xa);function xa(){this._images={},this._crossOrigin="anonymous",this._whenReady=[],this._onFetch=[],this._nbLoaded=0,this._nbToLoad=0}function Ea(t,e,n,r,i,o,s,a,u){void 0===a&&(a=0),void 0===u&&(u=!1);var c=Ds(n,r,i,o),l=(s/2*(u?Ds(t,e,i,o)/c:1)+a)/c,d=(i-n)*l,h=(o-r)*l,f=n+h,p=r-d,g=t-f,_=e-p,v=n-h-f,y=r+d-p,m=i+h-f,b=o-d-p,x=g*v+_*y,E=g*m+_*b;return 0<x&&x<v*v+y*y&&0<E&&E<m*m+b*b}function wa(t,e){return t.x===e.x&&t.y===e.y}function Sa(t,e,n,r){return Math.atan2(r-e,n-t)}function Aa(t,e,n,r,i,o,s,a){var u=t-n,c=e-r,l=i-s,d=o-a,h=u*d-l*c,f=(c*(t-i)-u*(e-o))/h;if(f<0||1<f)return null;var p=(l*(o-e)+d*(t-i))/h;return 0<=p&&p<=1?{x:t-p*u,y:e-p*c}:null}function Ca(t,e,n,r,i,o,s,a){var u,c=[];return(u=Aa(t,e,n,r,i,o,i,a))&&c.push(u),(u=Aa(t,e,n,r,i,a,s,a))&&c.push(u),(u=Aa(t,e,n,r,s,a,s,o))&&c.push(u),(u=Aa(t,e,n,r,s,o,i,o))&&c.push(u),c}function Ta(t,e,n,r,i,o,s,a){var u=((s-i)*(e-o)-(a-o)*(t-i))/((a-o)*(n-t)-(s-i)*(r-e)),c=((n-t)*(e-o)-(r-e)*(t-i))/((a-o)*(n-t)-(s-i)*(r-e));return 0<=u&&u<=1&&0<=c&&c<=1}function ka(t,e,n,r,i,o,s,a){return i<=t&&o<=e&&t<=s&&e<=a||i<=n&&o<=r&&n<=s&&r<=a||!!Ta(t,e,n,r,i,o,i,a)||!!Ta(t,e,n,r,s,o,s,a)||!!Ta(t,e,n,r,i,o,s,o)||!!Ta(t,e,n,r,i,a,s,a)}function Ia(t,e,n){return Math.sqrt(Oa(t.x,t.y,e.x,e.y,n.x,n.y))}function Oa(t,e,n,r,i,o){var s=Fs(n,r,i,o);if(0===s)return Fs(t,e,n,r);var a=((t-n)*(i-n)+(e-r)*(o-r))/s;return Fs(t,e,n+(a=Math.max(0,Math.min(1,a)))*(i-n),r+a*(o-r))}function Ma(t,e,n,r,i,o){var s=i-n,a=o-r;if(0==s&&0==a)return{x:n,y:r};var u=((t-n)*s+(e-r)*a)/(s*s+a*a);return u<0?{x:n,y:r}:1<u?{x:i,y:o}:{x:n+u*s,y:r+u*a}}function La(){for(var t=arguments,e=t.length-1,n=e,r=[],i=0;i<=e&&Math.abs(t[i])<=1e-12;i++)e--;switch(e){case 1:!function(t,e,n){void 0===n&&(n=[]),0!==e&&n.push(-t/e)}(t[n],t[n-1],r);break;case 2:!function(t,e,n,r){void 0===r&&(r=[]);var i=e/n,o=i*i-t/n*4;if(0<o){var s=Math.sqrt(o);r.push(.5*(-i+s)),r.push(.5*(-i-s))}else 0==o&&r.push(.5*-i)}(t[n],t[n-1],t[n-2],r);break;case 3:!function(t,e,n,r,i){void 0===i&&(i=[]);var o,s,a=n/r,u=e/r,c=(3*u-a*a)/3,l=(2*a*a*a-9*u*a+t/r*27)/27,d=a/3,h=l*l/4+c*c*c/27,f=l/2;if(Math.abs(h)<=1e-6&&(h=0),0<h){var p=Math.sqrt(h);s=0<=(o=-f+p)?Math.pow(o,1/3):-Math.pow(-o,1/3),0<=(o=-f-p)?s+=Math.pow(o,1/3):s-=Math.pow(-o,1/3),i.push(s-d)}else if(h<0){var g=Math.sqrt(-c/3),_=Math.atan2(Math.sqrt(-h),-f)/3,v=Math.cos(_),y=Math.sin(_),m=Math.sqrt(3);i.push(2*g*v-d),i.push(-g*(v+m*y)-d),i.push(-g*(v-m*y)-d)}else o=0<=f?-Math.pow(f,1/3):Math.pow(-f,1/3),i.push(2*o-d),i.push(-o-d)}(t[n],t[n-1],t[n-2],t[n-3],r)}return r}function Na(t,e,n,r,i,o,s,a,u,c,l){for(var d,h,f=Math.min(s,u),p=Math.min(a,c),g=Math.max(s,u),_=Math.max(a,c),v=La((d=a-c)*(t+-2*n+i)+(h=u-s)*(e+-2*r+o),d*(-2*t+2*n)+h*(-2*e+2*r),d*t+h*e+(s*c-u*a)),y=0;y<v.length;y++){var m=v[y];if(0<=m&&m<=1){var b=t+(n-t)*m,x=e+(r-e)*m,E=b+(n+(i-n)*m-b)*m,w=x+(r+(o-r)*m-x)*m;if(s===u){if(p<=w&&w<=_){if(!l)return 1;l.push(E,w)}}else if(a===c){if(f<=E&&E<=g){if(!l)return 1;l.push(E,w)}}else if(f<=E&&p<=w&&E<=g&&w<=_){if(!l)return 1;l.push(E,w)}}}return l&&l.length/2}function Ra(t,e,n,r,i,o,s,a,u,c,l){return l?(Na(t,e,n,r,i,o,s,a,u,a,l),Na(t,e,n,r,i,o,u,a,u,c,l),Na(t,e,n,r,i,o,s,c,u,c,l),Na(t,e,n,r,i,o,s,a,s,c,l),l.length/2):s<=t&&t<=u&&a<=e&&e<=c||s<=i&&i<=u&&a<=o&&o<=c||Na(t,e,n,r,i,o,s,a,u,a)||Na(t,e,n,r,i,o,u,a,u,c)||Na(t,e,n,r,i,o,s,c,u,c)||Na(t,e,n,r,i,o,s,a,s,c)?1:0}function Pa(t,e,n,r,i,o,s,a,u,c,l,d,h){for(var f,p,g=Math.min(u,l),_=Math.min(c,d),v=Math.max(u,l),y=Math.max(c,d),m=La((f=c-d)*(-1*t+3*n+-3*i+s)+(p=l-u)*(-1*e+3*r+-3*o+a),f*(3*t+-6*n+3*i)+p*(3*e+-6*r+3*o),f*(-3*t+3*n)+p*(-3*e+3*r),f*t+p*e+(u*d-l*c)),b=0;b<m.length;b++){var x=m[b];if(0<=x&&x<=1){var E=t+(n-t)*x,w=e+(r-e)*x,S=n+(i-n)*x,A=r+(o-r)*x,C=E+(S-E)*x,T=w+(A-w)*x,k=C+(S+(i+(s-i)*x-S)*x-C)*x,I=T+(A+(o+(a-o)*x-A)*x-T)*x;if(u===l){if(_<=I&&I<=y){if(!h)return 1;h.push(k,I)}}else if(c===d){if(g<=k&&k<=v){if(!h)return 1;h.push(k,I)}}else if(g<=k&&_<=I&&k<=v&&I<=y){if(!h)return 1;h.push(k,I)}}}return h&&h.length/2}function Da(t,e,n,r,i,o,s,a,u,c,l,d,h){return h?(Pa(t,e,n,r,i,o,s,a,u,c,l,c,h),Pa(t,e,n,r,i,o,s,a,l,c,l,d,h),Pa(t,e,n,r,i,o,s,a,u,d,l,d,h),Pa(t,e,n,r,i,o,s,a,u,c,u,d,h),h.length/2):u<=t&&t<=l&&c<=e&&e<=d||u<=s&&s<=l&&c<=a&&a<=d||Pa(t,e,n,r,i,o,s,a,u,c,l,c)||Pa(t,e,n,r,i,o,s,a,l,c,l,d)||Pa(t,e,n,r,i,o,s,a,u,d,l,d)||Pa(t,e,n,r,i,o,s,a,u,c,u,d)?1:0}function Fa(t,e,n,r,i,o,s,a){return void 0===a&&(a={x:0,y:0}),a.x=(1-t)*(1-t)*e+2*(1-t)*t*o+t*t*r,a.y=(1-t)*(1-t)*n+2*(1-t)*t*s+t*t*i,a}function za(t,e,n,r,i,o,s,a,u,c,l){void 0===c&&(c=0),void 0===l&&(l=!1);var d=n-2*s+i,h=r-2*a+o,f=-((n-t)*h-(r-e)*d)/((2*s-2*n)*h-(2*a-2*r)*d);if(f<0||1<f)return!1;var p=u/2;return l&&(p*=1-f),p+=c,Ds(Ss(n,s,i,f),Ss(r,a,o,f),t,e)<=p}function Ba(t,e,n,r,i,o,s,a,u,c){void 0===c&&(c={x:0,y:0});var l=(1-t)*(1-t)*(1-t),d=3*t*(1-t)*(1-t),h=3*t*t*(1-t),f=t*t*t;return c.x=l*e+d*o+h*a+f*r,c.y=l*n+d*s+h*u+f*i,c}function Ua(t,e,n,r,i,o,s,a,u,c,l,d){var h=Ds(n,r,s,a);if(Math.abs(t-n)>h||Math.abs(e-r)>h)return!1;for(var f,p=.5,g=Ds(t,e,n,r)<Ds(t,e,i,o)?-.01:.01,_=100,v=Ba(p,n,r,i,o,s,a,u,c),y=Ds(t,e,v.x,v.y),m=l/2+d;0<_--&&0<=p&&p<=1&&m<y&&(.001<g||g<-.001);)f=y,Ba(p,n,r,i,o,s,a,u,c,v),f<(y=Ds(t,e,v.x,v.y))?p+=g=-g/2:p+g<0||1<p+g?(g/=2,y=f):p+=g;return y<m}function Va(t,e,n,r,i,o,s){void 0===s&&(s={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});var a=t+2/3*(n-t),u=e+2/3*(r-e);return ja(t,e,a,u,a+1/3*(i-t),u+1/3*(o-e),i,o,s)}function ja(t,e,n,r,i,o,s,a,u){void 0===u&&(u={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});var c,l,d,h,f,p=Math.min,g=Math.max,_=Math.sqrt;u.minX=p(t,s),u.maxX=g(t,s),u.minY=p(e,a),u.maxY=g(e,a);for(var v=void 0,y=void 0,m=void 0,b=void 0,x=void 0,E=void 0,w=void 0,S=0;S<2;++S)if(f=0===S?(l=t,d=n,h=i,s):(l=e,d=r,h=o,a),y=6*l-12*d+6*h,v=-3*l+9*d-9*h+3*f,m=3*d-3*l,y|=0,m|=0,0!=(v|=0))(x=y*y-4*m*v)<0||(0<(E=(-y+_(x))/(2*v))&&E<1&&(c=Ha(E,l,d,h,f),0===S?(u.minX=p(u.minX,c),u.maxX=g(u.maxX,c)):(u.minY=p(u.minY,c),u.maxY=g(u.maxY,c))),0<(w=(-y-_(x))/(2*v))&&w<1&&(c=Ha(w,l,d,h,f),0===S?(u.minX=p(u.minX,c),u.maxX=g(u.maxX,c)):(u.minY=p(u.minY,c),u.maxY=g(u.maxY,c))));else{if(0===y)continue;0<(b=-m/y)&&b<1&&(c=Ha(b,l,d,h,f),0===S?(u.minX=p(u.minX,c),u.maxX=g(u.maxX,c)):(u.minY=p(u.minY,c),u.maxY=g(u.maxY,c)))}return u}function Ha(t,e,n,r,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*r+Math.pow(t,3)*i}var Ga={left:{x:-1,y:0},right:{x:1,y:0},top:{x:0,y:-1},bottom:{x:0,y:1},center:{x:0,y:0}},qa=(Wa.prototype.getDefinition=function(){return this._attributesManager.getAttributeLayerDefinition(this._id)},Wa.prototype.update=function(t){this._attributesManager.updateAttributeLayer(this._id,t)},Wa.prototype.destroy=function(){this._attributesManager.destroyAttributeLayer(this._id)},Wa.prototype.updateElements=function(t){this._attributesManager.updateElementsForAttributeLayer(this._id,t)},Wa.prototype.updateAll=function(){this._attributesManager.updateAllForAttributeLayer(this._id)},Wa.prototype.setAttributeValues=function(t,e,n){this._attributesManager.setAttributeLayerValues(this._id,t,e,n)},Wa.prototype.getUsedAttributeNames=function(t){return this._attributesManager.getUsedAttributeLayerAttributes(this._id,t)},Wa.prototype.getFlexArrays=function(){return this._attributesManager.getAttributeLayerFlexArrays(this._id)},Wa);function Wa(t,e){this._attributesManager=t,this._id=e}var Ya={storage:1,default:0},Xa=(Za.prototype._getAllIndexes=function(){for(var t=this._isNode?this._graph.getNodeMaxIndex():this._graph.getEdgeMaxIndex(),e=new Uint32Array(t),n=1;n<=t;++n)e[n-1]=n;return e},Za.prototype.addAll=function(){this._all=!0},Za.prototype.add=function(t){if(!this._all)for(var e=0;e<t._indexes.length;e++){var n=t._indexes[e];this.addIndex(n)}},Za.prototype.addIndex=function(t){0===this._flexArray.get(t)&&(this._flexArray.set(t,1),this._indexList.push(t))},Za.prototype.isEmpty=function(){return!this._all&&this._indexList.isEmpty()},Za.prototype.isFull=function(){return this._all},Za.prototype.getListAndClear=function(){var t=this.getList();return this.clear(),t},Za.prototype.getList=function(){var t;if(this._all&&!this._includeRemovedElements)t=this._isNode?this._graph.getNodes("all"):this._graph.getEdges("all");else{var e=this._all?this._getAllIndexes():this._indexList.slice();t=this._eltList(e)}return t},Za.prototype.clear=function(){this._all=!1,this._indexList.isEmpty()||(this._indexList.reset(),this._flexArray.reset())},Za.prototype.addSet=function(t){if(t._all)this.addAll();else for(var e=t._indexList.getBuffer(),n=t._indexList.getLength(),r=0;r<n;++r)this.addIndex(e[r])},Za);function Za(t){var e=t.graph,n=t.isNode,r=t.includeRemovedElements;this._all=!1,this._isNode=n,this._graph=e,this._includeRemovedElements=r,this._eltList=n?this._graph.nodeList:this._graph.edgeList,this._flexArray=n?this._graph.createNodeAttribute(Ya):this._graph.createEdgeAttribute(Ya),this._all=!1,this._indexList=this._graph.createIndexList(n)}function Ka(t){return"string"==typeof t}function Ja(t,e){return t?t+"."+e:e}function Qa(t){return"boolean"==typeof t||0===t||1===t?t:void 0}function $a(t){return"number"==typeof t&&isFinite(t)?t:void 0}function tu(t){return"number"==typeof t&&isFinite(t)&&0<=t?t:void 0}var eu=new Function("x","return (typeof x === 'number' && isFinite(x)\n    && x >= -100\n    && x <= 400)\n    ? x : undefined;");function nu(t){return null===t||"string"==typeof t||"number"==typeof t?t:void 0}function ru(t){return"fixed"===t||"scaled"===t?t:void 0}function iu(t,e){return e.parseColor(t)?t:void 0}function ou(t,e){return"inherit"===t||e.parseColor(t)?t:void 0}function su(t){return null===t?null:"string"==typeof t?t.split(",").map((function(t){var e=t.trim(),n=-1!==e.indexOf(" "),r=e[0];return n&&'"'!==r&&"'"!==r?'"'+e+'"':e})).join(","):void 0}function au(t){return"none"===t?"normal":"normal"===t||"italic"===t||"bold"===t||"italic bold"===t||"bold italic"===t?t:void 0}function uu(t){return"left"===t||"center"===t?t:void 0}function cu(t){return[null,"arrow","circle-hole-arrow","triangle-hole-arrow","short-arrow","sharp-arrow","circle","square"].includes(t)?t:void 0}function lu(t){return new Function("x","if (typeof x === 'number') {\n      return (typeof x === 'number' && isFinite(x) && x >= 0) ? x : undefined;\n    }\n    if (typeof x !== 'string' || x.charAt(x.length - 1) !== '%') {\n      return undefined;\n    }\n    var p = parseFloat(x);\n    return isNaN(p) ? undefined : ("+t+" * p / 100);")}function du(t){return{_check:nu,_set:new Function("flexArrays","index","value",["flexArrays.badges."+t+".text.content.set(index, value);","if (value === null || value === undefined) flexArrays.badges."+t+".image.url.set(index, value);"].join("\n")),_get:new Function("flexArrays","index","return flexArrays.badges."+t+".text.content.get(index);"),color:{_flexArray:"white",_check:ou},scale:{_flexArray:.45,_check:lu(.45)},positionScale:{_flexArray:1,_check:tu},minVisibleSize:{_flexArray:12,_check:lu(12)},image:{_alias:"badges."+t+".image.url",url:{_flexArray:null,_check:nu},scale:{_flexArray:1,_check:lu(1)}},stroke:{color:{_flexArray:"black",_check:ou},width:{_flexArray:2,_check:lu(2)},scalingMethod:{_flexArray:"fixed",_check:ru}},text:{_alias:"badges."+t+".text.content",content:{_flexArray:null,_check:nu},color:{_flexArray:"black",_check:ou},font:{_flexArray:"Arial",_check:su},style:{_flexArray:"normal",_check:au},paddingLeft:{_flexArray:0,_check:$a},paddingTop:{_flexArray:0,_check:$a},scale:{_flexArray:.5,_check:lu(.5)}},threshold:"badges."+t+".minVisibleSize"}}var hu={_check:Qa,_get:function(t,e){return 0===t.opacity.get(e)},_set:function(t,e,n){t.opacity.set(e,void 0===n?void 0:+!n)}},fu={x:{_flexArray:0,_check:$a,_disableMemoryOptimization:!0},y:{_flexArray:0,_check:$a,_disableMemoryOptimization:!0},radius:{_flexArray:5,_check:lu(5)},scalingMethod:{_flexArray:"scaled",_check:ru},color:{_flexArray:"grey",_check:function(t,e){if(e.parseColor(t))return t;if(Array.isArray(t)){if(t.length<1)return;for(var n=0;n<t.length;++n)if(!e.parseColor(t[n]))return;return t}}},opacity:{_flexArray:1,_check:tu},hidden:hu,shape:{_flexArray:"circle",_check:function(t){return"equilateral"===t?"pentagon":"circle"===t||"square"===t||"cross"===t||"diamond"===t||"pentagon"===t||"star"===t?t:void 0}},layer:{_flexArray:0,_check:eu},detectable:{_flexArray:!0,_check:Qa},draggable:{_flexArray:!0,_check:Qa},layoutable:{_flexArray:!0,_check:Qa},innerStroke:{_alias:"innerStroke.color",width:{_flexArray:2,_check:lu(2)},scalingMethod:{_flexArray:"fixed",_check:ru},color:{_flexArray:"white",_check:ou},minVisibleSize:{_flexArray:12,_check:lu(12)},threshold:"innerStroke.minVisibleSize"},outerStroke:{_alias:"outerStroke.color",width:{_flexArray:5,_check:lu(5)},scalingMethod:{_flexArray:"fixed",_check:ru},color:{_flexArray:null,_check:ou},minVisibleSize:{_flexArray:0,_check:lu(0)},threshold:"outerStroke.minVisibleSize"},badges:{_check:function(t){return null===t?t:void 0},_set:function(t,e,n){t.badges.topLeft.text.content.set(e,n),t.badges.topLeft.image.url.set(e,n),t.badges.topRight.text.content.set(e,n),t.badges.topRight.image.url.set(e,n),t.badges.bottomLeft.text.content.set(e,n),t.badges.bottomLeft.image.url.set(e,n),t.badges.bottomRight.text.content.set(e,n),t.badges.bottomRight.image.url.set(e,n)},topLeft:du("topLeft"),topRight:du("topRight"),bottomLeft:du("bottomLeft"),bottomRight:du("bottomRight")},halo:{_alias:"halo.color",color:{_flexArray:null,_check:iu},width:{_flexArray:50,_check:lu(50)},scalingMethod:{_flexArray:"fixed",_check:ru},strokeColor:{_flexArray:null,_check:iu},strokeWidth:{_flexArray:1,_check:lu(1)},clustering:{_flexArray:!1,_check:Qa},hideNonAdjacentEdges:{_flexArray:!1,_check:Qa},size:"halo.width"},pulse:{enabled:{_flexArray:!1,_check:Qa},duration:{_flexArray:1e3,_check:tu},interval:{_flexArray:800,_check:tu},startColor:{_flexArray:"rgba(0, 0, 0, 0.6)",_check:ou},endColor:{_flexArray:"rgba(0, 0, 0, 0)",_check:ou},width:{_flexArray:50,_check:tu},startRatio:{_flexArray:1,_check:tu},endRatio:{_flexArray:2,_check:tu}},icon:{_alias:"icon.content",content:{_flexArray:null,_check:nu},font:{_flexArray:"Arial",_check:su},color:{_flexArray:"black",_check:iu},scale:{_flexArray:.7,_check:lu(.7)},style:{_flexArray:"normal",_check:au},minVisibleSize:{_flexArray:12,_check:lu(12)},threshold:"icon.minVisibleSize"},image:{_alias:"image.url",url:{_flexArray:null,_check:nu},scale:{_flexArray:1,_check:lu(1)},fit:{_flexArray:!0,_check:Qa},tile:{_flexArray:!1,_check:Qa},minVisibleSize:{_flexArray:12,_check:lu(12)},rescale:"image.fit",duplicate:"image.tile",threshold:"image.minVisibleSize"},outline:{_alias:"outline.enabled",enabled:{_flexArray:!1,_check:Qa},color:{_flexArray:"rgba(0, 0, 0, 0.36)",_check:iu},minVisibleSize:{_flexArray:12,_check:lu(12)}},text:{_alias:"text.content",content:{_flexArray:null,_check:nu},font:{_flexArray:"Arial",_check:su},color:{_flexArray:"black",_check:ou},size:{_flexArray:12,_check:lu(12)},scale:{_flexArray:.1,_check:tu},style:{_flexArray:"normal",_check:au},align:{_flexArray:"center",_check:uu},margin:{_flexArray:10,_check:lu(10)},padding:{_flexArray:2,_check:lu(2)},backgroundColor:{_flexArray:null,_check:ou},tip:{_flexArray:!0,_check:Qa},minVisibleSize:{_flexArray:24,_check:lu(24)},scaling:{_flexArray:!1,_check:Qa},position:{_flexArray:"bottom",_check:function(t){return"top"===t||"bottom"===t||"left"===t||"right"===t||"center"===t?t:void 0}},maxLineLength:{_flexArray:0,_check:tu},truncateLength:{_flexArray:0,_check:tu},backgroundArrowBaseSize:"text.margin",backgroundMargin:"text.padding",threshold:"text.minVisibleSize",secondary:{_alias:"text.secondary.content",content:{_flexArray:null,_check:nu},font:{_flexArray:"Arial",_check:su},color:{_flexArray:"black",_check:ou},size:{_flexArray:10,_check:lu(10)},scale:{_flexArray:.08,_check:tu},style:{_flexArray:"normal",_check:au},align:{_flexArray:"center",_check:uu},margin:{_flexArray:5,_check:lu(5)},padding:{_flexArray:2,_check:lu(2)},backgroundColor:{_flexArray:null,_check:ou},minVisibleSize:{_flexArray:24,_check:lu(24)},backgroundArrowBaseSize:"text.secondary.margin",backgroundMargin:"text.secondary.padding",threshold:"text.secondary.minVisibleSize"}}},pu={width:{_flexArray:1,_check:lu(1)},scalingMethod:{_flexArray:"scaled",_check:ru},color:{_flexArray:"grey",_check:function(t,e){return"source"===t||"target"===t||e.parseColor(t)?t:void 0}},opacity:{_flexArray:1,_check:tu},hidden:hu,minVisibleSize:{_flexArray:0,_check:tu},threshold:"minVisibleSize",layer:{_flexArray:0,_check:eu},detectable:{_flexArray:!0,_check:Qa},curvature:{_flexArray:0,_check:$a},adjustAnchors:{_flexArray:!0,_check:Qa},shape:{_check:function(t){return["line","tapered","arrow","dashed","dotted"].includes(t)?t:void 0},_set:function(t,e,n){var r=void 0,i=void 0,o=void 0,s=void 0;"line"===n?(r="line",i="plain",s=o=null):"arrow"===n?(r="line",i="plain",o="arrow",s=null):"tapered"===n?(r="triangle",i="plain",s=o=null):"dashed"===n?(r="line",i="dashed",s=o=null):"dotted"===n&&(r="line",i="dotted",s=o=null),t.shape.type.set(e,r),t.shape.style.set(e,i),t.shape.head.set(e,o),t.shape.tail.set(e,s)},type:{_flexArray:"line",_check:function(t){return"line"===t||"triangle"===t?t:void 0}},head:{_flexArray:null,_check:cu},tail:{_flexArray:null,_check:cu},style:{_flexArray:"plain",_check:function(t){return"plain"===t||"dashed"===t||"dotted"===t?t:void 0}}},stroke:{color:{_flexArray:"inherit",_check:ou},width:{_flexArray:0,_check:lu(0)},scalingMethod:{_flexArray:"fixed",_check:ru},minVisibleSize:{_flexArray:0,_check:tu}},strokeWidth:"stroke.width",halo:{_alias:"halo.color",color:{_flexArray:null,_check:iu},width:{_flexArray:10,_check:lu(10)},scalingMethod:{_flexArray:"fixed",_check:ru},size:"halo.width"},pulse:{enabled:{_flexArray:!1,_check:Qa},duration:{_flexArray:1e3,_check:tu},interval:{_flexArray:800,_check:tu},startColor:{_flexArray:"rgba(0, 0, 0, 0.6)",_check:ou},endColor:{_flexArray:"rgba(0, 0, 0, 0)",_check:ou},width:{_flexArray:10,_check:tu},startRatio:{_flexArray:1,_check:tu},endRatio:{_flexArray:2,_check:tu}},outline:{_alias:"outline.enabled",enabled:{_flexArray:!1,_check:Qa},color:{_flexArray:"rgba(0, 0, 0, 0.36)",_check:iu},minVisibleSize:{_flexArray:0,_check:tu}},text:{_alias:"text.content",content:{_flexArray:null,_check:nu},font:{_flexArray:"Arial",_check:su},color:{_flexArray:"black",_check:iu},size:{_flexArray:12,_check:lu(12)},scale:{_flexArray:1,_check:tu},style:{_flexArray:"normal",_check:au},align:{_flexArray:"center",_check:uu},margin:{_flexArray:2,_check:$a},padding:{_flexArray:2,_check:lu(2)},backgroundColor:{_flexArray:null,_check:ou},minVisibleSize:{_flexArray:4,_check:tu},threshold:"text.minVisibleSize",adjustAngle:{_flexArray:!0,_check:Qa},scaling:{_flexArray:!1,_check:Qa},maxLineLength:{_flexArray:0,_check:tu},secondary:{_alias:"text.secondary.content",content:{_flexArray:null,_check:nu},font:{_flexArray:"Arial",_check:su},color:{_flexArray:"black",_check:iu},size:{_flexArray:12,_check:lu(12)},scale:{_flexArray:.8,_check:tu},style:{_flexArray:"normal",_check:au},align:{_flexArray:"center",_check:uu},margin:{_flexArray:2,_check:$a},padding:{_flexArray:2,_check:lu(2)},backgroundColor:{_flexArray:null,_check:ou},minVisibleSize:{_flexArray:4,_check:tu},threshold:"text.secondary.minVisibleSize"}}};function gu(){}function _u(){}function vu(t,e){if(!t._check)throw new Error("error somewhere for "+e);return{check:t._check,set:new Function("flexArrays","index","value","flexArrays."+e+".set(index, value);"),get:new Function("flexArrays","index","return flexArrays."+e+".get(index);"),nested:{}}}function yu(t,e,n){if(void 0!==(e=e||t)._flexArray)return vu(e,n);var r={check:null,get:null,set:null,nested:{}};if(Ka(e)||e._alias){var i=Ka(e)?e:e._alias;r=vu(c=X(t,i),i)}else{if(e._set?(r.set=e._set,r.check=e._check):(r.set=gu,r.check=_u),e._get)r.get=e._get;else{var o="return "+function t(e,n){if(void 0!==e._flexArray)return"flexArrays."+n+".get(index)";for(var r=[],i=0,o=Object.keys(e);i<o.length;i++){var s=o[i],a=e[s];if(!s.startsWith("_")&&et(a)){var u=t(e[s],Ja(n,s));u&&r.push(s+": "+u)}}return r.length?"{\n"+r.join(",\n").split("\n").map((function(t){return"  "+t})).join("\n")+"\n}":""}(e,n)+";";r.get=new Function("flexArrays","index",o)}r.nested={}}if(!Ka(e))for(var s=0,a=Object.keys(e);s<a.length;s++){var u=a[s],c=e[u];u.startsWith("_")||(r.nested[u]=yu(t,c,Ja(n,u)))}return r}function mu(t){return t}function bu(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}var xu=yu(fu),Eu=yu(pu),wu={name:"animationStart",storage:32,default:0},Su={name:"animationDuration",storage:16,default:0},Au={name:"animationEasing",storage:"resource",default:"linear"},Cu={self:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},adjacentNodes:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},adjacentEdges:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},allNodes:void 0,allEdges:void 0},Tu={self:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},extremities:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},parallelEdges:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},allNodes:void 0,allEdges:void 0},ku={x:1,y:1,radius:1,"halo.hideNonAdjacentEdges":1},Iu=Object.freeze({__proto__:null,linear:mu,quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:bu,cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Ou=[];function Mu(t){var e=Ou;return void 0===t.output?("function"==typeof t.attributes&&(e="all"),et(t.attributes)&&(e=J(t.attributes))):t.output&&(e=t.output.attributes),Fu(e,t.allAttributePaths)}function Lu(t,e,n,r,i,o){!function(t,e,n,r){if(n<r)for(var i=0,o=e.attributes;i<o.length;i++)for(var s=o[i],a=0,u=t.attributes;a<u.length;a++)if(u[a]===s)return 1;for(var c=0,l=e.tags;c<l.length;c++)for(var d=l[c],h=0,f=t.tags;h<f.length;h++)if(d===f[h])return 1}(n,r,i,o)||t.push(e)}function Nu(t){var e=t.dependencies;void 0===e?e=Cu:et(e)||(e={});var n=Q(t.attributes).some((function(t){return"function"==typeof t})),r=t.selector&&!t.standaloneSelector,i=!(!n&&!r),o=e.adjacentEdges;return!o&&e.adjacentNodes&&(o=!0),{self:Pu(e.self,i,t.allAttributePaths),adjacentNodes:Pu(e.adjacentNodes,i,t.allAttributePaths),adjacentEdges:Pu(o,i,t.allAttributePaths),allNodes:Pu(e.allNodes,i,t.allAttributePaths),allEdges:Pu(e.allEdges,i,t.allAttributePaths)}}function Ru(t){var e=t.dependencies;void 0===e?e=Tu:et(e)||(e={});var n=Q(t.attributes).some((function(t){return"function"==typeof t})),r=t.selector&&!t.standaloneSelector,i=!(!n&&!r);return{self:Pu(e.self,i,t.allAttributePaths),extremities:Pu(e.extremities,i,t.allAttributePaths),parallelEdges:Pu(e.parallelEdges,i,t.allAttributePaths),allNodes:Pu(e.allNodes,i,t.allAttributePaths),allEdges:Pu(e.allEdges,i,t.allAttributePaths)}}function Pu(t,e,n){if(!e)return{attributes:[],tags:[]};if(!0===t)return{attributes:[],tags:[sn]};var r,i={attributes:Fu((t=t||{}).attributes,n),tags:(r=t.tags,Array.isArray(r)?r.filter(Ka):[])};return t.data&&i.tags.push(an),t.selection&&i.tags.push(ln),t.hover&&i.tags.push(un),i}function Du(t){return Array.isArray(t)?t.join("."):t}function Fu(t,e){if("all"===t)return e.slice();if(!Array.isArray(t))return[];var n=function(t){return t.map(Du).filter(Ka)}(t);return e?e.filter((function(t){return n.some((function(e){return t.startsWith(e)}))})):n}var zu=(Bu.prototype.clear=function(){this._elementsToRedraw.clear(),this._elementsUpdated.clear(),this._updatedAttributes.clear(),this._updatedAttributesTmp.clear()},Bu.prototype.getAttributeFlexArrays=function(){return this._finalFlexArraysWrapped},Bu.prototype.getPrevAttributeFlexArrays=function(){return this._prevFlexArrays},Bu.prototype.getAnimationInformation=function(t){for(var e=t._indexes,n=Array(e.length),r=0;r<e.length;r++){var i=e[r];n[r]={duration:this._finalFlexArraysWrapped.animationDuration.get(i),start:this._finalFlexArraysWrapped.animationStart.get(i),easing:this._finalFlexArraysWrapped.animationEasing.get(i)}}return n},Bu.prototype.startUpdate=function(){},Bu.prototype.prepareFlexArraysUpdate=function(t){this._currentFlexArrays=t.inputFlexArrays},Bu.prototype.setLastFlexArrays=function(t){this._lastFlexArrays=t},Bu.prototype.updateFlexArrays=function(t){var e=t.attributes,n=t.selector,r=t.context,i=t.outputFlexArrays,o=t.toUpdate,s=t.formattedOutput;this._elementsUpdated.addSet(o),this._elementsToRedraw.addSet(o);var a=o.getListAndClear();if(e&&a.size){for(var u=Fn(this._graph,a,n,r),c=u.valid,l=u.invalid,d=0,h=s.attributes;d<h.length;d++)for(var f=X(i,h[d]),p=0;p<l._indexes.length;p++){var g=l._indexes[p];f.set(g,void 0)}this._assignAttributesToFlexArrays(this._accessors,i,c,e,r),this._addUpdatedAttributes(t)}},Bu.prototype.endUpdate=function(){for(var t=this._elementsUpdated.getList(),e=0,n=so(this._updatedAttributesTmp);e<n.length;e++)for(var r=n[e],i=X(this._lastFlexArrays,r),o=X(this._finalFlexArrays,r),s=0;s<t._indexes.length;s++){var a=t._indexes[s];o.set(a,i.get(a))}this._updatedAttributesTmp.clear(),this._currentFlexArrays=this._finalFlexArrays},Bu.prototype.setAttributeValues=function(t,e,n,r,i){var o=t.outputFlexArrays,s=this._accessors;this._assignAttributesToFlexArrays(s,o,e,n,null),this._addUpdatedAttributes(t,r),this._elementsUpdated.add(e),this._elementsToRedraw.add(e)},Bu.prototype.notifyLayerDestroyed=function(t){this._addUpdatedAttributes(t)},Bu.prototype._addUpdatedAttributes=function(t,e){for(var n=t.outputFlexArrays,r=t.formattedOutput,i=0,o=Array.isArray(e)?Fu(e):r.attributes;i<o.length;i++){var s=o[i];X(n,s).isInitialized()&&(this._updatedAttributes.add(s),this._updatedAttributesTmp.add(s),this._allUsedAttributes.add(s))}},Bu.prototype.addUpdatedAttribute=function(t){this._updatedAttributes.add(t),this._updatedAttributesTmp.add(t),this._allUsedAttributes.add(t)},Bu.prototype.getUsedAttributeNames=function(t){return function t(e,n,r){return void 0===n&&(n=[]),void 0===r&&(r=""),e.constructor===Ue?e.isInitialized()&&n.push(r):e.constructor===Object&&Object.keys(e).forEach((function(i){t(e[i],n,Ja(r,i))})),n}(t.outputFlexArrays)},Bu.prototype.redrawElements=function(t){this._elementsToRedraw.add(t)},Bu.prototype.redrawAll=function(){this._elementsToRedraw.addAll()},Bu.prototype.getAndResetElementsToRedraw=function(){return this._elementsToRedraw.getListAndClear()},Bu.prototype.getAndResetElementsUpdated=function(){return this._elementsUpdated.getListAndClear()},Bu.prototype.getAndResetAttributesUpdated=function(){var t=so(this._updatedAttributes);return this._updatedAttributes.clear(),t},Bu.prototype.getUpdatedAttributes=function(){return this._updatedAttributes},Bu.prototype.getUpdatedElementsList=function(){return this._elementsUpdated.getList()},Bu.prototype.getUpdatedAttributesSet=function(){return new Set(this._updatedAttributes)},Bu.prototype.createFlexArrays=function(){return this._createFlexArrays(this._graph,{named:!1,useDefaultValues:!1})},Bu.prototype.getAttributeValues=function(t,e,n,r){var i=r?this._prevFlexArrays:this._currentFlexArrays;return n?this._getMultipleAttributeValues(t,e,i):this._getSingleAttributeValues(t,e,i)},Bu.prototype._getAccessor=function(t){void 0===t&&(t="");for(var e=this._accessors,n=z(t),r=0,i=n;r<i.length;r++){var o=i[r];if(!(e=e.nested[o]))throw new Error(this._eltName+' attribute "'+n.join("")+'" does not exist')}return e},Bu.prototype._getSingleAttributeValues=function(t,e,n){for(var r=this._getAccessor(e),i=t._indexes,o=Array(i.length),s=0;s<i.length;s++)o[s]=r.get(n,i[s]);return o},Bu.prototype._getMultipleAttributeValues=function(t,e,n){if(!e||"all"===e)return this._getSingleAttributeValues(t,"",n);for(var r=Array(t.size),i=0;i<r.length;++i)r[i]={};for(i=0;i<e.length;i++)for(var o=e[i],s=this._getSingleAttributeValues(t,o,n),a=0;a<r.length;++a)Y(r[a],o,s[a]);return r},Bu.prototype.setAnimationAttributes=function(t,e){var n=e.duration,r=e.startTime,i=e.easing,o=t._indexes,s=this._finalFlexArraysWrapped.animationDuration,a=this._finalFlexArraysWrapped.animationStart,u=this._finalFlexArraysWrapped.animationEasing,c=so(this._allUsedAttributes);if(n){for(var l=!1,d=0,h=c;d<h.length;d++){var f=h[d];if("x"!==f&&"y"!==f)for(var p=X(this._finalFlexArrays,f),g=X(this._prevFlexArrays,f),_=0;_<o.length;_++){var v=o[_];g.set(v,p.get(v))}else l=!0}if(l){var y=Qt(),m=this._finalFlexArrays.x,b=this._finalFlexArrays.y,x=this._prevFlexArrays.x,E=this._prevFlexArrays.y;for(_=0;_<o.length;_++){v=o[_];var w=s.get(v);if(w){var S=a.get(v),A=u.get(v),C=(Iu[A]||mu)(Math.min((y-S)/w,1)),T=Ye(x.get(v),m.get(v),C),k=Ye(E.get(v),b.get(v),C);x.set(v,T),E.set(v,k)}else x.set(v,m.get(v)),E.set(v,b.get(v))}}}s.fill(o,n),a.fill(o,r),u.fill(o,i)},Bu.prototype.resetAnimationAttributes=function(t){this._finalFlexArraysWrapped.animationDuration.fill(t._indexes,0)},Bu.prototype.getUsedAttributes=function(){return so(this._allUsedAttributes)},Bu.prototype.getDefaultFlexArrays=function(){return this._defaultFlexArrays},Bu.prototype._assignAttributesToFlexArrays=function(t,e,n,r,i,o){if(void 0===o&&(o=[]),"function"==typeof r){for(var s=o.join("."),a=0;a<n.size;++a)if(g=n.get(a)){var u=r(g,i,s);this._assignSingleValueToFlexArray(e,g,t,u,o)}}else if(et(r)){var c=Object.keys(r);for(a=0;a<c.length;++a){var l=c[a];o.push(l);var d=this._getNestedAccessor(t,l,o),h=r[l];this._assignAttributesToFlexArrays(d,e,n,h,i,o),o.pop()}}else if((Array.isArray(r)||ArrayBuffer.isView(r))&&"color"!==o[0])if(o.length)for(a=0;a<n.size;++a){var f=n._indexes[a],p=t.check(r[a],this._colorManager);t.set(e,f,p)}else for(a=0;a<n.size;++a)this._assignSingleValueToFlexArray(e,n.get(a),t,r[a],o);else for(p=t.check(r,this._colorManager),a=0;a<n.size;++a){var g=n.get(a);t.set(e,g._index,p)}},Bu.prototype._getNestedAccessor=function(t,e,n){var r=t.nested[e];if(!r)throw new Error(this._eltName+' attribute "'+n.join(".")+'" does not exist');return r},Bu.prototype._assignSingleValueToFlexArray=function(t,e,n,r,i){if(et(r))for(var o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];i.push(a);var u=r[a],c=this._getNestedAccessor(n,a,i);this._assignSingleValueToFlexArray(t,e,c,u,i),i.pop()}else{var l=n.check(r,this._colorManager);n.set(t,e._index,l)}},Bu);function Bu(t,e,n,r){this._updatedAttributes=new Set,this._updatedAttributesTmp=new Set,this._allUsedAttributes=new Set,this._colorManager=e,this._graph=t,this._eltName=n?"node":"edge",this._accessors=n?xu:Eu,this._createFlexArrays=r,this._finalFlexArrays=this._createFlexArrays(t,{named:!0,useDefaultValues:!0}),this._prevFlexArrays=this._createFlexArrays(t,{named:!1,useDefaultValues:!0}),this._defaultFlexArrays=this._createFlexArrays(t,{named:!1,useDefaultValues:!0}),this._currentFlexArrays=this._defaultFlexArrays,this.setLastFlexArrays(this._defaultFlexArrays),this._elementsToRedraw=new Xa({graph:t,isNode:n,includeRemovedElements:!0}),this._elementsUpdated=new Xa({graph:t,isNode:n,includeRemovedElements:!1}),this._finalFlexArraysWrapped=w(w(w({},this._finalFlexArrays),{excluded:t.getAttribute(n,"excluded"),textHidden:t.getAttribute(n,"textHidden"),animationStart:t.createAttribute(n,wu),animationDuration:t.createAttribute(n,Su),animationEasing:t.createAttribute(n,Au),id:this._graph.getAttribute(n,"id")}),!n&&{source:t.getEdgeAttribute("source"),target:t.getEdgeAttribute("target")})}function Uu(t,e){var n=e.named,r=e.useDefaultValues,i="resource";return{x:t.createAttribute(!0,{storage:"any",default:r?0:void 0,name:n?"x":void 0}),y:t.createAttribute(!0,{storage:"any",default:r?0:void 0,name:n?"y":void 0}),radius:t.createAttribute(!0,{storage:i,default:r?5:void 0,name:n?"radius":void 0}),scalingMethod:t.createAttribute(!0,{storage:i,default:r?"scaled":void 0,name:n?"scalingMethod":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"grey":void 0,name:n?"color":void 0}),opacity:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"opacity":void 0}),shape:t.createAttribute(!0,{storage:i,default:r?"circle":void 0,name:n?"shape":void 0}),layer:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"layer":void 0}),detectable:t.createAttribute(!0,{storage:i,default:!!r||void 0,name:n?"detectable":void 0}),draggable:t.createAttribute(!0,{storage:i,default:!!r||void 0,name:n?"draggable":void 0}),layoutable:t.createAttribute(!0,{storage:i,default:!!r||void 0,name:n?"layoutable":void 0}),innerStroke:{width:t.createAttribute(!0,{storage:i,default:r?2:void 0,name:n?"innerStroke.width":void 0}),scalingMethod:t.createAttribute(!0,{storage:i,default:r?"fixed":void 0,name:n?"innerStroke.scalingMethod":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"white":void 0,name:n?"innerStroke.color":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"innerStroke.minVisibleSize":void 0})},outerStroke:{width:t.createAttribute(!0,{storage:i,default:r?5:void 0,name:n?"outerStroke.width":void 0}),scalingMethod:t.createAttribute(!0,{storage:i,default:r?"fixed":void 0,name:n?"outerStroke.scalingMethod":void 0}),color:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"outerStroke.color":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"outerStroke.minVisibleSize":void 0})},badges:{topLeft:{color:t.createAttribute(!0,{storage:i,default:r?"white":void 0,name:n?"badges.topLeft.color":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.45:void 0,name:n?"badges.topLeft.scale":void 0}),positionScale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"badges.topLeft.positionScale":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"badges.topLeft.minVisibleSize":void 0}),image:{url:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"badges.topLeft.image.url":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"badges.topLeft.image.scale":void 0})},stroke:{color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"badges.topLeft.stroke.color":void 0}),width:t.createAttribute(!0,{storage:i,default:r?2:void 0,name:n?"badges.topLeft.stroke.width":void 0}),scalingMethod:t.createAttribute(!0,{storage:i,default:r?"fixed":void 0,name:n?"badges.topLeft.stroke.scalingMethod":void 0})},text:{content:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"badges.topLeft.text.content":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"badges.topLeft.text.color":void 0}),font:t.createAttribute(!0,{storage:i,default:r?"Arial":void 0,name:n?"badges.topLeft.text.font":void 0}),style:t.createAttribute(!0,{storage:i,default:r?"normal":void 0,name:n?"badges.topLeft.text.style":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.5:void 0,name:n?"badges.topLeft.text.scale":void 0}),paddingLeft:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"badges.topLeft.text.paddging.left":void 0}),paddingTop:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"badges.topLeft.text.paddging.top":void 0})}},topRight:{color:t.createAttribute(!0,{storage:i,default:r?"white":void 0,name:n?"badges.topRight.color":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.45:void 0,name:n?"badges.topRight.scale":void 0}),positionScale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"badges.topRight.positionScale":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"badges.topRight.minVisibleSize":void 0}),image:{url:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"badges.topRight.image.url":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"badges.topRight.image.scale":void 0})},stroke:{color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"badges.topRight.stroke.color":void 0}),width:t.createAttribute(!0,{storage:i,default:r?2:void 0,name:n?"badges.topRight.stroke.width":void 0}),scalingMethod:t.createAttribute(!0,{storage:i,default:r?"fixed":void 0,name:n?"badges.topRight.stroke.scalingMethod":void 0})},text:{content:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"badges.topRight.text.content":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"badges.topRight.text.color":void 0}),font:t.createAttribute(!0,{storage:i,default:r?"Arial":void 0,name:n?"badges.topRight.text.font":void 0}),style:t.createAttribute(!0,{storage:i,default:r?"normal":void 0,name:n?"badges.topRight.text.style":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.5:void 0,name:n?"badges.topRight.text.scale":void 0}),paddingTop:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"badges.topRight.text.paddging.left":void 0}),paddingLeft:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"badges.topRight.text.paddging.top":void 0})}},bottomLeft:{color:t.createAttribute(!0,{storage:i,default:r?"white":void 0,name:n?"badges.bottomLeft.color":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.45:void 0,name:n?"badges.bottomLeft.scale":void 0}),positionScale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"badges.bottomLeft.positionScale":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"badges.bottomLeft.minVisibleSize":void 0}),image:{url:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"badges.bottomLeft.image.url":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"badges.bottomLeft.image.scale":void 0})},stroke:{color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"badges.bottomLeft.stroke.color":void 0}),width:t.createAttribute(!0,{storage:i,default:r?2:void 0,name:n?"badges.bottomLeft.stroke.width":void 0}),scalingMethod:t.createAttribute(!0,{storage:i,default:r?"fixed":void 0,name:n?"badges.bottomLeft.stroke.scalingMethod":void 0})},text:{content:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"badges.bottomLeft.text.content":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"badges.bottomLeft.text.color":void 0}),font:t.createAttribute(!0,{storage:i,default:r?"Arial":void 0,name:n?"badges.bottomLeft.text.font":void 0}),style:t.createAttribute(!0,{storage:i,default:r?"normal":void 0,name:n?"badges.bottomLeft.text.style":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.5:void 0,name:n?"badges.bottomLeft.text.scale":void 0}),paddingLeft:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"badges.bottomLeft.text.paddging.left":void 0}),paddingTop:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"badges.bottomLeft.text.paddging.top":void 0})}},bottomRight:{color:t.createAttribute(!0,{storage:i,default:r?"white":void 0,name:n?"badges.bottomRight.color":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.45:void 0,name:n?"badges.bottomRight.scale":void 0}),positionScale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"badges.bottomRight.positionScale":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"badges.bottomRight.minVisibleSize":void 0}),image:{url:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"badges.bottomRight.image.url":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"badges.bottomRight.image.scale":void 0})},stroke:{color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"badges.bottomRight.stroke.color":void 0}),width:t.createAttribute(!0,{storage:i,default:r?2:void 0,name:n?"badges.bottomRight.stroke.width":void 0}),scalingMethod:t.createAttribute(!0,{storage:i,default:r?"fixed":void 0,name:n?"badges.bottomRight.stroke.scalingMethod":void 0})},text:{content:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"badges.bottomRight.text.content":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"badges.bottomRight.text.color":void 0}),font:t.createAttribute(!0,{storage:i,default:r?"Arial":void 0,name:n?"badges.bottomRight.text.font":void 0}),style:t.createAttribute(!0,{storage:i,default:r?"normal":void 0,name:n?"badges.bottomRight.text.style":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.5:void 0,name:n?"badges.bottomRight.text.scale":void 0}),paddingLeft:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"badges.bottomRight.text.paddging.left":void 0}),paddingTop:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"badges.bottomRight.text.paddging.top":void 0})}}},halo:{color:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"halo.color":void 0}),width:t.createAttribute(!0,{storage:i,default:r?50:void 0,name:n?"halo.width":void 0}),scalingMethod:t.createAttribute(!0,{storage:i,default:r?"fixed":void 0,name:n?"halo.scalingMethod":void 0}),strokeColor:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"halo.strokeColor":void 0}),strokeWidth:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"halo.strokeWidth":void 0}),clustering:t.createAttribute(!0,{storage:i,default:!r&&void 0,name:n?"halo.clustering":void 0}),hideNonAdjacentEdges:t.createAttribute(!0,{storage:i,default:!r&&void 0,name:n?"halo.hideNonAdjacentEdges":void 0})},pulse:{enabled:t.createAttribute(!0,{storage:i,default:!r&&void 0,name:n?"pulse.enabled":void 0}),duration:t.createAttribute(!0,{storage:i,default:r?1e3:void 0,name:n?"pulse.duration":void 0}),interval:t.createAttribute(!0,{storage:i,default:r?800:void 0,name:n?"pulse.interval":void 0}),startColor:t.createAttribute(!0,{storage:i,default:r?"rgba(0, 0, 0, 0.6)":void 0,name:n?"pulse.startColor":void 0}),endColor:t.createAttribute(!0,{storage:i,default:r?"rgba(0, 0, 0, 0)":void 0,name:n?"pulse.endColor":void 0}),width:t.createAttribute(!0,{storage:i,default:r?50:void 0,name:n?"pulse.width":void 0}),startRatio:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"pulse.startRatio":void 0}),endRatio:t.createAttribute(!0,{storage:i,default:r?2:void 0,name:n?"pulse.endRatio":void 0})},icon:{content:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"icon.content":void 0}),font:t.createAttribute(!0,{storage:i,default:r?"Arial":void 0,name:n?"icon.font":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"icon.color":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.7:void 0,name:n?"icon.scale":void 0}),style:t.createAttribute(!0,{storage:i,default:r?"normal":void 0,name:n?"icon.style":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"icon.minVisibleSize":void 0})},image:{url:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"image.url":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?1:void 0,name:n?"image.scale":void 0}),fit:t.createAttribute(!0,{storage:i,default:!!r||void 0,name:n?"image.fit":void 0}),tile:t.createAttribute(!0,{storage:i,default:!r&&void 0,name:n?"image.tile":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"image.minVisibleSize":void 0})},outline:{enabled:t.createAttribute(!0,{storage:i,default:!r&&void 0,name:n?"outline.enabled":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"rgba(0, 0, 0, 0.36)":void 0,name:n?"outline.color":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"outline.minVisibleSize":void 0})},text:{content:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"text.content":void 0}),font:t.createAttribute(!0,{storage:i,default:r?"Arial":void 0,name:n?"text.font":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"text.color":void 0}),size:t.createAttribute(!0,{storage:i,default:r?12:void 0,name:n?"text.size":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.1:void 0,name:n?"text.scale":void 0}),style:t.createAttribute(!0,{storage:i,default:r?"normal":void 0,name:n?"text.style":void 0}),align:t.createAttribute(!0,{storage:i,default:r?"center":void 0,name:n?"text.align":void 0}),margin:t.createAttribute(!0,{storage:i,default:r?10:void 0,name:n?"text.margin":void 0}),padding:t.createAttribute(!0,{storage:i,default:r?2:void 0,name:n?"text.padding":void 0}),backgroundColor:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"text.backgroundColor":void 0}),tip:t.createAttribute(!0,{storage:i,default:!!r||void 0,name:n?"text.tip":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?24:void 0,name:n?"text.minVisibleSize":void 0}),scaling:t.createAttribute(!0,{storage:i,default:!r&&void 0,name:n?"text.scaling":void 0}),position:t.createAttribute(!0,{storage:i,default:r?"bottom":void 0,name:n?"text.position":void 0}),maxLineLength:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"text.maxLineLength":void 0}),truncateLength:t.createAttribute(!0,{storage:i,default:r?0:void 0,name:n?"text.truncateLength":void 0}),secondary:{content:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"text.secondary.content":void 0}),font:t.createAttribute(!0,{storage:i,default:r?"Arial":void 0,name:n?"text.secondary.font":void 0}),color:t.createAttribute(!0,{storage:i,default:r?"black":void 0,name:n?"text.secondary.color":void 0}),size:t.createAttribute(!0,{storage:i,default:r?10:void 0,name:n?"text.secondary.size":void 0}),scale:t.createAttribute(!0,{storage:i,default:r?.08:void 0,name:n?"text.secondary.scale":void 0}),style:t.createAttribute(!0,{storage:i,default:r?"normal":void 0,name:n?"text.secondary.style":void 0}),align:t.createAttribute(!0,{storage:i,default:r?"center":void 0,name:n?"text.secondary.align":void 0}),margin:t.createAttribute(!0,{storage:i,default:r?5:void 0,name:n?"text.secondary.margin":void 0}),padding:t.createAttribute(!0,{storage:i,default:r?2:void 0,name:n?"text.secondary.padding":void 0}),backgroundColor:t.createAttribute(!0,{storage:i,default:r?null:void 0,name:n?"text.secondary.backgroundColor":void 0}),minVisibleSize:t.createAttribute(!0,{storage:i,default:r?24:void 0,name:n?"text.secondary.minVisibleSize":void 0})}}}}function Vu(t,e){var n=e.named,r=e.useDefaultValues,i="resource";return{width:t.createAttribute(!1,{storage:i,default:r?1:void 0,name:n?"width":void 0}),scalingMethod:t.createAttribute(!1,{storage:i,default:r?"scaled":void 0,name:n?"scalingMethod":void 0}),color:t.createAttribute(!1,{storage:i,default:r?"grey":void 0,name:n?"color":void 0}),opacity:t.createAttribute(!1,{storage:i,default:r?1:void 0,name:n?"opacity":void 0}),minVisibleSize:t.createAttribute(!1,{storage:i,default:r?0:void 0,name:n?"minVisibleSize":void 0}),layer:t.createAttribute(!1,{storage:i,default:r?0:void 0,name:n?"layer":void 0}),detectable:t.createAttribute(!1,{storage:i,default:!!r||void 0,name:n?"detectable":void 0}),curvature:t.createAttribute(!1,{storage:i,default:r?0:void 0,name:n?"curvature":void 0}),adjustAnchors:t.createAttribute(!1,{storage:i,default:!!r||void 0,name:n?"adjustAnchors":void 0}),shape:{type:t.createAttribute(!1,{storage:i,default:r?"line":void 0,name:n?"shape.type":void 0}),head:t.createAttribute(!1,{storage:i,default:r?null:void 0,name:n?"shape.head":void 0}),tail:t.createAttribute(!1,{storage:i,default:r?null:void 0,name:n?"shape.tail":void 0}),style:t.createAttribute(!1,{storage:i,default:r?"plain":void 0,name:n?"shape.style":void 0})},stroke:{color:t.createAttribute(!1,{storage:i,default:r?"inherit":void 0,name:n?"stroke.color":void 0}),width:t.createAttribute(!1,{storage:i,default:r?0:void 0,name:n?"stroke.width":void 0}),scalingMethod:t.createAttribute(!1,{storage:i,default:r?"fixed":void 0,name:n?"stroke.scalingMethod":void 0}),minVisibleSize:t.createAttribute(!1,{storage:i,default:r?0:void 0,name:n?"stroke.minVisibleSize":void 0})},halo:{color:t.createAttribute(!1,{storage:i,default:r?null:void 0,name:n?"halo.color":void 0}),width:t.createAttribute(!1,{storage:i,default:r?10:void 0,name:n?"halo.width":void 0}),scalingMethod:t.createAttribute(!1,{storage:i,default:r?"fixed":void 0,name:n?"halo.scalingMethod":void 0})},pulse:{enabled:t.createAttribute(!1,{storage:i,default:!r&&void 0,name:n?"pulse.enabled":void 0}),duration:t.createAttribute(!1,{storage:i,default:r?1e3:void 0,name:n?"pulse.duration":void 0}),interval:t.createAttribute(!1,{storage:i,default:r?800:void 0,name:n?"pulse.interval":void 0}),startColor:t.createAttribute(!1,{storage:i,default:r?"rgba(0, 0, 0, 0.6)":void 0,name:n?"pulse.startColor":void 0}),endColor:t.createAttribute(!1,{storage:i,default:r?"rgba(0, 0, 0, 0)":void 0,name:n?"pulse.endColor":void 0}),width:t.createAttribute(!1,{storage:i,default:r?10:void 0,name:n?"pulse.width":void 0}),startRatio:t.createAttribute(!1,{storage:i,default:r?1:void 0,name:n?"pulse.startRatio":void 0}),endRatio:t.createAttribute(!1,{storage:i,default:r?2:void 0,name:n?"pulse.endRatio":void 0})},outline:{enabled:t.createAttribute(!1,{storage:i,default:!r&&void 0,name:n?"outline.enabled":void 0}),color:t.createAttribute(!1,{storage:i,default:r?"rgba(0, 0, 0, 0.36)":void 0,name:n?"outline.color":void 0}),minVisibleSize:t.createAttribute(!1,{storage:i,default:r?0:void 0,name:n?"outline.minVisibleSize":void 0})},text:{content:t.createAttribute(!1,{storage:i,default:r?null:void 0,name:n?"text.content":void 0}),font:t.createAttribute(!1,{storage:i,default:r?"Arial":void 0,name:n?"text.font":void 0}),color:t.createAttribute(!1,{storage:i,default:r?"black":void 0,name:n?"text.color":void 0}),size:t.createAttribute(!1,{storage:i,default:r?12:void 0,name:n?"text.size":void 0}),scale:t.createAttribute(!1,{storage:i,default:r?1:void 0,name:n?"text.scale":void 0}),style:t.createAttribute(!1,{storage:i,default:r?"normal":void 0,name:n?"text.style":void 0}),align:t.createAttribute(!1,{storage:i,default:r?"center":void 0,name:n?"text.align":void 0}),margin:t.createAttribute(!1,{storage:i,default:r?2:void 0,name:n?"text.margin":void 0}),padding:t.createAttribute(!1,{storage:i,default:r?2:void 0,name:n?"text.padding":void 0}),backgroundColor:t.createAttribute(!1,{storage:i,default:r?null:void 0,name:n?"text.backgroundColor":void 0}),minVisibleSize:t.createAttribute(!1,{storage:i,default:r?4:void 0,name:n?"text.minVisibleSize":void 0}),adjustAngle:t.createAttribute(!1,{storage:i,default:!!r||void 0,name:n?"text.adjustAngle":void 0}),scaling:t.createAttribute(!1,{storage:i,default:!r&&void 0,name:n?"text.scaling":void 0}),maxLineLength:t.createAttribute(!1,{storage:i,default:r?0:void 0,name:n?"text.maxLineLength":void 0}),secondary:{content:t.createAttribute(!1,{storage:i,default:r?null:void 0,name:n?"text.secondary.content":void 0}),font:t.createAttribute(!1,{storage:i,default:r?"Arial":void 0,name:n?"text.secondary.font":void 0}),color:t.createAttribute(!1,{storage:i,default:r?"black":void 0,name:n?"text.secondary.color":void 0}),size:t.createAttribute(!1,{storage:i,default:r?12:void 0,name:n?"text.secondary.size":void 0}),scale:t.createAttribute(!1,{storage:i,default:r?.8:void 0,name:n?"text.secondary.scale":void 0}),style:t.createAttribute(!1,{storage:i,default:r?"normal":void 0,name:n?"text.secondary.style":void 0}),align:t.createAttribute(!1,{storage:i,default:r?"center":void 0,name:n?"text.secondary.align":void 0}),margin:t.createAttribute(!1,{storage:i,default:r?2:void 0,name:n?"text.secondary.margin":void 0}),padding:t.createAttribute(!1,{storage:i,default:r?2:void 0,name:n?"text.secondary.padding":void 0}),backgroundColor:t.createAttribute(!1,{storage:i,default:r?null:void 0,name:n?"text.secondary.backgroundColor":void 0}),minVisibleSize:t.createAttribute(!1,{storage:i,default:r?4:void 0,name:n?"text.secondary.minVisibleSize":void 0})}}}}function ju(t,e){return new qa(t,e)}var Hu=(Gu.prototype._getLayerById=function(t){for(var e=0;e<this._layers.length;++e){var n=this._layers[e];if(n.id===t)return n.index=e,n}throw new Error("usage of a destroyed style rule or class")},Gu.prototype._fetch=function(t){return t.isNode?this._nodes:this._edges},Gu.prototype.getFlexArrays=function(){return{nodes:{current:this._nodes.getAttributeFlexArrays(),previous:this._nodes.getPrevAttributeFlexArrays()},edges:{current:this._edges.getAttributeFlexArrays(),previous:this._edges.getPrevAttributeFlexArrays()}}},Gu.prototype.createFlexArrays=function(){return{nodes:this._nodes.createFlexArrays(),edges:this._edges.createFlexArrays()}},Gu.prototype.clear=function(){this._updateOngoing=!1,this._needUpdate=!1,this._destroyedLayers=[],this._nodes.clear(),this._edges.clear(),this.updateAllForAllAttributeLayers()},Gu.prototype.redrawElements=function(t){t.size&&(this._fetch(t).redrawElements(t),this._dom.refresh())},Gu.prototype.redrawAll=function(){this._nodes.redrawAll(),this._edges.redrawAll(),this._dom.refresh()},Gu.prototype._triggerUpdate=function(){this._needUpdate=!0,this._dom.refresh()},Gu.prototype._reconstructAttributeLayersIfNecessary=function(){return!!this._layersNeedUpdate&&(this._reconstructAttributeLayers(),this._layersNeedUpdate=!1,this._dom.refresh(),!0)},Gu.prototype.getAnimationInformation=function(t){return this._fetch(t).getAnimationInformation(t)},Gu.prototype.update=function(){if(!this._needUpdate||this._updateOngoing||!this._ogma._token)return!1;this._reconstructAttributeLayersIfNecessary(),this._updateOngoing=!0,this._nodes.startUpdate(),this._edges.startUpdate();for(var t=0,e=this._destroyedLayers;t<e.length;t++)(i=e[t]).initialized&&(this._nodes.notifyLayerDestroyed(i.nodes),this._edges.notifyLayerDestroyed(i.edges));for(var n=0,r=this._layers;n<r.length;n++){var i,o=(i=r[n]).nodes,s=i.edges;this._nodes.prepareFlexArraysUpdate(o),this._edges.prepareFlexArraysUpdate(s),"function"==typeof i.onBeforeUpdate&&i.onBeforeUpdate(i,this,this._nodes,this._edges),this._nodes.updateFlexArrays(o),this._edges.updateFlexArrays(s)}return this._nodes.endUpdate(),this._edges.endUpdate(),this._updateOngoing=!1,!(this._needUpdate=!1)},Gu.prototype.setAttributeLayerValues=function(t,e,n,r){var i=this._getLayerById(t),o=e.isNode?i.nodes:i.edges;this._reconstructAttributeLayersIfNecessary(),this._fetch(e).setAttributeValues(o,e,n,r,i),this._updateElementsForAttributeLayers([i],e)},Gu.prototype.getAttributeLayerFlexArrays=function(t){var e=this._getLayerById(t);return{nodes:e.nodes.outputFlexArrays,edges:e.edges.outputFlexArrays}},Gu.prototype.getUsedAttributeLayerAttributes=function(t,e){var n=this._getLayerById(t);return this._fetch(e).getUsedAttributeNames(e.isNode?n.nodes:n.edges)},Gu.prototype.getAndResetElementsUpdated=function(){var t=this._nodes,e=this._edges;return{nodes:t.getAndResetElementsUpdated(),edges:e.getAndResetElementsUpdated(),nodeAttributesSet:t.getUpdatedAttributesSet(),nodeAttributes:t.getAndResetAttributesUpdated(),edgeAttributes:e.getAndResetAttributesUpdated()}},Gu.prototype.getAndResetElementsToRedraw=function(){return{nodes:this._nodes.getAndResetElementsToRedraw(),edges:this._edges.getAndResetElementsToRedraw()}},Gu.prototype.addAttributeLayer=function(t){var e=t.name,n=t.tag,r=void 0===n?null:n,i=t.onBeforeUpdate,o=t.standaloneSelectors,s=t.layerFactory,a=void 0===s?ju:s;if(!e)throw new Error("Attribute layer must have a name");if(e&&this._layers.find((function(t){return t.name===e})))throw new Error('attribute layer with name "'+t.name+'" already exists');var u=!!o,c={index:-1,id:++this._layerIdCounter,name:e,tag:r,priority:0,depsNodeSelf:[],depsNodeAdjacentNodes:[],depsNodeAdjacentEdges:[],depsNodeAllNodes:[],depsNodeAllEdges:[],depsEdgeSelf:[],depsEdgeExtremities:[],depsEdgeParallelEdges:[],depsEdgeAllNodes:[],depsEdgeAllEdges:[],initialized:!1,onBeforeUpdate:i,nodes:{type:"node",name:e,standaloneSelector:u,toUpdate:new Xa({graph:this._graph,isNode:!0,includeRemovedElements:!1}),outputFlexArrays:this._nodes.createFlexArrays(),inputFlexArrays:null,formattedDependencies:null,formattedOutput:null},edges:{type:"edge",name:e,standaloneSelector:u,toUpdate:new Xa({graph:this._graph,isNode:!1,includeRemovedElements:!1}),outputFlexArrays:this._edges.createFlexArrays(),inputFlexArrays:null,formattedDependencies:null,formattedOutput:null}};return this._layers.push(c),this._updateLayer(c,t),a(this,this._layerIdCounter)},Gu.prototype._reconstructAttributeLayers=function(){this._layers.sort((function(t,e){return t.priority-e.priority}));for(var t=W(this._nodes.getDefaultFlexArrays()),e=W(this._edges.getDefaultFlexArrays()),n=J(t),r=J(e),i=0,o=this._layers;i<o.length;i++)(k=o[i]).nodes.allAttributePaths=n,k.edges.allAttributePaths=r,k.nodes.formattedDependencies=Nu(k.nodes),k.edges.formattedDependencies=Ru(k.edges),k.nodes.formattedOutput={attributes:Mu(k.nodes),tags:k.tag?[k.tag]:[]},k.edges.formattedOutput={attributes:Mu(k.edges),tags:k.tag?[k.tag]:[]},k.nodes.redrawAdjacentEdges=k.nodes.formattedOutput.attributes.some((function(t){return ku[t]})),k.initialized=!0;for(var s=0,a=this._layers;s<a.length;s++){(k=a[s]).nodes.inputFlexArrays=W(t),k.edges.inputFlexArrays=W(e),k.depsNodeSelf=[],k.depsNodeAdjacentNodes=[],k.depsNodeAdjacentEdges=[],k.depsNodeAllNodes=[],k.depsNodeAllEdges=[],k.depsEdgeSelf=[],k.depsEdgeExtremities=[],k.depsEdgeParallelEdges=[],k.depsEdgeAllNodes=[],k.depsEdgeAllEdges=[],k.nodes.toUpdate.addAll(),k.edges.toUpdate.addAll();for(var u=k.nodes.formattedOutput,c=k.edges.formattedOutput,l=0,d=u.attributes;l<d.length;l++){var h=X(t,g=d[l]);(_=X(k.nodes.outputFlexArrays,g)).setFallback(h),Y(t,g,_)}for(var f=0,p=c.attributes;f<p.length;f++){var g,_;h=X(e,g=p[f]),(_=X(k.edges.outputFlexArrays,g)).setFallback(h),Y(e,g,_)}for(var v=0,y=this._layers;v<y.length;v++){var m=y[v];if(k!==m){var b=k.priority,x=m.priority,E=k.nodes.formattedOutput,w=k.edges.formattedOutput,S=m.nodes.formattedDependencies,A=m.edges.formattedDependencies;Lu(k.depsNodeSelf,m,E,S.self,b,x),Lu(k.depsNodeAdjacentNodes,m,E,S.adjacentNodes,b,x),Lu(k.depsNodeAdjacentEdges,m,w,A.extremities,b,x),Lu(k.depsNodeAllNodes,m,E,S.allNodes,b,x),Lu(k.depsNodeAllEdges,m,w,A.allNodes,b,x),Lu(k.depsEdgeSelf,m,w,A.self,b,x),Lu(k.depsEdgeExtremities,m,E,S.adjacentEdges,b,x),Lu(k.depsEdgeParallelEdges,m,w,A.parallelEdges,b,x),Lu(k.depsEdgeAllNodes,m,E,S.allEdges,b,x),Lu(k.depsEdgeAllEdges,m,w,A.allEdges,b,x)}}}this._nodes.setLastFlexArrays(t),this._edges.setLastFlexArrays(e);for(var C=0,T=this._layers;C<T.length;C++){var k;(k=T[C]).nodes.needAdjacentElements=k.nodes.redrawAdjacentEdges||0<k.depsNodeAdjacentNodes.length||0<k.depsNodeAdjacentEdges.length,k.edges.needAdjacentElements=0<k.depsEdgeExtremities.length||0<k.depsEdgeParallelEdges.length}},Gu.prototype._updateLayer=function(t,e){var n=void 0===e?{}:e,r=n.priority,i=n.fullOverwrite,o=n.nodeAttributes,s=n.nodeSelector,a=n.nodeContext,u=n.nodeDependencies,c=n.nodeOutput,l=n.edgeAttributes,d=n.edgeSelector,h=n.edgeContext,f=n.edgeDependencies,p=n.edgeOutput;void 0!==o&&(t.nodes.attributes=i?o:nt(t.nodes.attributes,o)),void 0!==s&&(t.nodes.selector=s),void 0!==a&&(t.nodes.context=a),void 0!==u&&(t.nodes.dependencies=u),void 0!==c&&(t.nodes.output=c),void 0!==l&&(t.edges.attributes=i?l:nt(t.edges.attributes,l)),void 0!==d&&(t.edges.selector=d),void 0!==h&&(t.edges.context=h),void 0!==f&&(t.edges.dependencies=f),void 0!==p&&(t.edges.output=p),void 0!==r&&(t.priority=r),this._triggerLayerUpdate()},Gu.prototype._triggerLayerUpdate=function(){this._layersNeedUpdate=!0,this._triggerUpdate()},Gu.prototype.updateAllForAttributeLayer=function(t){var e=this._getLayerById(t);this._updateAllForAttributeLayer(e)},Gu.prototype.updateAllForAllAttributeLayers=function(){for(var t=0,e=this._layers;t<e.length;t++){var n=e[t];this._updateAllForAttributeLayer(n)}},Gu.prototype._updateAllForAttributeLayer=function(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),e&&!t.nodes.toUpdate.isFull()){t.nodes.toUpdate.addAll();for(var r=0,i=t.depsNodeSelf;r<i.length;r++){var o=i[r];this._updateAllForAttributeLayer(o,!0,!1)}for(var s=0,a=t.depsNodeAdjacentNodes;s<a.length;s++)o=a[s],this._updateAllForAttributeLayer(o,!0,!1);for(var u=0,c=t.depsNodeAdjacentEdges;u<c.length;u++)o=c[u],this._updateAllForAttributeLayer(o,!1,!0);for(var l=0,d=t.depsNodeAllNodes;l<d.length;l++)o=d[l],this._updateAllForAttributeLayer(o,!0,!1);for(var h=0,f=t.depsNodeAllEdges;h<f.length;h++)o=f[h],this._updateAllForAttributeLayer(o,!1,!0)}if(n&&!t.edges.toUpdate.isFull()){t.edges.toUpdate.addAll();for(var p=0,g=t.depsEdgeSelf;p<g.length;p++)o=g[p],this._updateAllForAttributeLayer(o,!1,!0);for(var _=0,v=t.depsEdgeExtremities;_<v.length;_++)o=v[_],this._updateAllForAttributeLayer(o,!0,!1);for(var y=0,m=t.depsEdgeParallelEdges;y<m.length;y++)o=m[y],this._updateAllForAttributeLayer(o,!1,!0);for(var b=0,x=t.depsEdgeAllNodes;b<x.length;b++)o=x[b],this._updateAllForAttributeLayer(o,!0,!1);for(var E=0,w=t.depsEdgeAllEdges;E<w.length;E++)o=w[E],this._updateAllForAttributeLayer(o,!1,!0)}this._triggerUpdate()},Gu.prototype.updateElementsForAttributeLayer=function(t,e){var n=this._getLayerById(t);this._updateElementsForAttributeLayers([n],e)},Gu.prototype.updateForAllAttributeLayers=function(t){this._updateElementsForAttributeLayers(this._layers,t)},Gu.prototype._updateElementsForAttributeLayers=function(t,e){var n=this._emptySubgraph;if(e.isNode){for(var r=0,i=t;r<i.length;r++)if(!(y=i[r]).nodes.toUpdate.isFull()){y.nodes.needAdjacentElements&&(n=n===this._emptySubgraph?e.fastGetAdjacentElements():n),y.nodes.toUpdate.add(e);for(var o=0,s=y.depsNodeSelf;o<s.length;o++)(f=s[o]).nodes.toUpdate.add(e);for(var a=0,u=y.depsNodeAdjacentNodes;a<u.length;a++)(f=u[a]).nodes.toUpdate.add(n.nodes);for(var c=0,l=y.depsNodeAdjacentEdges;c<l.length;c++)(f=l[c]).edges.toUpdate.add(n.edges);for(var d=0,h=y.depsNodeAllNodes;d<h.length;d++){var f=h[d];this._updateAllForAttributeLayer(f,!0,!1)}for(var p=0,g=y.depsNodeAllEdges;p<g.length;p++)f=g[p],this._updateAllForAttributeLayer(f,!1,!0);y.nodes.redrawAdjacentEdges&&this._edges.redrawElements(n.edges)}}else for(var _=0,v=t;_<v.length;_++){var y;if(!(y=v[_]).edges.toUpdate.isFull()){y.edges.needAdjacentElements&&(n=n===this._emptySubgraph?e.fastGetAdjacentElements():n),y.edges.toUpdate.add(e);for(var m=0,b=y.depsEdgeSelf;m<b.length;m++)(f=b[m]).edges.toUpdate.add(e);for(var x=0,E=y.depsEdgeExtremities;x<E.length;x++)(f=E[x]).nodes.toUpdate.add(n.nodes);for(var w=0,S=y.depsEdgeParallelEdges;w<S.length;w++)(f=S[w]).edges.toUpdate.add(n.edges);for(var A=0,C=y.depsEdgeAllNodes;A<C.length;A++)f=C[A],this._updateAllForAttributeLayer(f,!0,!1);for(var T=0,k=y.depsEdgeAllEdges;T<k.length;T++)f=k[T],this._updateAllForAttributeLayer(f,!1,!0)}}this._triggerUpdate()},Gu.prototype.destroyAttributeLayer=function(t){var e=this._getLayerById(t);this._destroyedLayers.push(e),this._layers.splice(e.index,1),this._triggerLayerUpdate()},Gu.prototype.updateAttributeLayer=function(t,e){var n=this._getLayerById(t);this._updateLayer(n,e)},Gu.prototype.getAttributeLayerDefinition=function(t){var e=this._getLayerById(t),n=e.priority,r=e.nodes,i=e.edges;return{priority:n,nodeAttributes:r.attributes,nodeSelector:r.selector,nodeContext:r.context,nodeDependencies:r.dependencies,nodeOutput:r.output,edgeAttributes:i.attributes,edgeSelector:i.selector,edgeContext:i.context,edgeDependencies:i.dependencies,edgeOutput:i.output}},Gu.prototype.getAttributeValues=function(t,e,n,r){return this.update(),this._fetch(t).getAttributeValues(t,e,n,r)},Gu.prototype.setAnimationAttributes=function(t,e){var n=t.nodes,r=t.edges;this._nodes.setAnimationAttributes(n,e),this._edges.setAnimationAttributes(r,e)},Gu.prototype.resetAnimationAttributes=function(t){var e=t.nodes,n=t.edges;this._nodes.resetAnimationAttributes(e),this._edges.resetAnimationAttributes(n)},Gu.prototype.setTextHidden=function(t,e){var n=this._textHiddenSet.addOrRemoveElements(t,e);this.redrawElements(n)},Gu.prototype.resetTextHidden=function(){var t=this._textHiddenSet.getElements(),e=t.nodes,n=t.edges;this._textHiddenSet.clear(),this._nodes.redrawElements(e),this._edges.redrawElements(n)},Gu.prototype.getUsedNodeAttributes=function(){return this._nodes.getUsedAttributes()},Gu.prototype.getUsedEdgeAttributes=function(){return this._edges.getUsedAttributes()},Object.defineProperty(Gu.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),Object.defineProperty(Gu.prototype,"edges",{get:function(){return this._edges},enumerable:!0,configurable:!0}),Gu);function Gu(t,e,n){this._colorManager=new Or,this._layerIdCounter=0,this._layers=[],this._destroyedLayers=[],this._layersNeedUpdate=!1,this._updateOngoing=!1,this._needUpdate=!1,this._ogma=n,this._graph=t,this._dom=e,this._emptySubgraph={nodes:n.nodeList(),edges:n.edgeList()},this._textHiddenSet=new Oo(this._graph,"textHidden"),this._nodes=new zu(t,this._colorManager,!0,Uu),this._edges=new zu(t,this._colorManager,!1,Vu)}function qu(t,e,n){return void 0===n&&(n=0),"inherit"===t?Array.isArray(e)?e[n/(2*Math.PI)*e.length|0]:e:t}function Wu(t,e){var n=t(),r=J(n).map((function(t){var r=X(n,t);return Array.isArray(r)?"for (var i = 0; i < "+r.length+"; ++i) {\n        target."+t+"[i] = source."+t+"[i]."+e+";\n      }\n      return target;":"target."+t+" = source."+t+"."+e+";"})).join("\n");return new Function("source, target",r)}function Yu(t){var e=t(),n=J(e).map((function(t){var n=X(e,t);return Array.isArray(n)?"for (var i = 0; i < "+n.length+"; ++i) {\n        target."+t+"[i] = target."+t+"[i] || source."+t+"[i];\n      }":"target."+t+" = target."+t+" || source."+t+";"})).join("\n");return new Function("target","source",n)}function Xu(t){var e=(t.getDepth()-30)%6;return 0<=e&&0!==e&&3!==e}function Zu(t,e,n,r){var i,o,s,a,u,c,l,d,h,f;i=t,o=e,a=r,u=+("scaled"===(s=n).scalingMethod.get(a)),c=2*s.radius.get(a),l=s.innerStroke.width.get(a),d=+("scaled"===s.innerStroke.scalingMethod.get(a)),h=s.outerStroke.width.get(a),f=+("scaled"===s.outerStroke.scalingMethod.get(a)),o.x=s.x.get(a),o.y=s.y.get(a),o.shape=s.shape.get(a),o.color=s.color.get(a),o.opacity=s.opacity.get(a),o.diameterScaled=c*u,o.diameterFixed=c*(1-u),o.innerStroke.color=qu(s.innerStroke.color.get(a),o.color),o.innerStroke.widthScaled=l*d,o.innerStroke.widthFixed=l*(1-d),o.innerStroke.minVisibleSize=s.innerStroke.minVisibleSize.get(a),o.outerStroke.color=qu(s.outerStroke.color.get(a),o.color),o.outerStroke.widthScaled=h*f,o.outerStroke.widthFixed=h*(1-f),o.halo.color=s.halo.color.get(a),o.halo.strokeColor=s.halo.strokeColor.get(a),o.icon.content=i.formatText(s.icon.content.get(a)),o.image.url=s.image.url.get(a),o.outline.enabled=s.outline.enabled.get(a),o.textHidden=!!s.textHidden.get(a),Ku(t,e.texts.primary,n.text,r,e),Ku(t,e.texts.secondary,n.text.secondary,r,e),Ju(t,e.badges.topLeft,n.badges.topLeft,r),Ju(t,e.badges.topRight,n.badges.topRight,r),Ju(t,e.badges.bottomLeft,n.badges.bottomLeft,r),Ju(t,e.badges.bottomRight,n.badges.bottomRight,r)}function Ku(t,e,n,r,i){if(e.hidden=i.textHidden,e.content=t.formatText(n.content.get(r)),e.backgroundColor=qu(n.backgroundColor.get(r),i.color),e===i.texts.primary){var o=n;e.tip=o.tip.get(r),e.position=o.position.get(r)}else e.position="bottom"}function Ju(t,e,n,r){var i=n.text.content.get(r);e.textContent=t.formatText(i),e.imageUrl=n.image.url.get(r)}function Qu(){return{x:0,y:0,shape:"",color:"",opacity:0,diameterScaled:0,diameterFixed:0,innerStroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},outerStroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},icon:{content:"",font:"",color:"",scale:0,size:0,style:"none",minVisibleSize:0},image:{url:"",content:null,scale:0,rescale:!1,duplicate:!1,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,color:"",strokeColor:""},outline:{enabled:!1,color:"",minVisibleSize:0},badges:{topLeft:$u(ps),topRight:$u(gs),bottomLeft:$u(_s),bottomRight:$u(vs)},textHidden:!1,texts:{primary:{hidden:!1,content:"",position:"",backgroundColor:"",tip:!1,font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",align:"left",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,isPositionCenter:!1,isPositionVertical:!1,isPositionHorizontal:!1},secondary:{hidden:!1,content:"",position:"",backgroundColor:"",tip:!1,font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",align:"left",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,isPositionCenter:!1,isPositionVertical:!1,isPositionHorizontal:!1}}}}function $u(t){return{angle:t,color:"",scale:0,positionScale:0,minVisibleSize:0,strokeColor:"",strokeWidthScaled:0,strokeWidthFixed:0,textContent:"",textFont:"",textColor:"",textScale:0,textStyle:"none",imageUrl:"",imageContent:null,imageScale:0,textPaddingLeft:0,textPaddingTop:0}}function tc(t,e){void 0===e&&(e={edgeHalo:0,nodeHaloStroke:0,nodeHalo:0,edgeBody:0,edgeTextBackground:0,edgeText:0,nodeBody:0,nodeTextBackground:0,nodeText:0});var n=6*(t- -100)+30;return e.edgeHalo=0,e.nodeHaloStroke=1,e.nodeHalo=2,e.edgeBody=n+0,e.edgeTextBackground=n+1,e.edgeText=n+2,e.nodeBody=n+3,e.nodeTextBackground=n+4,e.nodeText=n+5,e}function ec(t,e){var n,r;r=e,(n=t).body=!0,n.icon=!!r.icon.content,n.image=!!r.image.url,n.pieChart=Array.isArray(r.color),n.outerStroke=!!r.outerStroke.color,n.outline=!!r.outline.enabled,n.halo=!!r.halo.color,n.haloStroke=n.halo&&!!r.halo.strokeColor,nc(t.texts.primary,e.texts.primary),nc(t.texts.secondary,e.texts.secondary),rc(t.badges.topLeft,e.badges.topLeft),rc(t.badges.topRight,e.badges.topRight),rc(t.badges.bottomLeft,e.badges.bottomLeft),rc(t.badges.bottomRight,e.badges.bottomRight)}function nc(t,e){t.text=!e.hidden&&!!e.content,t.background=t.text&&!!e.backgroundColor,t.tip=t.background&&e.tip&&"center"!==e.position}function rc(t,e){t.text=!!e.textContent,t.image=!!e.imageUrl}function ic(t,e){t.pieceId=1,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=e.diameterScaled,t.rectWidthOrSourceRadiusFixed=e.diameterFixed,t.rectHeightOrTargetRadiusScaled=e.diameterScaled,t.rectHeightOrTargetRadiusFixed=e.diameterFixed,t.shape=e.shape,t.opacity=e.opacity,t.symbolicSize=e.diameterScaled,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=null,t.strokeColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.offsetAngle=0,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function oc(t,e,n){var r=n.diameterScaled*e.scale,i=n.diameterFixed*e.scale,o=n.diameterScaled*e.positionScale/2,s=n.diameterFixed*e.positionScale/2;t.pieceId=1,t.shape="circle",t.x1=n.x,t.y1=n.y,t.x2=n.x,t.y2=n.y,t.rectWidthOrSourceRadiusScaled=r,t.rectWidthOrSourceRadiusFixed=i,t.rectHeightOrTargetRadiusScaled=r,t.rectHeightOrTargetRadiusFixed=i,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.strokeWidthScaled,t.strokeWidthFixed=e.strokeWidthFixed,t.offsetScaled=o,t.offsetFixed=s,t.pattern.type=0,t.opacity=n.opacity,t.fillColor=e.color,t.strokeColor=e.strokeColor,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.angle,t.patternScale=0,t.symbolicSize=n.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function sc(t,e,n){var r=0,i=0;if(e.isPositionCenter||(r+=n.innerStroke.widthScaled+n.outerStroke.widthScaled+n.diameterScaled/2,i+=n.innerStroke.widthFixed+n.outerStroke.widthFixed+n.diameterFixed/2+e.margin+e.padding),e.isPositionVertical){if(r+=e.heightScaled/2,i+=e.heightFixed/2,e===n.texts.secondary&&"bottom"===n.texts.primary.position){var o=n.texts.primary;r+=o.heightScaled,i+=o.heightFixed+o.margin+2*o.padding}}else e.isPositionHorizontal&&(r+=e.widthScaled/2,i+=e.widthFixed/2);t.pieceId=1,t.shape="square",t.x1=n.x,t.y1=n.y,t.x2=n.x,t.y2=n.y,t.rectWidthOrSourceRadiusScaled=e.widthScaled,t.rectWidthOrSourceRadiusFixed=e.widthFixed+2*e.padding,t.rectHeightOrTargetRadiusScaled=e.heightScaled,t.rectHeightOrTargetRadiusFixed=e.heightFixed+2*e.padding,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=r,t.offsetFixed=i,t.pattern.type=0,t.pattern.attributes.size=-1,t.opacity=n.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.positionAngle,t.patternScale=1,t.symbolicSize=n.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}function ac(t,e,n,r,i,o){var s=i.badges,a=r.badges,u=o.badges;!function(t,e,n,r,i){if(r.halo){var o=n.halo.width.get(e),s=+("scaled"===n.halo.scalingMethod.get(e));i.halo.widthScaled=o*s,i.halo.widthFixed=o*(1-s),function(t,e){var n=e.diameterScaled+2*e.halo.widthScaled,r=e.diameterFixed+2*e.halo.widthFixed;t.pieceId=1,t.shape="circle",t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=r,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=r,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=0,t.opacity=e.opacity,t.fillColor=e.halo.color,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}(r.halo,i),r.haloStroke&&(i.halo.strokeWidthScaled=0,i.halo.strokeWidthFixed=n.halo.strokeWidth.get(e),function(t,e){var n=e.diameterScaled+2*e.halo.widthScaled,r=e.diameterFixed+2*e.halo.widthFixed;t.pieceId=1,t.shape="circle",t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=r,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=r,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.halo.strokeWidthScaled,t.strokeWidthFixed=e.halo.strokeWidthFixed,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=0,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=e.halo.strokeColor,t.patternColor=null,t.globalMinVisibleSize=0,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}(r.haloStroke,i))}if(r.outline&&(i.outline.color=n.outline.color.get(e),i.outline.minVisibleSize=n.outline.minVisibleSize.get(e),function(t,e){var n=1.1*e.diameterScaled,r=1.1*e.diameterFixed,i=.07*e.diameterScaled,o=.07*e.diameterFixed+1;e.outerStroke.color&&(i+=e.outerStroke.widthScaled/2,o+=e.outerStroke.widthFixed/2),t.pieceId=1,t.shape=e.shape,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=r,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=r,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=i,t.offsetFixed=o,t.pattern.type=0,t.opacity=e.opacity,t.fillColor=e.outline.color,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.outline.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=1.5707963267948966,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}(r.outline,i)),r.outerStroke&&(i.outerStroke.minVisibleSize=n.outerStroke.minVisibleSize.get(e),function(t,e){var n=e.diameterScaled+2*e.innerStroke.widthScaled,r=e.diameterFixed+2*e.innerStroke.widthFixed;t.pieceId=1,t.shape=e.shape,t.x1=e.x,t.y1=e.y,t.x2=e.x,t.y2=e.y,t.rectWidthOrSourceRadiusScaled=n,t.rectWidthOrSourceRadiusFixed=r,t.rectHeightOrTargetRadiusScaled=n,t.rectHeightOrTargetRadiusFixed=r,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=e.outerStroke.widthScaled,t.strokeWidthFixed=e.outerStroke.widthFixed,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=0,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=e.outerStroke.color,t.patternColor=null,t.globalMinVisibleSize=e.outerStroke.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.diameterScaled,t.curvature=0,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=!1,t.isText=!1}(r.outerStroke,i)),r.pieChart&&function(t,e){ic(t,e),Array.isArray(e.color)&&(t.pattern.type=4,t.pattern.attributes.colors=e.color.join(";"),t.patternScale=1,t.patternMinVisibleSize=0,t.patternColor=null)}(r.pieChart,i),r.image&&(i.image.content=t.imageManager.getImage(i.image.url),i.image.fit=n.image.fit.get(e),i.image.tile=n.image.tile.get(e),i.image.scale=n.image.scale.get(e),i.image.minVisibleSize=n.image.minVisibleSize.get(e),function(t,e){var n=e.image.fit&&!e.image.tile;ic(t,e),t.pattern.type=2,t.pattern.attributes.image=e.image.content,t.pattern.attributes.scaled=n,t.pattern.attributes.duplicated=e.image.tile,t.patternScale=n?e.image.scale:0,t.patternMinVisibleSize=e.image.minVisibleSize,t.patternColor=null}(r.image,i)),r.icon&&(i.icon.font=t.fontManager.getFont(n.icon.font.get(e)),i.icon.style=n.icon.style.get(e),i.icon.color=n.icon.color.get(e),i.icon.scale=n.icon.scale.get(e),i.icon.minVisibleSize=n.icon.minVisibleSize.get(e),function(t,e){ic(t,e),t.pattern.type=5,t.pattern.attributes.text=e.icon.content,t.pattern.attributes.font=e.icon.font,t.pattern.attributes.style=e.icon.style,t.pattern.attributes.size=-1,t.patternMinVisibleSize=e.icon.minVisibleSize,t.patternColor=e.icon.color,t.patternScale=e.icon.scale}(r.icon,i)),r.body){var a=!r.pieChart&&!r.image&&!r.icon;!function(t,e,n){ic(t,e),t.fillColor=Array.isArray(e.color)?null:e.color,t.strokeColor=e.innerStroke.color,t.strokeMinVisibleSize=e.innerStroke.minVisibleSize,t.strokeWidthScaled=e.innerStroke.widthScaled,t.strokeWidthFixed=e.innerStroke.widthFixed,n&&(t.pattern.type=0)}(r.body,i,a)}}(e,n,r,i,o),cc(t,e,n,r.text,i.texts.primary,o.texts.primary,o),cc(t,e,n,r.text.secondary,i.texts.secondary,o.texts.secondary,o),uc(t,e,n,a.topLeft,s.topLeft,u.topLeft,o),uc(t,e,n,a.topRight,s.topRight,u.topRight,o),uc(t,e,n,a.bottomLeft,s.bottomLeft,u.bottomLeft,o),uc(t,e,n,a.bottomRight,s.bottomRight,u.bottomRight,o)}function uc(t,e,n,r,i,o,s){if(i.image||i.text){var a=r.stroke.width.get(n),u=+("scaled"===r.stroke.scalingMethod.get(n));o.color=qu(r.color.get(n),s.color,o.angle),o.strokeColor=r.stroke.color.get(n),o.strokeWidthScaled=a*u,o.strokeWidthFixed=a*(1-u),o.minVisibleSize=r.minVisibleSize.get(n),o.positionScale=r.positionScale.get(n),o.scale=r.scale.get(n)}var c,l,d,h;if(i.image&&(o.imageContent=e.imageManager.getImage(o.imageUrl),o.imageScale=r.image.scale.get(n),oc(c=i.image,l=o,s),null!==l.imageContent?(c.pattern.type=2,c.pattern.attributes.image=l.imageContent,c.pattern.attributes.scaled=!0,c.pattern.attributes.duplicated=!1,c.patternScale=l.imageScale,c.patternMinVisibleSize=0,c.patternColor=null):(c.fillColor=null,c.strokeColor=null)),i.text){if(o.textFont=e.fontManager.getFont(r.text.font.get(n)),o.textStyle=r.text.style.get(n),o.textColor=qu(r.text.color.get(n),s.color),o.textScale=r.text.scale.get(n),o.textPaddingTop=r.text.paddingTop.get(n),o.textPaddingLeft=r.text.paddingLeft.get(n),1<t.measureText(o.textContent,o.textFont,o.textStyle,o.textScale).width){for(var f=0,p=0;p<o.textContent.length&&f<1;)f+=t.measureText(o.textContent[p],o.textFont,o.textStyle,o.textScale).width,p+=1;p!==o.textContent.length&&(o.textContent=o.textContent.substring(0,p-1)+"")}oc(d=i.text,h=o,s),h.textContent&&(d.pattern.type=6,d.pattern.attributes.text=h.textContent,d.pattern.attributes.font=h.textFont,d.pattern.attributes.style=h.textStyle,d.pattern.attributes.paddingLeft=h.scale*h.textPaddingLeft*2,d.pattern.attributes.paddingTop=h.scale*h.textPaddingTop*2,d.pattern.attributes.size=-1,d.patternMinVisibleSize=0,d.patternColor=h.textColor,d.patternScale=h.textScale,d.isBadge=!0),!h.imageUrl&&h.textContent||(d.fillColor=null,d.strokeColor=null)}}function cc(t,e,n,r,i,o,s){if(i.text){var a=r,u=a.scaling.get(n);if(o.font=e.fontManager.getFont(a.font.get(n)),o.color=qu(a.color.get(n),s.color),o.style=a.style.get(n),o.align=a.align.get(n),o.minVisibleSize=a.minVisibleSize.get(n),o.margin=a.margin.get(n),o.padding=a.padding.get(n),o.maxLineLength=a.maxLineLength.get(n),o.content=qo(o.content,o.maxLineLength),u){var c=a.scale.get(n);o.sizeScaled=s.diameterScaled*c,o.sizeFixed=s.diameterFixed*c}else o.sizeFixed=a.size.get(n),o.sizeScaled=0;var l=t.measureText(o.content,o.font,o.style);o.widthScaled=l.width*o.sizeScaled,o.widthFixed=l.width*o.sizeFixed,o.heightScaled=l.height*o.sizeScaled,o.heightFixed=l.height*o.sizeFixed,o.positionAngle=xs[o.position],o.isPositionCenter="center"===o.position,o.isPositionVertical="top"===o.position||"bottom"===o.position,o.isPositionHorizontal="left"===o.position||"right"===o.position,sc(E=i.text,w=o,s),E.pattern.type=7,E.pattern.attributes.text=w.content,E.pattern.attributes.font=w.font,E.pattern.attributes.style=w.style,E.pattern.attributes.align=w.align,E.patternMinVisibleSize=0,E.patternColor=w.color,E.thicknessOrFontSizeScaled=w.sizeScaled,E.thicknessOrFontSizeFixed=w.sizeFixed,E.isText=!0,i.background&&(sc(b=i.background,x=o,s),b.fillColor=x.backgroundColor,i.tip&&(d=i.tip,h=o,f=s,p=Math.ceil(h.margin/2)+1,g=f.diameterScaled/2+f.innerStroke.widthScaled+f.outerStroke.widthScaled,_=f.diameterFixed/2+f.innerStroke.widthFixed+f.outerStroke.widthFixed+p,v=Es[h.position],y=Math.cos(v),m=Math.sin(v),d.pieceId=1,d.shape="triangle",d.x1=f.x-y,d.y1=f.y-m,d.x2=f.x+y,d.y2=f.y+m,d.rectWidthOrSourceRadiusScaled=0,d.rectWidthOrSourceRadiusFixed=h.margin,d.rectHeightOrTargetRadiusScaled=0,d.rectHeightOrTargetRadiusFixed=h.margin*(2/3),d.thicknessOrFontSizeScaled=0,d.thicknessOrFontSizeFixed=0,d.strokeWidthScaled=0,d.strokeWidthFixed=0,d.offsetScaled=g,d.offsetFixed=_,d.pattern.type=0,d.opacity=f.opacity,d.fillColor=h.backgroundColor,d.strokeColor=null,d.patternColor=null,d.globalMinVisibleSize=h.minVisibleSize,d.strokeMinVisibleSize=0,d.patternMinVisibleSize=0,d.offsetAngle=h.positionAngle,d.patternScale=0,d.symbolicSize=f.diameterScaled,d.curvature=0,d.dashLength=0,d.gapLength=0,d.hasHead=!1,d.hasTail=!1,d.isSelfLoop=!1))}var d,h,f,p,g,_,v,y,m,b,x,E,w}var lc=Wu(_c,"start"),dc=Wu(_c,"end"),hc=Yu(_c),fc=(pc.prototype.drawNode=function(t){if(this._computeBlockIds(t),this._attributes.excluded.get(t))return this._freeBlocks();var e=this._engine,n=this._helper,r=t,i=this._attributes,o=tc(i.layer.get(t)-(i.detectable.get(t)?0:1),this._depthInfo),s=i.animationDuration.get(t),a=0<s;if(this._prepareBlocks(a,o,r),Zu(n,this._endInput,i,t),ec(this._endFlags,this._endInput),a&&(Zu(n,this._startInput,this._attributesPrev,t),ec(this._startFlags,this._startInput),hc(this._endFlags,this._startFlags)),this._initComponents(this._fullComponents,this._endFlags,this._blocks),dc(this._fullComponents,this._endComponents),ac(e,n,t,i,this._endComponents,this._endInput),a&&(lc(this._fullComponents,this._startComponents),ac(e,n,t,this._attributesPrev,this._startComponents,this._startInput)),a){var u=this._attributes.animationStart.get(t),c=this._attributes.animationEasing.get(t);this._setBlocksAnimation(s,u,c)}this._endFlags.halo&&this._attributes.halo.hideNonAdjacentEdges.get(t)&&(this._blocks.halo.setStencilUsage(2),this._blocks.haloStroke.setStencilUsage(2)),this._storeBlocks()},pc.prototype._computeBlockIds=function(t){var e=10*t,n=this._blockIds;n.body=0+e,n.text=1+e,n.textBg=2+e,n.halo=3+e,n.haloStroke=4+e},pc.prototype._prepareBlocks=function(t,e,n){var r=this._blocks;r.body.reset(1,t,e.nodeBody,n),r.text.reset(2,t,e.nodeText,n),r.textBg.reset(1,t,e.nodeTextBackground,n),r.halo.reset(1,t,e.nodeHalo,n),r.haloStroke.reset(1,t,e.nodeHaloStroke,n)},pc.prototype._storeBlocks=function(){var t=this._engine,e=this._blocks,n=this._blockIds;t.storeBlock(n.body,e.body),t.storeBlock(n.text,e.text),t.storeBlock(n.textBg,e.textBg),t.storeBlock(n.halo,e.halo),t.storeBlock(n.haloStroke,e.haloStroke)},pc.prototype._freeBlocks=function(){var t=this._engine,e=this._blockIds;t.freeBlock(e.body),t.freeBlock(e.text),t.freeBlock(e.textBg),t.freeBlock(e.halo),t.freeBlock(e.haloStroke)},pc.prototype._setBlocksAnimation=function(t,e,n){var r=this._blocks;r.body.setGlobalAnimation(t,e,n),r.text.setGlobalAnimation(t,e,n),r.textBg.setGlobalAnimation(t,e,n),r.halo.setGlobalAnimation(t,e,n),r.haloStroke.setGlobalAnimation(t,e,n)},pc.prototype._initComponents=function(t,e,n){this._nodePatternAssigned=!1,this._initBaseComponents(t,e,n),this._initBadgeComponents(t.badges.topLeft,e.badges.topLeft,n),this._initBadgeComponents(t.badges.topRight,e.badges.topRight,n),this._initBadgeComponents(t.badges.bottomLeft,e.badges.bottomLeft,n),this._initBadgeComponents(t.badges.bottomRight,e.badges.bottomRight,n),this._initTextComponents(t.texts.primary,e.texts.primary,n),this._initTextComponents(t.texts.secondary,e.texts.secondary,n)},pc.prototype._initBaseComponents=function(t,e,n){t.haloStroke=this._nextElement(e.haloStroke,n.haloStroke),t.halo=this._nextElement(e.halo,n.halo),t.outline=this._nextElement(e.outline,n.body),t.outerStroke=this._nextElement(e.outerStroke,n.body),t.body=this._nextElement(e.body,n.body),t.pieChart=this._getNodePatternElement(e.pieChart,n),t.image=this._getNodePatternElement(e.image,n),t.icon=this._getNodePatternElement(e.icon,n)},pc.prototype._initBadgeComponents=function(t,e,n){t.image=this._nextElement(e.image,n.body),t.text=this._nextElement(e.text,n.body)},pc.prototype._initTextComponents=function(t,e,n){t.background=this._nextElement(e.background,n.textBg),t.tip=this._nextElement(e.tip,n.textBg),t.text=this._nextElement(e.text,n.text)},pc.prototype._nextElement=function(t,e){return t?e.next():this._nullElt},pc.prototype._getNodePatternElement=function(t,e){return t?this._nodePatternAssigned?e.body.next():(this._nodePatternAssigned=!0,e.body.getCurrentElement()):this._nullElt},pc);function pc(t){var e=t.engine,n=t.imageManager,r=t.fontManager,i=t.formatText,o=t.attributes,s=t.attributesPrev;this._fullComponents={haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}},this._startComponents={haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}},this._endComponents={haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}},this._startFlags={haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}},this._endFlags={haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}},this._startInput=Qu(),this._endInput=Qu(),this._depthInfo={edgeHalo:0,nodeHaloStroke:0,nodeHalo:0,edgeBody:0,edgeTextBackground:0,edgeText:0,nodeBody:0,nodeTextBackground:0,nodeText:0},this._nodePatternAssigned=!1,this._nullElt={id:-1,valid:!0},this._engine=e,this._attributes=o,this._attributesPrev=s,this._helper={imageManager:n,fontManager:r,formatText:i},this._blocks=gc((function(){return e.createBlock()})),this._blockIds=gc((function(){return 0}))}function gc(t){return{body:t(),text:t(),textBg:t(),halo:t(),haloStroke:t()}}function _c(){return{haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}}}function vc(t,e,n,r,i,o){var s,a,u,c,l,d,h,f,p;return a=r-t,u=i-e,n+o<(c=Math.sqrt(a*a+u*u))||c<Math.abs(n-o)?null:(p=e+u*(s=(n*n-o*o+c*c)/(2*c))/c,[[(f=t+a*s/c)+(d=(l=Math.sqrt(n*n-s*s))/c*-u),p+(h=l/c*a)],[f-d,p-h]])}function yc(t,e,n,r,i,o){if(0<=t-i&&n-i<0)return 1;if(t-i<0&&0<=n-i)return-1;if(t-i==0&&n-i==0)return 0<=e-r||0<=r-o?e-r:r-e;var s=(t-i)*(r-o)-(n-i)*(e-o);return s<0?1:0<s?-1:(t-i)*(t-i)+(e-o)*(e-o)-((n-i)*(n-i)+(r-o)*(r-o))}function mc(t,e,n){var r=t[0],i=t[1],o=t[2],s=Math.abs(r-e),a=Math.abs(i-n);return s+a<=o||!(o<s||o<a)&&Math.sqrt(s*s+a*a)<o+1e-12}function bc(t,e,n,r){var i=t[0]-e,o=t[1]-n,s=t[2]-r;return i*i+o*o<s*s+1e-6}function xc(t,e,n,r,i,o,s){var a=t-Math.max(r,Math.min(o,t)),u=e-Math.max(i,Math.min(s,e));return a*a+u*u<n*n}function Ec(t,e,n,r,i,o,s,a){void 0===a&&(a={x:0,y:0});var u,c,l,d,h=a||{x:0,y:0};if(n===t){var f=t-i,p=s*s-f*f;if(p<0)return null;var g=Math.sqrt(p);l=u=t,c=o+g,d=o-g}else{var _=(r-e)/(n-t),v=e-_*t,y=v-o,m=_*_+1,b=2*(_*y-i),x=b*b-4*m*(i*i+y*y-s*s);if(x<0)return null;var E=-b,w=Math.sqrt(x),S=2*m;c=_*(u=(E+w)/S)+v,d=_*(l=(E-w)/S)+v}var A=t-u,C=e-c,T=t-l,k=e-d;return A*A+C*C<T*T+k*k?(h.x=u,h.y=c):(h.x=l,h.y=d),h}function wc(t,e,n,r,i,o){!function(t,e,n,r,i){var o=r.source,s=r.target,a=e.source.get(n),u=e.target.get(n),c=o.x.get(a),l=o.y.get(a),d=o.radius.get(a),h=o.color.get(a),f=+("scaled"===o.scalingMethod.get(a)),p=s.x.get(u),g=s.y.get(u),_=s.radius.get(u),v=s.color.get(u),y=+("scaled"===s.scalingMethod.get(u)),m=function(t,e,n){return"source"===t?e:"target"===t?n:t}(e.color.get(n),h,v),b=e.width.get(n),x=+("scaled"===e.scalingMethod.get(n)),E=e.stroke.width.get(n),w=+("scaled"===e.stroke.scalingMethod.get(n)),S=bs[e.shape.style.get(n)],A=e.adjustAnchors.get(n);if(t.source=a,t.target=u,t.sourceX=c,t.sourceY=l,t.targetX=p,t.targetY=g,t.sourceRadiusScaled=d*f,t.sourceRadiusFixed=d*(1-f),t.targetRadiusScaled=_*y,t.targetRadiusFixed=_*(1-y),t.widthScaled=b*x,t.widthFixed=b*(1-x),t.curvature=e.curvature.get(n),t.isSelfLoop=a===u,t.color=m,t.opacity=e.opacity.get(n),t.minVisibleSize=e.minVisibleSize.get(n),t.shape.type=e.shape.type.get(n),t.shape.head=e.shape.head.get(n),t.shape.tail=e.shape.tail.get(n),t.shape.dashLength=S.dash,t.shape.gapLength=S.gap,t.shape.isBodyTriangle="triangle"===t.shape.type,t.stroke.color=qu(e.stroke.color.get(n),m),t.stroke.widthScaled=E*w,t.stroke.widthFixed=E*(1-w),t.stroke.minVisibleSize=e.stroke.minVisibleSize.get(n),t.halo.color=e.halo.color.get(n),t.outline.enabled=e.outline.enabled.get(n),t.textHidden=1===e.textHidden.get(n),A&&(t.shape.head||t.shape.tail||"triangle"===t.shape.type)){var C=t,T=C.curvature,k=C.sourceX,I=C.sourceY,O=C.targetX,M=C.targetY,L=1,N=1;if(T){if(!C.isSelfLoop){var R=As(k,I,O,M,T/2);L=Ac(0,i,o,a,k,I,R.x,R.y),N=Ac(0,i,s,u,O,M,R.x,R.y)}}else L=Ac(0,i,o,a,k,I,O,M),N=Ac(0,i,s,u,O,M,k,I);t.sourceRadiusScaled*=L,t.sourceRadiusFixed*=L,t.targetRadiusScaled*=N,t.targetRadiusFixed*=N}}(e,n,r,i,o),Sc(t,e.texts.primary,n.text,r,e),Sc(t,e.texts.secondary,n.text.secondary,r,e)}function Sc(t,e,n,r,i){e.hidden=i.textHidden,e.content=t.formatText(n.content.get(r)),e.backgroundColor=qu(n.backgroundColor.get(r),i.color)}function Ac(t,e,n,r,i,o,s,a){var u,c=e.angle||0,l=Math.atan2(a-o,s-i)-c,d=1,h=0;l<-hs?l+=fs:hs<l&&(l-=fs),u=l<-hs/2?(h=ps,n.badges.topLeft):l<0?(h=gs,n.badges.topRight):l<hs/2?(h=vs,n.badges.bottomRight):(h=_s,n.badges.bottomLeft),h+=c;var f,p=u.text.content&&u.text.content.get(r),g=u.image.url&&u.image.url.get(r);if((f=p)||0===f||g){var _=u.positionScale.get(r),v=u.scale.get(r),y=Ec(s,a,i,o,i+(E=Math.cos(h))*_,o+(w=Math.sin(h))*_,v);if(y){var m=y.x-i,b=y.y-o,x=Math.sqrt(m*m+b*b);d=Math.max(d,x)}}if("square"===n.shape.get(r)){var E=Math.abs(Math.cos(l)),w=Math.abs(Math.sin(l)),S=1/Math.max(E,w);d=Math.max(d,S)}return d}function Cc(t,e){Tc(t.body,e,!0,!0),Tc(t.outline,e,e.outline.enabled,!0),Tc(t.halo,e,!!e.halo.color,!1),kc(t.texts.primary,e.texts.primary),kc(t.texts.secondary,e.texts.secondary)}function Tc(t,e,n,r){t.body=n,t.head=n&&r&&!!e.shape.head,t.tail=n&&r&&!!e.shape.tail}function kc(t,e){t.text=!e.hidden&&!!e.content,t.background=t.text&&!!e.backgroundColor}function Ic(t,e,n,r){Oc(t,e,n,r),t.thicknessOrFontSizeScaled=e.widthScaled,t.thicknessOrFontSizeFixed=e.widthFixed,t.strokeWidthScaled=e.stroke.widthScaled,t.strokeWidthFixed=e.stroke.widthFixed,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=e.color,t.strokeColor=e.stroke.color,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=e.stroke.minVisibleSize,t.offsetAngle=0,t.symbolicSize=e.widthScaled,t.dashLength=e.shape.dashLength,t.gapLength=e.shape.gapLength,t.hasHead=!!e.shape.head,t.hasTail=!!e.shape.tail,t.isBodyTriangle=e.shape.isBodyTriangle}function Oc(t,e,n,r){t.pieceId=n,t.shape=r,t.x1=e.sourceX,t.y1=e.sourceY,t.x2=e.targetX,t.y2=e.targetY,t.rectWidthOrSourceRadiusScaled=e.sourceRadiusScaled,t.rectWidthOrSourceRadiusFixed=e.sourceRadiusFixed,t.rectHeightOrTargetRadiusScaled=e.targetRadiusScaled,t.rectHeightOrTargetRadiusFixed=e.targetRadiusFixed,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.pattern.type=0,t.opacity=e.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=0,t.patternScale=0,t.symbolicSize=e.widthScaled,t.curvature=e.curvature,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=e.isSelfLoop,t.isText=!1}function Mc(t,e,n){var r=e.widthScaled+2*e.halo.widthScaled,i=e.widthFixed+2*e.halo.widthFixed;Oc(t,e,n,"line"),t.thicknessOrFontSizeScaled=r,t.thicknessOrFontSizeFixed=i,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=0,t.offsetFixed=0,t.fillColor=e.halo.color,t.strokeColor=null,t.globalMinVisibleSize=e.minVisibleSize,t.strokeMinVisibleSize=0,t.offsetAngle=0,t.symbolicSize=e.widthScaled,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isBodyTriangle=!1}function Lc(t,e,n,r){Oc(t,e,n,r);var i=.17*e.widthFixed+1;t.thicknessOrFontSizeScaled=1*e.widthScaled,t.thicknessOrFontSizeFixed=1*e.widthFixed,t.strokeWidthScaled=0,t.strokeWidthFixed=0,t.offsetScaled=.17*e.widthScaled,t.offsetFixed=i,t.fillColor=e.outline.color,t.strokeColor=null,t.globalMinVisibleSize=Math.max(e.minVisibleSize,e.outline.minVisibleSize),t.strokeMinVisibleSize=0,t.offsetAngle=Math.PI/2,t.symbolicSize=e.widthScaled,t.dashLength=e.shape.dashLength,t.gapLength=e.shape.gapLength,t.hasHead=!!e.shape.head,t.hasTail=!!e.shape.tail,t.isBodyTriangle=e.shape.isBodyTriangle}function Nc(t,e,n){var r=(n.widthScaled+e.heightScaled)/2+n.stroke.widthScaled,i=(n.widthFixed+e.heightFixed)/2+n.stroke.widthFixed+e.padding+e.margin;t.pieceId=5,t.shape="square",t.x1=n.sourceX,t.y1=n.sourceY,t.x2=n.targetX,t.y2=n.targetY,t.rectWidthOrSourceRadiusScaled=e.widthScaled,t.rectWidthOrSourceRadiusFixed=e.widthFixed+2*e.padding+1,t.rectHeightOrTargetRadiusScaled=e.heightScaled,t.rectHeightOrTargetRadiusFixed=e.heightFixed+2*e.padding,t.thicknessOrFontSizeScaled=0,t.thicknessOrFontSizeFixed=0,t.strokeWidthScaled=n.sourceRadiusScaled+n.targetRadiusScaled,t.strokeWidthFixed=n.sourceRadiusFixed+n.targetRadiusFixed,t.offsetScaled=r,t.offsetFixed=i,t.pattern.type=0,t.opacity=n.opacity,t.fillColor=null,t.strokeColor=null,t.patternColor=null,t.globalMinVisibleSize=Math.max(e.minVisibleSize,n.minVisibleSize),t.strokeMinVisibleSize=0,t.patternMinVisibleSize=0,t.offsetAngle=e.offsetAngle,t.patternScale=0,t.symbolicSize=n.widthScaled,t.curvature=n.curvature,t.dashLength=0,t.gapLength=0,t.hasHead=!1,t.hasTail=!1,t.isSelfLoop=n.isSelfLoop,t.isText=!1,t.adjustTextAngle=e.adjustAngle}function Rc(t,e,n,r,i,o){!function(t,e,n,r){if(Pc(n.body,r,Ic),n.halo.body){var i=e.halo.width.get(t),o=+("scaled"===e.halo.scalingMethod.get(t));r.halo.widthScaled=i*o,r.halo.widthFixed=i*(1-o),Pc(n.halo,r,Mc)}n.outline.body&&(r.outline.color=e.outline.color.get(t),r.outline.minVisibleSize=e.outline.minVisibleSize.get(t),Pc(n.outline,r,Lc))}(n,r,i,o),Dc(t,e,n,r.text,i.texts.primary,o.texts.primary,o),Dc(t,e,n,r.text.secondary,i.texts.secondary,o.texts.secondary,o)}function Pc(t,e,n){n(t.body,e,2,e.shape.type),t.head&&n(t.head,e,3,e.shape.head),t.tail&&n(t.tail,e,4,e.shape.tail)}function Dc(t,e,n,r,i,o,s){if(i.text){var a=r,u=a.scaling.get(n);if(o.font=e.fontManager.getFont(a.font.get(n)),o.color=qu(a.color.get(n),s.color),o.style=a.style.get(n),o.minVisibleSize=a.minVisibleSize.get(n),o.margin=a.margin.get(n),o.padding=a.padding.get(n),o.maxLineLength=a.maxLineLength.get(n),o.content=qo(o.content,o.maxLineLength),o.adjustAngle=a.adjustAngle.get(n),o.align=a.align.get(n),u){var c=a.scale.get(n);o.sizeScaled=s.widthScaled*c,o.sizeFixed=s.widthFixed*c}else o.sizeFixed=a.size.get(n),o.sizeScaled=0;var l=t.measureText(o.content,o.font,o.style);o.widthScaled=l.width*o.sizeScaled,o.widthFixed=l.width*o.sizeFixed,o.heightScaled=l.height*o.sizeScaled,o.heightFixed=l.height*o.sizeFixed,o.offsetAngle=o===s.texts.primary?ys:ms,Nc(f=i.text,p=o,s),f.pattern.type=7,f.pattern.attributes.text=p.content,f.pattern.attributes.size=-1,f.pattern.attributes.font=p.font,f.pattern.attributes.style=p.style,f.pattern.attributes.align=p.align,f.patternColor=p.color,f.patternScale=1,f.thicknessOrFontSizeScaled=p.sizeScaled,f.thicknessOrFontSizeFixed=p.sizeFixed,f.isText=!0,i.background&&(Nc(d=i.background,h=o,s),d.fillColor=h.backgroundColor)}var d,h,f,p}var Fc=Wu(Hc,"start"),zc=Wu(Hc,"end"),Bc=Yu(Hc),Uc=(Vc.prototype.drawEdge=function(t){if(this._computeBlockIds(t),this._attributes.excluded.get(t))return this._freeBlocks();var e=this._engine,n=this._helper,r=-t,i=this._attributes,o=tc(i.layer.get(t)-(i.detectable.get(t)?0:1),this._depthInfo),s=i.source.get(t),a=i.target.get(t),u=i.curvature.get(t),c=this._attributesPrev.curvature.get(t),l=i.animationDuration.get(t),d=i.animationStart.get(t),h=i.animationEasing.get(t),f=0<l,p=0!==u||f&&0!==c;this._prepareBlocks(f,o,r,p);var g=this._extremitiesAttributes={source:this._nodeAttributes,target:this._nodeAttributes};if(wc(n,this._endInput,i,t,g,this._view),Cc(this._endFlags,this._endInput),f){var _=0<this._nodeAttributes.animationDuration.get(s),v=0<this._nodeAttributes.animationDuration.get(a);g.source=_?this._nodeAttributesPrev:this._nodeAttributes,g.target=v?this._nodeAttributesPrev:this._nodeAttributes,wc(n,this._startInput,this._attributesPrev,t,g,this._view),Cc(this._startFlags,this._startInput),Bc(this._endFlags,this._startFlags)}this._initComponents(this._fullComponents,this._endFlags,this._blocks),zc(this._fullComponents,this._endComponents),Rc(e,n,t,this._attributes,this._endComponents,this._endInput),f&&(Fc(this._fullComponents,this._startComponents),Rc(e,n,t,this._attributesPrev,this._startComponents,this._startInput),this._setBlocksAnimation(l,d,h)),this._setupHaloMasking(s,a),this._storeBlocks()},Vc.prototype._setupHaloMasking=function(t,e){var n=this._nodeAttributes.halo,r=this._blocks,i=n.color.get(t)&&n.hideNonAdjacentEdges.get(t),o=n.color.get(e)&&n.hideNonAdjacentEdges.get(e),s=i||o?1:3;r.body.setStencilUsage(s),r.text.setStencilUsage(s),r.textBg.setStencilUsage(s)},Vc.prototype._computeBlockIds=function(t){var e=10*t,n=this._blockIds;n.body=5+e,n.halo=8+e,n.text=6+e,n.textBg=7+e},Vc.prototype._prepareBlocks=function(t,e,n,r){var i=this._blocks;i.body.reset(r?3:1,t,e.edgeBody,n),i.halo.reset(r?3:1,t,e.edgeHalo,n),i.text.reset(2,t,e.edgeText,n),i.textBg.reset(1,t,e.edgeTextBackground,n)},Vc.prototype._storeBlocks=function(){var t=this._engine,e=this._blocks,n=this._blockIds;t.storeBlock(n.body,e.body),t.storeBlock(n.halo,e.halo),t.storeBlock(n.text,e.text),t.storeBlock(n.textBg,e.textBg)},Vc.prototype._freeBlocks=function(){var t=this._engine,e=this._blockIds;t.freeBlock(e.body),t.freeBlock(e.halo),t.freeBlock(e.text),t.freeBlock(e.textBg)},Vc.prototype._setBlocksAnimation=function(t,e,n){var r=this._blocks;r.body.setGlobalAnimation(t,e,n),r.halo.setGlobalAnimation(t,e,n),r.text.setGlobalAnimation(t,e,n),r.textBg.setGlobalAnimation(t,e,n)},Vc.prototype._initComponents=function(t,e,n){this._initEdgeComponents(t.halo,e.halo,n.halo),this._initEdgeComponents(t.outline,e.outline,n.body),this._initEdgeComponents(t.body,e.body,n.body),this._initTextComponents(t.texts.primary,e.texts.primary,n),this._initTextComponents(t.texts.secondary,e.texts.secondary,n)},Vc.prototype._initEdgeComponents=function(t,e,n){t.head=this._nextElement(e.head,n),t.tail=this._nextElement(e.tail,n),t.body=this._nextElement(e.body,n)},Vc.prototype._initTextComponents=function(t,e,n){t.background=this._nextElement(e.background,n.textBg),t.text=this._nextElement(e.text,n.text)},Vc.prototype._nextElement=function(t,e){return t?e.next():this._nullElt},Vc);function Vc(t){var e=t.engine,n=t.imageManager,r=t.fontManager,i=t.formatText,o=t.view,s=t.attributes,a=t.attributesPrev,u=t.nodeAttributes,c=t.nodeAttributesPrev;this._fullComponents={halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}},this._startComponents={halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}},this._endComponents={halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}},this._startFlags={halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}},this._endFlags={halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}},this._startInput={source:0,target:0,sourceX:0,sourceY:0,targetX:0,targetY:0,sourceRadiusScaled:0,sourceRadiusFixed:0,targetRadiusScaled:0,targetRadiusFixed:0,widthScaled:0,widthFixed:0,curvature:0,isSelfLoop:!1,color:"",opacity:0,minVisibleSize:0,shape:{type:"line",head:null,tail:null,dashLength:0,gapLength:0,isBodyTriangle:!1},stroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,color:""},outline:{enabled:!1,color:"",minVisibleSize:0},textHidden:!1,texts:{primary:{align:"left",hidden:!1,content:"",backgroundColor:"",font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,adjustAngle:!1,offsetAngle:0},secondary:{align:"left",hidden:!1,content:"",backgroundColor:"",font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,adjustAngle:!1,offsetAngle:0}}},this._endInput={source:0,target:0,sourceX:0,sourceY:0,targetX:0,targetY:0,sourceRadiusScaled:0,sourceRadiusFixed:0,targetRadiusScaled:0,targetRadiusFixed:0,widthScaled:0,widthFixed:0,curvature:0,isSelfLoop:!1,color:"",opacity:0,minVisibleSize:0,shape:{type:"line",head:null,tail:null,dashLength:0,gapLength:0,isBodyTriangle:!1},stroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,color:""},outline:{enabled:!1,color:"",minVisibleSize:0},textHidden:!1,texts:{primary:{align:"left",hidden:!1,content:"",backgroundColor:"",font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,adjustAngle:!1,offsetAngle:0},secondary:{align:"left",hidden:!1,content:"",backgroundColor:"",font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,adjustAngle:!1,offsetAngle:0}}},this._depthInfo={edgeHalo:0,nodeHaloStroke:0,nodeHalo:0,edgeBody:0,edgeTextBackground:0,edgeText:0,nodeBody:0,nodeTextBackground:0,nodeText:0},this._nullElt={id:-1,valid:!0},this._engine=e,this._view=o,this._helper={imageManager:n,fontManager:r,formatText:i},this._attributes=s,this._attributesPrev=a,this._nodeAttributes=u,this._nodeAttributesPrev=c,this._blocks=jc((function(){return e.createBlock()})),this._blockIds=jc((function(){return 0}))}function jc(t){return{body:t(),halo:t(),text:t(),textBg:t()}}function Hc(){return{halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}}}var Gc=vt&&document.fonts,qc="/qwerty/ [HELLO] ",Wc=(Yc.prototype._measureText=function(t,e){return this._ctx.font="12px "+e,this._ctx.measureText(t).width},Yc.prototype.check=function(t){if(this._checkReliable)return this._fontFaceSet.check("12px "+t);var e=this._measureText(qc,"serif");return this._measureText(qc,t)!==e},Yc.prototype.load=function(t){return this._fontFaceSet&&this._fontFaceSet.load?this._fontFaceSet.load("12px "+t):(this._ctx.font="12px "+t,this._ctx.fillText(qc,10,50),Promise.resolve())},Yc);function Yc(){this._fontFaceSet=Gc?document.fonts:null,this._canvas=ti(),this._ctx=this._canvas.getContext("2d"),this._checkReliable=!0===(this._fontFaceSet&&this._fontFaceSet.check&&!this._fontFaceSet.check("12px FontThatDoesNotExist")),this._ctx=this._canvas.getContext("2d")}var Xc=(Zc.prototype._setLoaded=function(){this._loaded=!0,this._value=this._fontName},Zc.prototype.getValue=function(){return this._value},Zc.prototype.isLoaded=function(){return this._loaded},Zc.prototype.destroy=function(){clearTimeout(this._timeout)},Zc.prototype.load=function(){var t=this;return this._tryLoad(200).then((function(){t._setLoaded()}))},Zc.prototype._tryLoad=function(t){var e=this;return this._fontFaceSet.load(this._fontName).then((function(){if(!e._fontFaceSet.check(e._fontName)&&e._fontLoaderCounter<16)return new Promise((function(n){t<6e4&&(e._timeout=setTimeout(n,t))})).then((function(){return e._fontLoaderCounter++,e._tryLoad(1.5*t)}))}))},Zc);function Zc(t,e){this._fontLoaderCounter=0,this._loaded=!1,this._value=null,this._timeout=0,this._fontFaceSet=t,this._fontName=e,this._loaded=!1,this._value=null,this._timeout=0,vt&&!this._fontFaceSet.check(this._fontName)||this._setLoaded()}var Kc=(Jc.prototype.setHideUntilFontsLoaded=function(t){this._hideUntilFontsLoaded=t},Jc.prototype.getFont=function(t){var e=this,n=this._fonts[t];return n||(n=new Xc(this._fontFaceSet,t),(this._fonts[t]=n).isLoaded()||n.load().then((function(){return e._triggerFontLoaded(t)}))),!this._hideUntilFontsLoaded&&t||n.getValue()},Jc.prototype.onFontLoaded=function(t){this._onFontLoaded.push(t)},Jc.prototype.destroy=function(){var t=this;this._onFontLoaded=[],Object.keys(this._fonts).forEach((function(e){return t._fonts[e].destroy()}))},Jc.prototype._triggerFontLoaded=function(t){this._onFontLoaded.forEach((function(e){return e(t)}))},Jc);function Jc(){this._fontFaceSet=new Wc,this._fonts={},this._onFontLoaded=[],this._hideUntilFontsLoaded=!0}function Qc(t,e,n){for(var r=n.length,i=r-1,o=!1,s=0;s<r;++s)(n[s].y<e&&n[i].y>=e||n[i].y<e&&n[s].y>=e)&&(n[s].x<=t||n[i].x<=t)&&(o=o!==n[s].x+(e-n[s].y)/(n[i].y-n[s].y)*(n[i].x-n[s].x)<t),i=s;return o}function $c(t){var e=t.x*t.x+t.y*t.y;return{x:t.x/e,y:t.y/e}}function tl(t,e){for(var n=1/0,r=-1/0,i=0,o=t.length;i<o;i++){var s=t[i],a=s.x*e.x+s.y*e.y;a<n&&(n=a),r<a&&(r=a)}return{x:n,y:r}}function el(t,e){for(var n=function(t,e){var n=t[1],r=t[0],i=$c({x:n.x-r.x,y:n.y-r.y}),o=i.x;i.x=-i.y,i.y=o;var s=i;n=t[2],r=t[1],o=(i=$c({x:n.x-r.x,y:n.y-r.y})).x,i.x=-i.y,i.y=o;var a=i;n=e[1],r=e[0],o=(i=$c({x:n.x-r.x,y:n.y-r.y})).x,i.x=-i.y,i.y=o;var u=i;return n=e[2],r=e[1],o=(i=$c({x:n.x-r.x,y:n.y-r.y})).x,i.x=-i.y,i.y=o,[s,a,u,i]}(t,e),r=0,i=n.length;r<i;r++){var o=n[r],s=tl(t,o),a=tl(e,o);if(0==(s.x<=a.y&&s.y>=a.x?Math.min(s.y,a.y)-Math.max(s.x,a.x):0))return!1}return!0}function nl(t){var e=0,n=0,r=t.length;if(0===r)throw new Error("Compute centroid: at least one point is required");for(var i=0;i<r;++i){var o=t[i];e+=o.x,n+=o.y}return{x:e/=r,y:n/=r}}var rl,il,ol=vl(4),sl=vl(5),al=vl(10,.4),ul=1/3,cl=[{x:-.6,y:-.3},{x:.1,y:0},{x:-.6,y:.3}],ll={circle:{getDistanceFromStrokeVertically:function(t,e){return 1},getDistanceFromStrokeHorizontally:function(t,e){return 1-Math.sqrt(t*t+e*e)},points:[{x:0,y:0,r:1}],isSimple:!0},square:{getDistanceFromStrokeVertically:function(t,e){return 1-Math.abs(e)},getDistanceFromStrokeHorizontally:function(t,e){return 1-Math.abs(t)},points:[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],isSimple:!0},line:{getDistanceFromStrokeVertically:function(t,e){return 1-Math.abs(e)},getDistanceFromStrokeHorizontally:function(t,e){return 1},points:[{x:-1,y:0},{x:1,y:0}],isSimple:!0},triangle:{getDistanceFromStrokeVertically:function(t,e){return(1-t)/2-Math.abs(e)},getDistanceFromStrokeHorizontally:function(t,e){return 1-Math.abs(t)},points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],isSimple:!0},arrow:{getDistanceFromStrokeVertically:function(t,e){return(1-t)/2-Math.abs(e)},getDistanceFromStrokeHorizontally:function(t,e){return 1-Math.abs(t)},points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],isSimple:!0},"circle-hole-arrow":{getDistanceFromStrokeVertically:function(t,e){return Math.min(Math.sqrt((t+.4)*(t+.4)+e*e)-.27,(1-t)/2-Math.abs(e))},getDistanceFromStrokeHorizontally:function(t,e){return 1-Math.abs(t)},points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],hole:[{x:-.4,y:0,r:.3}],isSimple:!0},"triangle-hole-arrow":{getDistanceFromStrokeVertically:function(t,e){var n=Math.min((1-t)/2-Math.abs(e),1-Math.abs(t)),r=-_l(t,e,cl);return Math.min(n,r)},getDistanceFromStrokeHorizontally:function(t,e){return 1},points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],hole:cl,isSimple:!0},"short-arrow":yl([{x:-1,y:-ul},{x:0,y:-ul},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:0,y:ul},{x:-1,y:ul}],!1),"sharp-arrow":yl([{x:-1,y:-ul},{x:-.55,y:-ul},{x:-1,y:-1},{x:1,y:0},{x:-1,y:1},{x:-.55,y:ul},{x:-1,y:ul}],!1),cross:{getDistanceFromStrokeVertically:function(t,e){return 1},getDistanceFromStrokeHorizontally:function(t,e){var n=Math.abs(t),r=Math.abs(e),i=.31-Math.min(n,r),o=1-Math.max(n,r);return Math.min(i,o)},points:[{x:-1,y:.31},{x:-1,y:-.31},{x:-.31,y:-.31},{x:-.31,y:-1},{x:.31,y:-1},{x:.31,y:-.31},{x:1,y:-.31},{x:1,y:.31},{x:.31,y:.31},{x:.31,y:1},{x:-.31,y:1},{x:-.31,y:.31}],isSimple:!1},diamond:yl(ol),pentagon:yl(sl),star:yl(al)},dl=["circle","square","triangle","line"],hl=["cross","diamond","pentagon","star"],fl=["arrow","triangle-hole-arrow","circle-hole-arrow","short-arrow","sharp-arrow"];function pl(t,e){for(var n=0,r=dl;n<r.length;n++)gl(t,r[n]);for(var i=e.nodes.current.shape.getValues(),o=e.edges.current.shape.head.getValues(),s=e.edges.current.shape.tail.getValues(),a=0,u=hl;a<u.length;a++){var c=u[a];i.includes(c)&&gl(t,c)}for(var l=0,d=fl;l<d.length;l++){var h=d[l];h&&(o.includes(h)||s.includes(h))&&gl(t,h)}}function gl(t,e){t.registerShape(e,ll[e])}function _l(t,e,n){for(var r=1/0,i={x:t,y:e},o=0;o<n.length;++o){var s=n[o],a=n[(o+1)%n.length];r=Math.min(r,Ia(i,s,a))}return r*(Qc(t,e,n)?1:-1)}function vl(t,e){void 0===e&&(e=1);for(var n=-Math.PI/2+1e-6,r=[],i=2*Math.PI/t,o=n,s=0;s<t;++s){var a=s%2==1?e:1;r.push({x:Math.cos(o)*a,y:Math.sin(o)*a}),o+=i}return r}function yl(t,e){return void 0===e&&(e=!1),{getDistanceFromStrokeVertically:function(){return 1},getDistanceFromStrokeHorizontally:function(e,n){return _l(e,n,t)},points:t,isSimple:e}}function ml(t){var e=t.graphWidth,n=t.graphHeight,r=t.viewWidth,i=t.viewHeight;return.2*Math.min(r/e,i/n)}function bl(t){var e=t.smallestNodeSize,n=t.viewWidth,r=t.viewHeight;return e===1/0?1/0:Math.min(n,r)/e*.5}(il=rl=rl||{}).ROTATION="rotation",il.PAN="pan",il.ZOOM="zoom",il.GESTURE="gesture";var xl,El,wl,Sl=(E(Al,xl=xe),Al.prototype._setupInteractions=function(){var t=this;this._interactions.onMouseWheel({priority:"zoom",check:function(){return!!t._settings.get("interactions.zoom.enabled")},handler:B((function(e){var n=e.x,r=e.y,i=e.delta;return t._smoothZoom(i,n,r)}),50)}),this._interactions.onDoubleClick({priority:"zoom",check:function(){var e=t._settings.get("interactions.zoom.enabled"),n=t._settings.get("interactions.zoom.onDoubleClick");return!(!e||!n)},handler:function(e){var n=e.x,r=e.y;return t._smoothZoom(1,n,r)}}),this._interactions.onDrag({priority:"panning",disableDetection:!0,check:function(e){var n=e.button,r=!!t._settings.get("interactions.pan.enabled");return"left"===n&&r},onStart:function(){return t._updateVisibility(rl.PAN,!0)},onProgress:function(e){var n=e.dx,r=e.dy;return t._camera.move({x:-n,y:-r})},onStop:function(){return t._updateVisibility(rl.PAN,!1)}}),this._interactions.onDrag({priority:"rotation",disableDetection:!0,check:function(e){var n=e.button,r=e.domEvent;return("right"===n||r&&2===r.buttons)&&!!t._settings.get("interactions.rotation.enabled")},onStart:function(e){var n=e.x,r=e.y;t._rotationStart={x:n,y:r},t._updateVisibility(rl.ROTATION,!0)},onProgress:function(e){var n=e.x,r=e.y;return t._rotate({x:n,y:r})},onStop:function(){return t._updateVisibility(rl.ROTATION,!1)}}),this._interactions.onGesture({priority:"gesture",disableDetection:!0,check:function(){return!!t._settings.get("interactions.gesture.enabled")},onStart:function(){return t._updateVisibility(rl.GESTURE,!0)},onProgress:function(e){var n=e.dx,r=e.dy,i=e.rotation,o=e.scale,s=e.x,a=e.y;t._settings.get("interactions.rotation.enabled")&&t._camera.rotate(-i),t._camera.zoomIn(o,void 0,{refX:s,refY:a}),t._camera.move({x:-n,y:-r})},onStop:function(){return t._updateVisibility(rl.GESTURE,!0)}})},Al.prototype._rotate=function(t){var e=t.x,n=t.y,r=this._camera.getSize(),i=r.width/2,o=r.height/2,s=this._rotationStart.x-i,a=this._rotationStart.y-o,u=e-i,c=n-o,l=Math.atan2(a,s)-Math.atan2(c,u);this._rotationStart.x=e,this._rotationStart.y=n,this._camera.rotate(l)},Al.prototype._updateVisibility=function(t,e){var n=!e,r=this._settings,i=r.get("interactions."+t+".hideNodes"),o=r.get("interactions."+t+".hideEdges"),s=r.get("interactions."+t+".hideNodeTexts"),a=r.get("interactions."+t+".hideEdgeTexts");i&&this._graphics.setNodesVisibility(n),s&&this._graphics.setNodeTextsVisibility(n),o&&this._graphics.setEdgesVisibility(n),a&&this._graphics.setEdgeTextsVisibility(n)},Al.prototype._smoothZoom=function(t,e,n){var r=this,i=this._settings,o=i.get("interactions.zoom.modifier")||1.8,s=i.get("interactions.zoom.duration"),a=i.get("interactions.zoom.easing"),u=this._camera.getZoom()*(0<t?o:1/o),c={duration:s,easing:a};this._zooming||(this._zooming=!0,this._updateVisibility(rl.ZOOM,!0)),this._camera.setZoom(u,c,{refX:e,refY:n}).then((function(){r._zooming&&(r._zooming=!1,r._updateVisibility(rl.ZOOM,!1))}))},Al);function Al(t,e){t.locate,t.dom;var n=t.camera,r=t.graphics,i=t.settings,o=t.interactions,s=xl.call(this)||this;return s._zooming=!1,s._camera=n,s._settings=i,s._interactions=o,s._graphics=r,i.register("interactions.zoom.enabled",!0),i.register("interactions.zoom.onDoubleClick",!1),i.register("interactions.zoom.duration",150),i.register("interactions.zoom.modifier",1.8),i.register("interactions.zoom.easing","quadraticOut"),i.register("interactions.zoom.minValue",e?null:ml),i.register("interactions.zoom.maxValue",e?null:bl),i.register("interactions.zoom.hideNodes",!1),i.register("interactions.zoom.hideEdges",!1),i.register("interactions.zoom.hideNodeTexts",!1),i.register("interactions.zoom.hideEdgeTexts",!1),i.register("interactions.pan.enabled",!0),i.register("interactions.pan.hideNodes",!1),i.register("interactions.pan.hideEdges",!1),i.register("interactions.pan.hideNodeTexts",!1),i.register("interactions.pan.hideEdgeTexts",!1),i.register("interactions.rotation.enabled",!0),i.register("interactions.rotation.hideNodes",!1),i.register("interactions.rotation.hideEdges",!1),i.register("interactions.rotation.hideNodeTexts",!1),i.register("interactions.rotation.hideEdgeTexts",!1),i.register("interactions.gesture.enabled",!0),i.register("interactions.gesture.hideNodes",!1),i.register("interactions.gesture.hideEdges",!1),i.register("interactions.gesture.hideNodeTexts",!1),i.register("interactions.gesture.hideEdgeTexts",!1),s._setupInteractions(),s}(wl=El=El||{}).ZOOM="zoom",wl.ROTATE="rotate";var Cl={duration:0,easing:"linear",startAfter:0,ignoreZoomLimits:!(wl.PAN="pan"),callback:function(){}};function Tl(t){return Math.abs(t)<1e-9}var kl,Il=(E(Ol,kl=xe),Object.defineProperty(Ol.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(Ol.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(Ol.prototype,"zoom",{get:function(){return this._zoom},enumerable:!0,configurable:!0}),Object.defineProperty(Ol.prototype,"angle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(Ol.prototype,"width",{get:function(){return this._dimensions.width},enumerable:!0,configurable:!0}),Object.defineProperty(Ol.prototype,"height",{get:function(){return this._dimensions.height},enumerable:!0,configurable:!0}),Ol.prototype.moveEnd=function(t){var e=this;this._dom.clearTimeout(this._timeout),this._timeout=this._dom.setTimeout((function(){e._timeout=0,e._events.fire(me.VIEW_CHANGED,{type:t})}),80)},Ol.prototype.getSize=function(){return{width:this._dimensions.width,height:this._dimensions.height}},Ol.prototype.getCenter=function(){return{x:this._x,y:this._y}},Ol.prototype.setCenter=function(t,e){var n=this,r=t.x,i=t.y,o=w(w({},Cl),e),s=this._x,a=this._y,u=r-this._x,c=i-this._y;return Tl(u)&&Tl(c)?Promise.resolve():new Promise((function(t){o.callback=function(){n.moveEnd(El.PAN),t()},n._moveAnimation&&n._animations.end(n._moveAnimation,!1);var e=n._animations.play((function(t){n._x=s+u*t,n._y=a+c*t,n._events.fire(me.CAMERA_MOVE),n._events.fire(me.CAMERA_PAN)}),o);e&&(n._moveAnimation=e)}))},Ol.prototype.move=function(t,e){var n=Ml({x:t.x,y:t.y},this._zoom,this._sinAngle,this._cosAngle);return this.setCenter({x:this._x+n.x,y:this._y+n.y},e)},Ol.prototype.getZoom=function(){return this._zoom},Ol.prototype.setZoom=function(t,e,n){var r=this;void 0===n&&(n={refX:void 0,refY:void 0});var i=w(w({},Cl),e),o=n.refX,s=n.refY,a=We(t,this._minZoom,this._maxZoom);return i.ignoreZoomLimits||(a=this._applyZoomLimits(a)),Tl(this._zoom-a)?Promise.resolve():new Promise((function(t){var n=r._dimensions.width/2,u=r._dimensions.height/2,c=r._zoom,l=n/c-n/a;if(i.callback=function(){r.moveEnd(El.ZOOM),t()},void 0!==o&&void 0!==s){var d=(o-n)/c-(o-n)/a,h=(s-u)/c-(s-u)/a,f=r._cosAngle,p=r._sinAngle,g=f*d-p*h,_=p*d+f*h;r.setCenter({x:r._x+g,y:r._y+_},e)}r._zoomAnimation&&r._animations.end(r._zoomAnimation,!1),r._dom.setTimeout((function(){r._events.fire(me.START_ZOOM,{duration:i.duration,easing:i.easing,startZoom:c,endZoom:a})}));var v=r._animations.play((function(t){r._zoom=n/(n/c-l*t),r._events.fire(me.CAMERA_MOVE),r._events.fire(me.CAMERA_ZOOM)}),i);v&&(r._zoomAnimation=v)}))},Ol.prototype._applyZoomLimits=function(t){var e=this._settings.get("interactions.zoom.minValue"),n=this._settings.get("interactions.zoom.maxValue"),r=this._modules.locate.getGraphBoundingBox(),i=r.minScaledSize,o=r.maxScaledSize,s=r.width,a=r.height,u=r.cx,c=this._zoom,l=this.getSize(),d=t;if(!isNaN(u)){var h={smallestNodeSize:i,biggestNodeSize:o,graphWidth:s+o,graphHeight:a+o,viewWidth:l.width,viewHeight:l.height},f=e&&e(h),p=n&&n(h);Ll(f)&&d<f?d<c&&(d=Math.min(c,f)):Ll(p)&&p<d&&c<d&&(d=Math.max(c,p))}return d},Ol.prototype.zoomIn=function(t,e,n){var r;return void 0===n&&(n={refX:void 0,refY:void 0}),r="number"!=typeof t?(n=e,e=t,this._settings.get("interactions.zoom.modifier")||1.8):t,this.setZoom(this._zoom*r,e,n)},Ol.prototype.zoomOut=function(t,e,n){var r;return void 0===n&&(n={refX:void 0,refY:void 0}),r="number"!=typeof t?(n=e,e=t,this._settings.get("interactions.zoom.modifier")||1.8):t,this.setZoom(this._zoom/r,e,n)},Ol.prototype.getAngle=function(){return this._angle},Ol.prototype.setAngle=function(t,e){var n=this,r=w(w({},Cl),e),i=this._angle,o=t-i;return Tl(o)?Promise.resolve():new Promise((function(t){r.callback=function(){n.moveEnd(El.ROTATE),t()},n._rotateAnimation&&n._animations.end(n._rotateAnimation,!1);var e=n._animations.play((function(t){for(n._angle=i+o*t;n._angle>Math.PI;)n._angle-=2*Math.PI;for(;n._angle<-Math.PI;)n._angle+=2*Math.PI;n._sinAngle=Math.sin(n._angle),n._cosAngle=Math.cos(n._angle),n._events.fire(me.CAMERA_MOVE),n._events.fire(me.CAMERA_ROTATE)}),r);e&&(n._rotateAnimation=e)}))},Ol.prototype.rotate=function(t,e){return this.setAngle(this._angle+t,e)},Ol.prototype.getScreenCenter=function(){return{x:this._dimensions.width/2,y:this._dimensions.height/2}},Ol.prototype.graphToScreenCoordinates=function(t,e){var n=t.x,r=t.y;void 0===e&&(e={x:0,y:0});var i=this._dimensions.width/2,o=this._dimensions.height/2;return Ps((n-this._x)*this._zoom+i,(r-this._y)*this._zoom+o,i,o,-this._angle,e)},Ol.prototype.screenToGraphCoordinates=function(t,e){var n=t.x,r=t.y;return void 0===e&&(e={x:0,y:0}),Ps(this._x+(n-this._dimensions.width/2)/this._zoom,this._y+(r-this._dimensions.height/2)/this._zoom,this._x,this._y,this._angle,e)},Ol.prototype.projectBounds=function(t,e){void 0===e&&(e=t);for(var n=t[0],r=t[1],i=t[2],o=t[3],s=this._x,a=this._y,u=this._dimensions.width/2,c=this._dimensions.height/2,l=this._sinAngle,d=this._cosAngle,h=1/this._zoom,f=1/0,p=1/0,g=-1/0,_=-1/0,v=[n,r,n,o,i,o,i,r],y=0;y<v.length;y+=2){var m=v[y],b=v[y+1],x=(m=s+(m-u)*h)-s,E=(b=a+(b-c)*h)-a;(m=d*x-l*E+s)<f&&(f=m),g<m&&(g=m),(b=l*x+d*E+a)<p&&(p=b),_<b&&(_=b)}return e[0]=f,e[1]=p,e[2]=g,e[3]=_,e},Ol.prototype.screenToGraphVector=function(t){return Ml({x:t.x,y:t.y},this._zoom,this._sinAngle,this._cosAngle)},Ol.prototype.getView=function(){return{x:this._x,y:this._y,zoom:this._zoom,angle:this._angle,width:this._dimensions.width,height:this._dimensions.height}},Ol.prototype.setView=function(t,e){var n=w({x:this._x,y:this._y,zoom:this._zoom,angle:this._angle},t),r=n.x,i=n.y,o=n.zoom,s=n.angle;return Promise.all([this.setCenter({x:r,y:i},e),this.setZoom(o,e),this.setAngle(s,e)]).then((function(){}))},Ol.prototype._reloadDimensions=function(){this._dimensions=this._dom.getDimensions()},Ol.prototype.animationInProgress=function(){var t=this._moveAnimation,e=this._zoomAnimation;return t&&!t.done||e&&!e.done},Ol.prototype.getProjectedScreenBounds=function(t){void 0===t&&(t=0);var e=this._dimensions,n=e.width,r=e.height,i=Math.max(n,r)*t;return this.projectBounds([0-i,0-i,n+i,r+i])},Ol.prototype._reset=function(){this._zoom=1,this._x=0,this._y=0,this._angle=0,this._sinAngle=0,this._cosAngle=1,this._dimensions=this._dom.getDimensions()},Ol);function Ol(t){var e,n=kl.call(this)||this;n._minZoom=1e-8,n._maxZoom=1e8,n._timeout=0;var r=t.events,i=t.settings;return n._modules=t,n._events=r,n._dom=t.dom,n._animations=t.animations,n._settings=i,n._reset(),i.register("minZoom",1e-8,(function(t){n._minZoom=t,n._zoom<t&&(n._zoom=t,n._events.fire(me.CAMERA_MOVE))})),i.register("maxZoom",1e8,(function(t){n._maxZoom=t,n._zoom>t&&(n._zoom=t,n._events.fire(me.CAMERA_MOVE))})),r.on(((e={})[me.SET_CONTAINER]=function(){n._reset(),n._events.fire(me.CAMERA_MOVE)},e[me.RESIZE]=function(){n._reloadDimensions(),n._events.fire(me.CAMERA_MOVE)},e)),n}function Ml(t,e,n,r){var i=t.x,o=t.y;return{x:r*(i/=e)-n*(o/=e),y:n*i+r*o}}function Ll(t){return"number"==typeof t&&isFinite(t)}function Nl(){}var Rl,Pl={maxBlockId:1024,maxCoord:-1/0,maxScaledSize:16,maxPixelSize:255,maxMinVisibleSize:64,maxDashOffset:4,maxDashLength:3,maxGapLength:1,maxSymbolicSize:0,maxPatternScale:0},Dl=_t?"webgl":null,Fl=(E(zl,Rl=xe),zl.prototype.onMounted=function(t,e){var n=this;void 0!==e.renderer&&t.setOptions({renderer:e.renderer}),void 0!==e.imgCrossOrigin&&t.setOptions({imgCrossOrigin:e.imgCrossOrigin}),this._dom.addWindowEventListener("unload",(function(){n.destroy()}))},zl.prototype.getTransparentBackgroundColor=function(){var t=this._settings.get("backgroundColor");return t?this._engine.transparentify(t):null},zl.prototype._render=function(){var t=this._dom.getDimensions(),e=this._camera.getView(),n=Tt(),r=Qt(),i=this._settings.get("backgroundColor"),o=this._isBufferDisplayable;this._engine.setView({x:e.x,y:e.y,zoom:e.zoom,angle:e.angle,width:t.width,height:t.height,pixelRatio:n,currentTime:r,backgroundColor:i,isBufferDisplayable:o});try{this._engine.render(),"requested"===this._rendererState.state&&this._updateRendererState({state:"ok"})}catch(t){if(this._debug)throw t;var s=t.message,a=t.code,u=void 0===a?"OTHER":a,c=this._rendererState.type,l=function(t){return null===t?"none":"webgl"===t?"WebGL":"svg"===t?"SVG":"canvas"===t?"Canvas":t}(c),d="requested"===this._rendererState.state?"Error while initializing the "+l+" renderer":"The "+l+" renderer encountered an unexpected runtime error",h=null;"webgl"===c&&(d+="; fallbacking on canvas renderer",h="canvas"),An(s||""),An(d),this._updateRendererState({state:"error",code:u,message:s}),this._settings.set("renderer",h)}},zl.prototype._fireRendererStateChangeEvent=function(){var t=this._rendererState;this._events.fire(me.RENDERER_STATE_CHANGE,{type:t.type,state:t.state,code:t.code,message:t.message})},zl.prototype._updateRendererState=function(t){var e=t.type,n=t.state,r=t.code,i=t.message,o=!1;void 0!==e&&this._rendererState.type!==e&&(this._rendererState.type=e,o=!0),void 0!==n&&this._rendererState.state!==n&&(this._rendererState.state=n,o=!0),void 0!==r&&this._rendererState.code!==r&&(this._rendererState.code=r,o=!0),void 0!==i&&this._rendererState.message!==i&&(this._rendererState.message=i,o=!0),o&&this._initDone&&this._fireRendererStateChangeEvent()},zl.prototype.getImageData=function(){var t=this;return this._dom.afterNextFrame().then((function(){return t._engine.getImageData()}))},zl.prototype.addCanvas=function(t){this._engine.addCanvas(t)},zl.prototype.removeCanvas=function(t){this._engine.removeCanvas(t)},zl.prototype.getNodeAttributes=function(){return this._attributesManager.getFlexArrays().nodes.current},zl.prototype.getEdgeAttributes=function(){return this._attributesManager.getFlexArrays().edges.current},zl.prototype.getGraphicsEngine=function(){return this._engine},zl.prototype.getImageManager=function(){return this._imageManager},zl.prototype.getFontManager=function(){return this._fontManager},zl.prototype.allocateGraphicsEngineBlockId=function(){return this._availableGeIndexes.length?this._availableGeIndexes.pop():10*this._nextGeIndex+++9},zl.prototype.releaseGraphicsEngineBlockId=function(t){this._engine.freeBlock(t),this._availableGeIndexes.push(t),this._dom.refresh()},zl.prototype.addCursorStyle=function(t){t&&(this._cursorStyle.push(t),this._applyCursorStyle())},zl.prototype.removeCursorStyle=function(t){if(t){var e=this._cursorStyle.lastIndexOf(t);-1!==e&&(this._cursorStyle.splice(e,1),this._applyCursorStyle())}},zl.prototype.reloadFonts=function(){this._events.fire(me.RELOAD_FONTS),this._engine.notifyFontsReloaded(),this._dom.refresh()},zl.prototype.getDomElement=function(){return this._domElement},zl.prototype.setTextHidden=function(t,e){this._attributesManager.setTextHidden(t,e)},zl.prototype.resetTextHidden=function(){this._attributesManager.resetTextHidden(),this._dom.refresh()},zl.prototype.getAttributesManager=function(){return this._attributesManager},zl.prototype._checkFontsNewlyLoaded=function(){return!!this._fontsNewlyLoaded.length&&(this._fontsNewlyLoaded=[],!0)},zl.prototype._loadGraphInGraphicsEngine=function(){this._attributesManager.update(),this._checkFontsNewlyLoaded()&&this._attributesManager.redrawAll();var t=this._attributesManager.getAndResetElementsToRedraw(),e=this._attributesManager.getAndResetElementsUpdated(),n=0<e.nodes.size||0<e.edges.size;(e.nodeAttributesSet.has("radius")||e.edgeAttributes.includes("width"))&&(this._boundaries.maxSize=function(t){for(var e=t.getNodeAttribute("radius"),n=t.getEdgeAttribute("width"),r=t.getNodes(),i=t.getEdges(),o=0,s=0,a=0;a<r._indexes.length;a++){var u=r._indexes[a],c=e.get(u);o<c&&(o=c)}for(a=0;a<i._indexes.length;a++){u=i._indexes[a];var l=n.get(u);s<l&&(s=l)}return Math.max(2*o,s)}(this._graph)),(e.nodeAttributesSet.has("shape")||e.edgeAttributes.includes("shape.head")||e.edgeAttributes.includes("shape.tail"))&&pl(this._engine,this._attributesManager.getFlexArrays()),function(t){var e,n,r=t.graph,i=t.elements,o=t.engine,s=t.imageManager,a=t.fontManager,u=t.view,c=t.attributes,l=t.boundaries,d=t.formatText,h={nodeAttributes:n=nt((e=c).nodes.current,{text:{secondary:{scaling:e.nodes.current.text.scaling,maxLineLength:e.nodes.current.text.maxLineLength}}}),nodeAttributesPrev:nt(e.nodes.previous,{textHidden:n.textHidden,text:{secondary:{scaling:e.nodes.previous.text.scaling,maxLineLength:e.nodes.previous.text.maxLineLength}}}),edgeAttributes:nt(e.edges.current,{text:{secondary:{scaling:e.edges.current.text.scaling,maxLineLength:e.edges.current.text.maxLineLength,adjustAngle:e.edges.current.text.adjustAngle}}}),edgeAttributesPrev:nt(e.edges.previous,{source:e.edges.current.source,target:e.edges.current.target,textHidden:e.edges.current.textHidden,text:{secondary:{scaling:e.edges.previous.text.scaling,maxLineLength:e.edges.previous.text.maxLineLength,adjustAngle:e.edges.previous.text.adjustAngle}}})},f=h.nodeAttributes,p=h.nodeAttributesPrev,g=h.edgeAttributes,_=h.edgeAttributesPrev,v=i.nodes,y=i.edges,m=l.maxSize,b=l.maxMinVisibleSize;if(v.size||y.size){var x=10*(Math.max(r.getNodeMaxIndex(),r.getEdgeMaxIndex())+1),E=o.setGlobalBoundaries({maxBlockId:Ge(x),maxScaledSize:Ge(8*m),maxMinVisibleSize:Ge(b),maxSymbolicSize:Ge(m),maxDashLength:3,maxGapLength:1,maxPatternScale:2,maxCoord:-1/0}),w=(E?r.getNodes("_all"):v)._indexes,S=(E?r.getEdges("_all"):y)._indexes;if(w.length)for(var A=new fc({engine:o,imageManager:s,fontManager:a,formatText:d,attributes:f,attributesPrev:p}),C=0;C<w.length;++C)A.drawNode(w[C]);if(S.length){var T=new Uc({engine:o,imageManager:s,fontManager:a,formatText:d,view:u,attributes:g,attributesPrev:_,nodeAttributes:f,nodeAttributesPrev:p});for(C=0;C<S.length;++C)T.drawEdge(S[C])}}}({graph:this._graph,elements:t,engine:this._engine,imageManager:this._imageManager,fontManager:this._fontManager,view:this._camera.getView(),attributes:this._attributesManager.getFlexArrays(),boundaries:this._boundaries,formatText:this._formatText}),n&&this._events.fire(me.UPDATE_ATTRIBUTES,e)},zl.prototype._forceCompleteGraphRefresh=function(){this._attributesManager.redrawAll(),this._loadGraphInGraphicsEngine()},zl.prototype.export=function(t,e,n,r){var i,o=this;return Promise.all([this._graph.getNodes().addClass(pn),this._graph.getEdges().addClass(pn)]).then((function(){return o.resolveAtNextFrame()})).then((function(){return o._imageManager.whenReady()})).then((function(){var s;return"all"===n?(s=o._graph,i={nodes:Bl(s,!0),edges:Bl(s,!1)},o._forceCompleteGraphRefresh()):o._loadGraphInGraphicsEngine(),o._engine.export(t,e,r)})).then((function(t){return Promise.all([o._graph.getNodes().removeClass(pn),o._graph.getEdges().removeClass(pn)]).then((function(){return t}))})).then((function(t){var e,r,s;return"all"===n&&(r=(e=i).nodes,s=e.edges,Ul(r),Ul(s),o._forceCompleteGraphRefresh()),t}))},zl.prototype.addAttributeLayer=function(t){return this._attributesManager.addAttributeLayer(t)},zl.prototype.createFlexArrays=function(){return this._attributesManager.createFlexArrays()},zl.prototype.getAttributeValues=function(t,e,n,r){return this._attributesManager.getAttributeValues(t,e,n,r)},zl.prototype.forceAttributesComputation=function(){this._attributesManager.update()},zl.prototype.resolveAtNextFrame=function(t){return this._dom.afterNextFrame().then((function(){return t}))},zl.prototype.animate=function(t,e,n){var r=function(t){return"number"==typeof t?t={duration:t}:"object"==typeof t&&null!==t||(t={duration:0}),{duration:function(t){return"number"!=typeof t||!isFinite(t)||t<0?0:t}(t.duration),easing:t.easing||"linear",chain:!!t.chain}}(n);return r.duration&&this._engine.ensureAnimationsReady(),this._animate(t,e,r)},zl.prototype.isAnimating=function(){return 0<this._animations.length},zl.prototype.getAnimationInformation=function(t){return this._attributesManager.getAnimationInformation(t)},zl.prototype._toSubGraph=function(t){if(t instanceof gr||t instanceof fr)return{nodes:t.toList(),edges:t.getAdjacentEdges()};if(t instanceof Jn||t instanceof Zn)return{nodes:this._graph.nodeList(),edges:t.toList()};var e=t,n={nodes:e.nodes||this._graph.nodeList(),edges:e.edges||this._graph.edgeList()};return n.nodes.size&&(n.edges.size?n.edges=n.edges.concat(n.nodes.getAdjacentEdges()).dedupe():n.edges=n.nodes.getAdjacentEdges()),n},zl.prototype._animate=function(t,e,n){var r=n.duration,i=n.easing;if(!this._animations.length&&!r)return e(t),Promise.resolve(t);var o=this._toSubGraph(t),s=o.nodes,a=o.edges;if(0===s.size&&0===a.size)return Promise.resolve(t);s.size&&this._events.fire(me.ANIMATE,{elements:s,duration:r,easing:i}),a.size&&this._events.fire(me.ANIMATE,{elements:a,duration:r,easing:i});for(var u={id:this._nextAnimationId++,startTime:-1,finished:!1,func:function(){return e(t)},duration:r,easing:i,nodes:s,edges:a,resolve:Nl},c=new Promise((function(e){return u.resolve=function(){return e(t)}})),l=0;l<s._indexes.length;l++)this._nodeAnimationList.set(s._indexes[l],u.id);for(l=0;l<a._indexes.length;l++)this._edgeAnimationList.set(a._indexes[l],u.id);return this._animations.push(u),this._dom.refresh(),r||this._processAnimations(),c},zl.prototype._removeFinishedAnimations=function(){this._animations=this._animations.filter((function(t){return!t.finished}))},zl.prototype._getAnimationElements=function(t){for(var e=[],n=[],r=0;r<t.nodes._indexes.length;r++){var i=t.nodes._indexes[r];this._nodeAnimationList.get(i)===t.id&&e.push(i)}for(r=0;r<t.edges._indexes.length;r++)i=t.edges._indexes[r],this._edgeAnimationList.get(i)===t.id&&n.push(i);return{nodes:this._graph.nodeList(new Uint32Array(e)),edges:this._graph.edgeList(new Uint32Array(n))}},zl.prototype._resetAnimationAttributes=function(t){var e=t.nodes,n=t.edges;this._attributesManager.resetAnimationAttributes({nodes:e,edges:n}),this._nodeAnimationList.fill(e._indexes,0),this._edgeAnimationList.fill(n._indexes,0)},zl.prototype._processAnimations=function(){if(this._animations.length){var t=Qt(),e=[];this._attributesManager.update();for(var n=0,r=this._animations;n<r.length;n++)-1===(u=r[n]).startTime&&(u.startTime=t,e.push(u.func),0<u.duration&&this._attributesManager.setAnimationAttributes(this._getAnimationElements(u),u));for(var i=0,o=e;i<o.length;i++)(0,o[i])();for(var s=0,a=this._animations;s<a.length;s++){var u;t>=(u=a[s]).startTime+u.duration&&(this._resetAnimationAttributes(this._getAnimationElements(u)),u.resolve(u.elements),u.finished=!0)}this._removeFinishedAnimations(),this._animations.length&&this._dom.refresh()}},zl.prototype.hideTexts=function(){this.setNodeTextsVisibility(!1),this.setEdgeTextsVisibility(!1)},zl.prototype.showTexts=function(){this.setNodeTextsVisibility(!0),this.setEdgeTextsVisibility(!0)},zl.prototype.setNodesVisibility=function(t){return this._updateVisibilityCounter("nodes",t)},zl.prototype.setNodeTextsVisibility=function(t){return this._updateVisibilityCounter("nodeTexts",t)},zl.prototype.setEdgesVisibility=function(t){return this._updateVisibilityCounter("edges",t)},zl.prototype.setEdgeTextsVisibility=function(t){return this._updateVisibilityCounter("edgeTexts",t)},zl.prototype._updateVisibilityCounter=function(t,e){this._visibility[t]+=e?-1:1,this._dom.refresh()},zl.prototype.detectNode=function(t){return function(t,e,n,r,i,o){var s=t.x,a=t.y,u=t.margin,c=t.texts,l=t.indexes;l=l||e.getNodes()._indexes;var d=r.getZoom(),h=e.getObjectList(!0),f=n.getFlexArrays().nodes.current,p=1/0,g=0;n.update();for(var _=0;_<l.length;++_){var v=l[_];if(!f.excluded.get(v)&&f.detectable.get(v)&&0===f.animationDuration.get(v)){var y=f.x.get(v),m=f.y.get(v),b=r.graphToScreenCoordinates({x:y,y:m}),x=b.x,E=b.y,w=f.shape.get(v),S="scaled"===f.scalingMethod.get(v),A=f.radius.get(v)*(S?d:1),C=A+u,T=(s-x)/C,k=(a-E)/C;if(i.checkShapeHit(w,T,k))C<=p&&(p=C,g=v);else if(c){var I=o(f.text.content.get(v)||null),O=f.textHidden.get(v),M=f.text.minVisibleSize.get(v);if(!O&&I&&M<=(S?2*A:1/0)){var L=qo(I,f.text.maxLineLength.get(v)),N=f.innerStroke.width.get(v),R=f.outerStroke.width.get(v),P=f.text.margin.get(v),D=f.text.padding.get(v),F=f.text.size.get(v),z=f.text.scale.get(v),B=f.text.scaling.get(v),U=f.text.font.get(v),V=f.text.style.get(v),j=f.text.position.get(v),H=i.measureText(L,U,V,1),G=B?z*A:F,q=H.width*G/2+D+u,W=H.height*G/2+D+u,Y=Ga[j],X=N+R+P+A,Z=x+(X+q)*Y.x,K=E+(X+W)*Y.y;Z-q<s&&s<Z+q&&K-W<a&&a<K+W&&(g=v)}}}}return h.get(g)||null}(t,this._graph,this._attributesManager,this._camera,this._engine,this._formatText)},zl.prototype.detectEdge=function(t){return function(t,e,n,r){var i=t.margin,o=(t.texts,t.indexes),s=void 0===o?e.getEdges()._indexes:o,a=e.getObjectList(!1),u=r.getFlexArrays(),c=u.edges.current,l=u.nodes.current,d=n.getZoom(),h=i/d,f=n.screenToGraphCoordinates(t),p=f.x,g=f.y,_=0;r.update();for(var v=0;v<s.length;++v){var y=s[v],m=c.source.get(y),b=c.target.get(y),x=c.excluded.get(y),E=c.detectable.get(y),w=0!==c.animationDuration.get(y),S=0!==l.animationDuration.get(m),A=0!==l.animationDuration.get(b);if(!x&&E&&!w&&!S&&!A){var C=m===b,T=c.curvature.get(y),k="triangle"===c.shape.type.get(y),I="scaled"===c.scalingMethod.get(y),O=c.width.get(y)/(I?1:d),M=l.x.get(m),L=l.y.get(m),N=l.x.get(b),R=l.y.get(b);if(C){var P="scaled"===l.scalingMethod.get(m);Ua(p,g,M,L,M,L,(D=Cs(M,L,T,l.radius.get(m)/(P?1:d),0)).x1,D.y1,D.x2,D.y2,O,h)&&(_=y)}else if(0!==T){var D;za(p,g,M,L,N,R,(D=As(M,L,N,R,T)).x,D.y,O,h,k)&&(_=y)}else Ea(p,g,M,L,N,R,O,h,k)&&(_=y)}}return a.get(_)||null}(t,this._graph,this._camera,this._attributesManager)},zl.prototype.getVisibilityCounters=function(){return this._visibility},zl.prototype.destroy=function(){this.getGraphicsEngine().destroy(),this.getImageManager().destroy(),this.getFontManager().destroy()},zl);function zl(t,e){var n,r=t.dom,i=t.graph,o=t.camera,s=t.events,a=t.settings,u=Rl.call(this)||this;return u._debug=!1,u._initDone=!1,u._boundaries={maxSize:10,maxMinVisibleSize:64},u._visibility={nodes:0,edges:0,nodeTexts:0,edgeTexts:0},u._nextAnimationId=1,u._animations=[],u._rendererState={type:null,code:null,state:"ok",message:""},u._cursorStyle=[],u._fontsNewlyLoaded=[],u._nextGeIndex=1,u._availableGeIndexes=[],u._isBufferDisplayable=function(t){var e,n=2===(e=t.getDepth())||1===e||3<=(e-30)%6,r=Xu(t),i=n?u._visibility.nodes:u._visibility.edges,o=n?u._visibility.nodeTexts:u._visibility.edgeTexts;return 0===i&&(!r||0===o)},u._applyCursorStyle=function(){var t=u._cursorStyle[u._cursorStyle.length-1]||u._settings.get("cursor.default");Ht(u._domElement,t)},u._updateImageCrossOrigin=function(){u._imageManager.setImgCrossOrigin(u._settings.get("imgCrossOrigin")||null)},u._debug=e.isDebug(),u._events=s,u._dom=r,u._graph=i,u._camera=o,u._events=s,u._settings=a,u._formatText=Zo().applyArabicShaping,u._attributesManager=new Hu(i,r,e),u._imageManager=new ba,u._fontManager=new Kc,u._engine=new ga(ga.getCachedInitData()),u._domElement=u._engine.getDomElement(),u._nodeAnimationList=u._graph.createNodeAttribute({storage:32,default:0}),u._edgeAnimationList=u._graph.createEdgeAttribute({storage:32,default:0}),u._events.register([me.RELOAD_FONTS,me.RENDERER_STATE_CHANGE,me.BEFORE_UPDATE_ATTRIBUTES,me.UPDATE_ATTRIBUTES,me.ANIMATE,me.CAMERA_MOVE,me.CAMERA_PAN,me.CAMERA_ZOOM,me.CAMERA_ROTATE,me.VIEW_CHANGED,me.START_ZOOM]),a.register("renderer",Dl,(function(t){u._updateRendererState({type:t,state:"requested",code:null,message:void 0}),u._engine.setRenderType(t),u._dom.refresh()})),a.register("backgroundColor","white",(function(t){u._engine.parseColor(t)?r.refresh():(An('Invalid background color "'+t+'" specified; will default to black.'),a.set("backgroundColor","black"))})),a.register("texts.hideUntilFontsLoaded",!0,(function(t){u._fontManager.setHideUntilFontsLoaded(!!t)})),a.register("imgCrossOrigin","anonymous",u._updateImageCrossOrigin),a.register("cursor.default","default",u._applyCursorStyle),r.setLayer("graphics",u._domElement),u._engine.setGlobalBoundaries(Pl),r.beforeNextFrame().then((function(){u._initDone=!0,u._fireRendererStateChangeEvent()})),u._imageManager.onFetch((function(){u._engine.notifyPatternUpdate(),u._dom.refresh()})),u._fontManager.onFontLoaded((function(t){u._fontsNewlyLoaded.push(t),u._engine.notifyPatternUpdate(),u._engine.notifyFontsReloaded(),u._dom.refresh()})),r.addMediaListener("(min-resolution: 2dppx)",(function(){return r.refresh()})),u._visibleAttributeLayer=u._attributesManager.addAttributeLayer({priority:0,name:"internal("+sn+")",tag:sn,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),u._dataAttributeLayer=u._attributesManager.addAttributeLayer({priority:0,name:"internal(_data)",tag:an,nodeDependencies:void 0,edgeDependencies:void 0}),pl(u._engine,u._attributesManager.getFlexArrays()),s.on(((n={})[me.CAMERA_MOVE]=function(){return u._dom.refresh()},n[me.NEW_FRAME]=function(){u._processAnimations(),u._loadGraphInGraphicsEngine(),u._render()},n[me.CLEAR_GRAPH]=function(){u._nextGeIndex=1,u._availableGeIndexes=[],u._engine.clear(),u._attributesManager.clear(),u._dom.refresh()},n[me.VIEW_CHANGED]=function(t){if(t.type===El.ROTATE){var e=u._graph.getEdges().filter((function(t){return t.getAttribute("adjustAnchors")}));u._attributesManager.redrawElements(e)}},n[me.ADD_NODES+" "+me.ADD_EDGES]=function(t){u._attributesManager.updateForAllAttributeLayers(t.nodes||t.edges)},n[me.EXCLUDED_STATE_CHANGE]=function(t){u._visibleAttributeLayer.updateElements(t.elements)},n[me.SET_DATA]=function(t){u._dataAttributeLayer.updateElements(t.elements)},n)),ga.clearCachedInitData(),u}function Bl(t,e){var n=e?t.getNodeAttribute("excluded"):t.getEdgeAttribute("excluded"),r=(e?t.getNodes("all"):t.getEdges("all"))._indexes,i=n.getMultiple(r);return n.fill(r,0),{excludedList:n,indexes:r,values:i}}function Ul(t){var e=t.excludedList,n=t.indexes,r=t.values;e.setMultiple(n,r)}var Vl,jl=(E(Hl,Vl=xe),Hl.prototype.register=function(t,e){var n=this;void 0===e&&(e=[]),t.forEach((function(t){if(n._events[t])throw new Error('event "'+t+'" already exists');n._events[t]=new Gl(!1,t)})),e.forEach((function(t){if(n._events[t])throw new Error('event "'+t+'" already exists');n._events[t]=new Gl(!0,t)}))},Hl.prototype.onAnyEvent=function(t){this._onAnyEvents.push(t)},Hl.prototype.on=function(t,e){var n=this;if("string"==typeof t){var r=e;t.split(" ").filter((function(t){return!!t})).forEach((function(t){return n._getEvent(t).on(r)}))}else q(t,(function(t,e){return n.on(e,t)}));return this},Hl.prototype.removeListener=function(t){q(this._events,(function(e){e.off(t)}))},Hl.prototype.fire=function(t,e){void 0===e&&(e=null);var n=this._getEvent(t);return this._onAnyEvents.forEach((function(n){return n(t,e)})),n.trigger(e),this},Hl.prototype.once=function(t,e){var n=this,r=function(){e.apply(null,arguments),n.removeListener(r)};this.on(t,r)},Hl.prototype._getEvent=function(t){if(!(t in this._events))throw new Error("Event "+t+" does not exist");return this._events[t]},Hl);function Hl(){var t=null!==Vl&&Vl.apply(this,arguments)||this;return t._events={},t._onAnyEvents=[],t}var Gl=(ql.prototype.trigger=function(t){for(var e=0,n=this._handlers;e<n.length;e++)(0,n[e])(t,this._name);return this},ql.prototype.on=function(t){if("function"!=typeof t)throw new Error("handler is not a function");var e=this._reverseOrder?0:this._subscribers.length;return this._handlers.splice(e,0,t),this._subscribers.splice(e,0,t),this},ql.prototype.off=function(t){for(var e;-1!==(e=this._subscribers.indexOf(t));)this._subscribers.splice(e,1),this._handlers.splice(e,1);return this},ql);function ql(t,e){this._subscribers=[],this._handlers=[],this._reverseOrder=t,this._name=e}var Wl,Yl=(E(Xl,Wl=xe),Xl.prototype.getOriginalAttributes=function(){return this._originalAttributesLayer.getFlexArrays()},Xl.prototype.setMultipleAttributes=function(t,e,n,r){var i=this;return this._events.fire(me.SET_MULTIPLE_ATTRIBUTES,{elements:t,values:e,options:n,updatedAttributes:r}),this._graphics.animate(t,(function(){i._individualAttributesLayer.setAttributeValues(t,e,r)}),n)},Xl.prototype.setSingleAttribute=function(t,e,n,r){var i={};return Y(i,e,n),this.setMultipleAttributes(t,i,r)},Xl.prototype.resetMultipleAttributes=function(t,e,n){var r=this;e=e||this._individualAttributesLayer.getUsedAttributeNames(t);for(var i={},o=0,s=e;o<s.length;o++){var a=s[o];Y(i,a,void 0)}return this._graphics.animate(t,(function(){r._individualAttributesLayer.setAttributeValues(t,i)}),n)},Xl.prototype.getMultipleAttributes=function(t,e){return this._graphics.getAttributeValues(t,e,!0,!1)},Xl.prototype.getSingleAttribute=function(t,e){return this._graphics.getAttributeValues(t,e,!1,!1)},Xl.prototype.replaceOriginalAttributes=function(t,e,n){void 0===n&&(n=[]);for(var r={},i=this._originalAttributesLayer.getUsedAttributeNames(t).filter((function(t){return!n.includes(t)})),o=0;o<i.length;++o)Y(r,i[o],void 0);this._originalAttributesLayer.setAttributeValues(t,r),this._originalAttributesLayer.setAttributeValues(t,e)},Xl.prototype.getSinglePreviousAttribute=function(t,e){return this._graphics.getAttributeValues(t,e,!1,!0)},Xl.prototype.getMultiplePreviousAttributes=function(t,e){return this._graphics.getAttributeValues(t,e,!0,!0)},Xl);function Xl(t){var e,n=t.events,r=t.graphics,i=Wl.call(this)||this;return i._events=n,i._graphics=r,n.register([me.SET_MULTIPLE_ATTRIBUTES]),n.on(((e={})[me.ADD_NODES+" "+me.ADD_EDGES]=function(t){var e=t.nodes,n=t.edges,r=e||n,o=t.objects.map((function(t){return t.attributes}));i._originalAttributesLayer.setAttributeValues(r,o)},e)),i._originalAttributesLayer=i._graphics.addAttributeLayer({name:"original-attributes",priority:1,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),i._individualAttributesLayer=i._graphics.addAttributeLayer({name:"individual-attributes",priority:4,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),i}var Zl,Kl=(E(Jl,Zl=xe),Jl.prototype.onMounted=function(t,e){e.renderer&&this.update({renderer:e.renderer}),e.options&&this.update(e.options)},Jl.prototype.register=function(t,e,n,r){return void 0===r&&(r=!0),this._keys.push(t),this._currentValue[t]=e,this._defaultValues[t]=e,this._onChange[t]=n||function(){},n&&r&&n(e),this},Jl.prototype.update=function(t){t=Z(t);for(var e=this._keys,n={},r=this._currentValue,i=0;i<e.length;++i){var o=e[i];if(o in t){var s=t[o];void 0===s&&(s=this._defaultValues[o]),n[o]=r[o],r[o]=s}}var a=Object.keys(n);for(i=0;i<a.length;++i){var u=a[i],c=this._currentValue[u],l=n[u];c!==l&&this._onChange[u](c,l)}return K(n)},Jl.prototype.get=function(t){return arguments.length?this._currentValue[t]:K(this._currentValue)},Jl.prototype.set=function(t,e){var n=this._currentValue[t],r=this._onChange[t];this._currentValue[t]=e,r&&r(e,n)},Jl);function Jl(){var t=null!==Zl&&Zl.apply(this,arguments)||this;return t._currentValue={},t._onChange={},t._defaultValues={},t._keys=[],t}var Ql=($l.prototype.getName=function(){return this._name},$l.prototype.getIndex=function(){return this._classes.getIndex(this._name)},$l.prototype.setIndex=function(t){return this._classes.setIndex(this._name,t)},$l.prototype.update=function(t){return this._classes.update(this._name,t),this},$l.prototype.getDefinition=function(){return this._classes.getDefinition(this._name)},$l.prototype.getNodes=function(t){return this._classes.getElementsByClass(this._name,t).nodes},$l.prototype.getEdges=function(t){return this._classes.getElementsByClass(this._name,t).edges},$l.prototype.clearNodes=function(t){this.getNodes(t).removeClass(this._name)},$l.prototype.clearEdges=function(t){this.getEdges(t).removeClass(this._name)},$l.prototype.add=function(t){t.addClass(this._name)},$l.prototype.remove=function(t){t.removeClass(this._name)},$l);function $l(t,e){this._classes=t,this._name=e}var td,ed=(E(nd,td=xe),nd.prototype._getClassList=function(t){return t?this._builtinClasses:this._userClasses},nd.prototype.createClass=function(t){var e=void 0===t?{}:t,n=e.name,r=e.isBuiltin,i=void 0!==r&&r,o=e.after,s=e.nodeAttributes,a=e.nodeDependencies,u=e.nodeOutput,c=e.edgeAttributes,l=e.edgeDependencies,d=e.edgeOutput;if("string"!=typeof n)throw new Error('the "name" argument should be a string');var h=this._getClassList(i),f=o?function(t,e){for(var n=0;n<t.length;++n)if(t[n].name===e)return n;return-1}(h,o)+1:h.length;if(-1===f)throw new Error('createClass: class specified as `after` parameter "'+o+'" does not exist');if(i&&!n.startsWith("_"))throw new Error('invalid builtin class name "'+n+"\": builtin classes should start with '_'");var p=new Oo(this._graph),g=new Ql(this,n),_={name:n,elementSet:p,attributeLayer:this._graphics.addAttributeLayer({name:"class("+n+")",tag:n,standaloneSelectors:!0,nodeAttributes:s||void 0,edgeAttributes:c||void 0,nodeSelector:function(t,e){return e.hasElement(t)},edgeSelector:function(t,e){return e.hasElement(t)},nodeContext:p,edgeContext:p,nodeOutput:u,edgeOutput:d,nodeDependencies:a,edgeDependencies:l}),isBuiltin:i,wrapper:g};return h.splice(f,0,_),i&&h.sort((function(t,e){return mn.indexOf(t.name)-mn.indexOf(e.name)})),this._updatePriorities(i),this._classesByName[n]=_,this._events.register([rd(n,!0,!0),rd(n,!0,!1),rd(n,!1,!0),rd(n,!1,!1)]),g},nd.prototype._updatePriorities=function(t){for(var e=this._getClassList(t),n=5+(t?.5:0),r=0;r<e.length;++r){var i=n+5e-4*r;e[r].attributeLayer.update({priority:i})}},nd.prototype._get=function(t){var e=this._classesByName[t];if(!e)throw new Error('class "'+t+'" does not exist');return e},nd.prototype.getIndex=function(t){var e=this._get(t);return this._getClassList(e.isBuiltin).indexOf(e)},nd.prototype.setIndex=function(t,e){var n=this._get(t),r=this._getClassList(n.isBuiltin),i=r.indexOf(n),o=We(e,0,r.length-1);r.splice(i,1),r.splice(o,0,n),this._updatePriorities(n.isBuiltin)},nd.prototype.update=function(t,e){var n=void 0===e?{}:e,r=n.nodeAttributes,i=n.edgeAttributes,o=n.nodeDependencies,s=n.edgeDependencies,a=n.nodeOutput,u=n.edgeOutput,c=n.fullOverwrite;this._get(t).attributeLayer.update({nodeAttributes:r,edgeAttributes:i,nodeDependencies:o,edgeDependencies:s,nodeOutput:a,edgeOutput:u,fullOverwrite:c})},nd.prototype.getDefinition=function(t){var e=this._get(t).attributeLayer.getDefinition(),n=e.nodeAttributes,r=e.nodeDependencies,i=e.nodeOutput;return{nodeAttributes:n||void 0,edgeAttributes:e.edgeAttributes||void 0,nodeDependencies:r,edgeDependencies:e.edgeDependencies,nodeOutput:i,edgeOutput:e.edgeOutput}},nd.prototype._addOrRemoveClassesToElements=function(t,e,n){for(var r=e.isNode,i=0;i<t.length;++i){var o=t[i],s=this._get(o),a=s.elementSet,u=s.attributeLayer,c=a.addOrRemoveElements(e,n),l=rd(o,r,n);c.size&&(u.updateElements(c),this._events.fire(l,r?{nodes:c}:{edges:c}))}},nd.prototype.addClassesToElements=function(t,e,n){var r=this,i=e.toList();return this._graphics.animate(e,(function(){r._addOrRemoveClassesToElements(t,i,!0)}),n)},nd.prototype.removeClassesFromElements=function(t,e,n){var r=this,i=e.toList();return this._graphics.animate(e,(function(){r._addOrRemoveClassesToElements(t,i,!1)}),n)},nd.prototype.hasSingleElementClass=function(t,e){return this._get(t).elementSet.hasElement(e)},nd.prototype.getElementsClassList=function(t,e){void 0===e&&(e={});for(var n=e.includeBuiltinClasses,r=void 0!==n&&n,i=new Array(t.size),o=0;o<i.length;++o)i[o]=[];return this._addClassNamesToList(i,t,this._userClasses),r&&this._addClassNamesToList(i,t,this._builtinClasses),i},nd.prototype._addClassNamesToList=function(t,e,n){for(var r=e.toList(),i=0;i<n.length;++i)for(var o=this._userClasses[i],s=o.name,a=o.elementSet,u=0;u<r.size;++u){var c=r.get(u);a.hasElement(c)&&t[u].push(s)}},nd.prototype.getClassByName=function(t,e){void 0===e&&(e=!1);var n=this._classesByName[t]||null;if(e&&!n)throw new Error('class "'+t+'" does not exist');return n&&n.wrapper},nd.prototype.getClassList=function(){return this._userClasses.map((function(t){return t.wrapper}))},nd.prototype.getElementsByClass=function(t,e){void 0===e&&(e="visible");var n=this._get(t).elementSet.getElements(),r=n.nodes,i=n.edges;return"visible"===e?(r=r.filter((function(t){return t.isVisible()})),i=i.filter((function(t){return t.isVisible()}))):"raw"===e&&(r=r.filter((function(t){return!t.isVirtual()})),i=i.filter((function(t){return!t.isVirtual()}))),{nodes:r,edges:i}},nd.prototype._onClassEvent=function(t,e,n,r){var i=rd(t,n,r);this._events.on(i,e)},nd.prototype.onNodeClassAdded=function(t,e){this._onClassEvent(t,e,!0,!0)},nd.prototype.onNodeClassRemoved=function(t,e){this._onClassEvent(t,e,!0,!1)},nd.prototype.onEdgeClassAdded=function(t,e){this._onClassEvent(t,e,!1,!0)},nd.prototype.onEdgeClassRemoved=function(t,e){this._onClassEvent(t,e,!1,!1)},nd);function nd(t){var e,n=t.events,r=t.graphics,i=t.graph,o=td.call(this)||this;return o._builtinClasses=[],o._userClasses=[],o._classesByName={},o._events=n,o._graphics=r,o._graph=i,n.on(((e={})[me.EXCLUDED_STATE_CHANGE]=function(t){var e=t.elements;if(t.value){var n=o._builtinClasses.map((function(t){return t.name}));o._addOrRemoveClassesToElements(n,e,!1)}},e[me.CLEAR_GRAPH]=function(){o._builtinClasses.concat(o._userClasses).forEach((function(t){return t.elementSet.clear()}))},e)),o}function rd(t,e,n){return(e?"node":"edge")+"Class"+(n?"Added":"Removed")+"_"+t}for(var id,od,sd=[0,1],ad=[0,2],ud=4;ud<65535;ud<<=2)for(var cd=0,ld=sd.length;cd<ld;cd++)sd.push(sd[cd]|ud),ad.push((sd[cd]|ud)<<1);function dd(t,e){return(ad[255&e]|sd[255&t])+65536*(ad[e>>8&255]|sd[t>>8&255])+4294967296*(ad[e>>16&255]|sd[t>>16&255])}function hd(t,e){if(void 0===e&&(e=[]),0xffffffffffff<t)throw"Only morton codes up to 48 bits are supported.";if(!id){id={},od={};for(var n=0;n<256;n++)id[dd(n,0)]=n,od[dd(0,n)]=n}var r=id[21845&t],i=od[43690&t];return 65535<t&&(r|=id[21845&(t/=65536)]<<8,i|=od[43690&t]<<8,65535<t&&(r|=id[21845&(t/=65536)]<<16,i|=od[43690&t]<<16)),e[0]=r,e[1]=i,e}function fd(t,e,n){void 0===t&&(t=Int32Array),void 0===e&&(e=16),void 0===n&&(n=8),this._BIG_LIST=new Uint8Array([-1])[0],this._ArrayType=t,this._capacity=e,this._MAX_LIST_SIZE=n,this._freeIndex=-1,this.clear()}dd.code=function(t,e,n){if(24<t)throw"Morton codes are only supported up to Z=24";var r=1<<24-t;return dd(e*r,n*r)},dd.range=function(t,e,n){if(24<t)throw"Morton ranges are only supported up to Z=24";var r=1<<24-t,i=dd(e*r,n*r);return[i,i+r*r-1]},dd.reverse=hd,dd.decode=function(t,e){var n=hd(e),r=1<<24-t;return[n[0]/r,n[1]/r]},dd.min=function(t,e){var n=1431655765&t,r=1431655765&e,i=2863311530&t,o=2863311530&e;return Math.min(n,r)+Math.min(i,o)};var pd={averageSize:{configurable:!0}};function gd(t,e){var n=new t.constructor(e);return n.set(t),n}function _d(t,e,n){return n|dd(t,e)<<4}function vd(t,e){return void 0===e&&(e=[]),dd.reverse(t>>4,e),e[2]=t&xd,e}function yd(t,e,n,r,i){void 0===n&&(n=16),void 0===r&&(r=65536),void 0===i&&(i=Int32Array),this._intersects=t,this._getBounds=e,this._occupied=0,this._cells=new fd(i),this._objectsAtLevel=new Array(16).fill(0),this._idToCode=new md,this._codeCache=[],this._offset=r,this._min=-r,this._max=r,this._resolution=65535/(this._max-this._min),this._minCellSize=n*this._resolution,this._bounds=new Array(64);for(var o=0;o<16;o++)this._bounds[4*o]=1/0,this._bounds[4*o+1]=1/0,this._bounds[4*o+2]=-1/0,this._bounds[4*o+3]=-1/0}fd.prototype.clear=function(){this._buffer=new this._ArrayType(this._capacity*this._MAX_LIST_SIZE),this._sizes=new Uint8Array(this._capacity),this._bigLists=[],this._nextIndex=0,this._idToIndex={},this._constList=new Array(this._MAX_LIST_SIZE)},fd.prototype.addEntry=function(t){var e;return-1===this._freeIndex?e=this._nextIndex++:(e=this._freeIndex,this._freeIndex=-1),(this._idToIndex[t]=e)>=this._capacity&&this._expand(e+1),this._sizes[e]=0,e},fd.prototype.getItems=function(t){var e=this._idToIndex[t];if(void 0!==e){var n=this._sizes[e],r=this._MAX_LIST_SIZE*e;if(n<=this._MAX_LIST_SIZE){for(var i=0,o=this._constList.length=n;i<o;++i)this._constList[i]=this._buffer[r+i];return this._constList}if(n===this._BIG_LIST){var s=this._buffer[r];return this._bigLists[s]}}},fd.prototype.removeEntry=function(t){var e=this._idToIndex[t];if(this._sizes[e]===this._BIG_LIST){var n=this._MAX_LIST_SIZE*e,r=this._buffer[n];this._bigLists[r].length=0}this._sizes[e]=0,this._freeIndex=e},fd.prototype.size=function(t){var e=this._idToIndex[t],n=this._sizes[e];return n<=this._MAX_LIST_SIZE?n:this._bigLists[this._buffer[e*this._MAX_LIST_SIZE]].length},fd.prototype.sizes=function(t){for(var e=this._sizes,n=this._bigLists,r=this._buffer,i=this._MAX_LIST_SIZE,o=t.length,s=new Array(o),a=0;a<o;a++){var u=this._idToIndex[t[a]],c=e[u];s[a]=c<=i?c:n[r[u*i]].length}return s},fd.prototype.addTo=function(t,e){var n=this._idToIndex[t],r=this._sizes[n],i=n*this._MAX_LIST_SIZE;if(r<this._MAX_LIST_SIZE)this._buffer[i+r]=e,this._sizes[n]=r+1;else if(r===this._BIG_LIST){var o=this._buffer[i];this._bigLists[o].push(e)}else{for(var s=new Array(this._MAX_LIST_SIZE),a=0;a<this._MAX_LIST_SIZE;++a)s[a]=this._buffer[i+a];s.push(e),this._bigLists.push(s),this._sizes[n]=this._BIG_LIST,this._buffer[i]=this._bigLists.length-1}},fd.prototype.removeFrom=function(t,e){this.removeFromAndGetSize(t,e)},fd.prototype.removeFromAndGetSize=function(t,e){var n=this._idToIndex[t],r=this._sizes[n],i=this._MAX_LIST_SIZE*n;if(r<=this._MAX_LIST_SIZE){for(var o=i,s=i+r;o<s;++o)if(this._buffer[o]===e)return--r,this._buffer[o]=this._buffer[s-1],this._sizes[n]=r}else if(r===this._BIG_LIST){var a=this._buffer[i],u=this._bigLists[a],c=u.indexOf(e);if(-1!==c)return u.splice(c,1),u.length}},fd.prototype.reserve=function(t){this._capacity<t&&this._expand(t)},fd.prototype._expand=function(t){this._capacity=Math.pow(2,Math.ceil(Math.log2(t))),this._buffer=gd(this._buffer,this._capacity*this._MAX_LIST_SIZE),this._sizes=gd(this._sizes,this._capacity)},fd.prototype.has=function(t){var e=this._idToIndex[t];return!(void 0===e||e>=this._capacity)&&0!==this._sizes[e]},pd.averageSize.get=function(){for(var t=0,e=0;e<this._capacity;e++)t+=this._sizes[e];return t/this._capacity},Object.defineProperties(fd.prototype,pd);var md="undefined"==typeof Map?function(){function t(){this._values={},this._size=0}var e={size:{configurable:!0}};return e.size.get=function(){return this._size},t.prototype.has=function(t){return!!this._values[t]},t.prototype.set=function(t,e){t in this._values||this._size++,this._values[t]=e},t.prototype.get=function(t){return this._values[t]},t.prototype.delete=function(t){t in this._values&&(delete this._values[t],this._size--)},t.prototype.keys=function(){return Object.keys(this._values)},t.prototype.clear=function(){this._values={},this._size=0},Object.defineProperties(t.prototype,e),t}():Map,bd="undefined"==typeof Set?function(){function t(){this._values={},this._size=0}var e={size:{configurable:!0}};return e.size.get=function(){return this._size},t.prototype.has=function(t){return!!this._values[t]},t.prototype.add=function(t){t in this._values||this._size++,this._values[t]=!0},t.prototype.delete=function(t){t in this._values&&(delete this._values[t],this._size--)},t.prototype.keys=function(){return Object.keys(this._values)},t.prototype.clear=function(){this._values={},this._size=0},Object.defineProperties(t.prototype,e),t}():Set,xd=(1<<Math.log2(16))-1,Ed={averageCellOccupancy:{configurable:!0},size:{configurable:!0}};yd.prototype.setMinCellSize=function(t){return this._minCellSize=t,this},yd.prototype.setOffset=function(t){return this._offset=t,this._min=-t,this._max=t,this._resolution=65535/(this._max-this._min),this},yd.prototype.setIntersector=function(t){return this._intersects=t,this},yd.prototype.setBoundsGetter=function(t){return this._getBounds=t,this},yd.prototype.insert=function(t,e){void 0===e&&(e=this._getBounds(t));var n,r=Math.max(e[2]-e[0],e[3]-e[1]),i=this._minCellSize;for(n=0;i<r&&n<16;n++)i*=2;var o=this._resolution,s=this._min,a=o*(.5*(e[2]+e[0])-s)/i|0,u=o*(.5*(e[3]+e[1])-s)/i|0,c=_d(a,u,n);this._cells.has(c)||this._cells.addEntry(c),this._cells.addTo(c,t),this._objectsAtLevel[n]++,this._occupied|=1<<n;var l=4*n,d=this._bounds;return a<d[l]&&(d[l]=a),u<d[1+l]&&(d[1+l]=u),a>d[2+l]&&(d[2+l]=a),u>d[3+l]&&(d[3+l]=u),this._idToCode.set(t,c),c},yd.prototype.has=function(t){return this._idToCode.has(t)},yd.prototype.update=function(t,e){return this.remove(t),this.insert(t,e)},yd.prototype.remove=function(t){var e=this._idToCode.get(t);vd(e,this._codeCache);var n=this._codeCache[2];return 0==--this._objectsAtLevel[n]&&(this._occupied&=~(1<<n),this._bounds[4*n]=1/0,this._bounds[4*n+1]=1/0,this._bounds[4*n+2]=-1/0,this._bounds[4*n+3]=-1/0),this._cells.removeFrom(e,t),this._idToCode.delete(t),this},yd.prototype.query=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=this._cells,s=this._bounds,a=this._intersects,u=this._min,c=this._resolution,l=this._minCellSize,d=this._occupied,h=[];e=c*(e-u),n=c*(n-u),r=c*(r-u),i=c*(i-u);for(var f=0;f<16&&0!==d;l*=2,d>>=1,f++)if(0!=(1&d))for(var p=1/l,g=4*f,_=Math.max(s[g],e*p-1>>0),v=Math.max(s[1+g],n*p-1>>0),y=Math.min(s[2+g],r*p+1>>0),m=Math.min(s[3+g],i*p+1>>0),b=_;b<=y;b++)for(var x=v;x<=m;x++){var E=_d(b,x,f),w=o.getItems(E);if(void 0!==w)for(var S=0;S<w.length;S++){var A=w[S];a(A,t)&&h.push(A)}}return h},yd.prototype.collisions=function(t,e){if(void 0===e&&(e=this._getBounds),"function"!=typeof e)throw new Error("getBounds function is required to get the object bounds");for(var n=Array.from(this._idToCode.keys()),r=this._min,i=this._resolution,o=this._cells,s=new md,a=[],u=0;u<n.length;u++){var c=0,l=this._minCellSize,d=this._occupied,h=n[u],f=e(h),p=f[0],g=f[1],_=f[2],v=f[3],y=Math.max(_-p,v-g);for(c=0;l<y;c++)l*=2,d>>=1;p=i*(p-r),g=i*(g-r),_=i*(_-r),v=i*(v-r);for(var m=c;m<16&&0!==d;l*=2,d>>=1,m++)if(0!=(1&d))for(var b=1/l,x=g*b-1>>0,E=_*b+1>>0,w=v*b+1>>0,S=p*b-1>>0;S<=E;S++)for(var A=x;A<=w;A++){var C=_d(S,A,m);if(s.get(C)!==u){s.set(C,u);var T=o.getItems(C);if(void 0!==T)for(var k=0;k<T.length;k++){var I=T[k];I!==h&&t(h,I)&&a.push(h,I)}}}}return function(t){for(var e=new bd,n=[],r=0;r<t.length;r+=2){var i=t[r],o=t[r+1],s=i<o?i*o+(o-i-1)*(o-i-1)/4:i*o+(i-o-1)*(i-o-1)/4;e.has(s)||(e.add(s),n.push(i,o))}return n}(a)},yd.prototype.clear=function(){this._occupied=0,this._cells.clear(),this._idToCode.clear(),this._objectsAtLevel=new Array(16).fill(0),this._bounds=new Array(64);for(var t=0;t<16;t++)this._bounds[4*t]=1/0,this._bounds[4*t+1]=1/0,this._bounds[4*t+2]=-1/0,this._bounds[4*t+3]=-1/0;return this},yd.prototype.keyToBBox=function(t){var e=vd(t),n=e[0],r=e[1],i=e[2],o=this._minCellSize*(1<<i),s=this._min,a=this._resolution;return[n*o/a+s,r*o/a+s,(n+1)*o/a+s,(r+1)*o/a+s]},yd.prototype.keys=function(){return Object.keys(this._cells._idToIndex)},Ed.averageCellOccupancy.get=function(){return this._cells.averageSize},Ed.size.get=function(){return this._idToCode.size},Object.defineProperties(yd.prototype,Ed),yd.code=_d,yd.decode=vd;var wd,Sd=["x","y","radius"],Ad=["width","curvature"],Cd=(E(Td,wd=xe),Td.prototype._getIntersector=function(){var t=this._graph,e=t.getNodeAttributes(["x","y","radius"]),n=e[0],r=e[1],i=e[2],o=t.getEdgeAttributes(["source","target","width","curvature"]),s=o[0],a=o[1],u=o[2],c=o[3],l={x:0,y:0,x1:0,y1:0,x2:0,y2:0};return function(t,e){if(t<0){t=-t;var o=s.get(t),d=a.get(t),h=c.get(t),f=u.get(t)/2,p=n.get(o),g=r.get(o),_=n.get(d),v=r.get(d);return o===d?(Cs(p,g,h,i.get(o),0,l),Da(p,g,l.x1,l.y1,l.x2,l.y2,_,v,e[0]-f,e[1]-f,e[2]+f,e[3]+f)):0===h?ka(p,g,_,v,e[0]-f,e[1]-f,e[2]+f,e[3]+f):(As(p,g,_,v,h,l),Ra(p,g,l.x,l.y,_,v,e[0]-f,e[1]-f,e[2]+f,e[3]+f))}return xc(n.get(t),r.get(t),i.get(t),e[0],e[1],e[2],e[3])}},Td.prototype.reindex=function(){this._graphics.forceAttributesComputation(),this._index.clear(),this._elementsToUpdate.clear(),this._updateItems(this._graph.getNodes("all")._indexes,this._graph.getEdges("all")._indexes)},Td.prototype.getSize=function(){return this._index.size},Td.prototype._updateIndex=function(){if(!this._elementsToUpdate.isEmpty()){var t=this._elementsToUpdate.getElements(),e=t.nodes,n=t.edges;this._updateItems(e._indexes,n._indexes),this._elementsToUpdate.clear()}},Td.prototype._updateItems=function(t,e){var n=this._index,r=this._removedNodes,i=this._removedEdges,o=this._excludedNodes,s=this._excludedEdges,a=[],u=[];if(r&&o)for(var c=0;c<t.length;c++){var l=t[c];0!==r.get(l)||0!==o.get(l)?a.push(l):(n.has(l)&&a.push(l),u.push(l))}if(i&&s)for(c=0;c<e.length;c++)l=-e[c],0!==i.get(-l)||0!==s.get(-l)?a.push(l):(n.has(l)&&a.push(l),u.push(l));for(var d=0,h=a;d<h.length;d++)l=h[d],n.remove(l);for(var f=0,p=u;f<p.length;f++)l=p[f],n.insert(l)},Td.prototype.getNodesInScreenByDistance=function(t){var e=t.getPositionOnScreen(),n=e.x,r=e.y;return this._graph.getNodes().filter((function(e){return e.isInScreen()&&e!==t})).sort((function(t,e){var i=t.getPositionOnScreen(),o=e.getPositionOnScreen();return Ds(i.x,i.y,n,r)-Ds(o.x,o.y,n,r)}))},Td.prototype.getNearestNodesForNode=function(t,e,n){void 0===e&&(e=240);var r=t.getPosition(),i=r.x,o=r.y;return this.getNearestNodes(i,o,e,n,t)},Td.prototype.getNearestNodes=function(t,e,n,r,i){if(this._updateIndex(),r){var o=this._camera.screenToGraphVector({x:n,y:n});n=Ds(0,0,o.x,o.y)}return this._getNearestNodes(t,e,n,i)},Td.prototype._getNearestNodes=function(t,e,n,r){for(var i=[],o=n*n,s=r?r._index:0,a=this._graph.getNodes()._indexes,u=this._graph.getNodeAttributes(["x","y"]),c=u[0],l=u[1],d=0,h=a.length;d<h;d++){var f=a[d];if(f!==s){var p=t-c.get(f),g=e-l.get(f);p*p+g*g<=o&&i.push(f)}}return this._graph.nodeList(new Uint32Array(i))},Td.prototype.queryRaw=function(t,e,n,r){this._updateIndex();var i=this._queryBounds;i[0]=t,i[1]=e,i[2]=n,i[3]=r;var o=this._index.query(i),s=this._queryResult,a=s.nodes,u=s.edges;a.length=u.length=0;for(var c=0;c<o.length;c++){var l=o[c];l<0?u.push(-l):a.push(l)}return this._queryResult},Td.prototype.queryRawProjected=function(t,e,n,r){var i=this._queryBounds;return i[0]=t,i[1]=e,i[2]=n,i[3]=r,this._camera.projectBounds(i),this.queryRaw(i[0],i[1],i[2],i[3])},Td.prototype.query=function(t,e,n,r){var i=this._graph,o=this.queryRaw(t,e,n,r),s=o.nodes,a=o.edges;return{nodes:i.nodeList(new Uint32Array(s.slice())),edges:i.edgeList(new Uint32Array(a.slice()))}},Td.prototype.queryProjected=function(t,e,n,r){var i=this._graph,o=this.queryRawProjected(t,e,n,r),s=o.nodes,a=o.edges;return{nodes:i.nodeList(new Uint32Array(s.slice())),edges:i.edgeList(new Uint32Array(a.slice()))}},Td.prototype.getNodesByBoundingBox=function(t,e,n,r,i){if(this._updateIndex(),i){var o=void 0;t=(o=this._camera.screenToGraphVector({x:t,y:e})).x,e=o.y,n=(o=this._camera.screenToGraphVector({x:n,y:r})).x,r=o.y}for(var s=this._graph,a=s.getNodes()._indexes,u=[],c=s.getNodeAttribute("excluded"),l=s.getNodeAttributes(["x","y"]),d=l[0],h=l[1],f=0,p=a.length;f<p;f++){var g=a[f];if(!c||!c.get(g)){var _=d&&d.get(g),v=h&&h.get(g);t<=_&&_<=n&&e<=v&&v<=r&&u.push(g)}}return s.nodeList(new Uint32Array(u))},Td.prototype.toggleDebug=function(t){t?(this._canvas=ti(),this._graphics.addCanvas(this._canvas),this._ctx=this._canvas.getContext("2d")):this._canvas&&(this._graphics.removeCanvas(this._canvas),this._canvas=this._ctx=null)},Td.prototype.renderDebug=function(t){if(!this._canvas||!this._ctx)return this.toggleDebug(!0);!function(t,e,n,r,i,o){function s(t,e){return{x:(t-m)*_,y:(e-x)*_}}var a=void 0===o?{}:o,u=a.cells,c=void 0===u||u,l=a.boxes,d=void 0===l||l,h=a.query,f=void 0===h||h,p=Tt(),g=-n.getAngle(),_=n.getZoom()*p,v=n.getView(),y=v.x,m=void 0===y?0:y,b=v.y,x=void 0===b?0:b,E=v.width,w=void 0===E?0:E,S=v.height,A=w*p/2,C=(void 0===S?0:S)*p/2,T=r.keys().map((function(t){return r.keyToBBox(t)})),k=Array.from(r._idToCode.keys()).map((function(t){return r._getBounds(t)}));if(t.clearRect(0,0,e.width,e.height),t.save(),t.translate(A,C),t.rotate(g),c&&(t.beginPath(),t.lineWidth=1,t.strokeStyle="#707070",T.forEach((function(e){var n=s(e[0],e[1]),r=s(e[2],e[3]);t.rect(n.x,n.y,r.x-n.x,r.y-n.y)})),t.stroke()),d&&(t.beginPath(),t.lineWidth=1,t.strokeStyle="#ff7070",k.forEach((function(e){var n=s(e[0],e[1]),r=s(e[2],e[3]);t.rect(n.x,n.y,r.x-n.x,r.y-n.y)})),t.closePath(),t.stroke()),f&&i){var I=i;t.beginPath(),t.lineWidth=2,t.strokeStyle="#3030ff";var O=s(I[0],I[1]),M=s(I[2],I[3]);t.rect(O.x,O.y,M.x-O.x,M.y-O.y),t.closePath(),t.stroke()}t.restore()}(this._ctx,this._canvas,this._camera,this._index,this._queryBounds,t)},Td);function Td(t){var e,n,r,i,o,s,a,u,c,l,d,h,f=t.graph,p=t.camera,g=t.graphics,_=t.events,v=wd.call(this)||this;return v._minCellSize=8,v._clear=function(){v._index.clear(),v._elementsToUpdate.clear()},v._onGraphUpdate=function(t){if(t.nodes&&(!t.nodeAttributes||t.nodeAttributes.some((function(t){return Sd.includes(t)})))){var e=t.nodes.fastGetAdjacentElements().edges;v._elementsToUpdate.addElements(t.nodes),v._elementsToUpdate.addElements(e)}t.edges&&(t.edgeAttributes&&!t.edgeAttributes.some((function(t){return Ad.includes(t)}))||v._elementsToUpdate.addElements(t.edges))},v._graph=f,v._camera=p,v._graphics=g,v._index=new yd(v._getIntersector(),(r=(n=v._graph).getNodeAttributes(["x","y","radius"]),i=r[0],o=r[1],s=r[2],a=n.getEdgeAttributes(["source","target","curvature"]),u=a[0],c=a[1],l=a[2],d={x:0,y:0,x1:0,y1:0,x2:0,y2:0},h={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},function(t){if(t<0){t=-t;var e=u.get(t),n=c.get(t),r=l.get(t),a=i.get(e),f=o.get(e),p=i.get(n),g=o.get(n);e===n?(Cs(a,f,r,s.get(e),0,d),ja(a,f,d.x1,d.y1,d.x2,d.y2,p,g,h)):0===r?(h.minX=Math.min(a,p),h.minY=Math.min(f,g),h.maxX=Math.max(a,p),h.maxY=Math.max(f,g)):(As(a,f,p,g,r,d),Va(a,f,d.x,d.y,p,g,h))}else{var _=i.get(t),v=o.get(t),y=s.get(t);h.minX=_-y,h.minY=v-y,h.maxX=_+y,h.maxY=v+y}return[h.minX,h.minY,h.maxX,h.maxY]}),v._minCellSize,1e6),v._elementsToUpdate=new Oo(v._graph),v._removedNodes=f.getNodeAttribute("removed"),v._removedEdges=f.getEdgeAttribute("removed"),v._excludedNodes=f.getNodeAttribute("excluded"),v._excludedEdges=f.getEdgeAttribute("excluded"),v._queryResult={edges:[],nodes:[]},v._queryBounds=[0,0,0,0],_.on(((e={})[[me.ADD_NODES,me.ADD_EDGES,me.REMOVE_NODES,me.REMOVE_EDGES,me.UPDATE_ATTRIBUTES].join(" ")]=v._onGraphUpdate,e[me.EXCLUDED_STATE_CHANGE]=function(t){var e=t.elements;v._elementsToUpdate.addElements(e)},e[me.CLEAR_GRAPH]=v._clear,e)),v}var kd,Id,Od,Md=(E(Ld,kd=xe),Ld.prototype.onMounted=function(){this.locateGraph({},!0)},Ld.prototype.locateGraph=function(t,e){var n=this;return void 0===e&&(e=!1),e?this._locateGraph(t):this._transformations.whenApplied().then((function(){return n._locateGraph(t)}))},Ld.prototype._locateGraph=function(t){return this._locateBoundingBox(this.getGraphBoundingBox(),t)},Ld.prototype.locateElements=function(t,e){var n=this;return this._transformations.whenApplied().then((function(){return n._locateBoundingBox(n.getBoundingBox(t),e)}))},Ld.prototype.locateRawGraph=function(t,e){return this._locateBoundingBox(this.getRawGraphBoundingBox(t),e)},Ld.prototype.getGraphBoundingBox=function(){return this._cacheValid||this._updateCache(),Object.assign({},this._cachedGraphBoundingBox)},Ld.prototype.forceInvalidCache=function(){this._invalidCache()},Ld.prototype._updateCache=function(){this._cacheValid=!0,this._cachedGraphBoundingBox=this.getBoundingBox(this._graph.getNodes())},Ld.prototype.getBoundingBox=function(t,e){return t.isNode?this._getNodesBoundingBox(t.toList()):this._getEdgesBoundingBox(t.toList(),e)},Ld.prototype._getNodesBoundingBox=function(t){this._graphics.forceAttributesComputation();for(var e=this._graphics.getNodeAttributes(),n=[],r=[],i=[],o=[],s=0;s<t.size;++s){var a=t._indexes[s];if(0===e.excluded.get(a)){var u=e.x.get(a),c=e.y.get(a),l=2*e.radius.get(a);"scaled"===e.scalingMethod.get(a)?i.push(l):o.push(l),n.push(u),r.push(c)}}return new Lo({xValues:n,yValues:r,scaledSizeValues:i,fixedSizeValues:o})},Ld.prototype._getEdgesBoundingBox=function(t,e){void 0===e&&(e=!1),this._graphics.forceAttributesComputation();for(var n=this._graphics.getEdgeAttributes(),r=this._graphics.getNodeAttributes(),i={x1:0,y1:0,x2:0,y2:0},o={x:0,y:0},s={minX:0,minY:0,maxX:0,maxY:0},a=[],u=[],c=[],l=[],d=0;d<t.size;++d){var h=t._indexes[d],f=n.source.get(h),p=n.target.get(h),g=n.curvature.get(h),_=r.x.get(f),v=r.y.get(f),y="scaled"===r.scalingMethod.get(f),m=2*r.radius.get(f),b=r.x.get(p),x=r.y.get(p),E="scaled"===r.scalingMethod.get(p),w=2*r.radius.get(p);y?c.push(m):l.push(m),E?c.push(w):l.push(w),e||0===g?(a.push(_,b),u.push(v,x)):(f===p?(Cs(_,v,g,m/2,0,i),ja(_,v,i.x1,i.y1,i.x2,i.y2,b,x,s)):(As(_,v,b,x,g,o),Va(_,v,o.x,o.y,b,x,s)),a.push(s.minX,s.maxX),u.push(s.minY,s.maxY))}return new Lo({xValues:a,yValues:u,scaledSizeValues:c,fixedSizeValues:l})},Ld.prototype.getRawGraphBoundingBox=function(t){for(var e=t.nodes.length,n=new Array(e),r=new Array(e),i=new Array(e),o=0;o<e;o++){var s=t.nodes[o].attributes||{};n[o]=s.x||0,r[o]=s.y||0,i[o]=s.radius||5}return new Lo({xValues:n,yValues:r,scaledSizeValues:i})},Ld.prototype._computeCameraConfig=function(t,e,n){"number"==typeof e&&(e={left:e,right:e,top:e,bottom:e});var r,i=void 0===e.left?40:e.left,o=void 0===e.right?40:e.right,s=void 0===e.top?40:e.top,a=void 0===e.bottom?40:e.bottom,u=this._dom.getDimensions(),c=i+o,l=s+a,d=0===t.width?t.maxFixedSize:t.width,h=0===t.height?t.maxFixedSize:t.height,f=(r=[(u.width-c)/(d+t.maxScaledSize),(u.height-l)/(h+t.maxScaledSize),(u.width-c-t.maxFixedSize)/d,(u.height-l-t.maxFixedSize)/h,n/t.maxScaledSize||NaN].filter((function(t){return isFinite(t)&&0<t}))).length?Ke(r):1;return{x:t.cx+(o-i)/(2*f),y:t.cy+(a-s)/(2*f),zoom:f}},Ld.prototype._locateBoundingBox=function(t,e){if(void 0===e&&(e={}),isNaN(t.cx))return Promise.resolve();var n=e.padding,r=void 0===n?{}:n,i=e.easing,o=void 0===i?"quadraticInOut":i,s=e.duration,a=void 0===s?0:s,u=e.maxNodeSizeOnScreen,c=void 0===u?200:u,l=e.ignoreZoomLimits,d=void 0!==l&&l,h=this._computeCameraConfig(t,r,c),f=h.x,p=h.y,g=h.zoom,_=g/this._camera.getZoom();return this._moveCamera(f,p,g,a,o,_,d)},Ld.prototype._moveCamera=function(t,e,n,r,i,o,s){return 1.01<o?(this._camera.setCenter({x:t,y:e},{duration:r,easing:i,ignoreZoomLimits:s}),this._camera.setZoom(n,{duration:r,easing:i,ignoreZoomLimits:s,startAfter:.5})):o<.99?(this._camera.setCenter({x:t,y:e},{duration:r,easing:i,ignoreZoomLimits:s,startAfter:.5}),this._camera.setZoom(n,{duration:r,easing:i,ignoreZoomLimits:s})):this._camera.setCenter({x:t,y:e},{duration:r,easing:i,ignoreZoomLimits:s})},Ld.prototype.computeConfigForBounds=function(t,e){void 0===e&&(e={});var n=e.padding,r=void 0===n?{}:n,i=e.maxNodeSizeOnScreen,o=void 0===i?200:i;return this._computeCameraConfig(t,r,o)},Ld.prototype.layoutDataBoundingBox=function(t){for(var e=t.x,n=t.y,r=t.indexes,i=this._graphics.getNodeAttributes(),o=[],s=[],a=[],u=[],c=0;c<r.length;++c){var l=r[c],d=e[c],h=n[c],f=2*i.radius.get(l),p="scaled"===i.scalingMethod.get(l);o.push(d),s.push(h),p?a.push(f):u.push(f)}return new Lo({xValues:o,yValues:s,scaledSizeValues:a,fixedSizeValues:u})},Ld.prototype.isEdgeInPolygon=function(t,e){var n=t.getSource(),r=t.getTarget(),i=n.getPositionOnScreen(),o=r.getPositionOnScreen();if(Qc(i.x,i.y,e)||Qc(o.x,o.y,e))return!0;for(var s=Nd(t,this._camera.getZoom()),a=0;a<s.length-1;++a)for(var u=s[a],c=s[a+1],l=0;l<e.length-1;++l){var d=e[l],h=e[l+1];if(Ta(u.x,u.y,c.x,c.y,d.x,d.y,h.x,h.y))return!0}return!1},Ld.prototype.isElementInView=function(t,e){var n=(void 0===e?{}:e).margin,r=void 0===n?0:n,i=this._camera.getSize(),o={minX:-r,minY:-r,maxX:i.width+r,maxY:i.height+r};return t.isNode?this.isNodeInRectangle(t,o):this.isEdgeInRectangle(t,o)},Ld.prototype.isNodeInRectangle=function(t,e){var n=t.getPositionOnScreen(),r=t.getAttribute("radius")*this._camera.getZoom(),i=n.x-r,o=n.y-r,s=n.x+r,a=n.y+r;return s>=e.minX&&i<=e.maxX&&a>=e.minY&&o<=e.maxY},Ld.prototype.isNodeInPolygon=function(t,e){var n=t.getPositionOnScreen();return Qc(n.x,n.y,e)},Ld.prototype.isEdgeInRectangle=function(t,e){for(var n=Nd(t,this._camera.getZoom()),r=0;r<n.length-1;++r){var i=n[r],o=n[r+1];if(ka(i.x,i.y,o.x,o.y,e.minX,e.minY,e.maxX,e.maxY))return!0}return!1},Ld);function Ld(t){var e,n=t.dom,r=t.events,i=t.camera,o=t.graphics,s=t.graph,a=t.transformations,u=kd.call(this)||this;return u._cacheValid=!0,u._cachedGraphBoundingBox=new Lo,u._invalidCache=function(){u._cacheValid=!1},u._dom=n,u._events=r,u._camera=i,u._graph=s,u._graphics=o,u._transformations=a,u._events.on(((e={})[[me.ADD_NODES,me.REMOVE_NODES,me.ADD_EDGES,me.REMOVE_EDGES,me.EXCLUDED_STATE_CHANGE,me.CLEAR_GRAPH,me.UPDATE_ATTRIBUTES].join(" ")]=u._invalidCache,e)),u}function Nd(t,e){var n=t.getAttribute("curvature"),r=t.getSource(),i=t.getTarget(),o=r.getPositionOnScreen();if(r===i){var s=5*(n+r.getAttribute("radius"))*e,a=o.x,u=o.y,c=a-s,l=u,d=a,h=u+s;return A([o],[.2,.4,.6,.8].map((function(t){return Ba(t,a,u,a,u,c,l,d,h)})),[o])}var f=i.getPositionOnScreen();if(0===n)return[o,f];var p=f.x-o.x,g=f.y-o.y,_=Math.sqrt(p*p+g*g),v=(o.x+f.x)/2,y=(o.y+f.y)/2,m=n*(_/5)*2,b=v+g/_*m,x=y+-p/_*m;return A([o],[.25,.5,.75].map((function(t){return Fa(t,o.x,o.y,f.x,f.y,b,x)})),[f])}(Od=Id=Id||{}).LEFT="left",Od.MIDDLE="middle",Od.RIGHT="right";var Rd,Pd=gt&&"msLaunchUri"in navigator&&!("documentMode"in document),Dd=(E(Fd,Rd=xe),Object.defineProperty(Fd.prototype,"x",{get:function(){return this._position.x},enumerable:!0,configurable:!0}),Object.defineProperty(Fd.prototype,"y",{get:function(){return this._position.y},enumerable:!0,configurable:!0}),Object.defineProperty(Fd.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(Fd.prototype,"right",{get:function(){return this._right},enumerable:!0,configurable:!0}),Object.defineProperty(Fd.prototype,"middle",{get:function(){return this._middle},enumerable:!0,configurable:!0}),Fd.prototype._isEnabled=function(){return this._settings.get("mouse.enabled")},Fd.prototype._isWheelEnabled=function(){return this._settings.get("mouse.wheelEnabled")},Fd.prototype._disableWheelUntilMouseDown=function(){return this._settings.get("mouse.disableWheelUntilMouseDown")},Fd.prototype._getDoubleClickTimer=function(){return this._settings.get("mouse.doubleClickTimer")},Fd.prototype._resetClickCounter=function(t,e){void 0===e&&(e=0),t?this._clickCounter[t]=e:(this._clickCounter.left=e,this._clickCounter.middle=e,this._clickCounter.right=e),this._dom.clearTimeout(this._dbclickTimer),this._lastMouseDownTarget=null},Fd.prototype._setXY=function(t){var e=this._domElt.getBoundingClientRect();return!!(this._bounds=e)&&(this._evt=t,this._button=Yt[t.button],this._px=this._position.x,this._py=this._position.y,this._position.x=t.clientX-e.left,this._position.y=t.clientY-e.top,this._left=this._buttons.left,this._right=this._buttons.right,this._middle=this._buttons.middle,!0)},Fd.prototype._applyMouseWheelZoom=function(t){var e;this._setXY(t)&&this._events.fire(me.MOUSE_WHEEL,{delta:(e=t,Pd?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Tt():e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0),x:this._position.x,y:this._position.y,domEvent:this._evt})},Fd.prototype._initializeListeners=function(){var t=this,e=this._domElt,n=this._dom;vt&&this._dom.addElementEventListener(document,"contextmenu",(function(e){t._lastMouseDownTarget&&e.target!==t._lastMouseDownTarget&&e.preventDefault()})),n.addElementEventListener(e,"contextmenu",(function(e){t._setXY(e),t._dom.hasFocus()&&t._settings.get("mouse.enabled")&&e.preventDefault()}),!1);var r="onwheel"in e?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll";n.addElementEventListener(e,r,this._onMouseWheel),n.addElementEventListener(e,"mousemove",this._onMouseMove),n.addElementEventListener(e,"mouseleave",(function(){t._isEnabled()&&(t._dom.blur(),t._events.fire(me.MOUSE_LEAVE,{domEvent:t._evt}))})),n.addElementEventListener(e,"mousedown",this._onMouseDown),n.addElementEventListener(e,"mouseup",this._onMouseUp),n.addElementEventListener(e,"dragover",(function(t){t.preventDefault()})),n.addElementEventListener(e,"drop",this._onDrop)},Fd);function Fd(t){var e=t.dom,n=t.position,r=t.settings,i=t.events,o=t.graphics,s=t.camera,a=Rd.call(this)||this;return a._px=0,a._py=0,a._pressX=0,a._pressY=0,a._left=!1,a._middle=!1,a._right=!1,a._clickCounter={left:0,middle:0,right:0},a._buttons={left:!1,middle:!1,right:!1},a._skipNextMove=!1,a._onMouseWheel=function(t){a._isEnabled()&&a._isWheelEnabled()&&(!a._disableWheelUntilMouseDown()||a._dom.hasFocus())&&(t.preventDefault(),t.stopPropagation(),a._applyMouseWheelZoom(t))},a._onMouseMove=function(t){if(a._isEnabled()&&a._setXY(t)){var e=a._position.x,n=a._position.y,r=e-a._px,i=n-a._py;0==r&&0==i||(a._skipNextMove?a._skipNextMove=!1:6<=Ds(e,n,a._pressX,a._pressY)&&(a._resetClickCounter(),a._events.fire(me.MOUSE_MOVE,{x:e,y:n,dx:r,dy:i,domEvent:a._evt})))}},a._onDocumentMouseMove=function(t){if(a._isEnabled()&&a._setXY(t)){var e=a._position.x,n=a._position.y,r=a._bounds,i=e-a._px,o=n-a._py;(e<0||e>r.width||n<0||n>r.height)&&a._events.fire(me.DOCUMENT_MOUSE_MOVE,{x:e,y:n,dx:i,dy:o,domEvent:a._evt})}},a._onMouseUp=function(t){if(a._isEnabled()&&a._setXY(t)){var e=a._position.x,n=a._position.y,r=a._button,i=a._evt;a._buttons[r]=!1,1===a._clickCounter[a._button]?a._events.fire(me.MOUSE_CLICK,{button:r,x:e,y:n,domEvent:i}):1<a._clickCounter[r]&&(a._events.fire(me.MOUSE_DOUBLE_CLICK,{button:r,x:e,y:n,domEvent:i}),a._resetClickCounter(r)),a._events.fire(me.MOUSE_UP,{button:r,x:e,y:n,domEvent:i})}},a._onDocumentMouseup=function(t){if(a._isEnabled()&&a._setXY(t)){var e=a._position.x,n=a._position.y,r=a._button;a._buttons[r]=!1;var i=a._dom;a._events.fire(me.DOCUMENT_MOUSE_UP,{button:r,x:e,y:n,domEvent:a._evt}),i.removeDirectWindowEventListener("mousemove",a._onDocumentMouseMove),i.removeDirectWindowEventListener("mouseup",a._onDocumentMouseup)}},a._onMouseDown=function(t){if(a._isEnabled()&&a._setXY(t)){var e=a._position.x,n=a._position.y,r=a._button,i=a._dom;a._skipNextMove=!0,a._pressX=e,a._pressY=n,a._lastMouseDownTarget=t.target,i.focus(),a._buttons[r]=!0,a._clickCounter[r]+=1;var o=r;a._dbclickTimer=i.setTimeout((function(){a._resetClickCounter(o,0)}),a._getDoubleClickTimer()),a._events.fire(me.MOUSE_DOWN,{button:r,x:e,y:n,domEvent:a._evt}),i.addDirectWindowEventListener("mousemove",a._onDocumentMouseMove),i.addDirectWindowEventListener("mouseup",a._onDocumentMouseup)}},a._onDrop=function(t){if(a._isEnabled()&&a._setXY(t)){t.preventDefault();var e=a._camera.screenToGraphCoordinates(a._position),n=e.x,r=e.y;a._events.fire(me.DROP,{domEvent:a._evt,x:n,y:r})}},a._dom=e,a._settings=r,a._events=i,a._graphics=o,a._position=n,a._camera=s,a._domElt=a._graphics.getDomElement(),r.register("mouse.enabled",!0),r.register("mouse.wheelEnabled",!0),r.register("mouse.disableWheelUntilMouseDown",!1),r.register("mouse.doubleClickTimer",500),i.register([me.MOUSE_DOWN,me.MOUSE_UP,me.MOUSE_MOVE,me.MOUSE_WHEEL,me.MOUSE_CLICK,me.MOUSE_DOUBLE_CLICK,me.MOUSE_LEAVE,me.DOCUMENT_MOUSE_UP,me.DOCUMENT_MOUSE_MOVE,me.DROP]),e.afterNextFrame().then((function(){return a._initializeListeners()})),a}var zd,Bd=(E(Ud,zd=xe),Object.defineProperty(Ud.prototype,"x",{get:function(){return this._position.x},enumerable:!0,configurable:!0}),Object.defineProperty(Ud.prototype,"y",{get:function(){return this._position.y},enumerable:!0,configurable:!0}),Object.defineProperty(Ud.prototype,"pressed",{get:function(){return this._pressed},enumerable:!0,configurable:!0}),Ud.prototype._listen=function(t,e,n){if(oe){if(e===ne.START)return function(t,e,n){function r(t){he(t)||(fe(t)&&t.preventDefault(),ve(t,n))}return t(e,se,r,!1),r}(this._addEvent,t,n);if(e===ne.MOVE)return function(t,e,n){function r(t){he(t)&&0===t.buttons||ve(t,n)}return t(e,ae,r,!1),r}(this._addWinEvent,t,n);if(e===ne.END)return function(t,e,n){function r(t){return ve(t,n)}return t(e,ue,r,!1),t(e,ce,r,!1),r}(this._addWinEvent,t,n);if(e===ne.CANCEL)return function(t,e,n){function r(t){fe(t)&&t.preventDefault(),ve(t,n)}return t(e,ce,r,!1),r}(this._addWinEvent,t,n)}return this._dom.addElementEventListener(t,e,n)},Ud.prototype._initialize=function(t){function e(){a._position.x=u,a._position.y=c,a._pressed=h}function n(t,n){var r=a._domElt.getBoundingClientRect();if(!r||null==t.touches)return null;var i=t.touches[0].clientX-r.left,o=t.touches[0].clientY-r.top,s=t.touches[1].clientX-r.left,l=t.touches[1].clientY-r.top,d=(i+s)/2,h=(o+l)/2,f=d-u,p=h-c,g=Ds(i,o,s,l),_=g/v,m=Sa(i,o,s,l),b={dx:f,dy:p,rotation:m-y,scale:_};return v=g,y=m,u=d,c=h,e(),b}function r(t){if(f=Yt[t.button],t.touches){if(1!==t.touches.length)return h=!1,1<t.touches.length&&a._events.fire(me.TOUCH_UP,{x:u,y:c,domEvent:m,button:f}),0;var n=a._domElt.getBoundingClientRect();return n&&(l=u,d=c,u=t.touches[0].clientX-n.left|0,c=t.touches[0].clientY-n.top|0,h=!0,m=t,e()),1}}function i(){p=0,a._dom.clearTimeout(b)}function o(t){if(t.preventDefault(),t.touches){if(2!==t.touches.length&&_&&(_=!1,a._events.fire(me.TOUCH_END_GESTURE,{domEvent:m})),r(t),0===t.touches.length){var e={x:u,y:c,domEvent:m,button:f};1===p&&a._events.fire(me.TOUCH_TAP,e),1<p&&(a._events.fire(me.TOUCH_DOUBLE_TAP,e),i()),a._events.fire(me.TOUCH_UP,e)}var n=Et().documentElement;ye(a._removeWinEvent,n,ne.MOVE,a._onMove),ye(a._removeWinEvent,n,ne.END,a._onEnd)}}function s(t){!function(t){if(t.touches&&2===t.touches.length&&_){var e=n(t);if(e){var r=e.dx,i=e.dy,o=e.rotation,s=e.scale;a._events.fire(me.TOUCH_PROGRESS_GESTURE,{dx:r,dy:i,rotation:o,scale:s,x:u,y:c,domEvent:m,button:f})}}}(t),g?g=!1:(i(),r(t)&&a._events.fire(me.TOUCH_MOVE,{x:u,y:c,dx:u-l,dy:c-d,domEvent:m,button:f}))}var a=this,u=0,c=0,l=0,d=0,h=!1,f=Id.LEFT,p=0,g=!1,_=!1,v=1,y=0,m=null,b=null;this._listen(this._domElt,ne.START,(function(t){if(t.touches){2!==t.touches.length||_||n(t)&&(_=!0,a._events.fire(me.TOUCH_START_GESTURE,{domEvent:m})),r(t)&&(a._dom.focus(),a._events.fire(me.TOUCH_DOWN,{x:u,y:c,domEvent:m,button:f}),p+=1,b=a._dom.setTimeout(i,500),g=!0);var e=Et().documentElement;a._onMove=a._listen(e,ne.MOVE,s),a._onEnd=a._listen(e,ne.END,o)}}))},Ud);function Ud(t){var e=t.dom,n=t.events,r=t.settings,i=t.graphics,o=t.position,s=zd.call(this)||this;return s._pressed=!1,s._addEvent=function(t,e,n,r){s._dom.addElementEventListener(t,e,n,r)},s._addWinEvent=function(t,e,n,r){s._dom.addDirectWindowEventListener(e,n,r)},s._removeWinEvent=function(t,e,n){s._dom.removeDirectWindowEventListener(e,n)},s._dom=e,s._events=n,s._settings=r,s._graphics=i,s._position=o,s._domElt=s._graphics.getDomElement(),s._settings.register("touch.enabled",!0),s._events.register([me.TOUCH_DOWN,me.TOUCH_UP,me.TOUCH_TAP,me.TOUCH_DOUBLE_TAP,me.TOUCH_MOVE,me.TOUCH_START_GESTURE,me.TOUCH_PROGRESS_GESTURE,me.TOUCH_END_GESTURE,me.DOCUMENT_TOUCH_MOVE,me.DOCUMENT_TOUCH_UP]),s._dom.afterNextFrame().then((function(){s._initialize(s)})),s}function Vd(t,e,n,r){var i;if(r)i=r;else{i=new Uint32Array(t.length);for(var o=0,s=t.length;o<s;o++)i[o]=o}var a=n?function(t,e,n,r,i,o){var s=n-t,a=r-e,u=o-i,c=Math.sqrt(s*s+a*a);return[(t+n+s/c*u)/2,(e+r+a/c*u)/2,(c+i+o)/2]}:function(t,e,n,r){var i=t-n,o=e-r;return[(t+n)/2,(e+r)/2,Math.sqrt(i*i+o*o)/2]},u=n?function(t,e,n,r,i,o,s,a,u){var c=2*(t-n),l=2*(e-r),d=2*(a-s),h=t*t+e*e-s*s-n*n-r*r+a*a,f=2*(t-i),p=2*(e-o),g=2*(u-s),_=t*t+e*e-s*s-i*i-o*o+u*u,v=f*l-c*p,y=(l*_-p*h)/v-t,m=(p*d-l*g)/v,b=(f*h-c*_)/v-e,x=(c*g-f*d)/v,E=m*m+x*x-1,w=2*(y*m+b*x+s),S=y*y+b*b-s*s,A=(-w-Math.sqrt(w*w-4*E*S))/(2*E);return[y+m*A+t,b+x*A+e,A]}:function(t,e,n,r,i,o){var s=2*(t*(r-o)+n*(o-e)+i*(e-r));if(0==s)return null;var a=((t*t+e*e)*(r-o)+(n*n+r*r)*(o-e)+(i*i+o*o)*(e-r))/s,u=((t*t+e*e)*(i-n)+(n*n+r*r)*(t-i)+(i*i+o*o)*(n-t))/s,c=a-t,l=u-e;return[a,u,Math.sqrt(c*c+l*l)]},c=n?bc:mc;return n=n||[],function t(e,n,r,i,o,s,a,u,c){if(0===r||3===n.length)return d=i,h=o,f=s,p=u,g=c,1===(m=(l=n).length)?[d[_=l[0]],h[_],f[_]||0]:2===m?(_=l[0],v=l[1],p(d[_],h[_],d[v],h[v],f[_],f[v])):3===m?(_=l[0],v=l[1],y=l[2],g(d[_],h[_],d[v],h[v],d[y],h[y],f[_],f[v],f[y])):null;var l,d,h,f,p,g,_,v,y,m,b=e[r-1],x=t(e,n,r-1,i,o,s,a,u,c);return null!==x&&a(x,i[b],o[b],s[b])||(n.push(b),x=t(e,n,r-1,i,o,s,a,u,c),n.pop()),x}(i=function(t){for(var e=t.length-1;0<=e;e--){var n=Math.floor(Math.random()*(e+1));n=Math.max(Math.min(n,e),0);var r=t[e];t[e]=t[n],t[n]=r}return t}(i),[],i.length,t,e,n,c,a,u)}var jd,Hd=["x","y","radius"],Gd=(E(qd,jd=xe),qd.prototype.animateChildren=function(t,e,n){var r=this;t.getSubNodes().forEach((function(t){var i=r._subNodeOffsetX.get(t._index),o=r._subNodeOffsetY.get(t._index),s={x:n.x+i,y:n.y+o};t.setAttributes(s,e),t.getSubNodes()&&r.animateChildren(t,e,s)}))},qd.prototype.resetOffsets=function(){this._recursiveGuard=!0;var t=this._graph.getNodes(),e=this._topologyLayer.getFlexArrays().nodes;t.setAttribute("x",e.x.getMultiple(t._indexes)),t.setAttribute("y",e.y.getMultiple(t._indexes)),e.x.reset(),e.y.reset(),this._recursiveGuard=!1},qd.prototype.addVisibleGroup=function(t,e){this._visualGroupsLayers.set(t._index,e),this._visibleGroups.add(t._index)},qd.prototype.getNodeDepth=function(t){return this._visualGroupsLayers.get(t._index)||0},qd.prototype.removeVisibleGroup=function(t){var e=t._index;this._visibleGroups.delete(e),this._groupsToHide.push(e),this._visualGroupsLayers.delete(e)},qd.prototype._getAllSubNodes=function(t){for(var e=Array.from(t._indexes),n=[],r=this._visibleGroups,i=this._subNodesList;0!==e.length;){var o=e.pop();if(null!=o&&r.has(o)){var s=i.get(o),a=Array.from(s._indexes);n.push.apply(n,a),e.unshift.apply(e,a)}}return this._graph.nodeList(new Uint32Array(n))},qd.prototype._getAllMetaNodes=function(t){for(var e=Array.from(t._indexes),n=this._visibleGroups,r=this._metaNodeList,i=[],o=new Set;0!==e.length;){var s=e.pop();if(null!=s){var a=r.get(s);null!==a&&!o.has(a._index)&&n.has(a._index)&&(o.add(a._index),i.push(a._index),e.unshift(a._index))}}return this._graph.nodeList(new Uint32Array(i))},qd.prototype.isVisibleGroup=function(t){return this._visibleGroups.has(t._index)},qd.prototype.getSubNodeOffset=function(t){return{x:this._subNodeOffsetX.get(t._index),y:this._subNodeOffsetY.get(t._index)}},qd.prototype._fetchSubEltsList=function(t){return t?this._subNodesList:this._subEdgesList},qd.prototype._fetchMetaEltList=function(t){return t?this._metaNodeList:this._metaEdgeList},qd.prototype.setSubElements=function(t,e){this._fetchSubEltsList(t.isNode).setMultiple(t._indexes,e)},qd.prototype.setMetaElement=function(t,e){this._fetchMetaEltList(t.isNode).setMultiple(t._indexes,e)},qd.prototype.getSubElements=function(t){return this._fetchSubEltsList(t.isNode).getMultiple(t._indexes)},qd.prototype.getMetaElement=function(t){return this._fetchMetaEltList(t.isNode).getMultiple(t._indexes)},qd);function qd(t){var e=t.graph,n=t.graphics,r=t.dom,i=t.events,o=jd.call(this)||this;return o._visibleGroups=new Set,o._visualGroupsLayers=new Map,o._groupsToHide=[],o._updateVisualGroups=function(t,e,n){var r=n.getUpdatedElementsList(),i=t.nodes.outputFlexArrays,s=t.nodes.inputFlexArrays,a=o._visibleGroups;if(0===r.size||0===a.size)return t.nodes.toUpdate.clear(),t.edges.toUpdate.clear(),t.nodes.formattedOutput&&(t.nodes.formattedOutput.attributes=[]),void(t.nodes.output&&(t.nodes.output.attributes=[]));for(var u=n.getUpdatedAttributes();0<o._groupsToHide.length;){var c=o._groupsToHide.pop();i.radius.set(c,void 0),i.x.set(c,void 0),i.y.set(c,void 0)}if(u.has("x")||u.has("y")||u.has("radius")){var l=o._getAllSubNodes(r),d=o._getAllMetaNodes(r),h=t.nodes.toUpdate,f=t.edges.toUpdate,p=o._subNodeOffsetX,g=o._subNodeOffsetY;t.nodes.formattedOutput&&t.nodes.output&&(t.nodes.formattedOutput.attributes=Hd,t.nodes.output.attributes=Hd);var _=new Set;r.forEach((function(t){var e=t._index;i.x.set(e,void 0),i.y.set(e,void 0),_.add(e)})),l.forEach((function(t){if(s){var e=t.getMetaNode(),n=t._index,r=s.x.get(n),o=s.y.get(n);if(e&&a.has(e._index)){var u=p.get(n),c=g.get(n),l=i.x.get(e._index),v=i.y.get(e._index),y=r-l,m=o-v;if(-1e7===u||-1e7===c)return p.set(n,y),g.set(n,m),void(d.includes(e)||(d=d.concat(e.toList())));h.addIndex(n),f.add(t.getAdjacentEdges()),_.has(n)||u===y&&c===m||(r=l+u,o=v+c,i.x.set(n,r),i.y.set(n,o)),p.set(n,r-l),g.set(n,o-v)}}})),d.forEach((function(t){var e=t.getSubNodes();if(e){var n=i.x.getMultiple(e._indexes),r=i.y.getMultiple(e._indexes),o=i.radius.getMultiple(e._indexes),s=Vd(n,r,o),a=s[0],u=s[1],c=s[2];e.forEach((function(t,e){p.set(t._index,n[e]-a),g.set(t._index,r[e]-u)})),i.x.set(t._index,a),i.y.set(t._index,u),i.radius.set(t._index,c),h.addIndex(t._index),f.add(t.getAdjacentEdges())}})),n.addUpdatedAttribute("radius"),n.addUpdatedAttribute("x"),n.addUpdatedAttribute("y"),n.redrawElements(d)}},o._graph=e,o._graphics=n,o._dom=r,o._subNodesList=e.createNodeAttribute({storage:"any",default:null}),o._subEdgesList=e.createEdgeAttribute({storage:"any",default:null}),o._metaNodeList=e.createNodeAttribute({storage:"any",default:null}),o._metaEdgeList=e.createEdgeAttribute({storage:"any",default:null}),o._subNodeOffsetX=e.createNodeAttribute({storage:"float",default:-1e7}),o._subNodeOffsetY=e.createNodeAttribute({storage:"float",default:-1e7}),o._recursiveGuard=!1,i.on(me.SET_MULTIPLE_ATTRIBUTES,(function(t){var e=t.elements,n=t.values,r=t.options;if(!o._recursiveGuard){var i=e.toList().map((function(t,e){return{group:t,translation:n.constructor===Array?{x:n[e]&&n[e].x||0,y:n[e]&&n[e].y||0}:{x:n.x||0,y:n.y||0},isGroup:t.isNode&&t.getSubNodes()}})).filter((function(t){return t.isGroup}));i.length&&(o._recursiveGuard=!0,i.forEach((function(t){var e=t.group,n=t.translation;o.animateChildren(e,r,n)})),o._recursiveGuard=!1)}})),o._groupAttributeLayer=n.addAttributeLayer({name:"internal(_compound)",priority:7,nodeSelector:function(t){return o._visibleGroups.has(t._index)},edgeSelector:function(t){return t.isVirtual()},nodeAttributes:{layer:function(t){return o._visualGroupsLayers.get(t._index)}},nodeOutput:{attributes:["layer"]},nodeDependencies:{self:{data:!1,hover:!0},adjacentNodes:{attributes:"all"},adjacentEdges:{attributes:"all"}}}),o._topologyLayer=o._graphics.addAttributeLayer({name:"internal(position-forcer)",priority:6.9,nodeDependencies:{self:{attributes:["x","y","radius"]},adjacentNodes:{attributes:"all"}},onBeforeUpdate:o._updateVisualGroups,nodeOutput:{attributes:["x","y","radius","layer"]}}),o}var Wd=(Yd.prototype.getName=function(){return this._module.getName(this._id)},Yd.prototype.getId=function(){return this._id},Yd.prototype.whenApplied=function(){return this._whenApplied},Yd.prototype.isEnabled=function(){return this._module.isEnabled(this._id)},Yd.prototype.enable=function(t){return this._module.enable(this._id,t)},Yd.prototype.disable=function(t){return this._module.disable(this._id,t)},Yd.prototype.toggle=function(t){return this._module.toggle(this._id,t)},Yd.prototype.getIndex=function(){return this._module.getIndex(this._id)},Yd.prototype.setIndex=function(t){var e=this;return this._module.setIndex(this._id,t).then((function(){return e}))},Yd.prototype.destroy=function(t){return this._module.remove(this._id,t||0)},Yd.prototype.refresh=function(){return this._module.refresh()},Yd.prototype.delete=function(t){return this.destroy(t)},Yd);function Yd(t,e){var n=this;this._module=t,this._id=e,this._whenApplied=t.whenApplied().then((function(){return n}))}var Xd=(Zd.prototype.cleanup=function(t){return Promise.resolve()},Zd);function Zd(t){}var Kd,Jd=(E(Qd,Kd=xe),Qd.prototype._invalidState=function(){var t=this;this._afterCurrentUpdate.then((function(){(t._list.length||t._currentPipeline.length)&&(t._mustRefresh=!0,t._dom.refresh())}))},Qd.prototype._onUpdate=function(){var t=this;return this._afterCurrentUpdate.then((function(){return t._dom.refresh(),new Promise((function(e,n){return t._resolvers.push({resolve:e,reject:n})}))}))},Qd.prototype._getSubElements=function(t){var e=this;return t.reduce((function(t,n){var r=e._ogma.modules.grouping.getSubElements(n)[0];return r?t.concat(e._getSubElements(r)):t.concat(n)}),t.slice(0,0))},Qd.prototype._assignTransformationIds=function(t,e,n){null!==e&&this._nodeTransformationIdList.setMultiple(e._indexes,t),null!==n&&this._nodeTransformationIdList.setMultiple(n._indexes,t)},Qd.prototype._resolveTransformations=function(t,e,n){var r=this;n||(t.forEach((function(t){return t.duration=0})),e.forEach((function(t){return t.duration=0})));for(var i=this._selection.getSelectedNodes().getId(),o=this._selection.getSelectedEdges().getId(),s=Promise.resolve(),a=function(n){var r=t[n];null!==r.context&&(s=s.then((function(){return r.methods.undo(r)}))),e.some((function(t){return t.id===r.id}))||(s=s.then((function(){return r.methods.cleanup(r)})).then((function(){r.context=null})))},u=t.length-1;0<=u;--u)a(u);var c=function(t){var n=e[t];s=s.then((function(){return n.methods.run(n)})).catch((function(t){return n.error=t,!0})).then((function(t){if(!0!==t){var e=t;return r._assignTransformationIds(n.id,e.virtualNodes,e.virtualEdges),n.context=e,n.methods.cleanup(n)}}))};for(u=0;u<e.length;++u)c(u);return s=s.then((function(){r._destroyed||(r._graph.getNodes(i).setSelected(!0),r._graph.getEdges(o).setSelected(!0))}))},Qd.prototype.getList=function(){return this._list.map((function(t){return t.wrapper}))},Qd.prototype.clear=function(){var t=this;return this._list=[],this._invalidState(),this._onUpdate().then((function(){return t._dom.afterNextFrame()}))},Qd.prototype._get=function(t,e){void 0===e&&(e=!0);for(var n=0;n<this._list.length;++n){var r=this._list[n];if(r.id===t)return r.index=n,r}if(e)throw new Error("calling a method on a destroyed transformation");return null},Qd.prototype.getName=function(t){var e=this._get(t);if(e)return e.methods.getName()},Qd.prototype.enable=function(t,e){var n=this;return this._afterCurrentUpdate.then((function(){var r=n._get(t);return r&&!r.enabled&&(r.enabled=!0,r.duration=e,n._invalidState()),n._onUpdate()}))},Qd.prototype._setRemovalDuration=function(t,e){for(var n=0;n<this._currentPipeline.length;++n){var r=this._currentPipeline[n];r.id===t&&(r.duration=e)}},Qd.prototype.disable=function(t,e){var n=this;return this._afterCurrentUpdate.then((function(){var r=n._get(t);return r&&r.enabled&&(r.enabled=!1,n._setRemovalDuration(t,e),n._invalidState()),n._onUpdate()}))},Qd.prototype.remove=function(t,e){var n=this;return this._afterCurrentUpdate.then((function(){var r=n._get(t);return r&&(n._list.splice(r.index,1),n._setRemovalDuration(t,e),n._invalidState()),n._onUpdate()}))},Qd.prototype.toggle=function(t,e){var n=this;return this._afterCurrentUpdate.then((function(){var r=n._get(t);return r&&r.enabled?n.disable(t,e):n.enable(t,e)}))},Qd.prototype.setIndex=function(t,e){var n=this;return this._afterCurrentUpdate.then((function(){var r=n._get(t);return r&&(n._list.splice(r.index,1),n._list.splice(We(e,0,n._list.length),0,r),n._invalidState()),n._onUpdate()}))},Qd.prototype.getIndex=function(t){var e=this._get(t);return e?e.index:-1},Qd.prototype.add=function(t,e){var n=void 0===e?{}:e,r=n.duration,i=void 0===r?0:r,o=n.enabled,s=void 0===o||o;t.cleanup||(t.cleanup=function(){return Promise.resolve()});var a={ogma:this._ogma,id:++this._idCounter,methods:t,duration:i,enabled:s,context:null,wrapper:new Wd(this,this._idCounter),index:-1,error:null};return this._list.push(a),this._invalidState(),a.wrapper},Qd.prototype.whenApplied=function(){return this._onUpdate()},Qd.prototype.refresh=function(){return this._invalidState(),this._onUpdate()},Qd.prototype.isEnabled=function(t){var e=this._get(t);return e&&e.enabled||!1},Qd.prototype._getElementTransformationId=function(t){return(t.isNode?this._nodeTransformationIdList:this._edgeTransformationIdList).get(t._index)},Qd.prototype.isElementVirtual=function(t){return 0!==this._graph.getAttribute(t.isNode,"virtual").get(t._index)},Qd.prototype.getElementTransformation=function(t){var e=this._get(this._getElementTransformationId(t),!1);return e&&e.wrapper},Qd.prototype.destroy=function(){this._destroyed=!0},Qd);function Qd(t,e){var n,r=t.settings,i=t.dom,o=t.events,s=t.captor,a=t.selection,u=t.classes,c=t.graph,l=Kd.call(this)||this;return l._list=[],l._currentPipeline=[],l._idCounter=0,l._mustRefresh=!1,l._safeGuard=!1,l._resolvers=[],l._afterCurrentUpdate=Promise.resolve(),l._destroyed=!1,l._computeTransformations=function(){if(l._safeGuard)return Promise.resolve();if(l._safeGuard=!0,l._afterCurrentUpdate=Promise.resolve(),l._mustRefresh){l._captor.setDetectionEnabled(!1);var t,e,n=l._currentPipeline.filter((function(t){return t.enabled})),r=l._list.filter((function(t){return t.enabled})),i=!1;if(n.length===r.length+1&&$d(n,r,r.length)){var o=n.pop();t=o?[o]:[],e=[],i=!0}else if(r.length===n.length+1&&$d(n,r,n.length)){t=[];var s=r.pop();e=s?[s]:[],i=!0}else t=n,e=r,i=!1;l._afterCurrentUpdate=l._afterCurrentUpdate.then((function(){return l._resolveTransformations(t,e,i)})).then((function(){return l._captor.setDetectionEnabled(!0),l._currentPipeline=l._list.map((function(t){return w({},t)})),l._mustRefresh=!1,l._dom.afterNextFrame()}))}return l._afterCurrentUpdate=l._afterCurrentUpdate.then((function(){l._safeGuard=!1,l._resolvers.forEach((function(t,e){var n=t.resolve,r=t.reject,i=l._list[e];return i&&i.error?r(i.error):n()})),l._resolvers=[]})),l._afterCurrentUpdate},l._settings=r,l._dom=i,l._events=o,l._graph=c,l._captor=s,l._classes=u,l._selection=a,l._ogma=e,u.createClass({name:gn,isBuiltin:!0,nodeAttributes:{opacity:0,radius:0},edgeAttributes:{opacity:0,width:0}}),l._classes.createClass({name:_n,isBuiltin:!0,nodeAttributes:{opacity:0},edgeAttributes:{opacity:0}}),l._nodeTransformationIdList=c.createNodeAttribute({storage:16,default:0}),l._edgeTransformationIdList=c.createEdgeAttribute({storage:16,default:0}),r.register("transformations.updateOnDataChange",!0),o.on(((n={})[[me.ADD_NODES,me.ADD_EDGES,me.REMOVE_NODES,me.REMOVE_EDGES].join(" ")]=function(t){t.virtual||l._invalidState()},n[me.REQUEST_ELEMENTS_TO_DELETE]=function(t){t.virtual||(t.elementsToRemove=l._getSubElements(t.elementsToRemove))},n[me.UPDATE_NODE_DATA+" "+me.UPDATE_EDGE_DATA]=function(){l._settings.get("transformations.updateOnDataChange")&&!l._safeGuard&&l._invalidState()},n[me.AFTER_NEW_FRAME]=l._computeTransformations,n)),l}function $d(t,e,n){for(var r=0;r<n;++r)if(t[r].id!==e[r].id)return;return 1}var th,eh={layer:2,outline:!0,outerStroke:{color:"red",width:5},innerStroke:{minVisibleSize:0},text:{backgroundColor:"rgb(220, 220, 220)",minVisibleSize:0}},nh={layer:2,color:"red",text:{backgroundColor:"rgb(220, 220, 220)",minVisibleSize:0},stroke:{width:2}},rh=(E(ih,th=xe),ih.prototype.onMounted=function(t){function e(){n._selectionExtremityHighlightedClass.clearNodes(),n._selectedClass.getEdges().getExtremities().addClass(dn)}var n=this;t.events.onEdgesClassAdded(ln,e),t.events.onEdgesClassRemoved(ln,e)},ih.prototype.setNodeAttributes=function(t,e){this._selectedClass.update({nodeAttributes:t,fullOverwrite:e}),this._selectionExtremityHighlightedClass.update({nodeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()},ih.prototype.setEdgeAttributes=function(t,e){this._selectedClass.update({edgeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()},ih.prototype._updateExtremityHighlightLayer=function(){var t=this._selectedClass.getDefinition().edgeAttributes,e=t?t.layer:void 0;this._selectionExtremityHighlightedClass.update({nodeAttributes:{layer:e},fullOverwrite:!1})},ih.prototype.setActive=function(t,e){if(N(e)){var n=[],r=[];t.toList().forEach((function(t,i){(e[i]?n:r).push(t.getId())})),0!==n.length&&this._graph.getElements(t.isNode,n).addClass(ln),0!==r.length&&this._graph.getElements(t.isNode,r).removeClass(ln)}else t[e?"addClass":"removeClass"](ln)},ih.prototype.areActive=function(t){return t.hasClass(ln)},ih.prototype.getSelectedNodes=function(){return this._selectedClass.getNodes()},ih.prototype.getSelectedEdges=function(){return this._selectedClass.getEdges()},ih.prototype.getNonSelectedNodes=function(){return this._graph.getNodes().filter((function(t){return!t.hasClass(ln)}))},ih.prototype.getNonSelectedEdges=function(){return this._graph.getEdges().filter((function(t){return!t.hasClass(ln)}))},ih.prototype.clear=function(){this._selectedClass.clearNodes(),this._selectedClass.clearEdges()},ih);function ih(t){var e=t.events,n=t.settings,r=t.graph,i=t.keyboard,o=t.graphics,s=t.interactions,a=t.classes,u=th.call(this)||this;return u._events=e,u._settings=n,u._graph=r,u._keyboard=i,u._graphics=o,u._selectionExtremityHighlightedClass=a.createClass({name:dn,isBuiltin:!0,nodeAttributes:eh}),u._selectedClass=a.createClass({name:ln,isBuiltin:!0,nodeAttributes:eh,edgeAttributes:nh}),n.register("interactions.selection.enabled",!0),n.register("interactions.selection.multiSelectionKey","ctrl"),s.onClick({priority:"selection",check:function(t){var e=t.button,n=u._settings.get("interactions.selection.enabled");return"left"===e&&n&&!u._graphics.isAnimating()},handler:function(t){var e=t.target;if(e){var n=u._settings.get("interactions.selection.multiSelectionKey"),r=n&&u._keyboard.isPressed(n);e.isNode?u._selectedClass.clearEdges():u._selectedClass.clearNodes(),r?e.hasClass(ln)?e.removeClass(ln):e.addClass(ln):((e.isNode?u._selectedClass.getNodes():u._selectedClass.getEdges()).filter((function(t){return t!==e})).removeClass(ln),e.hasClass(ln)||e.addClass(ln))}else u._selectedClass.clearNodes(),u._selectedClass.clearEdges()}}),u._events.on(me.BEFORE_REMOVE_EDGES,(function(t){return t.edges.setSelected(!1)})),u}var oh,sh=(E(ah,oh=xe),ah.prototype._nextTimeIdle=function(t){var e=this,n=new uh(this._dom,this._idIdle,t);return this._delayedCalls.push(n),n.whenDone().then((function(){e._delayedCalls.splice(e._delayedCalls.indexOf(n),1)}))},ah.prototype.debounceIdle=function(t,e){var n=this;function r(){var e=o;i=!1,o=[],t(),e.forEach((function(t){return t()}))}void 0===e&&(e=0);var i=!1,o=[];return function(){return new Promise((function(t){o.push(t),i||(i=!0,n._nextTimeIdle(e).then(r))}))}},ah);function ah(t){var e,n=t.dom,r=t.events,i=t.captor,o=oh.call(this)||this;return o._dom=n,o._events=r,o._captor=i,o._delayedCalls=[],o._idIdle=function(){return!o._captor.isAnyButtonPressed()&&!o._dom.isPlayingFrame()},o._events.on(((e={})[[me.DOWN,me.UP,me.BEFORE_NEW_FRAME,me.NEW_FRAME].join(" ")]=function(){o._delayedCalls.forEach((function(t){return t.reset()}))},e)),o}var uh=(ch.prototype._startTimeout=function(){var t=this;this._timeout=this._dom.setTimeout((function(){t._isIdle()?(t._done=!0,t._resolve()):t._startTimeout()}),this._delay)},ch.prototype.reset=function(){this._done||(this._dom.clearTimeout(this._timeout),this._startTimeout())},ch.prototype.whenDone=function(){return this._promise},ch);function ch(t,e,n){var r=this;this._timeout=null,this._done=!1,this._dom=t,this._promise=new Promise((function(t){return r._resolve=t})),this._isIdle=e,this._delay=n,this._startTimeout()}var lh,dh={number:1,duration:1e3,interval:800,startColor:"rgba(0,0,0,0.6)",endColor:"rgba(0,0,0,0.0)",width:50,startRatio:1,endRatio:2,enabled:!1},hh={number:1,duration:1e3,interval:800,startColor:"rgba(0,0,0,0.6)",endColor:"rgba(0,0,0,0.0)",width:10,startRatio:1,endRatio:2,enabled:!1},fh=(E(ph,lh=xe),ph.prototype._onElementsAttributeChange=function(t,e){if(e.includes("pulse.enabled")){var n=Fn(this._graph,t,(function(t){return t.getAttribute("pulse.enabled")})),r=n.valid,i=n.invalid;this._hasPulses.removeElements(i),this._hasPulses.addElements(r),this._removePulses(i)}},ph.prototype._removePulses=function(t){for(var e=t.isNode?this._nodePulses:this._edgePulses,n=0;n<t._indexes.length;n++){var r=t._indexes[n],i=e.get(r);if(i){for(var o=0;o<i.length;o++){var s=i[o];this._graphics.releaseGraphicsEngineBlockId(s.blockId)}e.set(r,null)}}},ph.prototype._refreshElementsPulses=function(t,e){for(var n=t.isNode,r=n?this._nodePulses:this._edgePulses,i=n?this._nodeFlexArrays.pulse.duration:this._edgeFlexArrays.pulse.duration,o=n?"_createNodePulseBlock":"_createEdgePulseBlock",s=n?this._nodeFlexArrays.pulse.interval:this._edgeFlexArrays.pulse.interval,a=n?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining,u=0;u<t._indexes.length;u++){var c=t._indexes[u],l=r.get(c);l||(l=[],r.set(c,l));for(var d=0;d<l.length;d++){var h=l[d],f=h.startTime,p=h.duration,g=h.blockId;f+p<=e&&(this._graphics.releaseGraphicsEngineBlockId(g),l.splice(d--,1))}var _=l[l.length-1];if(!_||e>=_.startTime+s.get(c)){p=i.get(c);var v=a.get(c);0!==v&&l.push({blockId:this[o](c,e,p),startTime:e,duration:p}),0<v&&a.set(c,v-1)}}},ph.prototype._createNodePulseBlock=function(t,e,n){var r=this._nodeFlexArrays,i=r.color.get(t),o=r.layer.get(t),s=r.x.get(t),a=r.y.get(t),u=r.radius.get(t),c="scaled"===r.scalingMethod.get(t),l=r.pulse.startRatio.get(t),d=r.pulse.endRatio.get(t),h=r.pulse.width.get(t),f=2*u*l,p=2*u*d,g=tc(o).nodeBody,_=r.pulse.startColor.get(t),v=r.pulse.endColor.get(t),y=this._graphics.allocateGraphicsEngineBlockId(),m=this._block.reset(1,!0,g),b=m.nextAndReset(),x=qu(_,i),E=qu(v,i);return b.end.shape="circle",b.end.pieceId=1,b.end.x1=s,b.end.y1=a,b.end.x2=s,b.end.y2=a,b.end.rectWidthOrSourceRadiusScaled=c?p:0,b.end.rectHeightOrTargetRadiusScaled=c?p:0,b.end.rectWidthOrSourceRadiusFixed=c?0:p,b.end.rectHeightOrTargetRadiusFixed=c?0:p,b.end.strokeWidthFixed=h,b.end.strokeColor=E,b.start.shape="circle",b.start.pieceId=1,b.start.x1=s,b.start.y1=a,b.start.x2=s,b.start.y2=a,b.start.rectWidthOrSourceRadiusScaled=c?f:0,b.start.rectHeightOrTargetRadiusScaled=c?f:0,b.start.rectWidthOrSourceRadiusFixed=c?0:f,b.start.rectHeightOrTargetRadiusFixed=c?0:f,b.start.strokeWidthFixed=h,b.start.strokeColor=x,b.animation.duration=n,b.animation.beginTime=e,this._engine.storeBlock(y,m),y},ph.prototype._createEdgePulseBlock=function(t,e,n){var r=this._edgeFlexArrays,i=this._nodeFlexArrays,o=r.pulse.startRatio.get(t),s=r.pulse.endRatio.get(t),a=r.pulse.startColor.get(t),u=r.pulse.endColor.get(t),c=tc(r.layer.get(t)).edgeBody,l=this._edgeSourceList.get(t),d=this._edgeTargetList.get(t),h=r.curvature.get(t),f=0!==h,p=this._graphics.allocateGraphicsEngineBlockId(),g=this._block.reset(f?3:1,!0,c),_=g.nextAndReset(),v={isSelfLoop:l===d,curvature:h,sourceX:i.x.get(l),sourceY:i.y.get(l),targetX:i.x.get(d),targetY:i.y.get(d),sourceRadius:i.radius.get(l),targetRadius:i.radius.get(d),isSourceRadiusScaled:"scaled"===i.scalingMethod.get(l),isTargetRadiusScaled:"scaled"===i.scalingMethod.get(d),width:r.width.get(t),isWidthScaled:"scaled"===r.scalingMethod.get(t),strokeWidth:r.pulse.width.get(t)};return gh(_.start,v),gh(_.end,v),_.start.strokeColor=a,_.end.strokeColor=u,_.start.thicknessOrFontSizeScaled*=o,_.start.thicknessOrFontSizeFixed*=o,_.end.thicknessOrFontSizeScaled*=s,_.end.thicknessOrFontSizeFixed*=s,_.animation.duration=n,_.animation.beginTime=e,this._engine.storeBlock(p,g),p},ph.prototype.pulse=function(t,e){var n=t.isNode,r=w(w({},n?dh:hh),e),i=r.number,o=r.interval,s=r.duration,a=n?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining,u=(i-1)*o+s;delete r.number,r.enabled=!0,t.setAttributes({pulse:r}),a.setMultiple(t._indexes,i),this._dom.setTimeout((function(){t.setAttribute("pulse.enabled",!1),a.setMultiple(t._indexes,-1)}),u)},ph);function ph(t){var e,n=t.graphics,r=t.graph,i=t.dom,o=t.events,s=lh.call(this)||this;return s._onAttributeChange=function(t){var e=t.nodes,n=t.edges,r=t.nodeAttributes,i=t.edgeAttributes;s._onElementsAttributeChange(e,r),s._onElementsAttributeChange(n,i)},s._refreshPulses=function(){var t=s._hasPulses.getElements(),e=t.nodes,n=t.edges;if(0!==e.size||0!==n.size){var r=s._engine.getCurrentTime();s._refreshElementsPulses(e,r),s._refreshElementsPulses(n,r),s._dom.refresh()}},s._graph=r,s._dom=i,s._graphics=n,o.on(((e={})[me.UPDATE_ATTRIBUTES]=s._onAttributeChange,e[me.NEW_FRAME]=s._refreshPulses,e[me.BEFORE_REMOVE_NODES+" "+me.BEFORE_REMOVE_EDGES]=function(t){var e=t.nodes,n=t.edges;(e||n).setAttribute("pulse.enabled",!1)},e[me.CLEAR_GRAPH]=function(){return s._hasPulses.clear()},e)),s._engine=s._graphics.getGraphicsEngine(),s._block=s._engine.createBlock(),s._nodePulses=r.createNodeAttribute({storage:"any"}),s._edgePulses=r.createEdgeAttribute({storage:"any"}),s._nodeNbPulsesRemaining=r.createNodeAttribute({storage:"int16",default:-1}),s._edgeNbPulsesRemaining=r.createEdgeAttribute({storage:"int16",default:-1}),s._nodeFlexArrays=s._graphics.getNodeAttributes(),s._edgeFlexArrays=s._graphics.getEdgeAttributes(),s._edgeSourceList=r.getEdgeAttribute("source"),s._edgeTargetList=r.getEdgeAttribute("target"),s._hasPulses=new Oo(s._graph),s}function gh(t,e){var n=e.sourceX,r=e.sourceY,i=e.targetX,o=e.targetY,s=e.isSourceRadiusScaled,a=e.isTargetRadiusScaled,u=e.targetRadius,c=e.sourceRadius,l=e.isWidthScaled,d=e.width,h=e.strokeWidth,f=e.curvature,p=e.isSelfLoop;t.pieceId=2,t.shape="line",t.x1=n,t.y1=r,t.x2=i,t.y2=o,t.rectWidthOrSourceRadiusScaled=s?c:0,t.rectWidthOrSourceRadiusFixed=s?0:c,t.rectHeightOrTargetRadiusScaled=a?u:0,t.rectHeightOrTargetRadiusFixed=a?0:u,t.thicknessOrFontSizeScaled=l?d:0,t.thicknessOrFontSizeFixed=l?0:d,t.strokeWidthFixed=h,t.curvature=f,t.isSelfLoop=p}var _h,vh={duration:0,easing:"linear",callback:function(){},startAfter:0},yh=(E(mh,_h=xe),mh.prototype.play=function(t,e){var n=tt(e,vh),r=n.duration,i=n.easing,o=n.callback,s=n.startAfter,a=null;return r<=0?(t(1),o()):(a={func:t,easing:"function"==typeof i?i:Iu[i],duration:r,callback:o,startAfter:s,creationDate:Qt(),done:!1},this._animationList.push(a),this._dom.refresh()),a},mh.prototype.end=function(t,e){void 0===e&&(e=!0);var n=this._animationList.indexOf(t);-1!==n&&(t.func(1),this._animationList.splice(n,1),t.done=!0,e&&t.callback(!0))},mh);function mh(t){var e=t.dom,n=t.events,r=_h.call(this)||this;return r._animationList=[],r._update=function(){if(0!==r._animationList.length){for(var t=Qt(),e=[],n=0;n<r._animationList.length;++n){var i=r._animationList[n],o=(t-i.creationDate)/i.duration,s=i.startAfter,a=i.easing(o);1<=o?(i.func(1),i.done=!0,r._animationList.splice(n,1),--n,e.push(i.callback)):s<=a&&(a=1/(1-s)*(a-s),i.func(a))}for(var u=0;u<e.length;++u)e[u](!1);r._dom.refresh()}},r._dom=e,r._events=n,r._animationList=[],r._events.on(me.BEFORE_NEW_FRAME,r._update),r}function bh(t){return t+(-1===t.indexOf("?")?"?":"&")+"noCache="+Date.now()}var xh,Eh={tileLayers:function(t,e,n,r,i){var o=n._getMapPanePos(),s=t.getContainer();if(!s)throw new Error("Trying to access the container of "+t+" but it does not exist.");var a=r.DomUtil.getPosition(s);n.removeLayer(t),t.options.crossOrigin="anonymous";var u=[],c=[];return t.on("tileload",(function(t){var e=t.tile,n=r.DomUtil.getPosition(e),s=n.x,l=n.y;u.push(e),c.push({x:s-a.x+o.x-i.x,y:l-a.y+o.y-i.y})})),n.addLayer(t),new Promise((function(n){t.once("load",(function(){var r=t.getTileSize();u.forEach((function(t,n){var i=c[n],o=i.x,s=i.y;e.drawImage(t,o,s,r.x,r.y)})),n()}))}))},imageOverlays:function(t,e,n,r,i){return new Promise((function(r){n.removeLayer(t),t.setUrl(bh(t.getUrl())),t.options.crossOrigin="anonymous",t.once("load",(function(){var o=t.getBounds(),s=n.latLngToContainerPoint(o.getNorthWest()),a=n.latLngToContainerPoint(o.getSouthEast()),u=a.x-s.x,c=a.y-s.y;e.drawImage(t._image,s.x-i.x,s.y-i.y,u,c),r()})),n.addLayer(t)}))},vectorLayers:function(t,e,n,r,i,o){return new Promise((function(s){var a=t.options.renderer;n.removeLayer(t),t.options.renderer=o,n.addLayer(t),o._updatePaths();var u=n._getMapPanePos(),c=o._container,l=r.DomUtil.getPosition(c),d=Tt();e.drawImage(o._container,l.x+u.x-i.x,l.y+u.y-i.y,c.width/d,c.height/d),n.removeLayer(t),t.options.renderer=a,n.addLayer(t),s()}))},markers:function(t,e,n,r,i){return new Promise((function(r){var o=n.getPixelBounds().min,s=n.project(t.getLatLng(),n.getZoom()),a=/^data\:/.test(t._icon.src),u=a?t._icon.src:bh(t._icon.src),c=new Image,l=t.options.icon;if(l){var d=l.options,h=d.iconSize||[24,24],f=s.subtract(o),p=d.iconAnchor||[0,0];Array.isArray(h)||(h=[h.x,h.y]),Array.isArray(p)||(p=[p.x,p.y]);var g=Math.round(f.x-h[0]+p[0])-i.x,_=Math.round(f.y-p[1])-i.y;c.crossOrigin="";var v=function(){e.drawImage(c,g,_,h[0],h[1]),r()};c.onload=v,c.src=u,a&&v()}}))},vectorMap:function(t,e,n,r,i){var o=n._getMapPanePos(),s=t.getMapboxMap(),a=t.getCanvas(),u=t.getSize().round(),c=r.DomUtil.getPosition(t.getContainer()),l=c.x+o.x-i.x,d=c.y+o.y-i.y;return new Promise((function(t){function n(){e.drawImage(a,l,d,u.x,u.y),t()}if(s.loaded())return n();s.once("idle",n)}))}},wh={"top-left":"left","bottom-left":"left","top-right":"right","bottom-right":"right"},Sh={"top-left":"top","bottom-left":"bottom","top-right":"top","bottom-right":"bottom"},Ah={position:"bottom-right",horizontalMargin:0,verticalMargin:0,className:void 0},Ch=(E(Th,xh=xe),Th.prototype.set=function(t,e){var n=w(w({},Ah),e),r=n.position,i=n.horizontalMargin,o=n.verticalMargin,s=n.className;wh[r]||(r=Ah.position),this.remove();var a=document.createElement("div");return a.innerHTML=t,a.style.position="absolute",kh(a,r,i,o),a.style.padding="0px 0px 0px 0px",a.style.zIndex="10",s&&a.setAttribute("class",s),this._brand=a,this._dom.setLayer("brand",this._brand),a},Th.prototype.remove=function(){this._dom.setLayer("brand",null),this._brand=null},Th);function Th(t){var e=t.dom,n=xh.call(this)||this;return n._dom=e,n._brand=null,n}function kh(t,e,n,r){var i=void 0===n?"":n+"px",o=void 0===r?"":r+"px";t.style[wh[e]]=i,t.style[Sh[e]]=o}var Ih,Oh=(E(Mh,Ih=xe),Mh.prototype._onDataChange=function(t){var e=this,n=t.filter((function(t){var n=t.property;return n===e.latitudePath||n===e.longitudePath}));if(n.length){var r=n.reduce((function(t,e){var n=e.nodes,r=e.newValues;if(!n)return t;var i=n.filter((function(t,e){return null!=r[e]}));return t?t.concat(i):i}),null);r&&this._refreshOrAddNodes(r)}},Mh.prototype._refreshOrAddNodes=function(t){this._updateNodesCoordinates(t),this._enabled&&(this._filter.refresh(),this._updatePrevNodesCoordinates(t))},Mh.prototype._updatePrevNodesCoordinates=function(t){dr(this._graph,t,$n,"geo.prevLat"),dr(this._graph,t,tr,"geo.prevLng")},Mh.prototype._restorePrevNodesCoordinates=function(t){dr(this._graph,t,"geo.prevLat",$n),dr(this._graph,t,"geo.prevLng",tr)},Mh.prototype._updateNodesCoordinates=function(t){!function(t,e,n){for(var r=n.longitudePath,i=n.latitudePath,o=n.wrapCoordinates,s=t.getAttributes(!0,[$n,tr]),a=s[0],u=s[1],c=e._indexes,l=e.getId(),d=c.length,h=e.getData(i),f=e.getData(r),p=0;p<d;p++){var g=f[p],_=h[p],v=c[p],y=l[p];null!=_&&null!=g&&(ar(y,g),ur(y,_),o&&(g%=180,_=We(+_,-er,er)),u.set(v,g),a.set(v,_))}}(this._graph,t,this._settings)},Mh.prototype._createMapTileLayer=function(t,e){if(t&&!et(t))return t;var n=t.wms?this.L.tileLayer.wms:this.L.tileLayer,r=(null==e&&t.url===nr.tiles.url?'Map data &copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap contributors</a>':null)||"";return n(t.url,w({attribution:r},t))},Mh.prototype._setupTileLayer=function(t,e){var n=this,r=this._createMapTileLayer(t,e);return r.once("load",(function(){n._events.fire(me.GEO_LOADED)})),r.addTo(this._map),r},Mh.prototype._onSettingsChanged=function(t,e){var n,r,i=t.wrapCoordinates!==e.wrapCoordinates,o=t.latitudePath!==e.latitudePath||t.longitudePath!==e.longitudePath;(i||o)&&this._updateNodesCoordinates(this._graph.getNodes("all")),this._enabled&&(r=e,(n=t).attribution===r.attribution&&n.tiles===r.tiles||!this._map||(this._map.removeLayer(this._tileLayer),this._tileLayer=this._setupTileLayer(e.tiles,e.attribution)),t.sizeRatio!==e.sizeRatio&&this._updateSizes(),t.maxZoomLevel!==e.maxZoomLevel&&this._settingsModule.update({minZoom:1,maxZoom:Math.pow(2,e.maxZoomLevel)}),t.disableNodeDragging!==e.disableNodeDragging&&this._setDragging(!e.disableNodeDragging),t.attributionOptions!==e.attributionOptions&&this._setAttributionOptions(e.attributionOptions,e.attribution))},Mh.prototype._setMapDragging=function(t){if(this._map){var e=t?"enable":"disable";this._map.dragging[e]()}},Mh.prototype._fromLatLngToPoint=function(t,e){return this._map.options.crs.latLngToPoint(this.L.latLng(t,e),1)},Mh.prototype._fromPointToLatLng=function(t,e){var n=this._map.options.crs.pointToLatLng(this.L.point({x:t,y:e}),1);return{latitude:n.lat,longitude:n.lng}},Mh.prototype._updateSizes=function(){this._enabled&&this._projection&&this._projection.updateAll()},Mh.prototype.enable=function(t){return this.setEnabled(!0,t)},Mh.prototype.getMap=function(){if(this._enabled)return this._map},Mh.prototype.getOptions=function(){return this._enabled?w(w({},this._settings),{tiles:w({},this._settings.tiles)}):w({},nr)},Mh.prototype.setOptions=function(t){if(this._enabled){!function(t,e){void 0===t&&(t={});var n=t.tileUrlSubdomains,r=t.tileUrlTemplate,i=t.attribution,o=t.attributionOptions,s=t.latitudePath,a=t.longitudePath,u=t.sizeRatio,c=t.tiles;if(null!=r&&"string"!=typeof r)throw new TypeError("Geo mode: tileUrlTemplate must be a URL string");if(null!=n&&"string"!=typeof n)throw new TypeError("Geo mode: tileUrlTemplate must be a string");if(null!=c){if(!(et(c)||c instanceof e.Layer))throw new TypeError("Geo mode: tiles must be a object or L.Layer instance");var l=c;if(null!=l.url&&"string"!=typeof l.url)throw new TypeError("Geo mode: tiles.url must be a string");if(null!=l.subdomains&&"string"!=typeof l.subdomains)throw new TypeError("Geo mode: tiles.subdomains must be a string");if(l.tms&&"boolean"!=typeof l.tms)throw new TypeError("Geo mode: tiles.tms must be a boolean");if(l.wms&&"boolean"!=typeof l.wms)throw new TypeError("Geo mode: tiles.wms must be a boolean")}if(null!=i&&"string"!=typeof i)throw new TypeError("Geo mode: Map attribution must be a string");if(null!=o&&!et(o))throw new TypeError("Geo mode: attributionOptions must to be a BrandOptions object");if(null!=s&&"string"!=typeof s&&!Array.isArray(s))throw new TypeError("Geo mode: Latitude path must be a valid property path: a string or an array of strings.");if(null!=a&&"string"!=typeof a&&!Array.isArray(a))throw new TypeError("Geo mode: Longitude path must be a valid property path: a string or an array of strings.");if(null!=u&&(!isFinite(u)||u<=0))throw new TypeError("Geo mode: sizeRatio must be a positive number.")}(t,this.L);var e=this._settings;this._settings=w(w(w({},nr),t),{tiles:function(t,e){if(void 0===e&&(e={}),void 0===e.tiles||e.tileUrlTemplate||e.tileUrlSubdomains){var n=nr.tiles;return w(w(w({},e.tiles||{}),nr.tiles),{url:e.tileUrlTemplate||n.url,subdomains:e.tileUrlSubdomains||n.subdomains})}return et(e.tiles)?w(w({},t.tiles),e.tiles):e.tiles}(nr,t)}),this._onSettingsChanged(e,this._settings)}},Mh.prototype.disable=function(t){return this.setEnabled(!1,t)},Mh.prototype.isEnabled=function(){return this._enabled},Mh.prototype.toggle=function(t){return void 0===t&&(t={}),this.setEnabled(!this._enabled,t)},Mh.prototype.getContainerCoords=function(t){var e=this;return t.getGeoCoordinates().map((function(t){var n=t.latitude,r=t.longitude;return e._map.latLngToContainerPoint([n,r])}))},Mh.prototype.setEnabled=function(t,e){var n=this;if(!ir())throw new Error("Ogma Geo cannot be used outside a browser");if(!this.L)throw new Error("You are trying to use Geo mode but Leaflet has not been found. Please follow our migration guide: https://bit.ly/2SYkF8A");if(this._transition||t===this._enabled)return Promise.resolve();this._enabled=t,this._transition=!0,this.setOptions(e);var r=this._settingsModule,i=this._settings;return t?(this._nodeDraggingSetting=r.get("interactions.drag.enabled"),this._setDragging(!i.disableNodeDragging),this._show().then((function(){return n._registerTextStyle(),n._setDragging(!i.disableNodeDragging),n._setMapDragging(i.disableNodeDragging),n._transition=!1,n._updating=!1,n._events.fire(me.GEO_ENABLED),n._events.fire(me.GEO_READY),n._adjustMinvisibleSizes()}))):this._hide().then((function(){return n._transition=!1,n._events.fire(me.GEO_DISABLED),n._setDragging(n._nodeDraggingSetting,!0),n._restoreTextStyle()}))},Mh.prototype._registerTextStyle=function(){var t,e,n,r,i,o,s=this;this._edgesOriginalTextStyle=(e=(t=this._graph.getEdges()).getAttributes(["text.minVisibleSize","text.size","text.scale","minVisibleSize","width"]),n={},e.forEach((function(e,r){var i=e.text,o=e.minVisibleSize,s=e.width;n[t.get(r).getId()]={"text.minVisibleSize":i.minVisibleSize,"text.size":i.size,"text.scale":i.scale,minVisibleSize:o,size:Math.max(1,s)}})),n),this._nodesOriginalTextStyle=(i=(r=this._graph.getNodes()).getAttributes(["text.minVisibleSize","text.size","text.scale","radius"]),o={},i.forEach((function(t,e){var n=t.text,i=t.radius;o[r.get(e).getId()]={"text.minVisibleSize":n.minVisibleSize,"text.size":n.size,"text.scale":n.scale,minVisibleSize:n.minVisibleSize,size:Math.max(1,i)}})),o);var a=this._hover.getHoverClassDefinition(),u=a.nodeAttributes,c=a.edgeAttributes;this._hoverEdgesOriginalTextStyle=c||void 0,this._hoverNodesOriginalTextStyle=u||void 0,this._hover.updateEdgeAttributes({text:{size:function(t){return s._edgesOriginalTextStyle[t.getId()]["text.size"]}}}),this._hover.updateNodeAttributes({text:{size:function(t){return s._nodesOriginalTextStyle[t.getId()]["text.size"]}}})},Mh.prototype._restoreTextStyle=function(){return this._hoverEdgesOriginalTextStyle&&this._hover.updateEdgeAttributes(this._hoverEdgesOriginalTextStyle),Promise.all([(t=this._graph.getEdges(),e=this._edgesOriginalTextStyle,n=t.getId().map((function(t){return+(e[t]||{})["text.size"]})),t.setAttribute("text.size",n))]);var t,e,n},Mh.prototype._setDragging=function(t,e){void 0===e&&(e=!1),this._settingsModule.update({interactions:{drag:{enabled:t,applyResult:e}}})},Mh.prototype._setAttributionOptions=function(t,e){if(this._attribution&&(this._attribution.remove(),this._attribution=null),this._attribution=this.L.control.attribution({prefix:!1}).addTo(this._map),et(t)){this._attribution.setPrefix(""),t.position=t.position||"bottom-right";var n=t.position.replace("-","");this._attribution.setPosition(n);var r=this._attribution.getContainer();r&&(t.className&&this.L.DomUtil.addClass(r,t.className),kh(r,t.position||"bottom-right",t.horizontalMargin,t.verticalMargin))}null!=e&&this._attribution.addAttribution(e)},Mh.prototype._nodeIsVisible=function(t){return e=t,n=this._settings,r=this._hasCustomProjection(),i=n.longitudePath,o=n.latitudePath,s=n.wrapCoordinates,a=e.getData(i),u=e.getData(o),null!=a&&null!=u&&(!(!s&&!r)||Math.abs(u)<=er&&Math.abs(a)<=180);var e,n,r,i,o,s,a,u},Mh.prototype._updateSettingsForMap=function(){var t=this._graphics.getGraphicsEngine().parseColor(this._settings.backgroundColor);t[3]=0,this._prevSettings=this._settingsModule.update({backgroundColor:Tr(t),minZoom:1e-6,interactions:{rotation:{enabled:!1},drag:{enabled:!1},pan:{enabled:!1},zoom:{enabled:!1,onDoubleClick:!1}},mouse:{wheelEnabled:!1}})},Mh.prototype.getGraphPosition=function(t){var e,n=this.L.latLngBounds((e=[[1/0,1/0],[-1/0,-1/0]],t.getGeoCoordinates().reduce((function(t,e){var n=e.latitude,r=e.longitude,i=t[0],o=t[1];return i[0]=Math.min(i[0],n),i[1]=Math.min(i[1],r),o[0]=Math.max(o[0],n),o[1]=Math.max(o[1],r),t}),e)));return{center:0<t.size?n.getCenter():this.L.latLng([0,0]),zoom:this._clampZoom(this._map.getBoundsZoom(n))}},Mh.prototype._initMap=function(){this._updateSettingsForMap(),this._mapContainer=function(t){var e=Et().createElement("div");e.className="ogma-geo-container",e.style.width=e.style.height="100%";var n=t||lr;return n.insertBefore(e,n.firstChild),e}(this._dom.getContainer());var t=w(w({},rr),{minZoom:this._settings.minZoomLevel,maxZoom:this._settings.maxZoomLevel});this._hasCustomProjection()&&(t.crs=this._settings.crs,t.worldCopyJump=!1,t.maxBoundsViscosity=0),this._map=new this.L.Map(this._mapContainer,t),this._hasCustomProjection()||this._map.setMaxBounds(this.L.latLngBounds([[er,-180],[-er,180]])),this._setAttributionOptions(this._settings.attributionOptions,this._settings.attribution),this._setupLayers()},Mh.prototype._clampZoom=function(t){var e=this._tileLayer.options.maxZoom;return void 0===e&&(e=1/0),Math.min(t,e)},Mh.prototype._show=function(){var t=this;return this._filter=this._filters.addNodeFilter((function(e){return t._nodeIsVisible(e)})),this._filter.whenApplied().then((function(){t._initMap();var e=t._graph.getNodes(),n=t._graph.getEdges(),r=t.getGraphPosition(e),i=r.center,o=r.zoom;t._zoom=o;var s=t._transformToGeo(),a=s.offset,u=s.newCameraView;return t._camera.setView(u,{ignoreZoomLimits:!0}).then((function(){return t._updatePrevNodesCoordinates(e),t._map.setView(i,o),t._zoom=o,t._graphics.animate({nodes:e,edges:n},(function(){t._projection=t._createFinalPositionLayer()}),t._settings.duration)})).then((function(){return a.destroy()}))}))},Mh.prototype._hasCustomProjection=function(){return null!=this._settings.crs},Mh.prototype._setupLayers=function(){var t=this;this._settings.tiles&&(this._tileLayer=this._setupTileLayer(this._settings.tiles,this._settings.attribution)),this._layer=new this.L.OgmaOverlay({container:this._graphics.getDomElement(),mapContainer:this._mapContainer,onUpdate:function(){return t._onMapUpdate()}}),this._layer.addTo(this._map)},Mh.prototype._onMapUpdate=function(){var t=this,e=this._map.getCenter(),n=e.lat,r=e.lng,i=this._fromLatLngToPoint(n,r);this._x=i.x,this._y=i.y;var o,s=(o=this._map.getZoom(),Math.pow(2,o-1));return this._camera.setView({zoom:s,x:i.x,y:i.y},{ignoreZoomLimits:!0}).then((function(){return t._adjustMinvisibleSizes()}))},Mh.prototype._adjustMinvisibleSizes=function(){return Promise.all([function(t,e,n){if(!e)return Promise.resolve();var r=t.getId().map((function(t){var r=+e[t]["text.minVisibleSize"],i=+e[t].minVisibleSize,o=+e[t]["text.size"],s=+e[t]["text.scale"],a=e[t].size*s*n;return a<=i||a<=r?0:o}));return t.setAttribute("text.size",r)}(this._graph.getEdges(),this._edgesOriginalTextStyle,this._map.getZoom())])},Mh.prototype._hide=function(){var t=this;if(!this._map)return Promise.resolve();this._settingsModule.update(this._prevSettings),this._map.removeLayer(this._layer);var e=this._dom.getContainer(),n=this._graphics.getDomElement();e&&e.appendChild(n),this._map.getContainer().style.zIndex=0;var r=this._graph.getNodes("all"),i=this._graph.getEdges("all"),o=this._transformToGraph(),s=o.offset,a=o.newCameraView;return this._camera.setView(a||{}).then((function(){return Promise.all([Zt(t._map.getContainer(),1,0,t._settings.duration/2).then((function(){t._map.remove();var e=t._mapContainer.parentNode;e&&e.removeChild(t._mapContainer)})),t._graphics.animate({nodes:r,edges:i},(function(){return s&&s.destroy()}),t._settings.duration)])})).then((function(){return t._map=null,t._filter.delete()}))},Mh.prototype._transformToGeo=function(){var t=this,e=function(t,e,n,r){var i=t.filter((function(t){return t.isVisible()})),o=0===i.size,s=i.reduce((function(t,e){var n=e.getGeoCoordinates(),i=n.latitude,o=n.longitude,s=r(i,o),a=s.x,u=s.y;return t.mapX.push(a),t.mapY.push(u),t}),{mapX:[],mapY:[]}),a=s.mapX,u=s.mapY,c=i.getAttribute("x"),l=i.getAttribute("y"),d=i.getAttribute("radius"),h=new Lo({xValues:c,yValues:l,scaledSizeValues:d}),f=new Lo({xValues:a,yValues:u});o&&(h.cx=h.cy=0,h.width=h.height=0),isFinite(f.width)&&isFinite(f.height)||(f.cx=f.cy=0,f.width=f.height=0);var p=f.cx-h.cx,g=f.cy-h.cy,_=o?1:Math.max(f.width,f.height)/Math.max(h.width,h.height),v=d.reduce((function(t,e){return t[0]=Math.min(t[0],e*_),t[1]=Math.max(t[1],e*_),t}),[1/0,0]),y=v[0],m=v[1];f.pad(m),f.minScaledSize=y,f.maxScaledSize=m;var b,x=n.computeConfigForBounds(f),E=e.zoom/(b=x.zoom,Math.pow(2,Math.ceil(Math.log2(b))));p+=(h.cx-e.x)*E,g+=(h.cy-e.y)*E;var S=h.cx+p,A=h.cy+g;return{offsetChanges:{name:"graph-to-geo",nodeAttributes:{radius:function(t){return t.getAttribute("radius")*E},x:function(t){return(t.getAttribute("x")+p-S)*E+S},y:function(t){return(t.getAttribute("y")+g-A)*E+A}},edgeAttributes:{width:function(t){return t.getAttribute("width")*E}}},camera:w({zoom:e.zoom/E,x:(e.x+p-S)*E+S,y:(e.y+g-A)*E+A,angle:0},e.getSize())}}(this._graph.getNodes(),this._camera,this._locate,(function(e,n){return t._fromLatLngToPoint(e,n)})),n=e.offsetChanges,r=e.camera;return{offset:this._addGraphAttributesLayer(n),newCameraView:r}},Mh.prototype._addGraphAttributesLayer=function(t){return this._graphics.addAttributeLayer(w({priority:6,nodeSelector:function(t){return t.isVisible()},edgeSelector:function(t){return t.isVisible()}},t))},Mh.prototype._transformToGraph=function(){var t=this,e=function(t,e,n,r){var i=t.getAttributes(["x","y","radius"]),o=t.getBoundingBox(),s=0===t.size,a=t.reduce((function(t,e,n){return t[e._index]=n,t}),{});r();var u=t.getAttribute("x"),c=t.getAttribute("y"),l=t.getAttribute("radius"),d=new Lo({xValues:u,yValues:c,scaledSizeValues:l.map((function(t){return 2*t}))});s&&(o.reset(),d.reset());var h,f,p=d.cx-o.cx,g=d.cy-o.cy,_=0,v=0,y=n.computeConfigForBounds(d),m=e.zoom/y.zoom;return f=isNaN(o.cx)||isNaN(o.cy)?(o.cx=e.x,o.cy=e.y,h=y.x,y.y):(p+=(o.cx-e.x)*m,g+=(o.cy-e.y)*m,_=o.cx+p,v=o.cy+g,h=(e.x+p-_)*m+_,(e.y+g-v)*m+v),{offsetChanges:{name:"geo-to-graph",nodeAttributes:{x:function(t){return(i[a[t._index]].x+p-_)*m+_},y:function(t){return(i[a[t._index]].y+g-v)*m+v}}},camera:w({zoom:y.zoom,x:h,y:f,angle:0},e.getSize())}}(this._graph.getNodes("all"),this._camera,this._locate,(function(){t._projection&&(t._projection.destroy(),t._projection=null)})),n=e.offsetChanges,r=e.camera;return{offset:this._addGraphAttributesLayer(n),newCameraView:r}},Mh.prototype.getPointFromLatLng=function(t){var e=t.getGeoCoordinates(),n=e.latitude,r=e.longitude;return null==n?t.getAttributes(["x","y"]):this._fromLatLngToPoint(n,r)},Mh.prototype._createFinalPositionLayer=function(){var t=this;return this._addGraphAttributesLayer({name:"graph-2-geo-animation",nodeAttributes:{scalingMethod:"fixed",radius:function(e){return e.getAttribute("radius")*t._settings.sizeRatio},x:function(e){return t.getPointFromLatLng(e).x},y:function(e){return t.getPointFromLatLng(e).y}},edgeAttributes:{scalingMethod:"fixed",width:function(e){return e.getAttribute("width")*t._settings.sizeRatio}}})},Mh.prototype.destroy=function(){return Promise.resolve()},Mh.prototype.setCenter=function(t,e){return this._enabled?this.setView(t,e,or(this._camera.getZoom())):Promise.resolve()},Mh.prototype.setZoom=function(t){return this._enabled?(t=this._clampZoom(t),this._zoom=t,this._map.setZoom(t),this._onMapUpdate()):Promise.resolve()},Mh.prototype.setView=function(t,e,n){return this._enabled?(n=this._clampZoom(n),this._map.setView(this.L.latLng([t,e]),n,{animate:!1}),this._zoom=n,this._onMapUpdate()):Promise.resolve()},Mh.prototype.getView=function(){if(this._enabled){var t=this._map.getCenter();return{zoom:this._zoom,latitude:t.lat,longitude:t.lng}}},Mh.prototype.getCenter=function(){if(this._enabled){var t=this._map.getCenter();return{latitude:t.lat,longitude:t.lng}}},Mh.prototype.getZoom=function(){if(this._enabled)return this._zoom},Mh.prototype.resetCoordinates=function(){if(this._enabled&&this._projection){var t=this._graph.getNodes();this._restorePrevNodesCoordinates(this._graph.getNodes());var e=this._graph.getNodeAttribute($n).getMultiple(t._indexes),n=this._graph.getNodeAttribute(tr).getMultiple(t._indexes);t.setData(this._settings.latitudePath,e),t.setData(this._settings.longitudePath,n),this._projection.update()}},Mh.prototype.updateCoordinates=function(){An("The ogma.geo.updateCoordinates() API has been deprecated. The coordinates are updated by default now.")},Mh.prototype.getUnprojectedCoordinates=function(t){An("The ogma.geo.getUnprojectedCoordinates() API has been deprecated. Original graph coordinates are only available when in graph mode."),this._projection&&this._projection.destroy();var e=t.getPosition();return this._projection=this._createFinalPositionLayer(),e},Object.defineProperty(Mh.prototype,"latitudePath",{get:function(){return this._settings.latitudePath},enumerable:!0,configurable:!0}),Object.defineProperty(Mh.prototype,"longitudePath",{get:function(){return this._settings.longitudePath},enumerable:!0,configurable:!0}),Mh.prototype.exportBackground=function(t){var e=this,n=ti();n.width=t.width,n.height=t.height;var r=n.getContext("2d");if(!r)throw new Error("Unable to get 2d context from  "+n);var i=this._map.getSize(),o=this.getView(),s=w({zoom:or(t.zoom)},this._fromPointToLatLng(t.x,t.y)),a={x:(i.x-t.width)/2,y:(i.y-t.height)/2},u=new this.L.Canvas;this._map.addLayer(u);var c=function(t,e,n,r,i,o){var s={vectorMap:[],tileLayers:[],vectorLayers:[],imageOverlays:[],markers:[]};return e.eachLayer((function(a){if(a!==t){var u=(l=a)instanceof(d=r).TileLayer?"tileLayers":l instanceof d.ImageOverlay?"imageOverlays":l instanceof d.Path?"vectorLayers":l instanceof d.Marker?"markers":"MapboxGL"in d&&l instanceof d.MapboxGL?"vectorMap":void 0;if(u&&u in s){var c=Eh[u];s[u].push((function(){return c(a,n,e,r,i,o)}))}}var l,d})),s}(this._layer,this._map,r,this.L,a,u),l=c.vectorMap,d=c.tileLayers,h=c.vectorLayers,f=c.imageOverlays,p=c.markers,g=this._map.options.zoomSnap;return this.setView(s.latitude,s.longitude,s.zoom).then((function(){return e._map._onResize()})).then((function(){return V(A(l,d,f,h,p))})).then((function(){e._map._onResize(),e.setView(o.latitude,o.longitude,o.zoom),e._map.options.zoomSnap=g})).then((function(){return new Promise((function(t){return e.L.Util.requestAnimFrame(t)}))})).then((function(){return e._map.removeLayer(u)})).then((function(){return n}))},Mh);function Mh(t){var e,n=t.camera,r=t.graph,i=t.settings,o=t.filters,s=t.events,a=t.hover,u=t.dom,c=t.graphics,l=t.locate,d=Ih.call(this)||this;return d._enabled=!1,d._settings=w({},nr),d._zoom=0,d._nodeDraggingSetting=!1,d._transition=!1,d._attribution=null,d._updating=!1,d._updateRate=50,d._x=0,d._y=0,d._onCameraUpdate=function(){if(d.L&&d._enabled&&d._map&&d._map._loaded){var t=d._x-d._camera.x,e=d._y-d._camera.y;if(t||e){d._updating||(d._updating=!0,d._layer.setLocked(!0),d._map._moveStart(!0,!1));var n=d._fromPointToLatLng(d._camera.x,d._camera.y),r=or(d._camera.zoom),i=d.L.latLng(n.latitude,n.longitude);d._map._move(i,r,{pinch:!0,round:!1}),clearTimeout(d._updateRequest),d._updateRequest=d._dom.setTimeout((function(){d._updating=!1,d._layer.setLocked(!1),d._map&&d._map._move(i,r,{pinch:!0})._moveEnd(!0)}),d._updateRate)}}},d._onNodesDragStart=function(){d._enabled&&(d._setMapDragging(!1),d._nodeDragOffsetX=d._nodeDragOffsetY=0)},d._onNodesDragged=function(t){var e=t.nodes,n=t.dx,r=t.dy;if(d._enabled){var i=e.map((function(t){var e=t.getAttributes(["x","y"]),i=e.x,o=e.y;return d._fromPointToLatLng(i+n-d._nodeDragOffsetX,o+r-d._nodeDragOffsetY)}));return d._nodeDragOffsetX=n,d._nodeDragOffsetY=r,e.setGeoCoordinates(i)}return Promise.resolve(d._graph.nodeList())},d._graph=r,d._camera=n,d._settingsModule=i,d._filters=o,d._events=s,d._dom=u,d._graphics=c,d._locate=l,d._hover=a,d._events.register(["geoEnabled","geoDisabled","geoLoaded","geoReady"]),ir()&&(d.L=M("L")||M("leaflet"),d.L&&function(t){t.TileLayer.prototype.getUrl=function(){return this._url},t.ImageOverlay.prototype.getUrl=function(){return this._url};var e="leaflet-zoom-animated";t.OgmaOverlay||(t.OgmaOverlay=t.Layer.extend({options:{pane:"overlayPane",padding:0,onUpdate:function(){}},initialize:function(e){var n=e.container;t.Util.setOptions(this,e),this._container=n},setLocked:function(t){return this._locked=t,this},onAdd:function(n){this._map=n,this.getPane().appendChild(this._container),this._wgsOrigin=t.latLng([0,0]),this._wgsInitialShift=n.project(this._wgsOrigin,this._initialZoom),t.DomUtil.addClass(this._container,"leaflet-layer"),this._zoomAnimated&&(t.DomUtil.addClass(this._container,e),this._container.style.position="absolute",this._container.style.zIndex=9999),this._initialZoom=(this._map.getMaxZoom()+this._map.getMinZoom())/2,this._mapInitialZoom=this._map.getZoom(),this._updateBounds(),this._update({})},_updateBounds:function(){var e=this.options.padding,n=this._map.getSize(),r=this._map.containerPointToLayerPoint(n.multiplyBy(-e));this._bounds=new t.Bounds(r,r.add(n.multiplyBy(1+2*e))),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()},_update:function(e){var n=this;this._updateBounds(),this._redraw(this._bounds.min,e),this._positionTimer=t.Util.requestAnimFrame((function(){return t.DomUtil.setPosition(n._container,n._bounds.min)}))},_redraw:function(t,e){this.options.onUpdate()},_updateTransform:function(e,n){if(!this._locked){var r=this._map.getZoomScale(n,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,n),s=i.multiplyBy(-r).add(o).subtract(this._map._getNewPixelOrigin(e,n));t.Browser.any3d?t.DomUtil.setTransform(this._container,s,r):t.DomUtil.setPosition(this._container,s)}},_onZoom:function(t){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_onMoveEnd:function(t){this._update(t)},_onAnimZoom:function(t){var e=t.center,n=t.zoom;this._updateTransform(e,n)},bringToFront:function(){t.DomUtil.toFront(this._container)},getEvents:function(){return{zoom:this._onZoom,moveend:this._onMoveEnd,zoomanim:this._onAnimZoom,layeradd:this.bringToFront,zoomend:this.options.onUpdate}},onRemove:function(){t.DomUtil.removeClass(this._container,e);var n=this._container;["transform","webkitTransform","OTransform","MozTransform","msTransform","zIndex","position"].forEach((function(t){return n.style[t]=null})),t.Util.cancelAnimFrame(this._positionTimer),this._container=null}}))}(d.L)),d._graph.createNodeAttribute({name:"geo.prevLat",storage:"float"}),d._graph.createNodeAttribute({name:"geo.prevLng",storage:"float"}),d._graph.createNodeAttribute({name:$n,storage:"float"}),d._graph.createNodeAttribute({name:tr,storage:"float"}),d._events.on(((e={})[me.ADD_NODES]=function(t){return d._refreshOrAddNodes(t.nodes)},e[me.UPDATE_NODE_DATA]=function(t){d._enabled&&d._onDataChange(t.changes)},e[me.NODES_DRAG_PROGRESS]=d._onNodesDragged,e[me.NODES_DRAG_START]=d._onNodesDragStart,e[me.NODES_DRAG_END]=function(){return d._setMapDragging(!0)},e[me.CAMERA_MOVE]=d._onCameraUpdate,e[me.VIEW_CHANGED]=d._onCameraUpdate,e)),d}function Lh(t,e,n,r,i,o){for(var s=0,a=0;a<r;a++)for(var u=0;u<r;u++){var c=o[a],l=o[u];if(c!==l){var d=t[c][l]*i,h=1/(d*d);if(h){var f=e[c]-e[l],p=n[c]-n[l];s+=h*Math.pow(d-Math.sqrt(f*f+p*p),2)}}}return s}function Nh(t,e,n,r,i,o,s){var a=0;if(-1===i)return 0;for(var u=0;u<r;u++)for(var c=0;c<r;c++){var l=s[u],d=s[c];if(l!==d&&(l===i||d===i)){var h=t[l][d]*o,f=1/(h*h);if(f){var p=e[l]-e[d],g=n[l]-n[d];a+=f*Math.pow(h-Math.sqrt(p*p+g*g),2)}}}return a}function Rh(t,e,n,r,i,o,s,a){s=s||0;for(var u=0,c=0,l=0;l<r;l++)for(var d=0;d<r;d++){var h=a[l],f=a[d];if(h!==f){var p=t[h][f]*o,g=1/(p*p);if(g){var _=e[h]-e[f],v=n[h]-n[f],y=g*Math.pow(p-Math.sqrt(_*_+v*v),2);u+=y,h!==i&&f!==i||(c+=y)}}}return(1-s)*u+s*c}function Ph(t,e,n,r,i,o,s,a,u){s=s||0;var c=e,l=n;-1===(i=void 0===i?-1:i)&&(s=0);for(var d=e[i],h=n[i],f=0;f<r;f++){var p=a[f],g=u(t[i][f]),_=s/(g*g);if(0!==g){for(var v=0,y=0,m=0,b=e[p],x=n[p],E=0;E<r;E++){var w=a[E];if(w!==p){var S=t[p][w]*o,A=1/(S*S),C=e[w],T=n[w];if(0!=A){var k=(L=(O=b-C)*O+(M=x-T)*M)<1e-6?0:1/Math.sqrt(L);y+=(1-s)*A*(C+S*(b-C)*k),m+=(1-s)*A*(T+S*(x-T)*k)}v+=A}}var I=(1-s)*v+_;if(0!=I){var O,M,L;L=(L=(O=b-d)*O+(M=x-h)*M)<1e-6?0:1/Math.sqrt(L);var N=0===g?0:g*L*_;c[p]=(y+N*e[p])/I,l[p]=(m+N*n[p])/I}}}return{x:c,y:l}}function Dh(t,e,n,r){void 0===t&&(t=function(t,e){return t-e}),void 0===e&&(e=[]),void 0===n&&(n={}),void 0===r&&(r=function(t){return t});var i=e.length;function o(o){for(;;){var s=2*o+1,a=1+s,u=o;if(s<i&&t(e[s],e[u])<0&&(u=s),a<i&&t(e[a],e[u])<0&&(u=a),u===o)return o;var c=e[u];e[u]=e[o],e[o]=c,n[r(e[u])]=u,n[r(c)]=o,o=u}}return{get keys(){return n},get size(){return i},heapify:o,pop:function(){if(!(i<=0)){if(1===i)return i--,e[0];var t=e[0];return e[0]=e[i-1],i--,o(0),t}},decreaseKey:function(i,o){for(void 0!==o&&(e[i]=o,n[r(o)]=i);0<i;){var s=i-1>>1;if(!(0<t(e[s],e[i])))break;var a=e[i];e[i]=e[s],e[s]=a,n[r(e[i])]=i,i=n[r(a)]=s}return i},min:function(){return e[0]},remove:function(t){return this.decreaseKey(t,Number.NEGATIVE_INFINITY),this.pop()},push:function(o){var s=++i-1;for(e[s]=o;0<s;){var a=s-1>>1;if(!(0<t(e[a],e[s])))break;var u=e[s];e[s]=e[a],e[a]=u,n[r(e[s])]=s,s=n[r(u)]=a}return s},empty:function(){return i<=0},toArray:function(){return e.slice(0,i)}}}function Fh(t){var e=t.sources,n=t.targets,r=t.weights,i=t.source,o=t.target,s=t.undirected,a=void 0!==s&&s,u=t.indexes,c=t.N;if(!(c=u?u.length:c)||!isFinite(c)||0===c)throw new Error("Invalid number of nodes "+c);var l=new Float32Array(c),d=new Int32Array(c),h={},f=Number.POSITIVE_INFINITY;if(!r){r=[];for(var p=0;p<c;p++)r[p]=1}if(!u)for(u=new Uint32Array(c),p=0;p<c;p++)u[p]=p+1;for(p=0;p<c;p++)l[p]=f,d[p]=-1,h[u[p]]=p;l[h[i]]=0;var g=!1;for(p=1;p<=c;p++){for(var _=0;_<r.length;_++){var v=e[_],y=n[_],m=h[v],b=h[y];if(void 0!==m&&void 0!==b){var x=r[_],E=l[m]+x;l[m]!==f&&E<l[b]&&(l[b]=E,d[b]=v,g=!0),a&&(E=l[b]+x,l[b]!==f&&E<l[m]&&(l[m]=E,d[m]=y,g=!0))}}if(!g)break}if(g)for(p=0;p<r.length;p++)if(v=e[p],y=n[p],m=h[v],b=h[y],void 0!==m&&void 0!==b&&(x=r[p],l[m]+x<l[b]))return null;var w=null,S=null;if(void 0!==o){var A=h[o];if(void 0!==A&&l[A]!==f){for(w=[],p=o;-1!==p;p=d[h[p]])w.push(p);w=w.reverse(),S=l[A]}}return{distances:l,path:w,pathLength:S}}function zh(t,e,n,r,i,o,s){var a=(r=r||t.map((function(t,e){return e+1}))).length,u=new Float32Array(a),c=new Int32Array(a),l=new Uint32Array(a),d=Number.POSITIVE_INFINITY,h={};if(0===a)return{distances:u,path:null,pathLength:null};if(!i){i={};for(var f=0;f<a;f++)i[r[f]]=f}for(f=0;f<a;f++)u[f]=d,c[f]=-1,l[f]=h[f]=f;var p=Dh((function(t,e){return u[t]-u[e]}),l,h);for(u[i[e]]=0,p.decreaseKey(h[i[e]]);0!==p.size;){var g=p.pop(),_=u[g],v=t[g];if(_===d)break;f=0;for(var y=v.nodes.length;f<y;f++){var m=v.nodes[f],b=o?1:s?s(r[g],m):v.weights?v.weights[f]:1,x=i[m];if(void 0!==x){var E=_+b;E<u[x]&&(u[x]=E,c[x]=g,p.decreaseKey(h[x]))}}}var w=null,S=null;if(void 0!==n){var A=i[n];if(u[A]!==d){for(w=[],f=A;-1!==f;f=c[f])w.push(r[f]);w.reverse(),S=u[n]}}return{distances:u,path:w,pathLength:S}}function Bh(t){var e=t.sources,n=t.targets,r=t.weights,i=t.indexes,o=t.adjacency,s=t.undirected,a=t.ignoreWeights,u=Number.POSITIVE_INFINITY,c=i?i.length:o.length;if(!i){i=new Uint32Array(c);for(var l=0;l<c;l++)i[l]=l+1}var d=new Array(c),h={};for(l=0;l<c;l++){d[l]=new Float32Array(c);for(var f=0;f<c;f++)d[l][f]=l===f?0:u;h[i[l]]=l}var p=c,g=r.length;for(e=e.slice(),n=n.slice(),r=r.slice(),l=0;l<c;l++)e[g+l]=p,n[g+l]=i[l],r[g+l]=0,a&&(r[l]=1);var _=Fh({sources:e,targets:n,weights:r,undirected:s,N:c+1,source:p});if(null===_)throw new Error("Graph has negative weight loops");var v=_.distances;for(l=0;l<r.length;l++){var y=h[e[l]],m=h[n[l]];void 0!==y&&void 0!==m&&(r[l]=r[l]+v[y]-v[m])}for(e=e.slice(0,g),n=n.slice(0,g),r=r.slice(0,g),l=0;l<c;l++){var b=zh(o,i[l],void 0,i,h,!!a).distances;for(f=0;f<c;f++)d[l][f]=l===f?0:b[f]}return d}var Uh,Vh=(function(t){function e(t){if(!(this instanceof e))return new e(t);this.points=t||[]}function n(t,e,n){return 0<(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function r(t,e){return n(t,e.dest,e.orig)}function i(t,e){return n(t,e.orig,e.dest)}function o(t,e){return r(t.dest,e)}function s(t,e,n,r){if(t[0]===r[0]&&t[1]===r[1]||e[0]===r[0]&&e[1]===r[1]||n[0]===r[0]&&n[1]===r[1])return!1;var i=t[0]*t[0]+t[1]*t[1],o=e[0]*e[0]+e[1]*e[1],s=n[0]*n[0]+n[1]*n[1],a=r[0]*r[0]+r[1]*r[1],u=s-a,c=n[1]-r[1],l=n[1]*a-s*r[1],d=n[0]-r[0],h=n[0]*a-s*r[0],f=n[0]*r[1]-n[1]*r[0];return 1<t[0]*(e[1]*u-o*c+l)-t[1]*(e[0]*u-o*d+h)+i*(e[0]*c-e[1]*d+f)-e[0]*l+e[1]*h-o*f}function a(t,e,n){this.onext=t,this.rot=e,this.orig=n,this.mark=!1}function u(t,e){var n=new a(null,null,t),r=new a(null,null,null),i=new a(null,null,e),o=new a(null,null,null);return n.onext=n,i.onext=i,(r.onext=o).onext=r,(((n.rot=r).rot=i).rot=o).rot=n}function c(t,e){var n=t.onext.rot,r=e.onext.rot,i=t.onext,o=r.onext,s=n.onext;t.onext=e.onext,e.onext=i,n.onext=o,r.onext=s}function l(t,e){var n=u(t.dest,e.orig);return c(n,t.lnext),c(n.sym,e),n}function d(t){c(t,t.oprev),c(t.sym,t.sym.oprev)}e.prototype={triangulate:function(){var t=this.points;t.sort((function(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}));for(var e=t.length-1;1<=e;e--)t[e][0]===t[e-1][0]&&t[e][1]===t[e-1][1]&&t.splice(e,1);if(t.length<2)return{};for(var a=function t(e){var a,h,f,p;if(2===e.length)return{le:a=u(e[0],e[1]),re:a.sym};if(3===e.length)return a=u(e[0],e[1]),h=u(e[1],e[2]),c(a.sym,h),n(e[0],e[1],e[2])?(f=l(h,a),{le:a,re:h.sym}):n(e[0],e[2],e[1])?{le:(f=l(h,a)).sym,re:f}:{le:a,re:h.sym};for(var g=Math.ceil(e.length/2),_=t(e.slice(0,g)),v=t(e.slice(g)),y=_.le,m=_.re,b=v.le,x=v.re;;)if(i(b.orig,m))m=m.lnext;else{if(!r(m.orig,b))break;b=b.rprev}var E=l(b.sym,m);for(m.orig===y.orig&&(y=E.sym),b.orig===x.orig&&(x=E);;){var w=E.sym.onext;if(o(w,E))for(;s(E.dest,E.orig,w.dest,w.onext.dest);)p=w.onext,d(w),w=p;var S=E.oprev;if(o(S,E))for(;s(E.dest,E.orig,S.dest,S.oprev.dest);)p=S.oprev,d(S),S=p;if(!o(w,E)&&!o(S,E))break;E=!o(w,E)||o(S,E)&&s(w.dest,w.orig,S.orig,S.dest)?l(S,E.sym):l(E.sym,w.sym)}return{le:y,re:x}}(t).le,h=[],f=0,p=[a];i(a.onext.dest,a);)a=a.onext;for(var g=a;p.push(g.sym),g.mark=!0,(g=g.lnext)!==a;);do{var _=p[f++];if(!_.mark)for(g=_;h.push(g.orig),g.sym.mark||p.push(g.sym),g.mark=!0,(g=g.lnext)!=_;);}while(f<p.length);return h}},a.prototype={get sym(){return this.rot.rot},get dest(){return this.sym.orig},get rotSym(){return this.rot.sym},get oprev(){return this.rot.onext.rot},get dprev(){return this.rotSym.onext.rotSym},get lnext(){return this.rotSym.onext.rot},get lprev(){return this.onext.sym},get rprev(){return this.sym.onext}},e.prototype.ccw=n,e.prototype.rightOf=r,e.prototype.leftOf=i,e.prototype.inCircle=s,t.exports=e}(Uh={exports:{}}),Uh.exports);function jh(t){for(var e,n,r,i=t.length,o=[0,1],s=2,a=2;a<i;a++){for(;1<s&&(e=t[o[s-2]],n=t[o[s-1]],r=t[a],(n[0]-e[0])*(r[1]-e[1])-(n[1]-e[1])*(r[0]-e[0])<=0);)--s;o[s++]=a}return o.slice(0,s)}function Hh(t){var e=t.length;if(e<3)return null;for(var n=new Array(e),r=new Array(e),i=0;i<e;i++)n[i]=[+t[i][0],+t[i][1],i];for(n.sort((function(t,e){return t[0]-e[0]||t[1]-e[1]})),i=0;i<e;i++)r[i]=[n[i][0],-n[i][1]];var o=jh(n),s=jh(r),a=s[s.length-1],u=o[o.length-1],c=s[0]===o[0],l=a===u?1:0,d=[];for(i=o.length-1;0<=i;--i)d.push(t[n[o[i]][2]]);for(i=+c;i<s.length-l;i++)d.push(t[n[s[i]][2]]);return d}function Gh(t,e,n,r,i){if(void 0===e&&(e=1),void 0===n&&(n=0),!r||!i){var o=t.map((function(t){return[t.x,t.y]}));r=new Vh(o.slice()).triangulate(),i=Hh(o)}if(!i)return[];for(var s,a,u,c,l,d,h=n*n,f=[],p={},g=0;g<r.length;g+=3)qh(i,Wh(r[g],r[g+1],r[g+2]))&&h<(u=(a=Wh(s=r[g],r[g+1],r[g+2]))[0],c=a[1],m=(l=u-s[0])*l+(d=c-s[1])*d)&&(f.push(g),p[g]=m);if(0===f.length)return[];f.sort((function(t,e){return p[t]-p[e]}));var _=f[0],v=p[_],y=[];for(g=0;g<f.length;g++){var m,b=f[g];v<(m=p[b])&&h<m&&(_=b,v=m,y.push(_),y.length>e&&y.shift())}return y.map((function(t){return function(t,e,n){for(var r=arguments,i=Wh(t,e,n),o=0,s=0;s<3;s++){var a=r[s],u=a[0]-i[0],c=a[1]-i[1],l=Math.sqrt(u*u+c*c);o<l&&(o=l)}return[i[0],i[1],o]}(r[t],r[t+1],r[t+2])}))}function qh(t,e){for(var n=t.length,r=t[n-1],i=e[0],o=e[1],s=r[0],a=r[1],u=!1,c=0;c<n;c++){var l=t[c],d=l[0],h=l[1];o<h!=o<a&&i<(s-d)*(o-h)/(a-h)+d&&(u=!u),s=d,a=h}return u}function Wh(t,e,n){var r=[(t[0]+e[0])/2,(t[1]+e[1])/2],i=[(e[0]+n[0])/2,(e[1]+n[1])/2],o=-1/((e[1]-t[1])/(e[0]-t[0])),s=-1/((n[1]-e[1])/(n[0]-e[0])),a=r[1]-o*r[0],u=(a-(i[1]-s*i[0]))/(s-o);return[u,o*u+a]}function Yh(t){var e=t.X,n=t.Y,r=t.sizes,i=t.indexes,o=t.R,s=t.center,a=t.gap,u=void 0===a?0:a,c=t.epsilon,l=void 0===c?.001:c,d=t.maxLoops,h=void 0===d?5:d,f=t.inPlace,p=void 0===f||f,g=i.length,_=s[0],v=s[1],y=g;p||(e=e.slice(),n=n.slice());for(var m=vc,b=yc,x=i.slice().sort((function(t,r){return b(e[t],n[t],e[r],n[r],_,v)})),E=x[g-1],w=e[E],S=n[E],A=!1,C=0;C<y-1;C++){var T=C%g,k=(C+1)%g;-1===C&&(T=g-1,k=0),T=x[T],k=x[k];var I=e[T],O=n[T],M=e[k],L=n[k],N=r[T]+r[k]+u,R=b(I,O,M,L,_,v);if(-1===R&&A&&(R=1),!(o<N)){if(1===R||N-Ds(I,O,M,L)>l){var P=m(_,v,o,I,O,N);if(P){var D=P[0];A=_<M&&D[0]<_,M=e[k]=D[0],L=n[k]=D[1]}}else A=!1;if(C%g==g-2){var F=x[g-1],z=x[0];if(n[F]>v&&n[z]>v&&e[F]-r[F]<e[z]+r[F]){var B=0;for(y=Math.min(g*h,y+g);n[x[F]]>v&&n[x[0]]>v&&e[x[F]]<e[x[0]]&&++B<g;)(Y=x.pop())&&x.unshift(Y)}}}}var U=w-_,V=S-v,j=e[E]-_,H=n[E]-v,G=U==j?0:Math.abs(Math.acos((U*j+V*H)/(Math.sqrt(U*U+V*V)*Math.sqrt(j*j+H*H))));if(0!==G){var q=Math.sin(-G),W=Math.cos(-G),Y=void 0;for(C=0;C<g;C++){Y=x[C],B=e[Y]-_;var X=n[Y]-v;e[Y]=B*W-X*q+_,n[Y]=B*q+X*W+v}}return{X:e,Y:n}}function Xh(t,e,n,r,i,o){var s=Object.create(null),a=n[t],u=a,c=0,l=a;for(var d in e){for(var h=e[d],f=0,p=0,g=0,_=h.length;g<_;g++){var v=n[h[g]];p=Math.max(p,v),f+=2*v+r}var y=f/(2*Math.PI)+p,m=p+u,b=o?c+Math.max(o,m):c*i;c=Math.max(c,y,l,b),s[d]=c,u=p}return s[0]=0,s[Number.POSITIVE_INFINITY]=c,s}function Zh(t){return--t*t*t+1}function Kh(t,e,n){var r=t-n[0],i=e-n[1];return r*r+i*i}function Jh(t,e,n,r,i,o,s,a){void 0===i&&(i=0),void 0===o&&(o=Math.sin(i)),void 0===s&&(s=Math.cos(i)),void 0===a&&(a=[0,0,0,0]);var u,c,l,d,h,f,p,g,_=n/2,v=r/2,y=t+_,m=e+v;return 0===i?(a[0]=t,a[1]=e,a[2]=t+n,a[3]=e+r):(h=p=u=y+(l=-_)*s-(d=-v)*o,f=g=c=m+l*o+d*s,(u=y+(l=-_)*s-(d=v)*o)<h?h=u:p<u&&(p=u),(c=m+l*o+d*s)<f?f=c:g<c&&(g=c),(u=y+(l=_)*s-(d=v)*o)<h?h=u:p<u&&(p=u),(c=m+l*o+d*s)<f?f=c:g<c&&(g=c),(u=y+(l=_)*s-(d=-v)*o)<h?h=u:p<u&&(p=u),(c=m+l*o+d*s)<f?f=c:g<c&&(g=c),a[0]=h,a[1]=f,a[2]=p,a[3]=g),a}function Qh(t,e,n,r,i){void 0===i&&(i=0);var o=n/2,s=r/2,a=t+o,u=e+s;if(0===i)return[{x:t,y:e},{x:t+n,y:e},{x:t+n,y:e+r},{x:t,y:e+r}];var c,l,d=Math.sin(i),h=Math.cos(i);return[{x:a+(c=-o)*h-(l=-s)*d,y:u+c*d+l*h},{x:a+(c=-o)*h-(l=s)*d,y:u+c*d+l*h},{x:a+(c=o)*h-(l=s)*d,y:u+c*d+l*h},{x:a+(c=o)*h-(l=-s)*d,y:u+c*d+l*h}]}function $h(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=Rs.slice());var i=n*Math.sin(e),o=n*Math.cos(e);return r[0]=t[0]+i,r[1]=t[1]+o,r[2]=t[2]+i,r[3]=t[3]+o,r}function tf(t,e,n,r,i,o,s,a){return i<t&&t<s&&o<e&&e<a||i<n&&n<s&&o<r&&r<a}function ef(t,e,n,r,i,o,s,a){return o<=r&&e<=a&&i<=n&&t<=s}function nf(t,e,n,r,i,o){return{minX:t,minY:e,maxX:n,maxY:r,leaf:!0,level:o,parent:i,objects:[],final:!1,children:[]}}function rf(t){return[t.minX,t.minY,t.maxX,t.maxY]}function of(t,e,n,r,i,o,s,a){var u=(t+n)/2,c=(e+r)/2;return i<=u&&u<=s&&o<=c&&c<=a}function sf(t,e,n,r,i,o,s,a){var u=(o+a)/2,c=(e+r)/2;return(t+n)/2<=(i+s)/2?c<=u?0:1:c<=u?3:2}function af(t){return t}var uf=(Object.defineProperty(cf.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(cf.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),cf.prototype.clear=function(){return this._root=null,this._objects={},this._size=0,this._idToCell={},this._rootLevel=0,this._maxLevel=this._rootLevel+30,this},cf.prototype.insert=function(t,e,n){if(void 0===n&&(n=this._root),e=e||this._getBBox(t),!this._objects[t]){if(this._objects[t]=!0,this._size++,!this._root){var r=Math.max(Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return this._root=nf(e[0],e[1],e[0]+r,e[1]+r,null,this._rootLevel),this._root.objects=[t],t}for(var i,o,s=[n],a=!1,u=this._nodeCapacity,c=this._idToCell,l=this._maxLevel;o=s.pop();){var d=(i=o).minX,h=i.minY,f=i.maxX,p=i.maxY;ef(e[0],e[1],e[2],e[3],d,h,f,p)&&(i.leaf?i.objects&&(i.objects.length<u||i.final)?(i.objects.push(t),c[t]?c[t].push(i):c[t]=[i],a=!0,(i.level>=l||Math.abs(f-d)<=Math.abs(e[2]-e[0])||Math.abs(p-h)<=Math.abs(e[3]-e[1]))&&(i.final=!0)):(this.splitNode(i),s.push(i)):s.push.apply(s,i.children))}if(a)return t;if(n=this._root,!of(e[0],e[1],e[2],e[3],n.minX,n.minY,n.maxX,n.maxY)){var g,_=this._rootLevel,v=(e[0]+e[2])/2,y=(e[1]+e[3])/2;for(g=this._root?this._root:{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};!of(e[0],e[1],e[2],e[3],this._root.minX,this._root.minY,this._root.maxX,this._root.maxY);){var m=d=(g=this._root).minX,b=h=g.minY,x=f=g.maxX,E=p=g.maxY,w=Math.abs(f-d),S=Math.abs(p-h);if(0===S&&0===w)break;var A=Math.max(w,S);v<=d&&(m-=A),y<=h&&(b-=A),d<v&&(x+=A),h<y&&(E+=A);var C=nf(m,b,x,E,null,--_);this.splitNode(C),C.children[sf(d,h,f,p,m,b,x,E)]=g,this._root=g.parent=C}for(s=[this._root],this._root.level=this._rootLevel;o=s.shift();)if(!(i=o).leaf)for(var T=0;T<4;T++){var k=i.children[T];k.level=i.level+1,s.push(k)}}return(i=(n=this._root).children[sf(e[0],e[1],e[2],e[3],n.minX,n.minY,n.maxX,n.maxY)]).leaf&&i.objects&&(i.objects.push(t),c[t]?c[t].push(i):c[t]=[i]),t}},cf.prototype.removeById=function(t){if(!this._objects[t])return t;this._size--;for(var e=this._idToCell[t],n=0;n<e.length;n++)for(var r=e[n].objects||[],i=0,o=r.length;i<o;i++)if(r[i]===t){r.splice(i,1);break}return delete this._objects[t],delete this._idToCell[t],t},cf.prototype.remove=function(t){for(var e,n,r=this._getBBox(t),i=r[0],o=r[1],s=r[2],a=r[3],u=[this._root],c=[];e=u.pop();)if(ef(i,o,s,a,e.minX,e.minY,e.maxX,e.maxY))if(e.leaf){for(var l=e.objects||[],d=0,h=l.length;d<h;d++)if(l[d]===t){l.splice(d,1),1===h&&c.push(e);break}}else u.push.apply(u,e.children);if(delete this._idToCell[t],delete this._objects[t],this._size--,c.length)for(;n=c.pop();)for(var f=n.parent,p=!0;f&&p;){if(!f.leaf){for(d=0;d<4;d++)if(!(e=f.children[d]).leaf||e.objects&&0!==e.objects.length){p=!1;break}p&&(f.leaf=!0,f.children=[],f.objects=[])}f=f.parent}return t},cf.prototype.splitNode=function(t){var e=t.minX,n=t.minY,r=t.maxX,i=t.maxY,o=(e+r)/2,s=(n+i)/2,a=t.level+1,u=this._idToCell,c=this._maxLevel,l=[nf(e,n,o,s,t,a),nf(e,s,o,i,t,a),nf(o,s,r,i,t,a),nf(o,n,r,s,t,a)];if(null!==t.objects)for(var d=t.objects,h=this._getBBox,f=0,p=d.length;f<p;f++){for(var g=d[f],_=h(g),v=u[g],y=0;y<4;y++){var m=l[y],b=m.minX,x=m.minY,E=m.maxX,w=m.maxY;ef(_[0],_[1],_[2],_[3],b,x,E,w)&&(m.objects&&m.objects.push(g),(m.level>=c||Math.abs(E-b)<=Math.abs(_[2]-_[0])||Math.abs(w-x)<=Math.abs(_[3]-_[1]))&&(m.final=!0),v?v.push(m):v=[m])}v.splice(v.indexOf(t),1)}t.children=l,t.objects=null,t.leaf=!1},cf.prototype.point=function(t,e,n){for(var r,i,o,s=[],a=[this._root],u=this._getBBox;r=a.pop();)if(t>=r.minX&&t<=r.maxX&&e>=r.minY&&e<=r.maxY){if(r.leaf){n&&r.objects&&(s=r.objects);for(var c=r.objects||[],l=0,d=c.length;l<d;l++)t>=(i=u(o=c[l]))[0]&&t<=i[2]&&e>=i[1]&&e<=i[3]&&s.push(o);break}a.push.apply(a,r.children)}return s.length?s:null},cf.prototype.neigbours=function(t,e){for(var n,r=[],i=[this._root];n=i.pop();)if(t>=n.minX&&t<=n.maxX&&e>=n.minY&&e<=n.maxY){if(n.leaf){r=n.objects;break}i.push.apply(i,n.children)}return r},cf.prototype.query=function(t,e,n,r){for(var i,o,s,a=[],u=[this._root],c=this._getBBox,l={};i=u.pop();)if(ef(t,e,n,r,i.minX,i.minY,i.maxX,i.maxY))if(i.leaf)for(var d=i.objects||[],h=0,f=d.length;h<f;h++)l[s=d[h]]||(ef(t,e,n,r,(o=c(s))[0],o[1],o[2],o[3])&&a.push(s),l[s]=!0);else u.push.apply(u,i.children);return a},cf.prototype.getOverlaps=function(){for(var t,e,n,r=[this._root],i=[],o=this._getBBox,s={};t=r.pop();)if(t.leaf){for(var a=t.objects||[],u=a.length,c=0;c<u;c++)for(var l=0;l<u;l++)if(e=a[c],n=a[l],c!==l&&!s[e+":"+n]&&!s[n+":"+e]){s[e+":"+n]=!0;var d=o(e),h=o(n);ef(d[0],d[1],d[2],d[3],h[0],h[1],h[2],h[3])&&i.push(e,n)}}else r.push.apply(r,t.children);return i},cf.prototype.getAll=function(){return Object.keys(this._objects).map((function(t){return Number(t)}))},cf.prototype.forEach=function(t,e){for(var n,r=[this._root];n=r.pop();)if(n.leaf&&n.objects)for(var i=0,o=n.objects.length;i<o;i++)t.call(e,n.objects[i]);else r.push.apply(r,n.children);return this},cf.prototype.getLeafs=function(){for(var t,e=[this._root],n=[];t=e.pop();)t.leaf?n.push(t):e.push.apply(e,t.children);return n},cf.prototype.traverse=function(t,e){for(var n,r=[this._root];n=r.pop();)t.call(e,n,n.objects)||n.leaf||r.push.apply(r,n.children);return this},cf.prototype.update=function(t){return this.remove(t),this.insert(t,this._getBBox(t)),this},cf.prototype.getNodeBounds=function(t){return rf(t)},cf.flatAccessor=function(t,e){return function(n){var r=e*n;return t.slice(r,r+e)}},cf.inside=of,cf.intersects=tf,cf.overlaps=ef,cf.getNodeBBox=rf,cf);function cf(t,e,n,r){void 0===t&&(t=af),void 0===e&&(e=10),void 0===r&&(r=0),this._nodeCapacity=10,this._root=null,this._objects={},this._size=0,this._rootLevel=0,this._maxLevel=30,this._idToCell={},this._nodeCapacity=e,this._root=null,this._getBBox=t,this._rootLevel=r,this._maxLevel=r+30,this._idToCell={},n&&(this._root=nf(n[0],n[1],n[2],n[3],null,r))}function lf(t,e,n,r,i){for(var o=new Array(t.length),s=0;s<e.length;s++){var a=r[e[s]],u=r[n[s]];o[a]=o[a]||[],o[a].push(u),i&&(o[u]=o[u]||[],o[u].push(a))}return o}function df(t,e){return-1===t[e]?e:df(t,t[e])}function hf(t,e,n,r,i,o,s,a){if(r[t]=i,n[t])return 1;if(!e[t]){e[t]=1,n[t]=1;var u=o[t];if(u)for(var c=0,l=u;c<l.length;c++){var d=l[c];if(hf(d,e,n,r,t,o,s,a))return s.push(a[d]),1}n[t]=0}}function ff(t,e,n){for(var r=t.length,i=new Uint8Array(r),o=new Uint8Array(r),s=new Int32Array(r),a={},u=0;u<r;u++)a[t[u]]=u;var c=lf(t,e,n,a,!1);for(u=0;u<r;u++){var l=[];if(hf(u,i,o,s,-1,c,l,t)&&1<l.length){for(var d=l[0],h=1;h<l.length;h++)if(l[h]===d){l.length=h;break}return l.push(d),l.reverse()}}return!1}function pf(t,e,n,r,i,o,s){e[t]=1,r[t]=n;var a=i[t];if(a)for(var u=0,c=a;u<c.length;u++){var l=c[u];if(e[l]){if(l!==n)return r[l]=t,o.push(s[l]),1}else if(pf(l,e,t,r,i,o,s))return o.push(s[l]),1}}var gf=(_f.prototype.getCycles=function(){this.visited=new Uint8Array(this.nodes.length),this.visitedStack=[];for(var t=0;t<this.nodes.length;t++)for(this.backtrack(t,t);0!==this.visitedLength;){var e=this.visitedStack.pop();void 0!==e&&this.visited[e]&&(this.visited[e]=0,this.visitedLength--)}return this.cycles},_f.prototype.backtrack=function(t,e){var n=!1;this.stack.push(e),this.visited[e]||(this.visited[e]=1,this.visitedLength++),this.visitedStack.push(e);for(var r=0,i=this.adjacency[e]||[];r<i.length;r++){var o=i[r];if(this.removed[e]=this.removed[e]||{},!this.removed[e][o])if(o<t)this.removed[e][o]=!0;else if(o===t){for(var s=[],a=0,u=!(n=!0);a<this.stack.length;a++){var c=this.stack[a];t===c&&(u=!0),u&&s.push(this.nodes[c])}this.cycles.push(s)}else if(!this.visited[o]){var l=this.backtrack(t,o);n=n||l}}if(n)for(var d=void 0;d=this.visitedStack.pop(),this.visited[d]&&(this.visited[d]=0,this.visitedLength--),d!==e;);return this.stack.pop(),n},_f);function _f(t,e,n){this.cycles=[],this.visitedLength=0,this.visitedStack=[],this.stack=[],this.idToIndex={},this.removed={},this.nodes=t,this.visited=new Uint8Array(this.nodes.length);for(var r=0;r<t.length;r++)this.idToIndex[t[r]]=r;this.adjacency=lf(t,e,n,this.idToIndex)}function vf(t,e){var n=t.index[e];if(void 0===n)return-1;for(;0<=n;)e=n,n=t.parent[n];return e}function yf(t,e,n,r,i){i&&e.sort((function(t,e){return i(t)-i(e)}));var o,s,a=[],u={index:{},parent:[],count:0};t.forEach((function(t){var e,n;void 0===(e=u).index[n=t]&&(e.count+=1,e.index[n]=e.parent.push(-e.count))}));for(var c=0;c<e.length&&!(u.count<=1);c++){var l=vf(u,n(e[c])),d=vf(u,r(e[c]));l!==d&&0<l&&0<d&&(s=l,(o=u).parent[d]=s,--o.count,a.push(e[c]))}return a}var mf,bf=Object.freeze({__proto__:null,minHeap:Dh,bellmanFord:Fh,dijkstra:zh,johnson:Bh,largestEmptyCircle:Gh,minDisk:Vd,removeRadialOverlap:Yh,convexhull:Hh,circlePack:function(t){var e=t.X,n=t.Y,r=t.R,i=t.center,o=t.maxSteps,s=void 0===o?1e3:o,a=t.padding,u=void 0===a?5:a,c=t.epsilon,l=void 0===c?1e-5:c,d=t.damping,h=void 0===d?2:d,f=t.pinned,p=t.indexes,g=t.onUpdate,_=t.pushSmallerOut,v=void 0===_||_,y=p?p.length:e.length,m=p;if(isFinite(f)||(f=-1),void 0===m){m=new Uint32Array(y);for(var b=0;b<y;b++)m[b]=b}else m=p;if(-1!==f)i=[e[f],n[f]];else if(!i){var x=0,E=0;for(b=0;b<y;b++)x+=e[m[b]],E+=n[m[b]];i=[x/y,E/y]}var w=function(t,e){for(var n=1/0,r=-1/0,i=0;i<t.length;i++){var o=t[i],s=e?e[o]:o;n=Math.min(s,n),r=Math.max(s,r)}return{min:n,max:r}}(m,r),S=w.min,A=w.max;function C(t,o){for(var s=0,a=0;a<y-1;a++)for(var c=a+1;c<y;c++)if(a!==c){var l=m[a],d=m[c],p=e[l],g=n[l],_=r[l],b=e[d],x=n[d],E=r[d],w=b-p,C=x-g,T=w*w+C*C;if(T<(R=_+E+u)*R-t){var k=(R-Math.sqrt(T))*o,I=1/T,O=(P=w*I*k)*P+(D=C*I*k)*D;d!==f&&(s+=O*(B=_/S),e[d]+=P*B,n[d]+=D*B),l!==f&&(s+=O*(B=E/S),e[l]-=P*B,n[l]-=D*B)}}var M=t*h*(1-o),L=i[0],N=i[1];for(a=0;a<y;a++)if((l=m[a])!==f){var R,P,D,F=e[l],z=n[l],B=(R=r[l])/A,U=v?M*B:M;s+=O=(P=(F-L)*U)*P+(D=(z-N)*U)*D,e[l]-=P,n[l]-=D}return s}m.sort((function(t,o){return r[o]*Kh(e[o],n[o],i)-r[t]*Kh(e[t],n[t],i)}));var T=0,k=0,I=Zh(1/y);for(b=0;b<s&&(T=C(I,Zh((b+1)/s)),g&&setTimeout((function(){return g(e,n)})),!(Math.abs(T-k)<l));b++)k=T;return{X:e,Y:n}},Quadtree:uf,kruskal:yf,weightedStress:Lh,distanceStress:Nh,constrainedStress:Rh,stressMinimizationStep:Ph,stressMinimizationStepGeneral:function(t,e,n,r,i,o,s,a){s=s||0;var u,c=e,l=n;-1===(i=void 0===i?-1:i)&&(s=0);for(var d=0;d<r;d++){for(var h=a[d],f=0,p=0,g=0,_=e[h],v=n[h],y=0;y<r;y++){var m=a[y],b=0;if(m!==h){var x=0,E=t[h][m]*o,w=1/(E*E);h!==i&&m!==i||(x=w);var S=(1-s)*w+s*x;if(f+=S,0!=w){var A=e[m],C=n[m],T=_-A,k=v-C,I=T*T+k*k;1e-6<I&&(b=1/Math.sqrt(I)),p+=S*(A+E*(_-A)*b),g+=S*(C+E*(v-C)*b)}}}0!==(u=f)&&(c[h]=p/u,l[h]=g/u)}return{x:c,y:l}},detectCyclesUndirected:function(t,e,n,r){void 0===r&&(r=!1);for(var i,o,s,a,u=new Int32Array(t.length),c={},l=0;l<t.length;l++)u[l]=-1,c[t[l]]=l;for(l=0;l<e.length;l++){var d=c[e[l]],h=c[n[l]];if(r&&d===h)return!0;var f=df(u,d),p=df(u,h);if(f===p)return!0;o=p,s=df(i=u,f),a=df(i,o),i[s]=a}return!1},detectCyclesDirected:ff,detectCyclesUndirectedDFS:function(t,e,n){for(var r=t.length,i=new Uint8Array(r),o=new Int32Array(r),s={},a=0;a<r;a++)o[s[t[a]]=a]=-1;var u=lf(t,e,n,s,!0);for(a=0;a<e.length;a++){var c=s[e[a]],l=s[n[a]];u[c]=u[c]||[],u[c].push(l)}for(a=0;a<r;a++)if(!i[a]&&pf(a,i,-1,o,u,[],t))return!0;return!1},CyclesFinder:gf}),xf=(E(Ef,mf=xe),Ef.prototype.shortestPath=function(t){void 0===t&&(t={source:void 0,target:void 0});var e=t.source,n=t.target,r=t.directed,i=void 0!==r&&r,o=t.filter,s=void 0===o?"visible":o,a=t.edgeCostFunction,u=void 0===a?function(){return 1}:a,c=t.heuristicFunction,l=void 0===c?function(){return 0}:c,d=this._graph.getNode(e),h=this._graph.getNode(n);if(!d)throw new Error("the source is not a node");if(!h)throw new Error("the target is not a node");var f=d._index,p=h._index,g=null;if(f===p)g={nodes:d.toList(),edges:this._graph.edgeList()};else{var _=this._graph.getNodeMaxIndex()+1,v=new Int32Array(_),y=new Float32Array(_),m=new Float32Array(_),b=new Set,x=new ko(m);for(y.fill(1/0),m.fill(1/0),v.fill(-1),x.add(f),y[f]=0,m[f]=l(d,h);!x.isEmpty();){var E=x.removeMin();if(E===p){g=this._constructPath(v,f,p);break}b.add(E);var w=this._graph.getAdjacentDirections(E);if(w)for(var S=0;S<w.length;++S){for(var A=w[S],C=this._graph.getEdgeIndexesInDirection(A),T=-1,k=0,I=-1,O=0;O<C.length;++O){var M=C[O],L=this._sourceList.get(M),N=this._targetList.get(M);if(L!==N&&!(i&&E!==L||"visible"===s&&this._excludedList.get(M)||"raw"===s&&this._virtualList.get(M))){var R=u(this._edgeList.get(M));(-1===T||R<k)&&(T=M,k=R,I=L===E?N:L)}}if(-1!==I||b.has(I)){var P=y[E]+k;if(!x.has(I)||P<y[I]){var D=this._nodeList.get(E);v[I]=T,y[I]=P,m[I]=P+l(D,h),x.add(I)}}}}}return Promise.resolve(g)},Ef.prototype._constructPath=function(t,e,n){for(var r=[n],i=[],o=n;o!==e;){var s=t[o],a=this._sourceList.get(s),u=this._targetList.get(s);o=o===a?u:a,r.push(o),i.push(s)}return r.reverse(),i.reverse(),{nodes:this._graph.nodeList(new Uint32Array(r)),edges:this._graph.edgeList(new Uint32Array(i))}},Ef.prototype.detectCycle=function(t,e){var n=e.getSource(),r=e.getTarget(),i=ff(t._indexes,n._indexes,r._indexes);return i?this._graph.nodeList(new Uint32Array(i)).dedupe():this._graph.nodeList()},Ef.prototype.getAllSimpleCycles=function(t,e){var n=this,r=e.getSource(),i=e.getTarget();return new gf(t._indexes,r._indexes,i._indexes).getCycles().map((function(t){return n._graph.nodeList(new Uint32Array(t))}))},Ef.prototype.minimumSpanningTree=function(t,e,n){var r=this._graph;t=r.getNodes(t),e=r.getEdges(e);var i=new Set;t.forEach((function(t){return i.add(t._index)}));var o=r.getConnectedComponents(t,{filter:function(t){return i.has(t)},internalIndexes:!0}),s={};o.forEach((function(t,e){return t.forEach((function(t){return s[t]=e}))}));var a=[];return e.forEach((function(t){var e=s[t.getSource()._index];void 0!==e&&(void 0===a[e]&&(a[e]=[]),a[e].push(t._index))})),o.map((function(t,e){var i=yf(t,a[e]||[],(function(t){return r.edge(t).getSource()._index}),(function(t){return r.edge(t).getTarget()._index}),n?function(t){return n(r.edge(t))}:void 0);return{nodes:r.nodeList(new Uint32Array(t)),edges:r.edgeList(new Uint32Array(i))}}))},Ef);function Ef(t){var e=t.graph,n=mf.call(this)||this;return n._graph=e,n._nodeList=e.getNodeAttribute("object"),n._edgeList=e.getEdgeAttribute("object"),n._sourceList=e.getEdgeAttribute("source"),n._targetList=e.getEdgeAttribute("target"),n._excludedList=e.getEdgeAttribute("excluded"),n._virtualList=e.getEdgeAttribute("virtual"),n}var wf,Sf=(E(Af,wf=xe),Af.prototype._addAttributeLayer=function(){return this._graphics.addAttributeLayer({name:"curvature",priority:2,edgeDependencies:{parallelEdges:!0},edgeContext:this._context,edgeAttributes:{curvature:function(t,e){var n,r=e.edgesAlwaysCurvy,i=e.directedEdges,o=t.getSource()===t.getTarget(),s=t.getParallelEdges(),a=s.indexOf(t);if(-1===a)return 0;if(o)n=a+1;else{var u=t.getSource(),c=s.size;if(1===c&&!r)return 0;if(i){for(var l=0,d=0;d<a;++d)s.get(d).getSource()===u&&(l+=1);n=l+1}else{var h=u!==s.get(0).getSource();n=c%2!=1||r?(1+(a/2|0))*(a%2==0?1:-1)*(h?-1:1):0===a?0:((a+1)/2|0)*(a%2==0?1:-1)*(h?-1:1)}}return n}}})},Af);function Af(t){var e=t.settings,n=t.graphics,r=wf.call(this)||this;return r._context={edgesAlwaysCurvy:!1,directedEdges:!1},r._settings=e,r._graphics=n,r._attributeLayer=r._addAttributeLayer(),e.register("edgesAlwaysCurvy",!1,(function(t){r._context.edgesAlwaysCurvy=t,r._attributeLayer.updateAll()})),e.register("directedEdges",!1,(function(t){r._context.directedEdges=t,r._attributeLayer.updateAll()})),r}function Cf(){return{}}function Tf(){}function kf(){return!1}function If(){}function Of(){}function Mf(){}var Lf,Nf=(E(Rf,Lf=Ro),Rf.prototype.configure=function(t){this._onStart=t.onStart||Of,this._onEnd=t.onEnd||Mf,this._update=t.update||Tf,this._onUpdate=t.onUpdate||If,this._createContext=t.context||Cf,this._isRunning=t.isRunning||kf},Rf.prototype.setData=function(t){this._data=t},Rf.prototype.getData=function(){return this._data},Rf.prototype.onStart=function(){return this.fire("start",{target:this}),this._onStart.call(this),this},Rf.prototype.stop=function(){},Rf);function Rf(t,e,n){var r=Lf.call(this)||this;return r._complete=!1,r._data=null,r._dependencies=e,r._dom=n,r.configure(t),r}var Pf,Df=(E(Ff,Pf=Nf),Ff.prototype.sync=function(t){var e=t.data.isRunning,n=t.data.result,r=this._onUpdate.call(this,n,this._dependencies,e);return this.fire("update",{target:this,isRunning:e}),e?this.send(r):this.stop(n)},Ff.prototype.stop=function(t){return this._complete||(this._onEnd.call(this,t,this._dependencies),this._worker.terminate(),this.fire("stop",{target:this})),this._complete=!0,this},Ff.prototype.send=function(t){return this._worker.postMessage(co(t)),this},Ff);function Ff(t,e,n){var r=Pf.call(this,t,e,n)||this,i=[function(t){void 0===t&&(t={});for(var e=Object.keys(t),n=[],r=0,i=e.length;r<i;r++){var o=e[r],s=t[o];if("function"!=typeof s)throw new Error('Asynchronous task: dependency "'+o+'" is not found');var a=Uf(s);a?(n.push(Bf(s,o)),a!==o&&n.push("var "+o+" = "+a+";")):n.push("var "+o+" = "+Bf(s,o)+";")}return n.join("\n")}(t.imports),"","","var __CONTEXT = ("+r._createContext.toString()+")();","var __UPDATE_FUNC = "+r._update.toString()+";","var __IS_RUNNING_FUNC = "+r._isRunning.toString()+";","",'self.addEventListener("message", function (evt) {',"  var result    = __UPDATE_FUNC(evt.data, __CONTEXT);","  var isRunning = __IS_RUNNING_FUNC(__CONTEXT, evt.data);","  self.postMessage({ result: result, isRunning: isRunning });","});"].join("\n");return r._worker=lo(i),r._worker.addEventListener("message",(function(t){r._dom.isDestroyed()||r.sync(t)})),r}var zf=/^function\s*\(/;function Bf(t,e){var n=t.toString();return zf.test(n)?"function "+(t.name||e)+" "+n.substring(n.indexOf("(")):n}function Uf(t){var e=t.toString();return t.name?t.name:zf.test(e)?null:e.substring("function ".length,e.indexOf("(")).trim()}var Vf,jf=(E(Hf,Vf=Nf),Hf.prototype.sync=function(t){var e=this._update(t,this._context),n=this._isRunning(this._context,t),r=this._onUpdate.call(this,e,this._dependencies,n);this.fire("update",{target:this,isRunning:n}),n?this.send(r):this.stop(e)},Hf.prototype.send=function(t){var e=this;return this._complete||this._dom.setTimeout((function(){return e.sync(t)}),0),this},Hf.prototype.stop=function(t){return this._complete||(this._onEnd(t,this._dependencies),this._complete=!0),this},Hf);function Hf(t,e,n){var r=Vf.call(this,t,e,n)||this;return r._context=r._createContext(),r}var Gf,qf=(E(Wf,Gf=xe),Wf.prototype.run=function(t,e,n,r){var i=n,o=function(t,e,n){var r=t(e,n);return void 0===r&&(r=e),r}(t.configure||function(t){return t},e,r);return new(i?Df:jf)(t,r,this._dom).onStart().send(o)},Wf);function Wf(t){var e=t.dom,n=Gf.call(this)||this;return n._dom=e,n}function Yf(t,e,n){void 0===e&&(e={}),void 0===n&&(n=!0),n||(e.edges=void 0);var r=function(t,e,n,r){if(void 0===r&&(r=t.getNodes()),!e)return n?t.nodeList():r.filter((function(t){return null===t.getMetaNode()}));if(e instanceof gr)return e;if(Array.isArray(e)&&0<e.length)return t.getNodes(e);throw Error("[Layout]: 'nodes' must be a NodeList or an NodeId[]")}(t,e.nodes,e.edges),i=function(t,e,n){if(void 0===n&&(n=t.getEdges()),!e)return n;if(e instanceof Jn)return e;if(Array.isArray(e)&&0<e.length)return t.getEdges(e);throw Error("[Layout]: 'edges' must be a EdgeList or a valid EdgeId[]")}(t,e.edges,function(t){if(t.size){for(var e=new Set,n=0,r=t.getId();n<r.length;n++){var i=r[n];e.add(i)}return t.getAdjacentEdges().filter((function(t){return t.getExtremities().getId().every((function(t){return e.has(t)}))}))}}(r));return w(w({},e),{nodes:r.concat(i.getExtremities()).dedupe(),edges:i})}var Xf,Zf="complete",Kf=(E(Jf,Xf=xe),Jf.prototype.register=function(t,e){if(t in this._layouts)throw new Error("Layout "+t+" already exists");var n=w(w({},e),{name:t});this._layouts[t]=n},Jf.prototype.getAvailableLayouts=function(){return Object.keys(this._layouts)},Jf.prototype.start=function(t,e){var n=this;void 0===e&&(e={});var r=this._layouts[t],i=Yf(this._graph,e,-1===["radial","grid"].indexOf(t));return new Promise((function(e){if(!r)throw new Error("layout "+t+" does not exist");i.duration="number"==typeof i.duration?i.duration:500;var o=r.onSync;i.skipTextDrawing=void 0===i.skipTextDrawing||!!i.skipTextDrawing;var s=i.locate||!1;s&&"boolean"==typeof s&&(s={}),i.locate=s;var a=n._onTaskStart,u=n._onTaskUpdate,c=n._onTaskComplete,l={name:t,update:r.update,isRunning:r.isRunning,configure:r.configure,context:r.context,imports:r.imports,onStart:function(){a(r,i,this)},onUpdate:function(e,n,r){var s=e.lastUpdate||-1/0,a=Qt();r&&a-s<40||(e.lastUpdate=a,u(this,t,e,r,o,i))},onEnd:function(t){var n=this;this.once(Zf,(function(o){c(n,t,o,r,i,e,n.getData())}))}};n._graphics.forceAttributesComputation();var d=void 0===i.useWebWorker||!!i.useWebWorker;n._running.push(n._tasks.run(l,i,d,n._modules))}))},Jf.prototype._animateCamera=function(t,e,n){if(0===t.indexes.length)return Promise.resolve();var r=this._locate.layoutDataBoundingBox(t),i=this._locate.computeConfigForBounds(r,e);return this._camera.setView(i,{duration:n,easing:e.easing})},Jf.prototype.stop=function(){for(;0!==this._running.length;){var t=this._running.pop();t.stop(),t.fire(Zf,null)}return Promise.resolve()},Jf.prototype.isRunning=function(){return 0!==this._running.length},Jf.prototype._assignNodePositions=function(t,e,n){if(!t||n){var r=t?new Uint32Array(t.indexes):void 0,i=this._graph.nodeList(r);return Promise.resolve(i)}for(var o=t.indexes,s=t.x,a=t.y,u=this._graph.nodeList(new Uint32Array(o)),c=Qf(t),l=0;l<c.length;l++)c[l]={x:s[l],y:a[l]};return u.setAttributes(c,e)},Jf);function Jf(t){var e=Xf.call(this)||this;return e._running=[],e._onTaskUpdate=function(t,n,r,i,o,s){var a=s.duration,u=s.onSync,c=s.onUpdate,l=s.dryRun,d=s.locate;if(u&&e._dom.setTimeout((function(){return u(r,e._modules,i)}),a),o){var h=o(r,e._modules,i);e._events.fire(me.LAYOUT_COMPUTED,{type:me.LAYOUT_COMPUTED,name:n,positions:h}),c&&c(r,h,i);var f=e._assignNodePositions(h,a,l);i||(d&&e._animateCamera(h,d,s.duration),f.then((function(){return t.fire(Zf,h)})))}else i||t.fire(Zf,r)},e._onTaskComplete=function(t,n,r,i,o,s,a){for(var u=0;u<e._running.length;u++)if(e._running[u]===t){e._running.splice(u,1);break}i.onEnd&&n&&i.onEnd(n,e._modules),o.skipTextDrawing&&e._dom.setTimeout((function(){return e._graphics.showTexts()}),50);var c=e._graph.nodeList(new Uint32Array(a.indexes)),l=o.dryRun&&n?r:$f(c,e._graph),d=c.getId(),h={before:Qf(a),current:Qf(l)};e._events.fire(me.LAYOUT_END,{type:me.LAYOUT_END,name:i.name,positions:h,ids:d}),e._dom.setTimeout((function(){o.onEnd&&o.onEnd(n),s({name:i.name,positions:h,ids:d})}))},e._onTaskStart=function(t,n,r){n.skipTextDrawing&&e._graphics.hideTexts();var i=$f(e._graph.getNodes(n.nodes),e._graph),o=i.ids;r.setData(i),e._events.fire(me.LAYOUT_START,{type:me.LAYOUT_START,name:t.name,ids:o,task:r})},e._modules=t,e._dom=t.dom,e._events=t.events,e._graph=t.graph,e._graphics=t.graphics,e._tasks=t.tasks,e._locate=t.locate,e._camera=t.camera,e._layouts={},e._events.register([me.LAYOUT_START,me.LAYOUT_END,me.LAYOUT_COMPUTED]),e._events.on(me.CLEAR_GRAPH,(function(){return e.stop()})),e}function Qf(t){for(var e=t.x,n=t.y,r=t.indexes.length,i=new Array(r),o=0;o<r;o++)i[o]={x:e[o],y:n[o]};return i}function $f(t,e){var n=t._indexes,r=e.getNodeAttribute("x").getMultiple(n),i=e.getNodeAttribute("y").getMultiple(n);return{ids:t.getId(),indexes:n,x:r,y:i}}function tp(t){return"number"==typeof t&&isFinite(t)}var ep=(np.prototype.onUpdate=function(t){this._onUpdateHandlers.push(t)},np.prototype.getPropertyInfo=function(){return this._info},np.prototype.getPath=function(){return this._path.slice()},np.prototype.destroy=function(){this._module.unwatchPropertyInformation(this._isNode,this._path,this._triggerUpdate,this._filter,this._unwindArrays)},np.prototype.kill=function(){return this.destroy()},np);function np(t,e,n){var r=this,i=n.path,o=n.filter,s=n.unwindArrays;this._module=t,this._isNode=e,this._path=i||[],this._filter=o,this._unwindArrays=s,this._onUpdateHandlers=[],this._triggerUpdate=function(t){for(var e=0;e<r._onUpdateHandlers.length;++e)r._onUpdateHandlers[e](t)},this._info=t.watchPropertyInformation(this._isNode,this._path,this._triggerUpdate,this._filter,this._unwindArrays)}var rp=(Object.defineProperty(ip.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),ip.prototype.onPropertyAdded=function(t){return this._onAddHandlers.push(t),this},ip.prototype.onPropertyRemoved=function(t){return this._onRemoveHandlers.push(t),this},ip.prototype.onPropertyUpdated=function(t){return this._onUpdateHandlers.push(t),this},ip.prototype.getPath=function(){return this._path.slice()},ip.prototype.getProperties=function(){return this._propertyList.slice()},ip.prototype.getPropertyInfo=function(t){var e=this._properties[t];return e?e.info:null},ip.prototype.destroy=function(){var t=this;q(this._properties,(function(e,n){var r=e.handler,i=t._path.concat([n]);t._module.unwatchPropertyInformation(t._isNode,i,r,t._filter,t._unwindArrays)})),this._propertyList=[],this._properties={},this._onAddHandlers=[],this._onRemoveHandlers=[],this._onUpdateHandlers=[];var e=this._module._objectPropertyWatchers.indexOf(this);this._module._objectPropertyWatchers.splice(e,1)},ip.prototype.kill=function(){return this.destroy()},ip.prototype.updateSubPropertiesToWatch=function(t,e){if(t===this._isNode)for(var n=e.getData(this._path),r=0;r<n.length;r++){var i=n[r];if(H(i))for(var o=Object.keys(i),s=0;s<o.length;s++)this._addSubPropertyToWatch(o[s])}},ip.prototype._addSubPropertyToWatch=function(t){var e=this;if(!this._properties[t]){var n=this._path.concat([t]),r=function(){return e._triggerPropertyUpdate(t)},i=this._unwindArrays,o=this._isNode,s=this._filter,a=this._module.watchPropertyInformation(o,n,r,s,i);this._properties[t]={handler:r,info:a},this._triggerPropertyUpdate(t)}},ip.prototype._triggerPropertyUpdate=function(t){var e=this._properties[t].info,n=this._propertyList.indexOf(t),r=-1!==n,i="undefined"!==e.getType();!r&&i?(this._propertyList.push(t),this._triggerHandlers("_onAddHandlers",t,e),this._triggerHandlers("_onUpdateHandlers",t,e)):r&&!i?(this._propertyList.splice(n,1),this._triggerHandlers("_onUpdateHandlers",t,e),this._triggerHandlers("_onRemoveHandlers",t,e)):r&&i&&this._triggerHandlers("_onUpdateHandlers",t,e)},ip.prototype._triggerHandlers=function(t,e,n){for(var r=this[t],i=0,o=r.length;i<o;i++)r[i](e,n)},ip);function ip(t,e,n){var r=n.path,i=n.filter,o=n.unwindArrays;this._module=t,this._isNode=e,this._path=r,this._filter=i,this._unwindArrays=o,this._propertyList=[],this._properties={},this._onAddHandlers=[],this._onRemoveHandlers=[],this._onUpdateHandlers=[]}var op=(sp.prototype.setWatcher=function(t){this._watcher=t},sp.prototype.isNode=function(){return this._watcher.isNode},sp.prototype.getPath=function(){return this._watcher.property.slice()},sp.prototype.getBoundaries=function(){var t=this._watcher.boundaries;return t?{min:t.min,max:t.max}:null},sp.prototype.getValues=function(){return this._watcher.values.keys()},sp.prototype.getValueCount=function(t){return this._watcher.values.get(t)||0},sp.prototype.getCount=function(){return this._watcher.total},sp.prototype.getType=function(){return 0<this._watcher.any?"any":0<this._watcher.numbers?"number":"undefined"},sp);function sp(){}function ap(t){return"number"==typeof t&&isNaN(t)}var up=(cp.prototype.set=function(t,e){var n=this._getIndex(t);return-1===n?(this._keys.push(t.slice()),this._values.push(e),!0):(this._values[n]=e,!1)},cp.prototype.get=function(t){var e=this._getIndex(t);return-1===e?void 0:this._values[e]},cp.prototype.has=function(t){return-1!==this._getIndex(t)},cp.prototype.delete=function(t){var e=this._getIndex(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),!0)},cp.prototype.keys=function(){return this._keys.map((function(t){return t.slice()}))},cp.prototype.values=function(){return this._values.slice()},cp.prototype._getIndex=function(t){for(var e=0;e<this._keys.length;e++){var n=this._keys[e];if(n.length===t.length){for(var r=!0,i=0;i<t.length;i++){var o=n[i],s=t[i];if(!(o===s||ap(o)&&ap(s))){r=!1;break}}if(r)return e}}return-1},Object.defineProperty(cp.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),cp);function cp(){this._keys=[],this._values=[]}var lp=(dp.prototype.clear=function(){return this._arrays=new up,this._map.clear()},dp.prototype.delete=function(t){return N(t)?this._arrays.delete(t):this._map.delete(t)},dp.prototype.get=function(t){return N(t)?this._arrays.get(t):this._map.get(t)},dp.prototype.set=function(t,e){return N(t)?this._arrays.set(t,e):this._map.set(t,e),this},dp.prototype.keys=function(){return A(Zi(this._map),this._arrays.keys())},dp.prototype.values=function(){return A(Ki(this._map),this._arrays.values())},Object.defineProperty(dp.prototype,"size",{get:function(){return this._map.size+this._arrays.size},enumerable:!0,configurable:!0}),dp);function dp(){this._map=new Map,this._arrays=new up}var hp,fp=(E(pp,hp=xe),pp.prototype.watchNodeObjectProperty=function(t){return this._watchObjectProperty(!0,xp(t))},pp.prototype.watchEdgeObjectProperty=function(t){return this._watchObjectProperty(!1,xp(t))},pp.prototype.watchNodeNonObjectProperty=function(t){return this._watchNonObjectProperty(!0,xp(t))},pp.prototype.watchEdgeNonObjectProperty=function(t){return this._watchNonObjectProperty(!1,xp(t))},pp.prototype.watchPropertyInformation=function(t,e,n,r,i){var o=this._findWatcher(t,e,r,i)||this._createWatcher(t,e,r,i);return n&&o.onChange.push(n),o.info},pp.prototype.unwatchPropertyInformation=function(t,e,n,r,i){var o=this._findWatcher(t,e,r,i);if(o){var s=o.onChange,a=s.indexOf(n);if(-1!==a&&(s.splice(a,1),0===s.length)){var u=this._propertyWatchers.indexOf(o);this._propertyWatchers.splice(u,1)}}},pp.prototype._watchObjectProperty=function(t,e){var n=new rp(this,t,e);return this._objectPropertyWatchers.push(n),n.updateSubPropertiesToWatch(t,this._graph[t?"getNodes":"getEdges"](e.filter)),n},pp.prototype._watchNonObjectProperty=function(t,e){return new ep(this,t,e)},pp.prototype._findWatcher=function(t,e,n,r){for(var i=0;i<this._propertyWatchers.length;++i){var o=this._propertyWatchers[i];if(o.isNode===t&&o.filter===n&&o.unwindArrays===r&&vp(o.property,e))return o}return null},pp.prototype._createWatcher=function(t,e,n,r){var i={isNode:t,property:e,numbers:0,any:0,total:0,values:new lp,boundaries:null,onChange:[],filter:n,unwindArrays:r,info:new op};return i.info.setWatcher(i),mp(i,this._graph[t?"getNodes":"getEdges"](n).getData(e)),this._propertyWatchers.push(i),i},pp);function pp(t){var e,n=t.graph,r=t.events,i=hp.call(this)||this;return i._onExcludedStateChange=function(t){for(var e=t.elements,n=!t.value,r=0,o=i._propertyWatchers.length;r<o;r++){var s=i._propertyWatchers[r];s.isNode===e.isNode&&"visible"===s.filter&&((n?mp:bp)(s,e.getData(s.property)),_p(s))}},i._onDataChange=function(t){for(var e=t.isNode,n=t.changes,r=0;r<i._propertyWatchers.length;++r){var o=(_=i._propertyWatchers[r]).property,s="all"===_.filter;if(_.isNode===e)for(var a=0;a<n.length;++a){var u=n[a],c=yp(u.property||[],o);if(c){var l=u.nodes||u.edges,d=[],h=[];if(l)for(var f=0;f<l.size;++f){var p=l.get(f);(s||p.isVisible())&&(d.push(X(u.newValues[f],c)),h.push(X(u.previousValues[f],c)))}d.length&&(mp(_,d),bp(_,h),_p(_))}}}r=0;for(var g=i._objectPropertyWatchers.length;r<g;r++){var _,v=(_=i._objectPropertyWatchers[r]).path,y=function(t){var e=n[t],r=e.property,i=e.nodes,o=e.edges,s=i||o;if(s){var a=s.isNode;(!r||r.length<=v.length+1&&v.every((function(t,e){return t===r[e]})))&&_.updateSubPropertiesToWatch(a,s)}};for(a=0;a<n.length;++a)y(a)}},i._onElementsAdded=function(t){for(var e=t.nodes||t.edges,n=0;n<i._propertyWatchers.length;++n){var r=i._propertyWatchers[n];if(r.isNode===e.isNode){var o=e.getData(r.property);o.length&&(mp(r,o),_p(r))}}for(n=0;n<i._objectPropertyWatchers.length;n++)i._objectPropertyWatchers[n].updateSubPropertiesToWatch(e.isNode,e)},i._onElementsRemoved=function(t){for(var e=t.nodes||t.edges,n=0;n<i._propertyWatchers.length;++n){var r=i._propertyWatchers[n],o="all"===r.filter;if(r.isNode===e.isNode&&o){var s=e.getData(r.property);s.length&&(bp(r,s),_p(r))}}},i._onGraphClear=function(){i._propertyWatchers.forEach((function(t){t.numbers=0,t.any=0,t.total=0,t.boundaries=null,t.values.clear()}))},i._graph=n,i._propertyWatchers=[],i._objectPropertyWatchers=[],r.on(((e={})[me.EXCLUDED_STATE_CHANGE]=i._onExcludedStateChange,e[me.UPDATE_NODE_DATA+" "+me.UPDATE_EDGE_DATA]=i._onDataChange,e[me.ADD_NODES+" "+me.ADD_EDGES]=i._onElementsAdded,e[me.REMOVE_NODES+" "+me.REMOVE_EDGES]=i._onElementsRemoved,e[me.CLEAR_GRAPH]=i._onGraphClear,e)),i}function gp(t){return null==t?[]:z(t)}function _p(t){for(var e=0;e<t.onChange.length;++e)t.onChange[e](t.info)}function vp(t,e){if(t.length===e.length){for(var n=0;n<t.length;++n)if(t[n]!==e[n])return;return 1}}function yp(t,e){if(t.length>e.length)return null;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return null;return e.slice(n)}function mp(t,e,n){for(var r=t.values,i=!n&&t.unwindArrays,o=0;o<e.length;++o){var s=e[o];if(n||void 0===s||(t.total+=1),i&&Array.isArray(s))mp(t,s,!0);else{var a=r.get(s);a?r.set(s,a+1):(r.set(s,1),tp(s)?(t.boundaries?s<t.boundaries.min?t.boundaries.min=s:s>t.boundaries.max&&(t.boundaries.max=s):t.boundaries={min:s,max:s},t.numbers+=1):void 0!==s&&(t.any+=1))}}}function bp(t,e,n){for(var r=t.values,i=!n&&t.unwindArrays,o=t.boundaries,s=!1,a=0;a<e.length;++a){var u=e[a];if(n||void 0===u||--t.total,i&&Array.isArray(u))s=s||bp(t,u,!0);else{var c=r.get(u);1<c?r.set(u,c-1):(r.delete(u),tp(u)?(--t.numbers,!o||o.min!==u&&o.max!==u||(s=!0)):void 0!==u&&--t.any)}}return!n&&s&&(t.boundaries=function(t){for(var e=null,n=null,r=0;r<t.length;++r){var i=t[r];tp(i)&&((null==e||i<e)&&(e=i),(null==n||n<i)&&(n=i))}return null==e||null==n?null:{min:e,max:n}}(r.keys())),s}function xp(t){return"object"!=typeof t||null===t||Array.isArray(t)?{path:gp(t),filter:"visible",unwindArrays:!1}:{path:gp(t.path),filter:"all"===(t.filter||"visible")?"all":"visible",unwindArrays:!!t.unwindArrays}}function Ep(t,e){var n=t.getPosition(),r=e.getPosition();return Ds(n.x,n.y,r.x,r.y)}var wp,Sp={pathLengthFunction:Ep,heuristicLengthFunction:Ep},Ap={pathLengthFunction:function(){return 1},heuristicLengthFunction:function(){return 0}},Cp=(E(Tp,wp=xe),Tp.prototype.astar=function(t,e,n){return kp(this._graph,t,e,this._cachedObjectList,w(w({},Sp),n))},Tp.prototype.dijkstra=function(t,e,n){return kp(this._graph,t,e,this._cachedObjectList,w(w({},Ap),n))},Tp.prototype.dijkstraBig=function(t,e,n){var r=this._graph.getNode(t),i=this._graph.getNode(e);if(!r||!i)return this._graph.nodeList();var o=this._graph.getNodes(),s=zh(this._graph.getAdjacencyList({directed:n.directed,weight:1,nodes:o}),r._index,i._index,o._indexes,void 0,!1);return s.path?this._graph.nodeList(new Uint32Array(s.path)):this._graph.nodeList()},Tp);function Tp(t){var e=t.graph,n=wp.call(this)||this;return n._graph=e,n._cachedObjectList=e.getNodeAttribute("object"),n}function kp(t,e,n,r,i){var o=void 0===i?{}:i,s=o.pathLengthFunction,a=o.heuristicLengthFunction,u=o.filter,c=o.directed,l=t.getNode(e),d=t.getNode(n);if(!l||!d)return t.nodeList();var h,f=l._index,p=d._index,g=s||function(){return 0},_=a||function(){return 0},v=c?vn:yn,y=r.get(f),m=r.get(p);if(f===p)return t.nodeList(new Uint32Array([f]));for(var b=t.getNodeMaxIndex()+1,x=new Ji,E=new Ji,w=new Int32Array(b),S=new Float32Array(b),A=new Float32Array(b),C=0;C<b;++C)w[C]=-1,S[C]=1/0,A[C]=1/0;for(E.add(f),S[f]=0,A[f]=_(y,m);0!==E.length;){var T=E.length,k=E.get(0),I=0,O=A[k];for(C=1;C<T;++C){var M=E.get(C),L=A[M];L<O&&(O=L,k=M,I=C)}if(k===p){h=Ip(w,f,p);break}var N=r.get(k);E.removeByPosition(I),x.add(k);var R=t.node(k).getAdjacentNodes({direction:v,filter:u})._indexes;for(C=0;C<R.length;++C){var P=R[C],D=r.get(P);if(!x.has(P)){var F=S[k]+g(N,D);!E.add(P)&&F>=S[P]||(w[P]=k,S[P]=F,A[P]=F+_(D,m))}}}return h&&t.nodeList(h)}function Ip(t,e,n){for(var r=[n],i=n;i!==e;)i=t[i],r.push(i);return r.reverse(),r}var Op,Mp=(E(Lp,Op=xe),Object.defineProperty(Lp.prototype,"x",{get:function(){return this._position.x||0},enumerable:!0,configurable:!0}),Object.defineProperty(Lp.prototype,"y",{get:function(){return this._position.y||0},enumerable:!0,configurable:!0}),Lp.prototype._later=function(){return this._dom.afterNextFrame()},Lp.prototype.move=function(t){var e=this,n=t.x,r=t.y;return void 0!==n&&void 0!==r?this._dom.afterNextFrame().then((function(){var t=n-e.x,i=r-e.y;return e._events.fire(me.VIRTUAL_MOVE,{x:n,y:r,dx:t,dy:i}),e._later()})):Promise.resolve()},Lp.prototype.down=function(t){var e=this,n=void 0===t?{}:t,r=n.x,i=n.y,o=n.button,s=void 0===o?Id.LEFT:o;return this.move({x:r,y:i}).then((function(){return e._events.fire(me.VIRTUAL_DOWN,{x:e.x,y:e.y,button:s}),e._events.fire(me.VIRTUAL_MOVE,{x:e.x,y:e.y,dx:0,dy:0,button:s}),e._later()}))},Lp.prototype.up=function(t){var e=this,n=void 0===t?{}:t,r=n.x,i=n.y,o=n.button,s=void 0===o?Id.LEFT:o;return this.move({x:r,y:i}).then((function(){return e._events.fire(me.VIRTUAL_UP,{x:r,y:i,button:s}),e._later()}))},Lp.prototype.click=function(t){var e=this,n=void 0===t?{}:t,r=n.x,i=n.y,o=n.button,s=void 0===o?Id.LEFT:o;return this.move({x:r,y:i}).then((function(){return e._events.fire(me.VIRTUAL_CLICK,{x:r,y:i,button:s}),e._later()}))},Lp.prototype.rightClick=function(t){var e=this,n=void 0===t?{}:t,r=n.x,i=n.y,o=n.button,s=void 0===o?Id.RIGHT:o;return this.move({x:r,y:i}).then((function(){return e._events.fire(me.VIRTUAL_CLICK,{x:r,y:i,button:s}),e._later()}))},Lp.prototype.doubleClick=function(t){var e=this,n=void 0===t?{}:t,r=n.x,i=n.y,o=n.button,s=void 0===o?Id.LEFT:o;return this.move({x:r,y:i}).then((function(){return e._events.fire(me.VIRTUAL_DOUBLE_CLICK,{x:r,y:i,button:s}),e._later()}))},Lp.prototype.drag=function(t,e){var n=this;return this.down(t).then((function(){return n.move(e)})).then((function(){return n.up(e)}))},Lp.prototype.wheel=function(t){var e=this,n=t.x,r=t.y,i=t.delta;return this.move({x:n,y:r}).then((function(){return e._events.fire(me.VIRTUAL_WHEEL,{x:n,y:r,delta:i}),e._later()}))},Lp);function Lp(t){var e=t.position,n=t.dom,r=t.events,i=Op.call(this)||this;return i._dom=n,i._events=r,i._position=e,i._events.register([me.VIRTUAL_DOWN,me.VIRTUAL_UP,me.VIRTUAL_MOVE,me.VIRTUAL_CLICK,me.VIRTUAL_DOUBLE_CLICK,me.VIRTUAL_WHEEL]),i}function Np(t,e,n,r,i,o){var s=Tt(),a=o.graphToScreenCoordinates(t),u=o.graphToScreenCoordinates(e);i.beginPath(),i.moveTo(a.x*s,a.y*s),i.lineTo(u.x*s,u.y*s),i.strokeStyle=r,i.lineWidth=n,i.stroke()}function Rp(t,e,n,r){for(var i,o,s=0,a=t.length-1;s<a;)i=(s+a)/2|0,o=Math.abs(e[t[i]]-n),Math.abs(e[t[1+i]]-n)<=o?s=1+i:a=i;return r?a:t[a]}function Pp(t,e,n,r,i,o,s){for(var a,u,c=0,l=t.length;c<l;c++)for(var d=0;d<l;d++)if(c!==d){var h=t[c],f=t[d];d<c&&(a=f,f=h,h=a);var p=e[h],g=e[f],_=o.get(h),v=o.get(f);if(p+_<r-i&&r+i<g-v&&Math.abs(Math.abs(p+_-(r-i))-Math.abs(g-v-(r+i)))<=s)return{a:h,b:n,c:f,current:n,target:u=p+_+Math.abs(g-v-(p+_))/2,points:[p+_,u-i,u+i,g-v]};if(p+_<r-i&&g+v<r-i&&Math.abs(Math.abs(p+_-(g-v))-Math.abs(Math.max(p+_,g+v)-(r-i)))<=s)return{a:h,b:f,c:n,current:n,target:u=g+_+Math.abs(Math.abs(p+_-(g-v)))+i,points:[p+_,g-v,g+v,u-i]};if(r+i<p-_&&r+i<g-v&&Math.abs(Math.abs(p+_-(g-v))-Math.abs(Math.min(p-_,g-v)-(r+i)))<=s)return{a:n,b:h,c:f,current:n,target:u=p-_-Math.abs(Math.abs(p+_-(g-v)))-i,points:[u+i,p-_,p+_,g-v]}}return null}var Dp,Fp,zp={tolerance:5,centerSnapDistance:240,sideSnapDistanceFactor:3,guidelineWidth:1,guidelineColor:"#ff0000",preferredDistance:{enabled:!0,ratio:1.13,tolerance:10,lineColor:"#00C3FF",lineWidth:1},neighbours:{enabled:!0,offset:5,tolerance:3,lineColor:"#00C3FF",lineWidth:1}};(Fp=Dp=Dp||{})[Fp.NONE=0]="NONE",Fp[Fp.CENTER=1]="CENTER",Fp[Fp.LEFT=2]="LEFT",Fp[Fp.RIGHT=3]="RIGHT",Fp[Fp.TOP=4]="TOP",Fp[Fp.BOTTOM=5]="BOTTOM";var Bp,Up=(E(Vp,Bp=xe),Vp.prototype.enable=function(t){var e=this;this._enabled||(this._options=tt(t,zp),this._enabled=!0,this._graphics.addCanvas(this._canvas),this._events.on(me.NODES_DRAG_START,this._onNodeDragStart),this._events.on(me.NODES_DRAG_END,this._onNodeDragEnd),this._settings.update({"interactions.drag.onBeforeDrag":function(t,n,r,i){return e._onBeforeDrag(n,r,i)}}))},Vp.prototype.disable=function(){this._enabled&&(this._events.removeListener(this._onNodeDragStart),this._events.removeListener(this._onNodeDragEnd),this._graphics.removeCanvas(this._canvas),this._settings.update({"interactions.drag.onBeforeDrag":null}),this._enabled=!1)},Vp.prototype.enabled=function(){return this._enabled},Vp.prototype._onBeforeDrag=function(t,e,n){if(this._node){var r=n[0];this._scan(r),this._node.setAttributes(r)}},Vp.prototype._cacheViewportData=function(){var t=this._camera,e=t.screenToGraphCoordinates({x:0,y:0}),n=t.screenToGraphCoordinates({x:t.width,y:t.height});if(this._nodes=this._spatial.getNodesByBoundingBox(e.x,e.y,n.x,n.y),null!=this._node){var r=this._node._index,i=Array.from(this._nodes._indexes);i.splice(i.indexOf(r),1);var o=this._graph.getNodeAttribute("radius"),s=this._graph.getNodeAttribute("x"),a=this._graph.getNodeAttribute("y"),u=s.buffer(),c=a.buffer(),l=L(i.slice(),s),d=L(i.slice(),a),h={},f={};this._gridResolution=this._node.getAttribute("radius");for(var p=this._gridResolution,g=0,_=i.length;g<_;g++){var v=l[g],y=d[g],m=u[v]/p|0,b=c[y]/p|0;h[m]||(h[m]=[]),f[b]||(f[b]=[]),h[m].push(v),f[b].push(y)}this._nodesByX=l,this._nodesByY=d,this._xGrid=h,this._yGrid=f,this._xList=s,this._yList=a,this._X=u,this._Y=c,this._R=o}},Vp.prototype._scan=function(t){if(ei(this._canvas,this._ctx),null!=this._node){var e,n,r,i,o,s,a,u,c=this._node._index,l=t.x,d=t.y,h=this._r,f=this._options,p=this._xList,g=this._yList,_=this._R,v=this._X,y=this._Y,m=this._camera.zoom,b=Math.min(h,this._options.tolerance/m),x=2*h*f.sideSnapDistanceFactor,E=f.guidelineWidth,w=f.guidelineColor,S=c,A=c,C=null,T=!1,k=!1;if(S=Rp(this._nodesByX,v,l),A=Rp(this._nodesByY,y,d),Math.abs(v[S]-l)>f.centerSnapDistance&&(S=c),Math.abs(y[A]-d)>f.centerSnapDistance&&(A=c),this._xsnap=Dp.NONE,S!==c){e=this._vguideline.start,n=this._vguideline.end,r=v[u=S],i=y[u],C=_.get(u),a=Math.abs(l-r);var I=Math.abs(l-h-(r-C)),O=Math.abs(l+h-(r+C));a<Math.max(h,C)&&(i<d?(e.y=i-C,n.y=d+h):(e.y=i+C,n.y=d-h),(M=Math.min(I,a,O))===a?(e.x=n.x=r,n.y=d,e.y=i,this._xsnap=Dp.CENTER):Math.abs(d-i)<C+h+x&&(M===I?(e.x=n.x=r-C,this._xsnap=Dp.LEFT):(e.x=n.x=r+C,this._xsnap=Dp.RIGHT)),M<b&&(T=!0)),this._xsnap!==Dp.NONE&&Np(e,n,E,w,this._ctx,this._camera)}if(this._ysnap=Dp.NONE,A!==c){e=this._hguideline.start,n=this._hguideline.end,r=v[u=A],i=y[u],C=_.get(u),a=Math.abs(d-i);var M,N=Math.abs(d-h-(i-C)),R=Math.abs(d+h-(i+C));a<Math.max(h,C)&&(r<l?(e.x=r-C,n.x=l+h):(e.x=r+C,n.x=l-h),(M=Math.min(N,a,R))===a?(e.y=n.y=i,n.x=l,e.x=r,this._ysnap=Dp.CENTER):Math.abs(l-r)<C+h+x&&(M===N?(e.y=n.y=i-C,this._ysnap=Dp.TOP):(e.y=n.y=i+C,this._ysnap=Dp.BOTTOM)),M<b&&(k=!0)),this._ysnap!==Dp.NONE&&Np(e,n,E,w,this._ctx,this._camera)}if(null!=C&&f.preferredDistance.enabled){var P=f.preferredDistance.ratio,D=Math.min(f.preferredDistance.tolerance/m,h),F=Math.max(h,C);if(S===c||this._xsnap!==Dp.NONE&&T)A!==c&&(this._ysnap===Dp.NONE||!k)&&(r=v[u=A],i=y[u],C=_.get(u),(s=Math.abs(d-i)-(h+C)*(1+P))<=D&&-D<=s)&&(z=d<i?-1:1,e=this._hguideline.start,n=this._hguideline.end,e.x=r-F,n.x=r+F,e.y=n.y=i,Np(e,n,E,w,this._ctx,this._camera),e.x=l-F,n.x=l+F,e.y=n.y=i+z*(1+P)*(h+C),Np(e,n,E,w,this._ctx,this._camera),this._ysnap=Dp.CENTER,k=!0);else if(r=v[u=S],i=y[u],C=_.get(u),(o=Math.abs(l-r)-(h+C)*(1+P))<=D&&-D<=o){var z=l<r?-1:1;e=this._vguideline.start,n=this._vguideline.end,e.x=n.x=r+z*(1+P)*(h+C),e.y=i-F,n.y=i+F,e.x=n.x=r,Np(e,n,E,w,this._ctx,this._camera),e.y=d-F,n.y=d+F,e.x=n.x=r+z*(1+P)*(h+C),Np(e,n,E,w,this._ctx,this._camera),this._xsnap=Dp.CENTER,T=!0}}if(f.neighbours.enabled){var B=this._gridResolution,U=l/B|0,V=d/B|0,j=this._xGrid,H=this._yGrid,G=[],q=[].concat(H[V-1]||G,H[V]||G,H[1+V]||G),W=[].concat(j[U-1]||G,j[U]||G,j[1+U]||G),Y=void 0;1<q.length&&(L(q,p),(Y=Pp(q,v,c,l,h,_,b))&&(this._drawNeighbourGuidelines(Y,t,!1),T=!1)),1<W.length&&!Y&&(L(W,g),(Y=Pp(W,y,c,d,h,_,b))&&(this._drawNeighbourGuidelines(Y,t,!0),k=!1))}(T||k)&&this._snap(t,!T,!k)}},Vp.prototype._drawNeighbourGuidelines=function(t,e,n){var r,i,o=t.a,s=t.b,a=t.c,u=t.points,c=t.target,l={x:0,y:0},d={x:0,y:0},h=this._R,f=this._X,p=this._Y,g=h.getMultiple([o,s,a]),_=g[0],v=g[1],y=g[2],m=this._options.neighbours,b=m.offset,x=m.lineWidth,E=m.lineColor;i=n?(e.y=c,_=-_,v=-v,y=-y,r=d.x=l.x=Math.min(f[o]+_,f[s]+v,f[a]+y)-b,f):(e.x=c,r=d.y=l.y=Math.max(p[o]+_,p[s]+v,p[a]+y)+b,p);var w=n?"y":"x",S=n?"x":"y";l[w]=u[0],d[w]=u[1],Np(l,d,x,E,this._ctx,this._camera),l[w]=u[2],d[w]=u[3],Np(l,d,x,E,this._ctx,this._camera),l[w]=u[0],l[S]=r-b/2,d[w]=u[0],l[S]=i[o]+_,Np(l,d,x,E,this._ctx,this._camera),l[w]=u[1],l[S]=r-b/2,d[w]=u[1],l[S]=i[s]+v,Np(l,d,x,E,this._ctx,this._camera),l[w]=u[2],l[S]=r-b/2,d[w]=u[2],l[S]=i[s]+v,Np(l,d,x,E,this._ctx,this._camera),l[w]=u[3],l[S]=r-b/2,d[w]=u[3],l[S]=i[a]+y,Np(l,d,x,E,this._ctx,this._camera)},Vp.prototype._snap=function(t,e,n){var r,i=this._xsnap,o=this._ysnap;e||i===Dp.NONE||(r=this._vguideline.end,i===Dp.LEFT?t.x=r.x+this._r:i===Dp.RIGHT?t.x=r.x-this._r:t.x=r.x),n||o===Dp.NONE||(r=this._hguideline.end,o===Dp.TOP?t.y=r.y+this._r:o===Dp.BOTTOM?t.y=r.y-this._r:t.y=r.y)},Vp);function Vp(t){var e=t.graph,n=t.graphics,r=t.spatial,i=t.camera,o=t.events,s=t.settings,a=Bp.call(this)||this;return a._options=W(zp),a._enabled=!1,a._ysnap=Dp.NONE,a._xsnap=Dp.NONE,a._node=null,a._nodes=null,a._r=0,a._vguideline={start:{x:0,y:0},end:{x:0,y:0}},a._hguideline={start:{x:0,y:0},end:{x:0,y:0}},a._gridResolution=0,a._onNodeDragStart=function(t){var e=t.nodes;1===e.size&&(a._node=e.get(0),a._cacheViewportData(),a._r=a._node.getAttribute("radius"))},a._onNodeDragEnd=function(){a._node=null,ei(a._canvas,a._ctx)},a._graph=e,a._graphics=n,a._spatial=r,a._settings=s,a._events=o,a._camera=i,a._options=W(zp),a._enabled=!1,a._canvas=ti(),a._ctx=a._canvas.getContext("2d"),a}var jp=(Hp.prototype.getId=function(){return this._id},Hp.prototype.whenApplied=function(){return this._whenApplied},Hp.prototype.refresh=function(){return this._module.refreshRule(this._id)},Hp.prototype.getIndex=function(){return this._module.getRuleIndex(this._id)},Hp.prototype.setIndex=function(t){return this._module.setRuleIndex(this._id,t)},Hp.prototype.update=function(t){return this._module.updateRule(this._id,t)},Hp.prototype.getDefinition=function(){return this._module.getRuleDefinition(this._id)},Hp.prototype.destroy=function(){return this._module.destroyRule(this._id)},Hp.prototype.delete=function(){return this.destroy()},Hp);function Hp(t,e,n){var r=this;this._module=t,this._id=e,this._whenApplied=n.then((function(){return r}))}var Gp,qp=(E(Wp,Gp=xe),Wp.prototype._get=function(t){for(var e=0;e<this._rules.length;++e){var n=this._rules[e];if(n.id===t)return n.index=e,n}throw new Error("calling a method on a destroyed style rule")},Wp.prototype._updatePriorities=function(){for(var t=0;t<this._rules.length;++t){var e=3+.001*t;this._rules[t].attributeLayer.update({priority:e})}},Wp.prototype.addRule=function(t){void 0===t&&(t={});var e=this._idCounter++,n=this._graphics.addAttributeLayer(w({name:"rule("+e+")"},Yp(t))),r=this._dom.afterNextFrame(),i=new jp(this,e,r),o={id:e,attributeLayer:n,wrapper:i};return this._rules.push(o),this._updatePriorities(),i},Wp.prototype.getRuleIndex=function(t){var e=this._get(t);return null==e.index?null:e.index},Wp.prototype.setRuleIndex=function(t,e){var n=this._get(t),r=We(e,0,this._rules.length-1);return this._rules.splice(n.index,1),this._rules.splice(r,0,n),this._updatePriorities(),this._dom.afterNextFrame()},Wp.prototype.updateRule=function(t,e){var n=this._get(t),r=Object.assign({fullOverwrite:e.fullOverwrite},Yp(e));return n.attributeLayer.update(r),this._dom.afterNextFrame()},Wp.prototype.getRuleDefinition=function(t){return Yp(this._get(t).attributeLayer.getDefinition())},Wp.prototype.destroyRule=function(t){var e=this._get(t);return e.attributeLayer.destroy(),this._rules.splice(e.index,1),this._dom.afterNextFrame()},Wp.prototype.refreshRule=function(t){return this._get(t).attributeLayer.updateAll(),this._dom.afterNextFrame()},Wp.prototype.refreshAllRules=function(){for(var t=0;t<this._rules.length;t++)this._rules[t].attributeLayer.updateAll();return this._dom.afterNextFrame()},Wp.prototype.getRuleList=function(){return this._rules.map((function(t){return t.wrapper}))},Wp);function Wp(t){var e=t.graphics,n=t.dom,r=Gp.call(this)||this;return r._idCounter=1,r._rules=[],r._graphics=e,r._dom=n,r._rules=[],r}function Yp(t){return{nodeAttributes:t.nodeAttributes,edgeAttributes:t.edgeAttributes,nodeSelector:t.nodeSelector,edgeSelector:t.edgeSelector,nodeDependencies:t.nodeDependencies,edgeDependencies:t.edgeDependencies,nodeOutput:t.nodeOutput,edgeOutput:t.edgeOutput}}var Xp,Zp={strokeColor:"#00C3FF",fillColor:"rgba(0,195,255,0.1)",strokeWidth:1,cursorStyle:"cell",callback:function(t){return t.nodes.setSelected(!0)},bothExtremities:!1},Kp=(E(Jp,Xp=xe),Jp.prototype.enable=function(t){return void 0===t&&(t={}),this._enabled||(this._enabled=!0,this._captor.setDetectionEnabled(!1),this._options=tt(t,Zp),this._graphics.addCanvas(this._canvas),Ht(this._canvas,this._options.cursorStyle),this._captor.isLeftPressed()&&this._interaction.start(this._captor.getCursorPosition())),this},Jp.prototype.disable=function(){return this._enabled&&(this._enabled=!1,this._captor.setDetectionEnabled(!0),this._graphics.removeCanvas(this._canvas)),this},Jp.prototype.enabled=function(){return this._enabled},Jp.prototype.savePoint=function(t,e,n){var r=Tt(),i=this._ctx,o=this._options,s=this._points;if(this._bbox.addPoint(t,e),i.clearRect(0,0,this._canvas.width,this._canvas.height),s.push({x:t,y:e}),n){var a=s[0];i.lineWidth=o.strokeWidth,i.lineJoin="bevel",i.strokeStyle=o.strokeColor,i.fillStyle=o.fillColor,i.beginPath(),i.moveTo(a.x*r,a.y*r);for(var u=1;u<s.length;++u){var c=s[u];i.lineTo(c.x*r,c.y*r)}i.stroke(),o.fillColor&&i.fill()}},Jp.prototype.filterByExtremities=function(t,e){var n=this._graph.getEdgeAttribute("source"),r=this._graph.getEdgeAttribute("target");return t.filter((function(t){var i=t._index,o=n.get(i),s=r.get(i);return e[o]&&e[s]}))},Jp);function Jp(t){var e=t.locate,n=t.graphics,r=t.captor,i=t.graph,o=t.spatial,s=t.interactions,a=Xp.call(this)||this;return a._enabled=!1,a._points=[],a._bbox=new Lo,a._onStart=function(t){var e=t.x,n=t.y;a._bbox.reset(),a.savePoint(e,n,!1)},a._onStop=function(){var t=a._bbox,e=t.minX,n=t.minY,r=t.maxX,i=t.maxY,o=a._spatial.queryProjected(e,n,r,i),s=o.nodes,u=o.edges,c={},l=s.filter((function(t){var e=t.isVisible(),n=t.getAttribute("detectable"),r=e&&n&&a._locate.isNodeInPolygon(t,a._points);return c[t._index]=r})),d=u.filter((function(t){var e=t.isVisible(),n=t.getAttribute("detectable");return e&&n&&a._locate.isEdgeInPolygon(t,a._points)}));a._options.bothExtremities&&(d=a.filterByExtremities(d,c)),a._ctx.clearRect(0,0,a._canvas.width,a._canvas.height),a._points=[],a.disable(),a._options.callback({nodes:l,edges:d})},a._locate=e,a._graph=i,a._graphics=n,a._captor=r,a._interactions=s,a._spatial=o,a._options=W(Zp),a._canvas=ti(),a._ctx=a._canvas.getContext("2d"),a._interaction=a._interactions.onDrag({priority:"lasso",check:function(){return a._enabled},onStart:a._onStart,onProgress:function(t){var e=t.x,n=t.y;return a.savePoint(e,n,!0)},onStop:a._onStop}),a}var Qp,$p={strokeColor:"#00C3FF",fillColor:"rgba(0,195,255,0.1)",strokeWidth:1,cursorStyle:"cell",callback:function(t){var e=t.nodes,n=t.edges;e.size?e.setSelected(!0):n.setSelected(!0)},bothExtremities:!1},tg=(E(eg,Qp=Kp),eg.prototype.enable=function(t){return this._enabled||(this._enabled=!0,this._options=tt(t,$p),this._graphics.addCanvas(this._canvas),Ht(this._canvas,this._options.cursorStyle),this._captor.isLeftPressed()&&this._interaction.start(this._captor.getCursorPosition())),this},eg.prototype.disable=function(){return this._enabled&&(this._enabled=!1,this._graphics.removeCanvas(this._canvas)),this},eg.prototype.enabled=function(){return this._enabled},eg.prototype._formatRectangle=function(t){var e=this._start.x,n=this._start.y,r=t.x,i=t.y,o=Math.abs(e-r),s=Math.abs(n-i),a=e<r?e:r,u=n<i?n:i;return this._rectangle.reset().addPoint(a,u).addPoint(a+o,u+s)},eg.prototype._refreshRectangle=function(t){var e=this._formatRectangle(t),n=e.minX,r=e.minY,i=e.width,o=e.height,s=Tt();ei(this._canvas,this._ctx),this._ctx.strokeRect(n*s,r*s,i*s,o*s),this._options.fillColor&&this._ctx.fillRect(n*s,r*s,i*s,o*s)},eg);function eg(t){var e=Qp.call(this,t)||this;return e._options=W($p),e._canvas=ti(),e._ctx=e._canvas.getContext("2d"),e._enabled=!1,e._rectangle=new Lo,e._interaction=e._interactions.onDrag({priority:"lasso",disableDetection:!0,check:function(){return e._enabled},onStart:function(t){var n=t.x,r=t.y;e._rectangle.reset(),e._start={x:n,y:r},e._ctx.fillStyle=e._options.fillColor,e._ctx.strokeStyle=e._options.strokeColor,e._ctx.lineWidth=e._options.strokeWidth},onProgress:function(t){var n=t.x,r=t.y;return e._refreshRectangle({x:n,y:r})},onStop:function(){var t=e._captor.getCursorPosition(),n=e._formatRectangle(t),r=e._spatial.queryProjected(n.minX,n.minY,n.maxX,n.maxY),i=r.nodes,o=r.edges,s={},a=i.filter((function(t){var r=t.isVisible(),i=t.getAttribute("detectable"),o=r&&i&&e._locate.isNodeInRectangle(t,n);return s[t._index]=o})),u=o.filter((function(t){var r=t.isVisible(),i=t.getAttribute("detectable");return r&&i&&e._locate.isEdgeInRectangle(t,n)}));e._options.bothExtremities&&(u=e.filterByExtremities(u,s)),ei(e._canvas,e._ctx),e.disable(),e._options.callback({nodes:a,edges:u})}}),e}var ng={left:-1,right:1,top:0,bottom:0,center:0},rg={left:0,right:0,top:-1,bottom:1,center:0},ig={left:-1,right:0,top:-.5,bottom:-.5,center:-.5},og={left:-.5,right:-.5,top:-1,bottom:0,center:-.5},sg={x1:0,y1:0,x2:0,y2:0},ag={x:0,y:0},ug={x:0,y:0},cg=Math.PI/2;function lg(t,e,n,r){void 0===r&&(r="#ff0000"),e.strokeStyle=r,e.lineWidth=1,e.beginPath();for(var i=Tt(),o=0,s=t.length;o<s;o++){var a=n.graphToScreenCoordinates(t[o]);0===o?e.moveTo(a.x*i,a.y*i):e.lineTo(a.x*i,a.y*i)}e.closePath(),e.stroke()}var dg,hg=["x","y","radius","width","layer","text.content","text.minVisibleSize","text.size","text.scale","text.scaling","text.padding","text.margin","text.position","text.style"].reduce((function(t,e){return t.add(e),t}),new Set),fg=(E(pg,dg=xe),pg.prototype.getTextsBoundingBox=function(){this._updateLabels();for(var t=this._rects,e=this._textBBoxes,n=new Lo,r=this._graphics.getNodeAttributes(),i=this._graphics.getEdgeAttributes(),o=r.excluded,s=i.excluded,a=0;a<t.length;a++){var u=5*a,c=1===e[6*a+4],l=e[6*a+4];if(!(c?o.get(l):s.get(l))){var d=Jh(t[u],t[1+u],t[2+u],t[3+u],t[4+u]),h=d[0],f=d[1],p=d[2],g=d[3];n.addPoint(h,f).addPoint(p,g)}}return n},pg.prototype.setRate=function(t){var e=this;this._updateDebounced=this._sync.debounceIdle((function(t){return e._updateLabels(t)}),t)},pg.prototype.forceEnable=function(){this._forceEnabled=!0},pg.prototype.update=function(){this._update()},pg.prototype.forceUpdate=function(){this._updateLabels()},pg.prototype._enable=function(){this._enabled=!0,this._update()},pg.prototype._disable=function(){this._textBBoxes=[],this._rects=[],this._intersects=[],this._enabled=!1},pg.prototype._onCameraMove=function(){this._update()},pg.prototype._updateLabels=function(t){if(void 0===t&&(t=this._camera.getZoom()),this._settings.get("texts.preventOverlap")){var e=this._graphics.getNodeAttributes(),n=this._graphics.getEdgeAttributes();this._intersects=[],this._textBBoxes=[],this._rects=[];var r=this._textQuad.clear(),i=this._camera.getAngle(),o=this._camera.getProjectedScreenBounds(.25),s="bottomUp"===this._settings.get("texts.removalStrategy"),a={angle:i,zoom:t,screen:o,sin:Math.sin(i),cos:Math.cos(i)},u={remove:{nodes:[],edges:[]},redraw:{nodes:[],edges:[]},rects:this._rects,bboxes:this._textBBoxes,intersects:this._intersects},c=this._spatial.queryRaw(o[0],o[1],o[2],o[3]),l=c.nodes,d=c.edges;if(l.length+d.length!==0){var h=this._captor.getPointedElement(),f=null,p=null;null!==h&&(h.isNode?f=h._index:p=h._index),function(t,e,n,r,i,o,s,a){for(var u,c,l=s.remove.nodes,d=s.remove.edges,h=s.redraw.nodes,f=n.angle,p=n.zoom,g=n.sin,_=n.cos,v=r.x,y=r.y,m=r.radius,b=r.layer,x=r.innerStroke.width,E=r.outerStroke.width,w=r.scalingMethod,S=r.text.content,A=r.text.position,C=r.text.size,T=r.text.font,k=r.text.style,I=r.text.maxLineLength,O=r.text.scaling,M=r.text.scale,L=r.text.minVisibleSize,N=r.text.padding,R=r.text.margin,P=r.animationDuration,D=r.textHidden,F=r.excluded,z=[],B=0;B<t.length;B++){var U=t[B];(z[Y=b.get(U)- -1]=z[Y]||[]).push(U)}null!==a&&z[z.length-1].unshift(a);for(var V=[0,0,0,0],j=[0,0,0,0,0],H=s.bboxes,G=s.rects,q=s.intersects,W=z.length-1;0<=W;W--){var Y;if(Y=z[W])for(B=0;B<Y.length;B++){u=Y[B];var X=P.get(u),Z=S.get(u);if(null!==Z&&""!==Z&&0===X){var K=m.get(u),J=L.get(u);if(1!==F.get(u))if(2*K*p<J)0===D.get(u)&&l.push(u);else{"fixed"===w.get(u)&&(K/=p);var Q=v.get(u),$=y.get(u);"number"==typeof Z&&(Z=Z.toString());for(var tt=!O.get(u),et=A.get(u),nt=N.get(u),rt=M.get(u),it=+(tt?C.get(u):rt*K),ot=k.get(u),st=T.get(u),at=Xo(Z,I.get(u)),ut=at.lines,ct=at.data,lt=nt+x.get(u)+E.get(u)+R.get(u),dt=ng[et],ht=rg[et],ft=i(ct[0],st,ot,it).width,pt=1;pt<ut;pt++)ft=Math.max(ft,i(ct[pt],st,ot,it).width);var gt=ut*it*1,_t=ft/2/p,vt=gt/2/p,yt=lt/p,mt=ig[et]*ft,bt=og[et]*gt;tt&&(mt/=p,bt/=p),mt=mt+dt*yt+_t+dt*K,bt=bt+ht*yt+vt+ht*K,Jh(Q-_t,$-vt,ft/p,gt/p,-f,g,-_,V),j[0]=Q-_t,j[1]=$-vt,j[2]=ft/p,j[3]=gt/p,j[4]=f;var xt=_*mt-g*bt,Et=g*mt+_*bt;V[0]+=xt,V[1]+=Et,V[2]+=xt,V[3]+=Et,j[0]+=xt,j[1]+=Et;var wt=e.query(V[0],V[1],V[2],V[3]);if(0!==wt.length){for(var St=!1,At=Qh(j[0],j[1],j[2],j[3],j[4]),Ct=0;Ct<wt.length;Ct++){var Tt=wt[Ct],kt=5*Tt,It=Qh(G[kt],G[1+kt],G[2+kt],G[3+kt],G[4+kt]);if(el(At,It)){if(q.push(At,It),St=!0,!o)break;e.remove(Tt),1===H[6*Tt+4]?l.push(H[6*Tt+5]):d.push(H[6*Tt+5])}}if(St&&!o){l.push(u);continue}}h.push(u),c=H.length/6,H.push(V[0],V[1],V[2],V[3],1,u),e.insert(c,V),G.push(j[0],j[1],j[2],j[3],j[4])}else l.push(u)}}}}(l,r,a,e,this._measureText,s,u,f),function(t,e,n,r,i,o,s,a,u){for(var c,l,d=a.remove.nodes,h=a.remove.edges,f=a.redraw.edges,p=n.angle,g=n.zoom,_=i.x,v=i.y,y=i.radius,m=Math.PI,b=r.source,x=r.target,E=r.scalingMethod,w=r.width,S=r.curvature,A=r.layer,C=r.text.content,T=r.text.scaling,k=r.text.size,I=r.text.font,O=r.text.style,M=r.text.scale,L=r.text.maxLineLength,N=r.text.margin,R=r.text.minVisibleSize,P=r.animationDuration,D=[],F=0;F<t.length;F++){var z=t[F];(D[q=A.get(z)- -1]=D[q]||[]).push(z)}null!==u&&D[D.length-1].unshift(u);for(var B=[0,0,0,0],U=[0,0,0,0,0],V=a.bboxes,j=a.rects,H=a.intersects,G=D.length-1;0<=G;G--){var q;if(q=D[G])for(F=0;F<q.length;F++){c=q[F];var W=P.get(c),Y=C?C.get(c):"";if(null!==Y&&""!==Y&&!W){var X=b.get(c),Z=x.get(c),K=w.get(c),J=S.get(c);if(!(K*g<R.get(c))){"fixed"===E.get(c)&&(K/=g);var Q=(_.get(X)+_.get(Z))/2,$=(v.get(X)+v.get(Z))/2;Y=Y?Y.toString():"";var tt=!T.get(c),et=M.get(c),nt=I.get(c),rt=+(tt?k.get(c):et*K),it=O.get(c),ot=L.get(c),st=N.get(c),at=_.get(X),ut=v.get(X),ct=_.get(Z),lt=v.get(Z),dt=void 0,ht=X===Z;if(ht)dt=m/4-p,Cs(at,ut,J,y.get(X),0,sg),Ba(.5,at,ut,ct,lt,sg.x1,sg.y1,sg.x2,sg.y2,ug),Q=ug.x,$=ug.y,st/=-g;else{if(at===ct&&ut===lt)continue;dt=Sa(at,ut,ct,lt)-p,0!==J&&(dt=Sa(at,ut,ct,lt)-p,As(at,ut,ct,lt,J,ag),Fa(.5,at,ut,ct,lt,ag.x,ag.y,ug),Q=ug.x,$=ug.y)}var ft=st+4,pt=Xo(Y,ot);if(pt){for(var gt=pt.lines,_t=pt.data,vt=+o(_t[0],nt,it,rt).width,yt=1;yt<gt;yt++)vt=Math.max(vt,+o(_t[yt],nt,it,rt).width);var mt=gt*rt,bt=vt/g/2,xt=mt/g/2,Et=Math.abs(dt)<cg?1:-1,wt=ht?mt/g+K/2:Et*(ft/g+K/2+xt);U[0]=Q-bt,U[1]=$-xt,U[2]=Q+bt,U[3]=$+xt,U[4]=dt+p,$h(U,-(dt+p),-wt,U),U[2]=U[2]-U[0],U[3]=U[3]-U[1],Jh(Q-bt,$-xt,2*bt,2*xt,dt=m-dt-p,void 0,void 0,B),$h(B,dt,wt,B);var St=e.query(B[0],B[1],B[2],B[3]);if(St.length){for(var At=!1,Ct=Qh(U[0],U[1],U[2],U[3],U[4]),Tt=0;Tt<St.length;Tt++){var kt=St[Tt],It=5*kt,Ot=Qh(j[It],j[1+It],j[2+It],j[3+It],j[4+It]);if(el(Ct,Ot)){if(At=!0,H.push(Ct,Ot),!s)break;e.remove(kt),1===V[6*kt+4]?d.push(V[6*kt+5]):h.push(V[6*kt+5])}}if(At&&!s){h.push(c);continue}}f.push(c),l=V.length/6,V.push(B[0],B[1],B[2],B[3],0,c),e.insert(l,B),j.push(U[0],U[1],U[2],U[3],U[4])}}}}}}(d,r,a,n,e,this._measureText,s,u,p),this._clearOverlaps(u),this._settings.get("texts.debug")&&this.drawAll()}}},pg.prototype._clearOverlaps=function(t){var e=this._graph.nodeList,n=this._graph.edgeList,r=this._graphics,i=e(new Uint32Array(t.remove.nodes)),o=n(new Uint32Array(t.remove.edges)),s=e(new Uint32Array(t.redraw.nodes)),a=n(new Uint32Array(t.redraw.edges));r.setTextHidden(i,!0),r.setTextHidden(o,!0),r.setTextHidden(s,!1),r.setTextHidden(a,!1),this._events.fire("labelCollisionsRemoved",t)},pg.prototype._reset=function(){this._graphics.resetTextHidden()},pg.prototype.drawAll=function(){this._canvas&&this._ctx&&function(t,e,n,r,i,o){t.clearRect(0,0,e.width,e.height);for(var s=0,a=r.length;s<a;s+=6)u=r.slice(s,s+4),c=t,l=n,void 0===(d="#aaaaaa")&&(d="#22ff00"),lg([[u[0],u[1]],[u[2],u[1]],[u[2],u[3]],[u[0],u[3]]].map((function(t){return{x:t[0],y:t[1]}})),c,l,d);var u,c,l,d;for(s=0;s<i.length;s+=5)lg(Qh(i[s],i[s+1],i[s+2],i[s+3],i[s+4]),t,n,"green");o.forEach((function(e){return lg(e,t,n,"red")}))}(this._ctx,this._canvas,this._camera,this._textBBoxes,this._rects,this._intersects)},pg);function pg(t,e){var n,r=t.graph,i=t.graphics,o=t.camera,s=t.events,a=t.settings,u=t.sync,c=t.spatial,l=t.captor,d=dg.call(this)||this;return d._textBBoxes=[],d._rects=[],d._enabled=!1,d._intersects=[],d._onZoomStart=B((function(t){var e=t.startZoom,n=t.endZoom;d._enabled&&n<e&&d._updateLabels(n)}),80),d._onAttributesChanged=function(t){A(t.edgeAttributes,t.nodeAttributes).some((function(t){return hg.has(t)}))&&d._update()},d._onItemsAdded=function(t){var e=t.nodes||t.edges;(d._enabled||d._forceEnabled)&&d._settings.get("texts.preventOverlap")&&d._graphics.setTextHidden(e,!0)},d._onToggle=function(t){return t?d._update():d._reset(),d},d._update=function(){(d._enabled||d._forceEnabled)&&d._updateDebounced()},d._toggleDebug=function(t){t?(d._canvas=ti(),d._graphics.addCanvas(d._canvas),d._ctx=d._canvas.getContext("2d"),d._update()):d._canvas&&(d._graphics.removeCanvas(d._canvas),d._canvas=d._ctx=null)},d._measureText=function(t,e,n,r){return d._engine.measureText(t,e,n,r)},d._graph=r,d._graphics=i,d._camera=o,d._events=s,d._settings=a,d._sync=u,d._spatial=c,d._captor=l,d._engine=i.getGraphicsEngine(),d._textQuad=new uf((function(t){var e=6*t;return d._textBBoxes.slice(e,6+e)}),5),e.forceEnableTextOverlapRemoval&&d.forceEnable(),d._events.register(["labelCollisionsRemoved"]),d.setRate(200),a.register("texts.preventOverlap",!0,d._onToggle),a.register("texts.debug",!1,d._toggleDebug),a.register("texts.removalStrategy","topDown"),s.on(((n={})[[me.ADD_NODES,me.ADD_EDGES].join(" ")]=d._onItemsAdded,n[me.LAYOUT_END]=function(){return d._updateLabels()},n[[me.VIEW_CHANGED,me.HOVER,me.UNHOVER].join(" ")]=d._update,n[me.UPDATE_ATTRIBUTES]=d._onAttributesChanged,n[me.SET_CONTAINER]=function(t){if(t.element)return d._enable();d._disable()},n[me.START_ZOOM]=d._onZoomStart,n)),d}function gg(){}function _g(){return!1}var vg,yg,mg=(bg.prototype._startInteraction=function(t,e){t.onStart&&t.onStart(e),t.onStop&&(this._current=t).disableDetection&&this._captor.setDetectionEnabled(!1)},bg.prototype._stopCurrentInteraction=function(t){this._current&&this._current.disableDetection&&this._captor.setDetectionEnabled(!0),this._current&&this._current.onStop&&this._current.onStop(t),this._current=void 0},bg.prototype._forceStartInteraction=function(t,e){this._current&&this._stopCurrentInteraction(e),this._startInteraction(t,e)},bg.prototype._createWrapper=function(t){var e=this;return{start:function(n){return e._forceStartInteraction(t,n)}}},bg.prototype._addInteraction=function(t,e){var n=this._interactionsByStartEvent[t];return n?n.push(e):(this._interactionsByStartEvent[t]=[e],this._events.on(t,this._onStartInteractionEvent)),this._createWrapper(e)},bg.prototype._createProgressiveInteraction=function(t,e,n,r){var i={priority:xg(r.priority),check:r.check||_g,onStart:r.onStart||gg,onProgress:r.onProgress||gg,onStop:r.onStop||gg,disableDetection:!!r.disableDetection,progressEventName:e,stopEventName:n};return this._boundProgressEvents[e]||(this._boundProgressEvents[e]=!0,this._events.on(e,this._onProgressInteractionEvent)),this._boundStopEvents[n]||(this._boundStopEvents[n]=!0,this._events.on(n,this._onStopInteractionEvent)),this._addInteraction(t,i)},bg.prototype._createNonProgressiveInteraction=function(t,e){return this._addInteraction(t,{priority:xg(e.priority),check:e.check||_g,onStart:e.handler||gg,onProgress:void 0,onStop:void 0,disableDetection:!1,progressEventName:void 0,stopEventName:void 0})},bg.prototype.onDrag=function(t){return this._createProgressiveInteraction(me.DRAG_START,me.DRAG_PROGRESS,me.DRAG_END,t)},bg.prototype.onGesture=function(t){return this._createProgressiveInteraction(me.GESTURE_START,me.GESTURE_PROGRESS,me.GESTURE_END,t)},bg.prototype.onClick=function(t){return this._createNonProgressiveInteraction(me.CLICK,t)},bg.prototype.onDoubleClick=function(t){return this._createNonProgressiveInteraction(me.DOUBLE_CLICK,t)},bg.prototype.onHover=function(t){return this._createNonProgressiveInteraction(me.HOVER,t)},bg.prototype.onUnhover=function(t){return this._createNonProgressiveInteraction(me.UNHOVER,t)},bg.prototype.onMouseWheel=function(t){return this._createNonProgressiveInteraction(me.WHEEL,t)},bg.prototype.onMouseDown=function(t){return this._createNonProgressiveInteraction(me.DOWN,t)},bg.prototype.onMouseUp=function(t){return this._createNonProgressiveInteraction(me.UP,t)},bg.prototype.onMouseMove=function(t){return this._createNonProgressiveInteraction(me.MOVE,t)},bg);function bg(t){var e=this,n=t.captor,r=t.events;this._onStartInteractionEvent=function(t,n){if(!e._current){for(var r,i=0,o=e._interactionsByStartEvent[n];i<o.length;i++){var s=o[i];s.check(t)&&(!r||s.priority>=r.priority)&&(r=s)}r&&e._startInteraction(r,t)}},this._onProgressInteractionEvent=function(t,n){e._current&&e._current.progressEventName===n&&e._current.onProgress&&e._current.onProgress(t)},this._onStopInteractionEvent=function(t,n){e._current&&e._current.stopEventName===n&&e._stopCurrentInteraction(null)},this._captor=n,this._events=r,this._interactionsByStartEvent={},this._boundProgressEvents={},this._boundStopEvents={}}function xg(t){return"string"==typeof t?bn.indexOf(t):"number"!=typeof t||isNaN(t)?0:t}(yg=vg=vg||{}).MOUSE="mouse",yg.TOUCH="touch";var Eg,wg=[me.VIRTUAL_UP,me.MOUSE_UP,me.TOUCH_UP].join(" "),Sg=[me.VIRTUAL_DOWN,me.MOUSE_DOWN,me.TOUCH_DOWN].join(" "),Ag=[me.VIRTUAL_MOVE,me.MOUSE_MOVE,me.TOUCH_MOVE].join(" "),Cg=[me.VIRTUAL_CLICK,me.MOUSE_CLICK,me.TOUCH_TAP].join(" "),Tg=[me.VIRTUAL_DOUBLE_CLICK,me.MOUSE_DOUBLE_CLICK,me.TOUCH_DOUBLE_TAP].join(" "),kg=[me.VIRTUAL_WHEEL,me.MOUSE_WHEEL].join(" "),Ig=(E(Og,Eg=xe),Og.prototype.triggerUnhover=function(){this._hover=!1,this._hoveredElt=null},Og.prototype.triggerDetection=function(){this._detectElement(this._position.x,this._position.y),this._elt&&(this._hoveredElt=this._elt,this._hover=!0)},Og.prototype.getElementAt=function(t,e){var n=t.x,r=t.y;return this._detectElementAt(n,r,e)},Og.prototype.getPointedElement=function(){return this._hoveredElt},Og.prototype.getDraggedElement=function(){return this._draggedElt},Og.prototype.isAnyButtonPressed=function(){return this._buttons[Id.LEFT].isPressed||this._buttons[Id.RIGHT].isPressed||this._buttons[Id.MIDDLE].isPressed},Og.prototype.isAnyButtonDragging=function(){return this._buttons[Id.LEFT].isDragging||this._buttons[Id.RIGHT].isDragging||this._buttons[Id.MIDDLE].isDragging},Og.prototype.isButtonPressed=function(t){return this._buttons[t].isPressed},Og.prototype.isLeftPressed=function(){return this.isButtonPressed(Id.LEFT)},Og.prototype.getCursorPosition=function(){return{x:this._position.x,y:this._position.y}},Og.prototype.getCursorInformation=function(){return{x:this._position.x,y:this._position.y,target:this._hoveredElt}},Og.prototype.setDetectionEnabled=function(t){this._disabledCounter=Math.max(0,this._disabledCounter+(t?-1:1))},Og.prototype._resetCurrent=function(t,e){for(var n in this._buttons){var r=this._buttons[n];r.isDragging&&this._events.fire(me.DRAG_END,{domEvent:null,x:t,y:e,button:n,target:this._draggedElt}),r.isPressed=!1,r.isDragging=!1}this._hover&&this._hoveredElt&&this._events.fire(me.UNHOVER,{domEvent:null,x:t,y:e,target:this._hoveredElt}),this._hover=!1,this._hoveredElt=null,this._draggedElt=null},Og.prototype._onMove=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.source,o=this._setPointerPosition(n,r),s=o.dx,a=o.dy;for(var u in this._events.fire(me.MOVE,{domEvent:e,x:n,y:r,dx:s,dy:a,source:i}),this._buttons){var c=this._buttons[u];if(c.isPressed)if(c.isDragging){var l=this._getStoredDXY();s+=l.dx,a+=l.dy,this._events.fire(me.DRAG_PROGRESS,{domEvent:e,x:n,y:r,dx:s,dy:a,button:u,source:i,target:this._draggedElt})}else c.isDragging=!0,this._hoveredElt&&this._hover&&(this._events.fire(me.UNHOVER,{domEvent:e,x:n,y:r,source:i,target:this._hoveredElt}),this._hover=!1),this._draggedElt||(this._draggedElt=this._hoveredElt),this._storeDXY(s,a),this._events.fire(me.DRAG_START,{domEvent:e,x:n,y:r,button:u,source:i,target:this._draggedElt})}e&&!this._graphics.getDomElement().contains(e.target)||this._detectElement(n,r),this._elt!==this._hoveredElt&&(this._hoveredElt&&this._hover&&(this._hover=!0,this._events.fire(me.UNHOVER,{domEvent:e,x:n,y:r,source:i,target:this._hoveredElt})),this._hoveredElt=this._elt,this._elt&&(this._hover=!0,this._events.fire(me.HOVER,{domEvent:e,x:n,y:r,source:i,target:this._hoveredElt})))},Og.prototype._onDocumentMove=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.source;for(var o in this._buttons)if(this._buttons[o].isDragging){var s=this._setPointerPosition(n,r),a=s.dx,u=s.dy;this._events.fire(me.DRAG_PROGRESS,{domEvent:e,x:n,y:r,dx:a,dy:u,button:o,source:i,target:this._draggedElt})}},Og.prototype._onDocumentUp=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.source,o=t.button;if(null!=o&&this._buttons[o].isDragging){this._events.fire(me.DRAG_END,{domEvent:e,x:n,y:r,button:o,source:i,target:this._draggedElt});var s=this._buttons[o];s.isDragging=!1,s.isPressed=!1,this.isAnyButtonDragging()||(this._draggedElt=null)}},Og.prototype._onDown=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.button,o=t.source;if(null!=i){this._detectElement(n,r),this._elt!==this._hoveredElt&&this._resetCurrent(n,r);var s=this._buttons[i];this._hoveredElt=this._elt,s.isPressed=!0,this._events.fire(me.DOWN,{domEvent:e,x:n,y:r,button:i,source:o,target:this._hoveredElt})}},Og.prototype._onDoubleClick=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.button,o=t.source;null!=i&&(Rg(e,"doubleclick")||this._events.fire(me.DOUBLE_CLICK,{domEvent:e,x:n,y:r,button:i,source:o,target:this._hoveredElt}))},Og.prototype._onUp=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.button,o=t.source;if(null!=i){var s=this._buttons[i];s.isPressed&&(s.isDragging&&(this._events.fire(me.DRAG_END,{domEvent:e,x:n,y:r,button:i,source:o,target:this._draggedElt}),s.isDragging=!1,this.isAnyButtonDragging()||(this._draggedElt=null)),s.isPressed=!1,this._detectElement(n,r),this._events.fire(me.UP,{domEvent:e,x:n,y:r,button:i,source:o,target:this._elt}),this.isAnyButtonPressed()||this._hover||o===vg.TOUCH||(this._hoveredElt=this._elt,this._hoveredElt&&(this._events.fire(me.HOVER,{domEvent:e,x:n,y:r,source:o,target:this._hoveredElt}),this._hover=!0)))}},Og.prototype._onClick=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.button,o=t.source;Rg(e,"click")||this._events.fire(me.CLICK,{domEvent:e,x:n,y:r,button:i,source:o,target:this._hoveredElt})},Og.prototype._onWheel=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.delta,o=t.source;this._position.x=n,this._position.y=r,this._events.fire(me.WHEEL,{domEvent:e,x:n,y:r,delta:i,source:o,target:this._hoveredElt})},Og.prototype._storeDXY=function(t,e){this._accDx=t,this._accDy=e},Og.prototype._getStoredDXY=function(){var t=this._accDx,e=this._accDy;return this._accDx=0,this._accDy=0,{dx:t,dy:e}},Og.prototype._setPointerPosition=function(t,e){var n=t-this._prevX,r=e-this._prevY;return this._position.x=t,this._position.y=e,this._prevX=t,this._prevY=e,this._accDx=0,this._accDy=0,{dx:n,dy:r}},Og.prototype._detectElement=function(t,e,n){this._elt=this._detectElementAt(t,e,n)},Og.prototype._detectElementAt=function(t,e,n){if(0!==this._disabledCounter)return null;var r=this._settings,i=r.get("detect.enableSpatialIndex"),o=r.get("detect.nodeErrorMargin"),s=r.get("detect.edgeErrorMargin"),a=r.get("detect.nodes"),u=r.get("detect.edges"),c=null,l=[],d=[];if(!n&&i&&(a||u)){var h=r.get("detect.spatialIndexMarginRatio"),f=Math.max(o*h,s*h),p=this._spatial.queryRawProjected(t-f,e-f,t+f,e+f);l=p.nodes,d=p.edges}return a&&(c=this._graphics.detectNode({x:t,y:e,indexes:l,margin:o,texts:!!r.get("detect.nodeTexts")})),!c&&u&&(c=this._graphics.detectEdge({x:t,y:e,indexes:d,margin:s,texts:!!r.get("detect.edgeTexts")})),c},Og);function Og(t){var e,n,r=t.dom,i=t.events,o=t.graphics,s=t.spatial,a=t.settings,u=t.position,c=Eg.call(this)||this;return c._elt=null,c._hoveredElt=null,c._draggedElt=null,c._hover=!1,c._disabledCounter=0,c._accDx=0,c._accDy=0,c._prevX=0,c._prevY=0,c._buttons=((e={})[Id.LEFT]={isPressed:!1,isDragging:!1},e[Id.MIDDLE]={isPressed:!1,isDragging:!1},e[Id.RIGHT]={isPressed:!1,isDragging:!1},e),c._onGraphChanged=function(){c._resetCurrent(c._position.x,c._position.y),c._timeout||(c._timeout=c._dom.setTimeout((function(){c._onMove({x:c._position.x,y:c._position.y,source:null,domEvent:null}),c._timeout=null}),0))},c._dom=r,c._graphics=o,c._events=i,c._settings=a,c._spatial=s,c._position=u,i.register([me.MOVE,me.DOWN,me.UP,me.CLICK,me.DOUBLE_CLICK,me.HOVER,me.UNHOVER,me.WHEEL,me.DRAG_START,me.DRAG_PROGRESS,me.DRAG_END,me.GESTURE_START,me.GESTURE_PROGRESS,me.GESTURE_END]),a.register("detect.nodes",!0).register("detect.edges",!0).register("detect.nodeTexts",!0).register("detect.edgeTexts",!0).register("detect.nodeErrorMargin",5).register("detect.edgeErrorMargin",7).register("detect.enableSpatialIndex",!0).register("detect.spatialIndexMarginRatio",3),i.on(((n={})[[me.REMOVE_NODES,me.REMOVE_EDGES,me.CLEAR_GRAPH].join(" ")]=c._onGraphChanged,n[Ag]=function(t,e){var n=t.domEvent,r=t.x,i=t.y;c._onMove({domEvent:n,x:r,y:i,source:Mg(e)})},n[Sg]=function(t,e){var n=t.domEvent,r=t.x,i=t.y,o=t.button,s=void 0===o?Id.LEFT:o;c._onDown({domEvent:n,x:r,y:i,button:s,source:Mg(e)})},n[wg]=function(t,e){var n=t.domEvent,r=t.x,i=t.y,o=t.button,s=void 0===o?Id.LEFT:o;c._onUp({domEvent:n,x:r,y:i,button:s,source:Mg(e)})},n[Cg]=function(t,e){var n=t.domEvent,r=t.x,i=t.y,o=t.button,s=void 0===o?Id.LEFT:o;c._onClick({domEvent:n,x:r,y:i,button:s,source:Mg(e)})},n[Tg]=function(t,e){var n=t.domEvent,r=t.x,i=t.y,o=t.button,s=void 0===o?Id.LEFT:o;c._onDoubleClick({domEvent:n,x:r,y:i,button:s,source:Mg(e)})},n[kg]=function(t){var e=t.domEvent,n=t.x,r=t.y,i=t.delta;c._onWheel({domEvent:e,x:n,y:r,delta:i,source:vg.MOUSE})},n.touchStartGesture=function(t){return i.fire(me.GESTURE_START,t)},n.touchProgressGesture=function(t){return i.fire(me.GESTURE_PROGRESS,t)},n.touchEndGesture=function(t){return i.fire(me.GESTURE_END,t)},n[me.DOCUMENT_MOUSE_MOVE]=function(t,e){var n=t.domEvent,r=t.x,i=t.y;c._onDocumentMove({domEvent:n,x:r,y:i,source:Mg(e)})},n[me.DOCUMENT_MOUSE_UP]=function(t,e){var n=t.domEvent,r=t.x,i=t.y,o=t.button,s=void 0===o?Id.LEFT:o;c._onDocumentUp({domEvent:n,x:r,y:i,source:Mg(e),button:s})},n)),c}function Mg(t){return 0===t.indexOf(vg.TOUCH)?vg.TOUCH:vg.MOUSE}var Lg=!1,Ng={down:{trigger:"pointerdown",duplicate:"mousedown"},click:{trigger:"pointerdown",duplicate:"mouseup"},doubleclick:{trigger:"pointerdown",duplicate:"mouseup"}};function Rg(t,e){return t&&(t.type===Ng[e].trigger&&(Lg=!0),t.type===Ng[e].duplicate&&Lg&&(Lg=!1,1))}var Pg,Dg=(E(Fg,Pg=xe),Fg);function Fg(t){t.graph;var e=t.graphics,n=t.camera,r=t.selection,i=t.events,o=t.captor,s=t.individualAttributes,a=t.interactions,u=t.classes,c=t.settings,l=Pg.call(this)||this;return l._dragged=null,l._start=[],l._end=[],l._shouldDrag=function(t){var e=t.target,n=t.button===Id.LEFT,r=l._settings.get("interactions.drag.enabled"),i=null!==e&&e.isNode&&!0===e.getAttribute("draggable");return!!(n&&r&&i)},l._onDragStart=function(t){var e=t.x,n=t.y,r=t.target;r.isSelected()?l._dragged=l._selection.getSelectedNodes().filter((function(t){return t.getAttribute("draggable")})):l._dragged=r.toList(),l._dragged&&(l._start=l._dragged.getPosition(),l._end=W(l._start),l._onBeforeDrag=l._settings.get("interactions.drag.onBeforeDrag"),l._startDrag=l._camera.screenToGraphCoordinates({x:e,y:n}),l._dragged.addClass(hn),l._events.fire(me.NODES_DRAG_START,{nodes:l._dragged}),l._graphics.addCursorStyle(l._settings.get("interactions.drag.cursor")))},l._onDrag=function(){if(l._dragged&&l._startDrag){for(var t=l._captor.getCursorInformation(),e=t.x,n=t.y,r=l._dragged._indexes,i=l._camera.screenToGraphCoordinates({x:e,y:n}),o=i.x-l._startDrag.x,s=i.y-l._startDrag.y,a=0;a<r.length;++a){var u=l._start[a],c=l._end[a];c.x=u.x+o,c.y=u.y+s}l._onBeforeDrag&&l._onBeforeDrag(l._dragged,e,n,l._end),l._settings.get("interactions.drag.applyResult")&&l._attributes.setMultipleAttributes(l._dragged,l._end,void 0,["x","y"]),l._events.fire(me.NODES_DRAG_PROGRESS,{nodes:l._dragged,dx:o,dy:s})}},l._onDragEnd=function(){l._dragged&&(l._dragged.removeClass(hn),l._graphics.removeCursorStyle(l._settings.get("interactions.drag.cursor")),l._events.fire(me.NODES_DRAG_END,{nodes:l._dragged,start:l._start,end:l._end}),l._dragged=null,l._start=[],l._end=[])},l._camera=n,l._graphics=e,l._selection=r,l._events=i,l._settings=c,l._captor=o,l._attributes=s,l._interactions=a,u.createClass({name:hn,isBuiltin:!0,nodeAttributes:{layer:3}}),i.register([me.NODES_DRAG_START,me.NODES_DRAG_PROGRESS,me.NODES_DRAG_END]),c.register("interactions.drag.enabled",!0),c.register("interactions.drag.cursor","move"),c.register("interactions.drag.onBeforeDrag",void 0),c.register("interactions.drag.applyResult",!0),l._interactions.onDrag({priority:"drag",disableDetection:!0,check:l._shouldDrag,onStart:l._onDragStart,onProgress:l._onDrag,onStop:l._onDragEnd}),l}var zg,Bg={color:"#00C3FF",radius:7,cursorOnHover:"grab",cursorOnDrag:"grabbing"},Ug=(E(Vg,zg=xe),Vg.prototype.onMounted=function(t){t.events.onEdgesSelected(this._refreshHandles),t.events.onEdgesUnselected(this._refreshHandles)},Vg.prototype.enable=function(t){this._enabled||(this._options=w(w({},Bg),t),this._enabled=!0,this._graphics.addCanvas(this._canvas),this._refreshHandles())},Vg.prototype.disable=function(){this._enabled&&(this._interaction.stop&&this._interaction.stop(),this._graphics.removeCursorStyle(this._options.cursorOnDrag),this._disableCursorOnHover(),this._restoreSettings(),this._graphics.removeCanvas(this._canvas),this._rewirableClass.clearEdges(),this._enabled=!1)},Vg.prototype.enabled=function(){return this._enabled},Vg.prototype._restoreSettings=function(){this._prevSettings&&(this._settings.update(this._prevSettings),this._prevSettings=void 0)},Vg.prototype._disableCursorOnHover=function(){this._hoverHandle&&!this._grabHandle&&(this._hoverHandle=!1,this._graphics.removeCursorStyle(this._options.cursorOnHover))},Vg.prototype._enableCursorOnHover=function(){this._hoverHandle||(this._hoverHandle=!0,this._graphics.addCursorStyle(this._options.cursorOnHover))},Vg.prototype._displayMovedEdges=function(){var t=this;if(this._movedEdges){var e=this._x,n=this._y,r=this._ctx,i=Tt(),o={x:e,y:n},s=this._camera.getZoom();this._movedEdges.forEach((function(e,n){var a=t._edgeColors[n],u=e.getSource(),c=e.getTarget(),l=t._getPointedNode(),d=c===t._startNode?u:c,h=e.getAttribute("width")*s,f=d.getPositionOnScreen(),p=l?l.getPositionOnScreen():o;d.addClass(dn),r.beginPath(),r.moveTo(f.x*i,f.y*i),r.lineTo(p.x*i,p.y*i),r.strokeStyle=a,r.lineWidth=h*i,r.stroke()}))}},Vg.prototype._getPointedNode=function(){var t=this._captor.getPointedElement();return t&&t.isNode?t:null},Vg);function Vg(t){var e,n=t.classes,r=t.graphics,i=t.camera,o=t.captor,s=t.selection,a=t.events,u=t.settings,c=t.interactions,l=zg.call(this)||this;return l._canvas=ti(),l._ctx=l._canvas.getContext("2d"),l._hoverHandle=!1,l._grabHandle=!1,l._x=0,l._y=0,l._enabled=!1,l._onDragStart=function(){if(l._movedEdges){l._nodesToHighlight=l._nodesToHighlight.filter((function(t){return t!==l._startNode})),l._movedEdges.setExcluded(!0);var t=l._options.cursorOnDrag;l._prevSettings=l._settings.update({edgeHover:!1,cursor:{default:t,node:t,edge:t}})}},l._onDragEnd=function(){if(l._movedEdges){l._restoreSettings();var t=l._getPointedNode();t&&l._movedEdges.forEach((function(e){e.getTarget()===l._startNode?e.setTarget(t):e.setSource(t)})),l._movedEdges.setExcluded(!1),l._movedEdges.setSelected(!0),l._movedEdges=null,l._refreshHandles()}},l._refreshHandles=function(){if(l._enabled&&!l._movedEdges){var t=l._selection.getSelectedEdges();l._nodesToHighlight=t.getExtremities().dedupe(),l._rewirableClass.clearEdges(),l._rewirableClass.add(t),l._refreshCanvas()}},l._shouldInteractionStart=function(t){var e=t.target;if(!(l._enabled&&e&&e.isNode&&l._hoverHandle))return!1;var n=e.getAdjacentEdges().filter((function(t){return t.isSelected()}));return!!n.size&&(l._movedEdges=n,l._edgeColors=l._movedEdges.getAttribute("color"),l._startNode=e,!0)},l._refreshCanvas=function(){if(l._enabled&&l._nodesToHighlight){var t=l._captor.getCursorPosition(),e=l._getPointedNode(),n=l._camera.zoom,r=l._canvas.getContext("2d"),i=Tt(),o=l._options.color,s=l._options.radius,a=2*s*i;r.clearRect(0,0,l._canvas.width,l._canvas.height),l._displayMovedEdges(),r.fillStyle=o,r.strokeStyle=o;var u=!1;if(l._nodesToHighlight.forEach((function(e){var o=e.getPositionOnScreen(),c=o.x,l=o.y,d=e.getAttribute("radius")*("fixed"===e.getAttribute("scalingMethod")?1:n);s<d&&(r.fillRect((c-s)*i,(l-s)*i,a,a),Ds(c,l,t.x,t.y)<s&&(u=!0))})),l._movedEdges){var c=e?e.getPositionOnScreen():t;r.fillRect((c.x-s)*i,(c.y-s)*i,a,a)}u?l._enableCursorOnHover():l._disableCursorOnHover()}},l._captor=o,l._camera=i,l._graphics=r,l._selection=s,l._events=a,l._settings=u,l._interactions=c,l._classes=n,l._rewirableClass=l._classes.createClass({name:fn,isBuiltin:!0,edgeAttributes:{layer:4}}),l._events.on(((e={})[me.CAMERA_MOVE]=l._refreshCanvas,e[me.MOVE]=l._refreshCanvas,e[me.NODES_DRAG_PROGRESS]=l._refreshCanvas,e[me.DOWN]=function(){l._hoverHandle&&(l._grabHandle=!0)},e[me.UP]=function(){return l._grabHandle=!1},e)),l._interaction=l._interactions.onDrag({priority:"rewiring",check:l._shouldInteractionStart,onStart:l._onDragStart,onProgress:function(t){var e=t.x,n=t.y;l._x=e,l._y=n},onStop:l._onDragEnd}),l}var jg,Hg={cursor:"nesw-resize",color:"#00C3FF",lineWidth:1,handleSize:6,detectionMargin:5,snappingRatio:1.25,nbNodesToSnapTo:5,previewColor:"rgba(0, 0, 0, 0.2)",sizeIndicatorColor:"black",sizeIndicatorOffset:5,sizeIndicatorWidth:3,sizeIndicatorThickness:1},Gg=(E(qg,jg=xe),qg.prototype.onMounted=function(t){t.events.onNodesSelected(this._onSelectionChange),t.events.onNodesUnselected(this._onSelectionChange)},qg.prototype._enableCursor=function(){this._cursorEnabled||(this._graphics.addCursorStyle(this._options.cursor),this._cursorEnabled=!0)},qg.prototype._disableCursor=function(){this._cursorEnabled&&(this._graphics.removeCursorStyle(this._options.cursor),this._cursorEnabled=!1)},qg.prototype._detectBoundingBoxes=function(t,e){var n=this;if(this._enabled&&!this._nodeBeingResized&&this._nodesToHighlight){var r=this._options.handleSize/2,i=this._options.detectionMargin;return this._pointedNode=null,this._forEachNodeToHighlight((function(o,s,a){var u=s.x+a-r-i,c=s.x+a+r+i,l=s.y-a-r-i,d=s.y-a+r+i;u<=t&&t<=c&&l<=e&&e<=d&&(n._pointedNode=o)})),this._pointedNode?this._enableCursor():this._disableCursor()}},qg.prototype._forEachNodeToHighlight=function(t){var e=this;this._nodesToHighlight&&this._nodesToHighlight.forEach((function(n){var r=n.getPositionOnScreen(),i=e._getTotalOnScreenRadius(n);t(n,r,i)}))},qg.prototype._displayHandles=function(){var t=this;if(this._enabled&&this._nodesToHighlight){var e=this._canvas,n=this._ctx,r=e.width,i=e.height,o=Tt(),s=this._options,a=s.color,u=s.lineWidth,c=s.handleSize,l=0;if(n.clearRect(0,0,r,i),this._nodeBeingResized){var d=this._getTotalOnScreenRadius(this._nodeBeingResized),h=this._nodeBeingResized.getPositionOnScreen();l=Math.max(this._x-(h.x+d),-(this._y-(h.y-d)))/2}this._additionalRadiuses=[],this._forEachNodeToHighlight((function(e,r,i){var s=0;if(t._nodeBeingResized){s=l;var d=-i+e.getAttribute("innerStroke.width")+e.getAttribute("outerStroke.width")+u/2+1;s=s<d?d:t._snap(e,s),t._additionalRadiuses.push(s);var h=e.getAttribute("shape"),f=t._engine.getShapePoints(h),p=r.x+s,g=r.y-s,_=i+s;t._displayNodePreview(n,o,p,g,_,f)}n.strokeStyle=a,n.fillStyle=a,n.lineWidth=u,n.strokeRect((r.x-i)*o,(r.y-i-2*s)*o,2*(s+i)*o,2*(s+i)*o),n.fillRect((r.x+i+2*s-c/2)*o,(r.y-i-2*s-c/2)*o,c*o,c*o)}))}},qg.prototype._displayNodePreview=function(t,e,n,r,i,o){if(n*=e,r*=e,i*=e,t.beginPath(),1===o.length)t.arc(n,r,i,0,2*Math.PI);else for(var s=0;s<o.length;++s){var a=o[s],u=n+a.x*i,c=r+a.y*i;0===s?t.moveTo(u,c):t.lineTo(u,c)}t.fillStyle=this._options.previewColor,t.fill()},qg.prototype._getTotalOnScreenRadius=function(t){return t.getAttribute("radius")*this._camera.zoom+t.getAttribute("innerStroke.width")+t.getAttribute("outerStroke.width")+this._options.lineWidth/2},qg.prototype._snap=function(t,e){var n=this,r=this._spatial.getNodesInScreenByDistance(t).filter((function(t){return!t.isSelected()})).slice(0,this._options.nbNodesToSnapTo),i=this._ctx,o=this._getTotalOnScreenRadius(t),s=o+e,a=this._options.snappingRatio,u=s/o,c=Math.round(Je(u,a)),l=o*Math.pow(a,c),d=null;if(r.forEach((function(t){var e=n._getTotalOnScreenRadius(t);Math.abs(e-s)<=Math.abs(l-s)&&(l=e,d=t)})),d){i.save(),i.strokeStyle=this._options.sizeIndicatorColor,i.lineWidth=this._options.sizeIndicatorThickness;var h=d.getAttribute("radius");this._displaySizeIndicator(t,l),r.filter((function(t){return t.getAttribute("radius")===h})).forEach((function(t){return n._displaySizeIndicator(t)})),i.restore()}return l-o},qg.prototype._displaySizeIndicator=function(t,e){var n=this._ctx,r=Tt(),i=t.getPositionOnScreen(),o=this._getTotalOnScreenRadius(t),s=e||o,a=e?e-o:0,u=a-this._options.sizeIndicatorOffset-(e?t.getAttribute("innerStroke.width")+t.getAttribute("outerStroke.width"):0),c=i.x-s+u|0,l=i.y-s-a|0,d=i.y+s-a|0,h=this._options.sizeIndicatorWidth;n.beginPath(),n.moveTo((c-h)*r,l*r),n.lineTo((c+h)*r,l*r),n.moveTo(c*r,l*r),n.lineTo(c*r,d*r),n.moveTo((c-h)*r,d*r),n.lineTo((c+h)*r,d*r),n.stroke()},qg.prototype.enable=function(t){var e;this._enabled||(this._options=w(w({},Hg),t),this._graphics.addCanvas(this._canvas),this._ctx=this._canvas.getContext("2d"),this._events.on(((e={})[[me.CAMERA_MOVE,me.NODES_DRAG_PROGRESS].join(" ")]=this._displayHandlesHandler,e[[me.MOVE,me.DOWN].join(" ")]=this._moveHandler,e)),this._enabled=!0)},qg.prototype.disable=function(){this._enabled&&(this._events.removeListener(this._displayHandlesHandler),this._events.removeListener(this._moveHandler),this._graphics.removeCanvas(this._canvas),this._disableCursor(),this._reset())},qg.prototype._reset=function(){this._enabled=!1,this._nodesToHighlight=null,this._options=w({},Hg),this._nodeBeingResized=null,this._pointedNode=null,this._cursorEnabled=!1,this._x=0,this._y=0,this._additionalRadiuses=[]},qg.prototype.enabled=function(){return this._enabled},qg);function qg(t){var e=t.dom,n=t.interactions,r=t.camera,i=t.events,o=t.graphics,s=t.spatial,a=t.selection,u=jg.call(this)||this;return u._enabled=!1,u._cursorEnabled=!1,u._x=0,u._y=0,u._additionalRadiuses=[],u._onSelectionChange=function(){u._enabled&&(u._nodesToHighlight=u._selection.getSelectedNodes(),u._displayHandles())},u._displayHandlesHandler=function(){return u._displayHandles()},u._moveHandler=function(t){var e=t.x,n=t.y;u._dom.setTimeout((function(){return u._detectBoundingBoxes(e,n)}))},u._dom=e,u._interactions=n,u._events=i,u._camera=r,u._dom=e,u._spatial=s,u._graphics=o,u._selection=a,u._engine=u._graphics.getGraphicsEngine(),u._canvas=ti(),u._ctx=u._canvas.getContext("2d"),u._interactions.onDrag({priority:"resizing",disableDetection:!0,check:function(){return!(!u._enabled||!u._pointedNode)},onStart:function(t){var e=t.x,n=t.y;u._x=e,u._y=n,u._nodeBeingResized=u._pointedNode},onProgress:function(t){var e=t.x,n=t.y;u._x=e,u._y=n,u._displayHandles()},onStop:function(){u._nodesToHighlight&&u._nodesToHighlight.forEach((function(t,e){var n=u._additionalRadiuses[e]/u._camera.zoom;t.setAttributes({radius:t.getAttribute("radius")+n,x:t.getPosition().x+n,y:t.getPosition().y-n})})),u._pointedNode=null,u._nodeBeingResized=null,u._displayHandles()}}),u}var Wg,Yg,Xg,Zg={strokeColor:"black",strokeWidth:5,dashed:!0,cursorStyle:"cell",createNodes:!0,condition:function(){return!0},onNodeCreated:function(){},onEdgeCreated:function(){},onComplete:function(){}},Kg=(E(Jg,Wg=xe),Jg.prototype._onStart=function(t){t&&(this._cursorEnabled=!0,this._startNode=t,this._startPos=t.getPosition(),this._graphics.addCursorStyle(this._options.cursorStyle),this._blockId=this._graphics.allocateGraphicsEngineBlockId())},Jg.prototype._onMove=function(t,e){null!==this._startNode&&(this._endPos=this._camera.screenToGraphCoordinates({x:t,y:e}),this._drawLine())},Jg.prototype._onStop=function(){if(null!==this._startNode){var t=this._options,e=t.condition,n=t.onNodeCreated,r=t.onEdgeCreated,i=t.onComplete,o=t.createNodes,s=this._captor.getPointedElement(),a=null,u=null;this._graphics.releaseGraphicsEngineBlockId(this._blockId),!s&&o&&(u=s=this._graph.addNode({attributes:{x:this._endPos.x,y:this._endPos.y}}),n&&n(u)),s&&(u||!e||e(this._startNode,s))&&(a=this._graph.addEdge({source:this._startNode.getId(),target:s.getId()}),r&&r(a)),i&&(this._events.fire(me.CONNECT_NODES,{source:this._startNode,target:s,edge:a}),i(this._startNode,s,a||void 0)),this.disable()}},Jg.prototype._drawLine=function(){this._block.reset(1,!1,this._depth);var t=this._block.nextAndReset().end;t.pieceId=2,t.shape="line",t.x1=this._startPos.x,t.y1=this._startPos.y,t.x2=this._endPos.x,t.y2=this._endPos.y,t.fillColor=this._options.strokeColor,t.thicknessOrFontSizeFixed=this._options.strokeWidth,this._options.dashed&&(t.dashLength=3,t.gapLength=1),this._engine.storeBlock(this._blockId,this._block),this._dom.refresh()},Jg.prototype.enable=function(t){return void 0===t&&(t={}),this._enabled||(this._options=w(w({},Zg),t),this._enabled=!0,this._cursorEnabled=!1,this._startNode=null,this._prevSettings=this._settings.update({"cursor.node":this._options.cursorStyle,"detect.edges":!1}),this._captor.isLeftPressed()&&this._interaction.start(this._captor.getCursorInformation())),this},Jg.prototype.disable=function(){return this._enabled&&(this._enabled=!1,this._settings.update(this._prevSettings),this._cursorEnabled&&this._graphics.removeCursorStyle(this._options.cursorStyle)),this},Jg.prototype.enabled=function(){return this._enabled},Jg);function Jg(t){var e=t.dom,n=t.camera,r=t.captor,i=t.graph,o=t.graphics,s=t.interactions,a=t.events,u=t.settings,c=Wg.call(this)||this;return c._enabled=!1,c._cursorEnabled=!1,c._dom=e,c._camera=n,c._captor=r,c._graph=i,c._graphics=o,c._interactions=s,c._events=a,c._settings=u,c._engine=c._graphics.getGraphicsEngine(),c._block=c._engine.createBlock(),c._depth=tc(0).edgeBody,c._events.register([me.CONNECT_NODES]),c._interaction=c._interactions.onDrag({priority:"connectNodes",check:function(t){var e=t.target,n=t.button,r=void 0===n?"left":n;return c._enabled&&"left"===r&&e&&e.isNode},onStart:function(t){var e=t.target;return c._onStart(e)},onProgress:function(t){var e=t.x,n=t.y;return c._onMove(e,n)},onStop:function(){return c._onStop()}}),c._events.on(me.CLEAR_GRAPH,(function(){return c.disable()})),c}var Qg,$g=["top","bottom","left","right","cssDefined"],t_={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}},e_={position:"top",autoAdjust:!0,delay:100},n_={hover:{node:function(t){var e=t.target;return e&&e.isNode},edge:function(t){var e=t.target;return e&&!e.isNode}},click:((Yg={})[Id.LEFT]={node:function(t){var e=t.target;return t.button===Id.LEFT&&e&&e.isNode},edge:function(t){var e=t.target;return t.button===Id.LEFT&&e&&!e.isNode},background:function(t){var e=t.target;return t.button===Id.LEFT&&!e}},Yg[Id.RIGHT]={node:function(t){var e=t.target;return t.button===Id.RIGHT&&e&&e.isNode},edge:function(t){var e=t.target;return t.button===Id.RIGHT&&e&&!e.isNode},background:function(t){var e=t.target;return t.button===Id.RIGHT&&!e}},Yg),doubleClick:((Xg={})[Id.LEFT]={node:function(t){var e=t.target;return t.button===Id.LEFT&&e&&e.isNode},edge:function(t){var e=t.target;return t.button===Id.LEFT&&e&&!e.isNode},background:function(t){var e=t.target;return t.button===Id.LEFT&&!e}},Xg[Id.RIGHT]={node:function(t){var e=t.target;return t.button===Id.RIGHT&&e&&e.isNode},edge:function(t){var e=t.target;return t.button===Id.RIGHT&&e&&!e.isNode},background:function(t){var e=t.target;return t.button===Id.RIGHT&&!e}},Xg)},r_=(E(i_,Qg=xe),i_.prototype.hide=function(){this._hideTooltip(!0)},i_.prototype.isShown=function(){return!!this._tooltip},i_.prototype.refresh=function(){this._refreshTooltip()},i_.prototype.show=function(t,e){var n=void 0===e?{}:e,r=n.position,i=void 0===r?"top":r,o=n.autoAdjust,s=void 0===o||o,a=n.className,u=n.x,c=void 0===u?0:u,l=n.y,d=void 0===l?0:l;this._showTooltip(t,{position:i,autoAdjust:s,className:a},{x:c,y:d})},i_.prototype.setHandler=function(t,e,n){var r=w(w({},e_),n);r.position&&-1===$g.indexOf(r.position)&&(r.position="top"),this._handlers[t]={handler:e,condition:X(n_,t),settings:r}},i_.prototype._hideTooltip=function(t){if(this._timeout&&(this._dom.clearTimeout(this._timeout),this._timeout=null),t&&(this._currentHandlerName=null),this._tooltip){var e=this._tooltip;this._tooltip.parentNode&&this._tooltip.parentNode.removeChild(this._tooltip),this._tooltip=null,this._events.fire(me.TOOLTIP_HIDE,{tooltip:e})}},i_.prototype._createInteraction=function(t,e){var n=this;return void 0===e&&(e=!1),{priority:"tooltip",check:function(r){var i=o_(t,r),o=n._handlers[i];return!(e&&n._connectNodes.enabled()||(!o||!o.condition(r))&&(e||!n._currentHandlerName||n._isHover||null===n._tooltip))},handler:function(r){var i=r.target,o=r.x,s=r.y;n._hideTooltip(!1),n._isHover=e,n._elt=i,n._x=o,n._y=s,n._currentHandlerName=o_(t,r),n._refreshTooltip()}}},i_.prototype._refreshTooltip=function(){var t=this;if(this._currentHandlerName){var e=this._handlers[this._currentHandlerName];if(e){var n=e.settings,r=e.handler,i=this._elt;if(i){var o=i.isNode?"node":"edge";if(-1===this._currentHandlerName.indexOf(o))return}var s=r(i);Promise.resolve(s).then((function(e){t._schedule((function(){return t._showTooltip(e,n)}),n.delay)}))}}else this._hideTooltip(!1)},i_.prototype._schedule=function(t,e){var n=this;this._timeout&&this._dom.clearTimeout(this._timeout),this._timeout=this._dom.setTimeout((function(){n._timeout=null,t()}),e)},i_.prototype._showTooltip=function(t,e,n){this._hideTooltip(!1);var r=e.position,i=e.className,o=e.autoAdjust,s=this._x,a=this._y,u=this._elt,c=this._dom.getDimensions(),l=0,d=0;if(n&&(s=n.x,a=n.y,u=null),"string"==typeof t)this._tooltip=pt?document.createElement("div"):Ct(),this._tooltip.innerHTML=t;else{if(!jt(t))throw new Error("invalid tooltip "+t+", expected HTML string or HTML element");this._tooltip=t}var h=this._tooltip;if(i&&this._tooltip.classList.add(i),"cssDefined"!==r&&(h.style.position="absolute"),this._dom.appendElement(h),u&&u.isNode){var f=u,p=f.getPositionOnScreen(),g=f.getAttribute("radius");g="fixed"===f.getAttribute("scalingMethod")?g+f.getAttribute("innerStroke.width")+f.getAttribute("outerStroke.width"):g*this._camera.getZoom()+f.getAttribute("innerStroke.width")+f.getAttribute("outerStroke.width"),s=p.x,a=p.y,d=l=g}var _=h.offsetWidth/2,v=h.offsetHeight/2;if(l+=_,d+=v,r&&"cssDefined"!==r){var y=t_[r],m=y.x,b=y.y;if(o){var x=s+l*y.x,E=a+d*y.y;(x-_<0||x+_>=c.width)&&("left"===r||"right"===r?m*=-1:m=x-_<0?(_-x+1)/l:(c.width-(x+_)-1)/l),(E-v<0||E+v>=c.height)&&("top"===r||"bottom"===r?b*=-1:b=E-v<0?(v-E+1)/d:(c.height-(E+v)-1)/d)}h.style.left=s+l*m-_+"px",h.style.top=a+d*b-v+"px"}this._events.fire(me.TOOLTIP_SHOW,{tooltip:h})},i_);function i_(t){var e,n=t.dom,r=t.connectNodes,i=t.interactions,o=t.camera,s=t.events,a=Qg.call(this)||this;return a._x=0,a._y=0,a._dom=n,a._connectNodes=r,a._interactions=i,a._camera=o,a._events=s,a._handlers={},a._currentHandlerName=null,a._tooltip=null,a._isHover=!1,a._events.register(["showTooltip","hideTooltip"]),a._events.on(((e={})[me.UP+" "+me.DRAG_START]=function(){a._isHover||a._hideTooltip(!1)},e[me.UNHOVER]=function(){a._isHover&&a._hideTooltip(!1)},e[me.CLEAR_GRAPH]=function(){return a._hideTooltip(!1)},e)),a._interactions.onHover(a._createInteraction("hover",!0)),a._interactions.onClick(a._createInteraction("click")),a._interactions.onDoubleClick(a._createInteraction("doubleClick")),a}function o_(t,e){var n=e.button,r=e.target;return t+(n?"."+n:"")+"."+(null!==r?r.isNode?"node":"edge":"background")}var s_,a_={65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",46:"del",8:"backspace",32:"space",224:"cmd",91:"cmd",92:"cmd",93:"cmd",187:"+",189:"-"},u_=Object.keys(a_).reduce((function(t,e){var n=a_[e];return t[n]||(t[n]=[]),t[n].push(e),t}),{}),c_=(E(l_,s_=xe),l_.prototype.setIdleTimeout=function(t){if(!isFinite(t)||t<=1)throw new TypeError("Idle timeout must be a positive number > 1");this._idleTimeout=t},l_.prototype.resetKeys=function(){for(var t=0;t<this._pressed.length;t++)this._pressed[t]&&(this._pressed[t]=!1,this._events.fire("keyUp",{key:a_[t],code:t}))},l_.prototype.onKeyPress=function(t,e){var n=this,r=[];if("number"==typeof t)r=[t];else if("string"==typeof t)r=t.split(" ");else{if(!Array.isArray(t))throw new TypeError(t+" is not a number, string or array");r=t}if(0===r.length)throw new Error("the array should contain at least one element");var i=r.map((function(t){if("number"==typeof t)return[t];if("string"!=typeof t)throw new TypeError(t+" is not a valid key identifier");var e=u_[t];if(!e)throw new Error(t+" is not a valid key identifier");return e})),o=i.pop(),s={keys:i,handler:e};o&&o.forEach((function(t){n._binds[t]||(n._binds[t]=[]),n._binds[t].push(s)}))},l_.prototype.isPressed=function(t){var e=this;if("number"==typeof t)return this._pressed[t];if("string"==typeof t){var n=u_[t];if(n)return n.some((function(t){return e._pressed[t]}))}return!1},l_);function l_(t){var e=t.dom,n=t.events,r=s_.call(this)||this;return r._onBlur=function(){return r.resetKeys()},r._onKeyUp=function(t){var e=t.keyCode||t.which;r._pressed[e]=!1,r._events.fire("keyUp",{domEvent:t,key:a_[e],code:e})},r._onKeyDown=function(t){var e=t.keyCode||t.which,n=r._binds[e];if(!r._pressed[e]){if(r._pressed[e]=!0,n)for(var i=0,o=n;i<o.length;i++){var s=o[i];s.keys.every((function(t){return t.some((function(t){return r._pressed[t]}))}))&&s.handler({domEvent:t})}r._events.fire("keyDown",{domEvent:t,key:a_[e],code:e})}},r._events=n,r._events.register(["keyUp","keyDown"]),r._binds=[],r._pressed=[],e.addWindowEventListener("keydown",r._onKeyDown),e.addWindowEventListener("keyup",r._onKeyUp),e.addWindowEventListener("visibilitychange",r._onBlur),e.addWindowEventListener("blur",r._onBlur,!1),r._idleTimeout=4e3,r._prevEventTimeStamp=Qt(),r._events.onAnyEvent((function(){var t=Qt();t-r._prevEventTimeStamp>r._idleTimeout&&r.resetKeys(),r._prevEventTimeStamp=t})),r}var d_=[{name:"color",isNode:!0},{name:"shape",isNode:!0},{name:"radius",isNode:!0},{name:"icon.content",isNode:!0},{name:"image.url",isNode:!0},{name:"image",isNode:!0},{name:"color",isNode:!1},{name:"shape",isNode:!1},{name:"width",isNode:!1}],h_=Math.PI,f_=2*Math.PI,p_=Math.cos(h_/2-f_/5),g_=Math.cos(h_/2-f_/5*2),__=Math.cos(h_/2-f_/5*3),v_=Math.cos(h_/2-f_/5*4),y_=Math.sin(-h_/2+f_/5),m_=Math.sin(-h_/2+f_/5*2),b_=Math.sin(-h_/2+f_/5*3),x_=Math.sin(-h_/2+f_/5*4),E_=[8,3],w_=[3,3],S_={position:"bottom",widgetWidth:130,fontFamily:"Arial",fontSize:10,fontColor:"black",titleFontSize:12,titleFontColor:"black",titleMaxLength:20,titleTextAlign:"left",shapeColor:"grey",backgroundColor:"white",borderColor:"black",borderRadius:0,borderWidth:1,innerMargin:10,outerMargin:5,circleStrokeWidth:3,titleFunction:function(t){return t[t.length-1]}},A_=["widgetWidth","fontSize","titleFontSize","borderRadius","borderWidth","innerMargin","outerMargin","circleStrokeWidth"];function C_(t){var e=["K","M","B","T","P","E","Z","Y"];if(9999<t){for(var n=0;n<e.length&&999<t;)t/=1e3,n++;return(T_(t,3)+e[n-1]).toString()}return T_(t,4).toString()}function T_(t,e){void 0===e&&(e=3);var n=4===e?10:1;return t<10?Math.round(100*t*n)/(100*n):t<100?Math.round(10*t*n)/(10*n):t<1e3?Math.round(t*n)/n:Math.round(t)}function k_(t){return t.innerMargin+1.6*(t.titleFontSize+t.fontSize)}function I_(t,e,n){var r,i,o=e.getContext("2d"),s=n.x,a=n.y,u=n.height,c=n.isNode,l=n.styleProperty,d=n.title,h=n.mapping,f=n.iconFont,p=n.iconFontStyle;i=u,function(t,e,n,r,i,o,s,a,u){t.setLineDash([]),t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fillStyle=s,t.fill(),t.strokeStyle=a,t.lineWidth=u,t.stroke()}(o,s,a,(r=t).widgetWidth,i,r.borderRadius,r.backgroundColor,r.borderColor,r.borderWidth),function(t,e,n,r,i){O_(t,e.fontFamily,e.titleFontSize,e.titleFontColor,e.titleTextAlign);var o="center"===e.titleTextAlign,s=e.widgetWidth-2*e.innerMargin,a=t.measureText(n).width,u=r+(o?e.widgetWidth/2:e.innerMargin),c=i+e.titleFontSize/2+e.innerMargin;if(s<a){var l=s/a,d=(n.length*l|0)-2;n=n.substr(0,d)+""}t.fillText(n,u,c)}(o,t,d,s,a);var g,_=1.6*t.fontSize,v=t.fontSize/2*1.6*.9,y=3*t.fontSize,m=t.fontSize,b=(g=c?1:3,t.fontSize*g),x=a+k_(t),E=s+t.innerMargin+b/2,w=s+2*t.innerMargin+b,S=G(h),A=function t(e){return Array.isArray(e)?e.reduce((function(e,n){return e&&t(n)}),!0):"undefined"===e||!isNaN(Number(e))}(S),C=t.fontColor,T=t.shapeColor,k=Object.keys(h);if(A&&(k.sort((function(t,e){return Ke(h[e])-Ke(h[t])})),"radius"===l||"width"===l)){var I=function t(e){return Array.isArray(e)?e.reduce((function(e,n){return Math.min(e,t(n))}),1/0):isNaN(e)?1/0:+e}(S),O=function t(e){return Array.isArray(e)?e.reduce((function(e,n){return Math.max(e,t(n))}),-1/0):isNaN(e)?-1/0:+e}(S),M=Math.round((I+O)/2);return(c?L_:N_)(t,o,s,x,I,M,O,T)}k.forEach((function(e){var n,r,i,s,a,u,d,g,b,S,k=h[e];"color"===l&&(c?M_(o,E,x,v,e):(r=E,i=x,s=y,a=m,u=e,(n=o).fillStyle=u,n.fillRect(r-s/2,i-a/2,s,a))),"shape"===l&&(c?function(t,e,n,r,i,o){switch(t.fillStyle=o,i){case"square":return t.fillRect(e-r,n-r,2*r,2*r);case"circle":return M_(t,e,n,r,o);case"cross":return function(t,e,n,r){t.fillRect(e-r,n-.31*r,2*r,2*r*.31),t.fillRect(e-.31*r,n-r,2*r*.31,2*r)}(t,e,n,r);case"diamond":return function(t,e,n,r){t.beginPath(),t.moveTo(e-r,n),t.lineTo(e,n-r),t.lineTo(e+r,n),t.lineTo(e,n+r),t.fill()}(t,e,n,r);case"equilateral":return function(t,e,n,r){t.beginPath(),t.moveTo(e,n-r),t.lineTo(e+p_*r,n+y_*r),t.lineTo(e+g_*r,n+m_*r),t.lineTo(e+__*r,n+b_*r),t.lineTo(e+v_*r,n+x_*r),t.fill()}(t,e,n,r);case"star":!function(t,e,n,r){t.beginPath(),t.moveTo(e,n-r),t.lineTo(e+g_*r,n+m_*r),t.lineTo(e+v_*r,n+x_*r),t.lineTo(e+p_*r,n+y_*r),t.lineTo(e+__*r,n+b_*r),t.fill()}(t,e,n,r)}}(o,E,x,v,e,T):function(t,e,n,r,i,o,s){t.fillStyle=s,"line"===o&&t.fillRect(e-r/2,n-i/4,r,i/2),"arrow"===o?function(t,e,n,r,i){t.fillRect(e-r/2,n-i/4,r*(1-1/3),i/2),t.beginPath(),t.moveTo(e+r*(1-1/3-.5),n-i/2),t.lineTo(e+r*(1-1/3-.5),n+i/2),t.lineTo(e+r/2,n),t.fill()}(t,e,n,r,i):"dashed"===o||"dotted"===o?function(t,e,n,r,i,o,s){t.beginPath(),t.moveTo(e-r/2,n),t.lineTo(e+r/2,n),t.strokeStyle=o,t.lineWidth=i/2,t.setLineDash("dashed"===s?E_:w_),t.stroke()}(t,e,n,r,i,s,o):"tapered"===o&&function(t,e,n,r,i){t.beginPath(),t.moveTo(e-r/2,n-i/2),t.lineTo(e-r/2,n+i/2),t.lineTo(e+r/2,n),t.fill()}(t,e,n,r,i)}(o,E,x,y,m,e,T)),"icon.content"===l&&(g=E,b=x,S=e,O_(d=o,f,2*v,C,"center",p),d.fillText(S,g,b)),"image"!==l&&"image.url"!==l||function(t,e,n,r,i){if("undefined"!=typeof Image){t._imgStore||(t._imgStore={});var o=t._imgStore[i];if(o)return t.drawImage(o,e-r,n-r,2*r,2*r);(o=new Image).src=i,o.onload=function(){t.drawImage(o,e-r,n-r,2*r,2*r)},t._imgStore[i]=o}}(o,E,x,v,e),function(t,e,n,r,i,o){var s=i.join();if(o)if(1===i.length)s=C_(i[0]);else{var a=Ke(i),u=Ze(i);s=C_(a)+" - "+C_(u)}O_(t,e.fontFamily,e.fontSize,e.fontColor),t.fillText(s,n,r)}(o,t,w,x,k,A),x+=_}))}function O_(t,e,n,r,i,o){void 0===i&&(i="left"),void 0===o&&(o="normal"),t.textAlign=i,t.textBaseline="middle",t.fillStyle=r,t.font=o+" "+n+'px "'+e+'"'}function M_(t,e,n,r,i){t.beginPath(),t.arc(e,n,r,0,2*h_),t.fillStyle=i,t.fill()}function L_(t,e,n,r,i,o,s,a){for(var u,c,l,d,h,f,p=.7*t.fontSize,g=3*p,_=(p+g)/2,v=n+t.innerMargin+g,y=v+g+t.innerMargin,m=r+2*g-.5*t.innerMargin,b=t.circleStrokeWidth,x=0,E=[p,_,g];x<E.length;x++){var w=E[x];c=v,l=m-w,d=w,h=a,f=b,(u=e).beginPath(),u.arc(c,l,d,0,f_),u.strokeStyle=h,u.lineWidth=f,u.stroke()}O_(e,t.fontFamily,t.fontSize,t.fontColor,"left"),e.fillText(C_(i),y,m+p-2*p),e.fillText(C_(o),y,m+p-2*_),e.fillText(C_(s),y,m+p-2*g)}function N_(t,e,n,r,i,o,s,a){var u=(t.widgetWidth-2*t.innerMargin)/3,c=t.fontSize,l=r-t.innerMargin/2,d=l+2*c,h=n+t.innerMargin;e.fillStyle=a,e.fillRect(h,l-c/2,1+u,c),e.fillRect(h+u,l-c/3,1+u,c/1.5),e.fillRect(h+2*u,l-c/6,u,c/3),O_(e,t.fontFamily,t.fontSize,t.fontColor,"center"),e.fillText(C_(s),h+.5*u,d),e.fillText(C_(o),h+1.5*u,d),e.fillText(C_(i),h+2.5*u,d)}function R_(t,e,n){for(var r=null,i=0;i<e.length;++i){var o;(o=e[i]).isNode!==t.isNode&&1!==e.length||!(null===r||o.height<e[r].height)||(r=i)}null!=r&&((o=e[r]).content.push(t),o.height+=t.height+n.outerMargin)}function P_(t){for(var e=0,n=1;n<t.length;++n)t[n].height>t[e].height&&(e=n);return e}function D_(t,e){return t.isNode!==e.isNode?t.isNode?-1:1:t.title<=e.title?-1:1}function F_(t,e){return t.height-e.height}function z_(t,e){return t.isNode!==e.isNode?t.isNode?-1:1:e.height-t.height}function B_(t,e){return t.isNode!==e.isNode?t.isNode?-1:1:t.content[0].title<=e.content[0].title?-1:1}var U_,V_=(E(j_,U_=xe),j_.prototype.enable=function(t){void 0===t&&(t={});var e=this._settings;return this._settings=w(w({},S_),t),this._mustRefresh=!this._enabled||!this._sameOptions(e,this._settings),this._enabled?Promise.resolve():(this._enabled=!0,this._graphics.addCanvas(this._canvas),this.refresh())},j_.prototype._afterNextUpdate=function(){var t=this;return new Promise((function(e){return t._promises.push(e)}))},j_.prototype._formatSettings=function(t,e){var n=w(w({},S_),t);return A_.forEach((function(t){return n[t]*=e})),n},j_.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._graphics.removeCanvas(this._canvas))},j_.prototype.enabled=function(){return this._enabled},j_.prototype.refresh=function(){return this._mustRefresh=!0,this._dom.refresh(),this._afterNextUpdate()},j_.prototype.destroy=function(){this._enabled=!1,this._mustRefresh=!1,this._settings=w({},S_),this._promises=[]},j_.prototype.getOptions=function(){return this._enabled?w({},this._settings):w({},S_)},j_.prototype.getCurrentOptions=function(){return this._settings},j_.prototype._sameOptions=function(t,e){return t===e||Object.keys(t).reduce((function(n,r){return n&&t[r]===e[r]}),!0)},j_.prototype._drawOnCanvas=function(t,e,n){var r=this._formatSettings(t,n);!function(t,e,n){var r={width:e.width,height:e.height};r.width&&r.height&&n&&("top"===t.position||"bottom"===t.position?function(t,e,n,r){n=n.slice();for(var i=e.widgetWidth+e.outerMargin,o=Math.floor((t.width-e.outerMargin)/i),s=t.height-e.outerMargin,a=new Array(Math.min(o,n.length)),u=n.length,c=0,l=0,d=0,h=0,f=0;f<u;++f)(S=n[f]).isNode?(c+=1,l+=S.height):(d+=1,h+=S.height);var p=l+h,g=l/p,_=h/p,v=Math.round(g*o),y=Math.round(_*o);if(c<v?v=c:d<y&&(v=o-d),0===o)return!1;for(f=0;f<a.length;f++)a[f]={content:[],height:0,isNode:f<v};for(f=0;f<u;++f){var m=P_(n);R_(n[m],a,e),n.splice(m,1)}a.every((function(t){return 1===t.content.length}))?a.sort(B_):a.sort(z_);var b=e.outerMargin;for(f=0;f<a.length;++f){var x=a[f];if(x.height>s)return!1;x.content.sort(F_);for(var E=0,w=0;w<x.content.length;++w){var S;(S=x.content[w]).x=b,S.y=r?t.height-E-S.height-e.outerMargin:E+e.outerMargin,E+=S.height+e.outerMargin}b+=i}return!0}(r,t,n,"bottom"===t.position):function(t,e,n,r){var i=e.widgetWidth+e.outerMargin,o=Math.floor((t.width-e.outerMargin)/i),s=t.height,a=e.outerMargin,u=r?e.outerMargin:t.width-i,c=1;n=n.slice().sort(D_);for(var l=0;l<n.length;++l){var d=n[l];if(a+d.height>s){if(a===e.outerMargin)return!1;a=e.outerMargin,c+=1,r?u+=i:u-=i}d.x=u,d.y=a,a+=d.height}return c<=o}(r,t,n,"left"===t.position))&&n.forEach((function(n){return I_(t,e,n)}))}(r,e,this._computeWidgetList(r))},j_.prototype.exportOnCanvas=function(t,e){return this._drawOnCanvas(e,t,1)},j_.prototype._computeWidgetList=function(t){var e=this,n=[];return d_.forEach((function(r){var i=r.name,o=r.isNode,s=e._computeWidget(t,i,o);s&&n.push(s)})),n},j_.prototype._computeWidget=function(t,e,n){var r=this._computePropertyMapping(t,e,n);if(r){if("icon.content"!==e)return r;var i=this._getRulesForAttribute(n,"icon.font"),o=this._getRulesForAttribute(n,"icon.style"),s=null,a=null;if(i.length||(s="Arial",a="normal"),"string"==typeof i[0]&&(s=i[0],a=o[0]),s&&a)return r.iconFont=s,r.iconFontStyle=a,r}return null},j_.prototype._computePropertyMapping=function(t,e,n){var r,i,o,s,a,u,c,l=this._getRulesForAttribute(n,e)[0],d=l&&l.mapping,h=d&&d.getValues(n);if(d&&h){var f=d.getField(),p={};return q(h,(function(t,e){void 0!==t&&"undefined"!==e&&(p[t]=p[t]||[],p[t].push(e))})),0===Object.keys(p).length?null:{isNode:n,title:t.titleFunction(f),styleProperty:e,dataProperty:f,mapping:p,height:(r=p,i=e,o=n,a=(s=t).outerMargin+k_(s),u=1.6*s.fontSize,c=a-.8*s.innerMargin,"radius"===i||"width"===i?c+u*(o?3:2):c+Object.keys(r).length*u)}}return null},j_.prototype._getRulesForAttribute=function(t,e){return this._styleRules.getRuleList().map((function(n){var r=n.getDefinition();return X(t?r.nodeAttributes:r.edgeAttributes,e)})).filter((function(t){return t})).sort((function(t,e){return t.mapping&&e.mapping?0:t.mapping?-1:1}))},j_);function j_(t){var e,n=t.graphics,r=t.dom,i=t.events,o=t.styleRules,s=U_.call(this)||this;return s._enabled=!1,s._mustRefresh=!1,s._promises=[],s._graphics=n,s._dom=r,s._events=i,s._styleRules=o,s._canvas=ti(),s._ctx=s._canvas.getContext("2d"),s._events.on(((e={})[me.NEW_FRAME]=function(){if(s._enabled&&s._mustRefresh){s._ctx.clearRect(0,0,s._canvas.width,s._canvas.height),s._drawOnCanvas(s._settings,s._canvas,Tt());var t=s._promises;s._promises=[],t.forEach((function(t){return t()})),s._mustRefresh=!1}},e[me.RESIZE+" "+me.RELOAD_FONTS]=function(){s._mustRefresh=!0},e)),s}var H_,G_={layer:3,outerStroke:{color:"red",width:5},innerStroke:{minVisibleSize:0},text:{backgroundColor:"rgb(220, 220, 220)",minVisibleSize:0}},q_={layer:3,color:"red",text:{backgroundColor:"rgb(220, 220, 220)",minVisibleSize:0}},W_=(E(Y_,H_=xe),Y_.prototype.setRate=function(t){this._delay=t},Y_.prototype.updateNodeAttributes=function(t,e){this._hoverClass.update({nodeAttributes:t,fullOverwrite:e}),this._hoverExtremityHighlightedClass.update({nodeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()},Y_.prototype.updateEdgeAttributes=function(t,e){this._hoverClass.update({edgeAttributes:t,fullOverwrite:e}),this._updateExtremityHighlightLayer()},Y_.prototype.getHoverClassDefinition=function(){return this._hoverClass.getDefinition()},Y_.prototype.onMounted=function(t){function e(){n._hoverExtremityHighlightedClass.clearNodes(),n._hoverClass.getEdges().getExtremities().addClass(cn)}var n=this;this._classes.onEdgeClassAdded(un,e),this._classes.onEdgeClassRemoved(un,e)},Y_.prototype._registerSettings=function(){var t=this;this._settings.register("cursor.node","pointer",(function(e,n){t._hovered&&t._hovered.isNode&&(t._graphics.removeCursorStyle(n),t._graphics.addCursorStyle(e))})),this._settings.register("cursor.edge","pointer",(function(e,n){t._hovered&&!t._hovered.isNode&&(t._graphics.removeCursorStyle(n),t._graphics.addCursorStyle(e))})),this._settings.register("nodeHover",!0,(function(e){!e&&t._hovered&&t._hovered.isNode&&t._unhover(t._hovered)})),this._settings.register("edgeHover",!0,(function(e){e||!t._hovered||t._hovered.isNode||t._unhover(t._hovered)}))},Y_.prototype._updateExtremityHighlightLayer=function(){var t=this._hoverClass.getDefinition().edgeAttributes,e=t?t.layer:void 0;this._hoverExtremityHighlightedClass.update({nodeAttributes:{layer:e},fullOverwrite:!1})},Y_.prototype._removeTimeout=function(){this._timeout&&(this._dom.clearTimeout(this._timeout),this._timeout=null)},Y_.prototype._hover=function(t){var e=this,n=t.isNode?"nodeHover":"edgeHover";this._settings.get(n)&&!this._graphics.isAnimating()&&(this._removeTimeout(),this._timeout=this._dom.setTimeout((function(){e._graphics.isAnimating()||(e._setElementHighlight(!0,t),e._hovered=t),e._timeout=null}),this._delay))},Y_.prototype._unhover=function(t){this._removeTimeout(),this._hovered===t&&(this._setElementHighlight(!1,t),this._hovered=null)},Y_.prototype._setElementHighlight=function(t,e){var n=this._settings.get(e.isNode?"cursor.node":"cursor.edge");t?(this._graphics.addCursorStyle(n),e.addClass(un)):(this._graphics.removeCursorStyle(n),e.removeClass(un)),e.isNode&&t&&this._graph.getAttribute(e.isNode,"textHidden").set(e._index,!1)},Y_);function Y_(t){var e,n=t.dom,r=t.classes,i=t.captor,o=t.graph,s=t.graphics,a=t.settings,u=t.events,c=H_.call(this)||this;return c._delay=100,c._manualTriggerDetection=!1,c._hovered=null,c._onAnimate=function(t){t.duration&&(c._manualTriggerDetection=!0,c._resetHover())},c._onBeforeNewFrame=function(){if(c._manualTriggerDetection&&!c._graphics.isAnimating()){c._manualTriggerDetection=!1,c._captor.triggerDetection();var t=c._captor.getPointedElement();t&&c._hover(t)}},c._onClear=function(){c._hovered=null,c._timeout&&c._dom.clearTimeout(c._timeout)},c._resetHover=function(){c._hovered&&(c._unhover(c._hovered),c._captor.triggerUnhover()),c._timeout&&(c._dom.clearTimeout(c._timeout),c._timeout=null)},c._dom=n,c._graph=o,c._graphics=s,c._settings=a,c._captor=i,c._events=u,c._classes=r,c._registerSettings(),c._hoverExtremityHighlightedClass=c._classes.createClass({name:cn,isBuiltin:!0,nodeAttributes:G_}),c._hoverClass=c._classes.createClass({name:un,isBuiltin:!0,nodeAttributes:G_,edgeAttributes:q_}),c._events.on(((e={})[me.HOVER]=function(t){var e=t.target;return e&&c._hover(e)},e[me.UNHOVER]=function(t){var e=t.target;return e&&c._unhover(e)},e[me.ANIMATE]=c._onAnimate,e[me.BEFORE_NEW_FRAME]=c._onBeforeNewFrame,e[me.MOUSE_LEAVE]=c._resetHover,e[me.CLEAR_GRAPH]=c._onClear,e)),c}var X_=function(){this.x=0,this.y=0},Z_=(K_.prototype.getValue=function(t,e){var n=t.isNode,r=n?this._nodeMapping:this._edgeMapping;r.valid||(r.values=this._computeMapping(n),r.valid=!0);var i=t.getData(this._field);return Array.isArray(i)?"color"===e?i.map((function(t){return r.values[t]})):r.values[i[0]]:r.values[i]},K_.prototype.markAsInvalid=function(){this._nodeMapping.valid=!1,this._edgeMapping.valid=!1},K_.prototype.getValues=function(t){return t?this._nodeMapping.values:this._edgeMapping.values},K_.prototype.getField=function(){return this._field},K_);function K_(t,e){this._nodeMapping={valid:!1,values:{}},this._edgeMapping={valid:!1,values:{}},this._computeMapping=e,this._field=t}function J_(t,e,n){var r=(e?t.getNodes():t.getEdges()).getData(n),i={};return r.forEach((function(t){if(!Array.isArray(t))return i[t]=1;t.forEach((function(t){return i[t]=1}))})),"undefined"in i&&delete i[void 0],Object.keys(i).sort()}function Q_(t,e,n,r){for(var i=n.values,o=void 0===i?{}:i,s=n.fallback,a=J_(t,r,e),u={},c=0,l=0;l<a.length;++l){var d=a[l];d in o?u[d]=o[d]:(u[d]=s[c],c=(c+1)%s.length)}return u}function $_(t,e,n,r){for(var i=n.fallback,o=n.stops,s=void 0===o?{}:o,a=n.values,u=n.reverse,c=J_(t,r,e),l=1/0,d=-1/0,h=0;h<c.length;h++)tp(_=+c[h])&&(l=Math.min(l,_),d=Math.max(d,_),c[h]=_);var f={};if(!isFinite(l)){for(h=0;h<c.length;h++)f[c[h]]=i;return f}var p=function(t,e){var n=e.nbSlices,r=e.minValue,i=e.maxValue;if(Array.isArray(t))return t.slice();for(var o=t.min,s=void 0===o?r:o,a=t.max,u=((void 0===a?i:a)-s)/n,c=[],l=1;l<n;++l)c.push(s+u*l);return c}(s,{nbSlices:Array.isArray(a)?a.length:a.nbSlices,minValue:l,maxValue:d}),g=function(t,e){if(Array.isArray(t))return t;for(var n=t.min,r=t.max,i=e.length+1,o=(r-n)/e.length,s=[],a=0;a<i;a++)s.push(n+a*o);return s}(a,p);for(u&&g.reverse(),h=0;h<c.length;++h){var _=c[h];if(isFinite(_)){for(var v=0;v<p.length&&p[v]<=_;)v+=1;f[_]=g[v]}else f[_]=i}return f}var tv,ev=(E(nv,tv=xe),nv.prototype.createMapping=function(t){var e=void 0===t?{field:""}:t,n=e.field,r=e.values,i=void 0===r?{}:r,o=e.fallback,s=void 0===o?void 0:o;if(n=z(n),Array.isArray(s)?0===s.length&&(s=[void 0]):s=[s],!H(i))throw new Error('"mapping" should be an object');return this._createMappingFunction(Q_,n,{values:i,fallback:s})},nv.prototype.createSlices=function(t){var e=void 0===t?{field:"",values:[]}:t,n=e.field,r=e.fallback,i=void 0===r?void 0:r,o=e.stops,s=void 0===o?{}:o,a=e.values,u=e.reverse,c=void 0!==u&&u;if(n=z(n),Array.isArray(a)||a.nbSlices||(a.nbSlices=7),Array.isArray(s)&&Array.isArray(a)&&s.length!==a.length-1)throw new Error("there should be exactly one more value that stops");return this._createMappingFunction($_,n,{fallback:i,stops:s,values:a,reverse:c})},nv.prototype._createMappingFunction=function(t,e,n){var r=this,i=new Z_(e,(function(i){return t(r._graph,e,n,i)}));function o(t,e,n){return i.getValue(t,n)}return this._mappingList.push(i),o.mapping=i,o},nv.prototype.createTemplate=function(t){if("string"!=typeof t)throw new TypeError('"template" should be a string');for(var e=[],n=0,r=!1;!r;){var i=-1,o=t.indexOf("{{",n);-1!==o&&(i=t.indexOf("}}",o+2)),-1!==i?(e.push(t.substring(n,o)),e.push(t.substring(o+2,i)),n=i+2):(e.push(t.slice(n)),r=!0)}return function(t){for(var n=e[0],r=1;r<e.length;r+=2)n+=t.getData(e[r]),n+=e[r+1];return n}},nv);function nv(t){var e,n=t.graph,r=t.events,i=t.styleRules,o=t.legend,s=tv.call(this)||this;return s._mappingList=[],s._graph=n,s._styleRules=i,s._events=r,s._legend=o,s._events.on(((e={})[[me.ADD_NODES,me.ADD_EDGES,me.UPDATE_NODE_DATA,me.UPDATE_EDGE_DATA,me.REMOVE_NODES,me.BEFORE_REMOVE_EDGES,me.EXCLUDED_STATE_CHANGE,me.CLEAR_GRAPH].join(" ")]=function(){if(s._mappingList.length){for(var t=0;t<s._mappingList.length;++t)s._mappingList[t].markAsInvalid();s._styleRules.refreshAllRules(),s._legend.refresh()}},e)),s}var rv,iv,ov=(sv.prototype.run=function(t){var e=t.ogma,n=t.duration,r=this._getNodesToFilter(e),i=this._getEdgesToFilter(e,r);return Promise.all([r.addClass(_n,n),i.addClass(_n,n)]).then((function(){return r.setExcluded(!0),i.setExcluded(!0),{nodes:r,edges:i,virtualNodes:null,virtualEdges:null}}))},sv.prototype.undo=function(t){var e=t.duration,n=t.context,r=n.nodes,i=n.edges;return r.setExcluded(!1),i.setExcluded(!1),r.addClass(_n),i.addClass(_n),Promise.all([r.removeClass(_n,e),i.removeClass(_n,e)])},sv.prototype.cleanup=function(t){return Promise.resolve()},sv);function sv(t){var e=t.getNodesToFilter,n=t.getEdgesToFilter;this._getNodesToFilter=e,this._getEdgesToFilter=n}(iv=rv=rv||{}).NodeFilter="node-filter",iv.EdgeFilter="edge-filter",iv.NodeCollapsing="node-collapsing",iv.VirtualProperties="virtual-properties",iv.NeighborGeneration="neighbor-generation",iv.NeighborMerging="neighbor-merging",iv.NodeGrouping="node-grouping",iv.EdgeGrouping="edge-grouping";var av,uv=(E(cv,av=ov),cv.prototype.getName=function(){return rv.NodeFilter},cv);function cv(t){return av.call(this,{getNodesToFilter:function(e){return e.getNodes().filter((function(e){return!t||!t(e)}))},getEdgesToFilter:function(t,e){return e.getAdjacentEdges()}})||this}var lv,dv=(E(hv,lv=ov),hv.prototype.getName=function(){return rv.EdgeFilter},hv);function hv(t){return lv.call(this,{getNodesToFilter:function(t){return t.createNodeList()},getEdgesToFilter:function(e){return e.getEdges().filter((function(e){return!t||!t(e)}))}})||this}function fv(t){return"object"!=typeof t?{criteria:t,enabled:!0,duration:0}:t}var pv,gv=(E(_v,pv=xe),_v.prototype.addNodeFilter=function(t){var e=fv(t),n=e.criteria,r=S(e,["criteria"]);return this._transformations.add(new uv(n),r)},_v.prototype.addEdgeFilter=function(t){var e=fv(t),n=e.criteria,r=S(e,["criteria"]);return this._transformations.add(new dv(n),r)},_v);function _v(t){var e=t.transformations,n=pv.call(this)||this;return n._transformations=e,n}var vv=(yv.prototype.destroy=function(){var t=this;Object.keys(this).forEach((function(e){var n=t[e];n instanceof xe&&n.destroy(t._ogma)}))},yv);function yv(t,e){var n=this;this._ogma=t,"webgl"===Dl&&ga.cacheInitData(ga.createInitData()),this.settings=new Kl,this.events=new jl,this.dom=new Ae(this,e.dimensions),this.animations=new yh(this),this.camera=new Il(this),this.graph=new xr(this,t),this.data=new Ie(this),this.graphics=new Fl(this,t),this.individualAttributes=new Yl(this),this.algorithms=new xf(this),this.position=new X_,this.touch=new Bd(this),this.mouse=new Dd(this),this.virtualMouse=new Mp(this),this.spatial=new Cd(this),this.captor=new Ig(this),this.interactions=new mg(this),this.classes=new ed(this),this.cameraInteractions=new Sl(this,!!e.debug),this.hover=new W_(this),this.keyboard=new c_(this),this.selection=new rh(this),this.styleRules=new qp(this),this.legend=new V_(this),this.sync=new sh(this),this.rules=new ev(this),this.transformations=new Jd(this,t),this.filters=new gv(this),this.locate=new Md(this),this.drag=new Dg(this),this.grouping=new Gd(this),this.pulses=new fh(this),this.curvatureManager=new Sf(this),this.tasks=new qf(this),this.layouts=new Kf(this),this.watcher=new fp(this),this.pathfinding=new Cp(this),this.rectangleSelect=new tg(this),this.labels=new fg(this,e),this.brand=new Ch(this),this.lasso=new Kp(this),this.rewiring=new Ug(this),this.resizing=new Gg(this),this.snapping=new Up(this),this.connectNodes=new Kg(this),this.tooltip=new r_(this),this.geo=new Oh(this),t.onReady((function(){Object.keys(n).forEach((function(t){var r=n[t];r instanceof xe&&r.onMounted(n._ogma,e)}))}))}var mv=(bv.initNamespace=function(t){var e;t.algorithms=(e=t,{shortestPath:function(t){return e.modules.algorithms.shortestPath(t)},hasCycle:function(t){var n=void 0===t?{}:t,r=n.nodes,i=n.edges;return null!==e.algorithms.detectCycle({nodes:r,edges:i})},getAllSimpleCycles:function(t){var n=void 0===t?{}:t,r=n.nodes,i=n.edges;return r=r||e.getNodes(),i=i||r.getAdjacentEdges({bothExtremities:!0}),e.modules.algorithms.getAllSimpleCycles(r,i)},detectCycle:function(t){var n=void 0===t?{}:t,r=n.nodes,i=n.edges;r=r||e.getNodes(),i=i||r.getAdjacentEdges({bothExtremities:!0});var o=e.modules.algorithms.detectCycle(r,i);return o.size?o:null},minimumSpanningTree:function(t){var n=void 0===t?{}:t,r=n.nodes,i=n.edges,o=n.edgeCostFunction;return e.modules.algorithms.minimumSpanningTree(r,i,o)}})},bv);function bv(){}var xv=(Ev.prototype.createClass=function(t,e){return this.modules.classes.createClass(Object.assign({},e,{name:t}))},Ev.prototype.updateClass=function(t,e){return this.modules.classes.getClassByName(t,!0).update(e||{})},Ev.prototype.getNodesByClassName=function(t,e){return this.modules.classes.getClassByName(t,!0).getNodes(e)},Ev.prototype.getEdgesByClassName=function(t,e){return this.modules.classes.getClassByName(t,!0).getEdges(e)},Ev);function Ev(){}var wv=(Sv.prototype.getHoveredElement=function(){return this.modules.captor.getPointedElement()},Sv.prototype.getPointerInformation=function(){return this.modules.captor.getCursorInformation()},Sv);function Sv(){}var Av=(Cv.initNamespace=function(t){var e;t.debug=(e=t,{wait:function(t){return new Promise((function(e){return setTimeout(e,t)}))},initRandomGraph:function(t){return e.generate.random(t).then(e.setGraph).then((function(){return e.view.locateGraph()})).then((function(){return e.view.afterNextFrame()}))},initGrid:function(t){var n=Math.ceil(Math.sqrt(t));return e.generate.grid({rows:n,columns:n}).then((function(t){return e.setGraph(t)})).then((function(){return e.view.locateGraph()}))},initLine:function(t){return e.setGraph({nodes:[{id:0,attributes:{x:0,y:0}},{id:1,attributes:t?{x:0,y:50}:{x:50,y:0}}],edges:[{id:0,source:1,target:0}]}),e.view.locateGraph()},initSingleNode:function(){return e.setGraph({nodes:[{id:0,attributes:{x:0,y:0}}],edges:[]}),e.view.locateGraph()},initContinuousRenderLoop:function(t){var n=void 0===t?{}:t,r=n.triggerKey,i=void 0===r?"r":r,o=n.start,s=void 0===o||o,a=function(){s&&e.modules.dom.beforeNextFrame().then(a)};document.addEventListener("keydown",(function(t){t.key===i&&(s=!s,a())})),a()},appendToBody:function(){var t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.bottom="0",t.style.right="0",document.body.appendChild(t),e.setContainer(t)},loadFile:function(t){return(t.endsWith(".gexf")?e.parse.gexfFromUrl(t):e.parse.jsonFromUrl(t)).then((function(t){return e.setGraph(t)})).then((function(){return e.view.locateGraph()})).then((function(){return e.view.afterNextFrame()}))},enableLasso:function(t){e.events.onDragStart((function(){e.keyboard.isKeyPressed("ctrl")&&e.tools.lasso.enable(t)}))},randomizeGraph:function(t){var n=void 0===t?{}:t,r=n.minX,i=void 0===r?0:r,o=n.minY,s=void 0===o?0:o,a=n.maxX,u=void 0===a?500:a,c=n.maxY,l=void 0===c?500:c;return e.getNodes().setAttributes(e.getNodes().map((function(){return{x:i+Math.random()*(u-i),y:s+Math.random()*(l-s)}})))}})},Cv);function Cv(){}var Tv=(kv.prototype.setContainer=function(t){this.modules.dom.setContainer(t)},kv.prototype.getContainer=function(){return this.modules.dom.getContainer()},kv);function kv(){}var Iv=(Ov.initNamespace=function(t){var e;t.events=(e=t,{removeListener:function(t){e.modules.events.removeListener(t)},onNodesAdded:function(t){return e.modules.events.on(me.ADD_NODES,t),e},onBeforeNodesRemoved:function(t){return e.modules.events.on(me.BEFORE_REMOVE_NODES,t),e},onNodesRemoved:function(t){return e.modules.events.on(me.REMOVE_NODES,t),e},onEdgesAdded:function(t){return e.modules.events.on(me.ADD_EDGES,t),e},onBeforeEdgesRemoved:function(t){return e.modules.events.on(me.BEFORE_REMOVE_EDGES,t),e},onEdgesRemoved:function(t){return e.modules.events.on(me.REMOVE_EDGES,t),e},onNodesClassAdded:function(t,n){return e.modules.classes.onNodeClassAdded(t,n),e},onNodesClassRemoved:function(t,n){return e.modules.classes.onNodeClassRemoved(t,n),e},onEdgesClassAdded:function(t,n){return e.modules.classes.onEdgeClassAdded(t,n),e},onEdgesClassRemoved:function(t,n){return e.modules.classes.onEdgeClassRemoved(t,n),e},onNodeDragStart:function(t){return e.modules.events.on(me.NODES_DRAG_START,t),e},onNodeDragProgress:function(t){return e.modules.events.on(me.NODES_DRAG_PROGRESS,t),e},onNodeDragEnd:function(t){return e.modules.events.on(me.NODES_DRAG_END,t),e},onDrop:function(t){return e.modules.events.on(me.DROP,t),e},onKeyPress:function(t,n){return e.modules.keyboard.onKeyPress(t,n),e},onNodesSelected:function(t){return e.events.onNodesClassAdded(ln,t)},onNodesUnselected:function(t){return e.events.onNodesClassRemoved(ln,t)},onEdgesSelected:function(t){return e.events.onEdgesClassAdded(ln,t)},onEdgesUnselected:function(t){return e.events.onEdgesClassRemoved(ln,t)},onNodeDataChange:function(t){return e.modules.events.on(me.UPDATE_NODE_DATA,t),e},onEdgeDataChange:function(t){return e.modules.events.on(me.UPDATE_EDGE_DATA,t),e},onMouseMove:function(t){return e.modules.events.on(me.MOVE,t),e},onMouseButtonDown:function(t){return e.modules.events.on(me.DOWN,t),e},onMouseButtonUp:function(t){return e.modules.events.on(me.UP,t),e},onClick:function(t){return e.modules.events.on(me.CLICK,t),e},onDoubleClick:function(t){return e.modules.events.on(me.DOUBLE_CLICK,t),e},onMouseWheel:function(t){return e.modules.events.on(me.WHEEL,t),e},onHover:function(t){return e.modules.events.on(me.HOVER,t),e},onUnhover:function(t){return e.modules.events.on(me.UNHOVER,t),e},onDragStart:function(t){return e.modules.events.on(me.DRAG_START,t),e},onDragProgress:function(t){return e.modules.events.on(me.DRAG_PROGRESS,t),e},onDragEnd:function(t){return e.modules.events.on(me.DRAG_END,t),e},onGestureStart:function(t){return e.modules.events.on(me.GESTURE_START,t),e},onGestureProgress:function(t){return e.modules.events.on(me.GESTURE_PROGRESS,t),e},onGestureEnd:function(t){return e.modules.events.on(me.GESTURE_END,t),e},onRendererStateChange:function(t){return e.modules.events.on(me.RENDERER_STATE_CHANGE,t),e},onZoomProgress:function(t){return e.modules.events.on(me.CAMERA_ZOOM,t),e},onViewChanged:function(t){return e.modules.events.on(me.VIEW_CHANGED,t),e},onNodesConnected:function(t){return e.modules.events.on(me.CONNECT_NODES,t),e},onGeoModeEnabled:function(t){return e.modules.events.on(me.GEO_ENABLED,t),e},onGeoModeDisabled:function(t){return e.modules.events.on(me.GEO_DISABLED,t),e},onGeoModeLoaded:function(t){return e.modules.events.on(me.GEO_LOADED,t),e},onLayoutStart:function(t){return e.modules.events.on(me.LAYOUT_START,t),e},onLayoutComplete:function(t){return e.modules.events.on(me.LAYOUT_END,t),e},onLayoutComputed:function(t){return e.modules.events.on(me.LAYOUT_COMPUTED,t),e},onTooltipShown:function(t){return e.modules.events.on(me.TOOLTIP_SHOW,t),e},onTooltipHidden:function(t){return e.modules.events.on(me.TOOLTIP_HIDE,t),e}})},Ov);function Ov(){}function Mv(t){return t instanceof fr?t.getId():t}function Lv(t){return t instanceof Zn?t.getId():t}function Nv(t){return t instanceof gr?t.getId():t instanceof fr?[t.getId()]:N(t)?t.map(Mv):[Mv(t)]}function Rv(t){return t instanceof Jn?t.getId():t instanceof Zn?[t.getId()]:N(t)?t.map(Lv):[Lv(t)]}function Pv(t,e,n){if(null!=t){if(Array.isArray(t))return t[0];if(e&&n){if("source"===t)return Pv(n.color.get(e.getSource()._index));if("target"===t)return Pv(n.color.get(e.getTarget()._index))}return t}}function Dv(t){return null==t?null:"string"==typeof t||"number"==typeof t?""+t:t&&Dv(t.content)}var Fv=["color","radius","shape","text.content","x","y"],zv=["color","width","shape.type","text.content"],Bv="visible";function Uv(t,e,n,r){var i,o,s,a,u=(o=r,(i=e)?Nv(i):"object"==typeof o?Nv(o.nodes):o||Bv),c=(a=r,(s=n)?Rv(s):"object"==typeof a?Rv(a.edges):a||Bv);return{nodes:t.getNodes(u),edges:t.getEdges(c)}}function Vv(t,e){var n=e.nodeAttributes,r=e.edgeAttributes,i=e.nodes,o=e.edges,s=e.filter,a=e.nodeData,u=e.edgeData,c=Uv(t,i,o,s);return{nodes:c.nodes.toJSON({attributes:n,data:a}),edges:c.edges.toJSON({attributes:r,data:u})}}function jv(t,e,n){var r,i,o,s,a,u=n.styles,c=n.nodes,l=n.edges,d=n.filter,h=n.nodeData,f=n.edgeData,p="all"!==u?{nodes:["x","y"],edges:[]}:{nodes:Fv,edges:zv},g=Vv(t,{nodeAttributes:p.nodes,edgeAttributes:p.edges,nodes:c,edges:l,filter:d,nodeData:h,edgeData:f});if("original"===u){for(var _=(r=e,o=(i=Uv(t,c,l,d)).nodes,s=i.edges,a=r.getOriginalAttributes(),{nodes:o.reduce((function(t,e){return t[e.getId()]={x:a.nodes.x.get(e._index),y:a.nodes.y.get(e._index),color:Pv(a.nodes.color.get(e._index)),radius:a.nodes.radius.get(e._index),shape:a.nodes.shape.get(e._index),text:{content:a.nodes.text.content.get(e._index)}},t}),{}),edges:s.reduce((function(t,e){return t[e.getId()]={color:Pv(a.edges.color.get(e._index)),width:a.edges.width.get(e._index),shape:{type:a.edges.shape.type.get(e._index)},text:{content:a.edges.text&&a.edges.text.content&&a.edges.text.content.get(e._index)}},t}),{})}),v=0,y=g.nodes;v<y.length;v++){var m=y[v];null!=m.id&&(m.attributes=_[m.id])}for(var b=0,x=g.edges;b<x.length;b++){var E=x[b];null!=E.id&&(E.attributes=_[E.id])}}return"all"===u&&g.edges.forEach((function(e){var n=e.source,r=e.target,i=e.attributes;if(i){var o=t.getNode(n);"source"===i.color&&o&&(i.color=o.getAttribute("color"));var s=t.getNode(r);"target"===i.color&&s&&(i.color=s.getAttribute("color"))}})),function(t){return{nodes:t.nodes.map((function(t){var e=t.id,n=t.attributes,r=void 0===n?{}:n,i=t.data,o=r.color,s=r.radius,a=r.shape,u=r.text;return{id:e,x:r.x,y:r.y,color:Pv(o),size:s,shape:a,text:Dv(u),data:i}})),edges:t.edges.map((function(t){var e=t.id,n=t.source,r=t.target,i=t.attributes,o=void 0===i?{}:i,s=t.data,a=o.color,u=o.width,c=o.text,l=o.shape;return{id:e,source:n,target:r,color:Pv(a),size:u,shape:function(t){if(null!=t)return"string"==typeof t?t:t.type}(l),text:Dv(c),data:s}}))}}(g)}function Hv(t,e){return null==t||Array.isArray(t)&&!t.length?e:t}function Gv(t){return"string"==typeof t}function qv(t,e,n,r,i){var o="edges"===e,s={};return t.forEach((function(t,a){var u=i.get(a),c=R(Hv(n(u),e));if(!c.every(Gv))throw Error("The tab "+e+" function returned an invalid value.");var l=R(r(t.data,c));c.forEach((function(e,n){var r=Hv(l[n],{}),i=eo(w(w({internal___id:t.id},o?{internal___source:t.source,internal___target:t.target}:{}),r)).reduce((function(t,e){var n=e.path,r=e.value;return t[n.join(".")]=r,t}),{});s[e]=s[e]||[],s[e].push(i)}))})),s}function Wv(t){if(!t.length)return[];for(var e=function(t){for(var e=w({},t[0]),n=0,r=t;n<r.length;n++)for(var i=r[n],o=0,s=Object.keys(i);o<s.length;o++){var a=s[o];a in e||(e[a]=void 0)}return Object.keys(e)}(t),n=[e],r=function(t){n.push(e.map((function(e){return t[e]})))},i=0,o=t;i<o.length;i++)r(o[i]);return n[0]=n[0].map((function(t){return t.replace("internal___","")})),n}function Yv(t){return{csv:function(e){var n=tt("string"==typeof e?{what:e}:e,Xv),r=n.what,i=n.dataProperties,o=n.nodes,s=n.edges,a=n.separator,u=n.textSeparator,c=n.download,l=n.nodeData,d=n.edgeData,h=n.filename,f=n.filter,p=jv(t.modules.graph,t.modules.individualAttributes,{styles:"none",nodes:o,edges:s,filter:f,nodeData:l,edgeData:d});try{var g=function(t,e){var n=e.what,r=e.separator,i=e.textSeparator,o=e.dataProperties,s=new RegExp(""+i,"g");if(i&&'"'!==i&&"'"!==i)throw new TypeError('Invalid argument :"textSeparator" is not single-quote or double-quote, was '+i);if("nodes"!==n&&"edges"!==n)throw new TypeError('missing argument: "what": should have value "nodes" or "edges"');var a="nodes"===n;return function(t,e,n){for(var r=new no,i=e?1:3,o=[],s=function(s){var a=t[s],u=new Array(i),c=a.data;if(n){var l={};n.forEach((function(t){var e=z(t),n=function(t,e){for(var n=0;n<e.length;++n){if(null==t)return;t=t[e[n]]}return t}(c,e);!function(t,e,n){for(var r=0;r<e.length-1;++r){var i=e[r],o=t[i];void 0===o&&(o={},t[i]=o),t=o}t[e[e.length-1]]=n}(l,e,n)})),c=l}var d=eo(c);u[0]=a.id,e||(u[1]=a.source,u[2]=a.target);for(var h=0;h<d.length;++h){var f=d[h],p=f.path,g=f.value;p.length&&(r.has(p)?u[r.get(p)]=g:(r.set(p,i),u[i]=g,i++))}o.push(u)},a=0;a<t.length;++a)s(a);var u=[];return u.push("id"),e||(u.push("source"),u.push("target")),r.keys().forEach((function(t){return u.push(t[t.length-1])})),o.unshift(u),o.forEach((function(t){return t.length=i})),o}(a?t.nodes:t.edges,a,o).map((function(t){return t.map((function(t){return function(t){return t=function(t){return t instanceof Date?t.toISOString():""+t}(t),i+t.replace(s,"\\$&")+i}(t)}))})).map((function(t){return t.join(r)})).join("\n")}(p,{what:r,separator:a,textSeparator:u,dataProperties:i});return c&&Mt(g,h,"text"),Promise.resolve(g)}catch(e){return Promise.reject(e)}}}}var Xv={what:void 0,dataProperties:void 0,separator:",",textSeparator:'"',download:!0,filename:"graph.csv",filter:"visible",nodes:void 0,edges:void 0,nodeData:function(t){return t},edgeData:function(t){return t},styles:"none"},Zv={creator:void 0,description:void 0,styles:"all",download:!0,filename:"graph.gexf",nodes:void 0,edges:void 0,nodeData:function(t){return t},edgeData:function(t){return t},filter:"visible"};function Kv(t){return Math.round(255*t)}function Jv(t,e){if("integer"===e&&"number"==typeof t){if(t%1!=0)return"float"}else if("number"!=typeof t)return"boolean"==typeof t?"boolean":"string";return e}function Qv(t){return"object"==typeof t&&null!==t&&t.constructor===Object}function $v(t,e){return void 0===e&&(e={}),q(t,(function(t,n){Qv(t)?$v(t,e):e[n]=t})),e}function ty(t){return{graphml:function(e){void 0===e&&(e={});var n=tt(e,ey),r=n.styles,i=n.nodes,o=n.edges,s=n.download,a=n.filename,u=n.graphId,c=n.directedEdges,l=n.filter,d=n.nodeData,h=n.edgeData,f=function(t,e){var n=new Or,r=To();function i(t){return n.toHexa(t)}function o(t,e,n,i,o){n=n||{};var s=r.createElement(e);for(var a in n)if(n.hasOwnProperty(a)){var u=n[a];void 0!==u&&s.setAttribute(a,u)}return void 0===i&&!o||("[object Object]"===Object.prototype.toString.call(i)&&(i=JSON.stringify(i)),s.appendChild(r.createTextNode(i))),t.appendChild(s),s}var s=["id","source","target"],a=["size","x","y","shape","text","color"],u={size:{for:"all",type:"double"},x:{for:"node",type:"double"},y:{for:"node",type:"double"},shape:{for:"all",type:"string"},color:{for:"all",type:"string"},r:{for:"all",type:"int"},g:{for:"all",type:"int"},b:{for:"all",type:"int"},a:{for:"all",type:"double"},text:{for:"all",type:"string"}};e.noStyles&&(delete u.color,delete u.r,delete u.g,delete u.b,delete u.a,delete u.shape,a.pop());var c=[],l=[];function d(t,e){var r={id:t.id};a.forEach((function(i){var o=t[i];"y"===i&&o&&(o=-parseFloat(o)),void 0!==o&&(r[("edge"===e?"edge_":"")+i]=o,"color"===i&&function(t,e){var r,i=(r=e,n.parseColor(r));i&&(t.r=i[0],t.g=i[1],t.b=i[2])}(r,o))})),q(t.data||{},(function(t,n){-1===a.indexOf(n)&&-1===s.indexOf(n)&&(u[n]?u[n].for!==e&&(u[n].for="all"):u[n]={for:e,type:"string"},r[n]=t)})),"edge"===e?(r.source=t.source,r.target=t.target,l.push(r)):c.push(r)}t.nodes.forEach((function(t){return d(t,"node")})),t.edges.forEach((function(t){return d(t,"edge")}));var h=o(r,"graphml",{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml","xmlns:java":"http://www.yworks.com/xml/yfiles-common/1.0/java","xmlns:sys":"http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0","xmlns:x":"http://ww.yworks.com/xml/yfiles-common/markup/2.0"});q(u,(function(t,e){"node"!==t.for&&"all"!==t.for||o(h,"key",{"attr.name":e,"attr.type":t.type,for:"node",id:e}),"edge"!==t.for&&"all"!==t.for||o(h,"key",{"attr.name":e,"attr.type":t.type,for:"edge",id:"edge_"+e})})),o(h,"key",{id:"nodegraphics",for:"node","yfiles.type":"nodegraphics","attr.type":"string"}),o(h,"key",{id:"edgegraphics",for:"edge","yfiles.type":"edgegraphics","attr.type":"string"});var f=o(h,"graph",{edgedefault:e.directedEdges||void 0===e.directedEdges?"directed":"undirected",id:e.graphId?e.graphId:"G","parse.nodes":t.nodes.length,"parse.edges":t.edges.length,"parse.order":"nodesfirst"});return c.forEach((function(t){var n=o(f,"node",{id:t.id});!function(t,n){var r=o(t,"data",{key:"nodegraphics"}),s=o(r,"y:ShapeNode");o(s,"y:Geometry",{x:n.x,y:n.y,width:n.size,height:n.size}),e.noStyles||o(s,"y:Fill",{color:i(n.color),transparent:!1}),o(s,"y:NodeLabel",null,n.text||""),o(s,"y:Shape",{type:n.shape})}(n,t),q(t,(function(t,e){-1===s.indexOf(e)&&o(n,"data",{key:e},t,!0)}))})),l.forEach((function(t){var n,r,a,u=o(f,"edge",{id:t.id,source:t.source,target:t.target});n=t,r=o(u,"data",{key:"edgegraphics"}),a=o(r,"y:PolyLineEdge"),o(a,"y:LineStyle",{type:n.edge_type,color:e.noStyles?void 0:i(n.edge_color),width:n.edge_size}),o(a,"y:EdgeLabel",null,n.edge_label),q(t,(function(t,e){-1===s.indexOf(e)&&o(u,"data",{key:e},t,!0)}))})),'<?xml version="1.0" encoding="UTF-8"?>\n'+Co(r)}(jv(t.modules.graph,t.modules.individualAttributes,{styles:r,nodes:i,edges:o,filter:l,nodeData:d,edgeData:h}),{graphId:u,directedEdges:c,noStyles:"none"===r});return s&&Mt(f,a,"text"),Promise.resolve(f)}}}var ey={graphId:"G",directedEdges:!0,styles:"all",download:!0,filename:"graph.graphml",nodes:void 0,edges:void 0,nodeData:function(t){return t},edgeData:function(t){return t},filter:"visible"},ny={nodeAttributes:["x","y","color","radius","shape","text"],edgeAttributes:["color","width","text"],nodeData:function(t){return t},edgeData:function(t){return t},filter:"visible",pretty:!1,download:!0,filename:"graph.json"};function ry(t,e){void 0===e&&(e={});var n=t.view.get(),r="number"==typeof e.margin?e.margin:0,i={pixelRatio:1,angle:0,backgroundColor:null,zoom:0,x:0,y:0,width:0,height:0,hideImages:!1};if(e.width&&e.height?(i.width=e.width,i.height=e.height):(i.width=n.width,i.height=n.height),e.clip)i.zoom=n.zoom,i.x=n.x,i.y=n.y;else{var o=t.getNodes(e.filter),s=o.getBoundingBox().computeForZoom(n.zoom).extend(Lo.fromValues(o.getAttribute("x"),o.getAttribute("y"),o.map((function(t){return t.getAttribute("radius")+t.getAttribute("innerStroke.width")+t.getAttribute("outerStroke.width")}))));if(e.texts){var a=t.modules.labels.getTextsBoundingBox();a.isValid()&&s.extend(a)}if(null==e.width||!isFinite(e.width)||null==e.height||!isFinite(e.height)){var u=t.view.graphToScreenCoordinates(s.bottomLeft()),c=t.view.graphToScreenCoordinates(s.topRight()),l=c.x-u.x,d=c.y-u.y,h=Math.min(i.width/l,i.height/d);i.width=l*h,i.height=d*h}i.x=s.cx,i.y=s.cy,i.width=Math.max(i.width,2*r+1),i.height=Math.max(i.height,2*r+1),i.zoom=Math.min((i.width-2*r)/s.width,(i.height-2*r)/s.height)}return t.modules.geo.isEnabled()?i.backgroundColor=null:void 0!==e.background&&(i.backgroundColor=e.background),i}function iy(t,e,n,r,i){void 0===i&&(i=!1);var o=w(w({},n),{renderBackground:!1,hideImages:i,angle:n.angle||0,currentTime:Qt(),isBufferDisplayable:function(t){return e.texts||!Xu(t)}}),s={};if(!1===e.badges){var a={text:null,image:null};s.badges={topLeft:a,topRight:a,bottomRight:a,bottomLeft:a}}var u=t.styles.getClass(pn);return u&&u.update({nodeAttributes:s}),t.modules.graphics.export(r,o,e.filter||Bv,e)}function oy(t){return{download:!0,filter:"visible",filename:"graph."+t,clip:!1,margin:10,width:void 0,height:void 0,background:null,badges:!0,legend:void 0,texts:!0,images:!0,textWatermark:{content:"",fontFamily:"Arial",fontSize:48,fontStyle:void 0,fontColor:"red",repeat:!1,angle:0,alpha:.65,space:50,x:void 0,y:void 0},imageWatermark:{url:void 0,width:void 0,height:void 0,repeat:!1,angle:0,alpha:.65,space:50,x:void 0,y:void 0},imageCrossOrigin:void 0}}var sy={png:oy("png"),jpg:oy("jpg"),tiff:oy("tiff"),gif:oy("gif")};function ay(t){var e=t.canvas,n=t.parameters;return n.textWatermark.content&&yy(e,n.textWatermark,py,gy),n.imageWatermark.url?Bt(n.imageWatermark.url).then((function(r){return r&&(n.imageWatermark.content=r,yy(e,n.imageWatermark,vy,_y)),t})):t}function uy(t){var e=t.ogma,n=t.canvas,r=t.parameters,i=e.modules.legend,o=null;return void 0===r.legend&&(o=!!i.enabled()&&i.getCurrentOptions()),!0===r.legend&&(o={}),o&&i.exportOnCanvas(n,o),t}function cy(t){var e=t.ogma,n=t.view;return e.modules.geo.isEnabled()?e.modules.geo.exportBackground(n).then((function(e){var r=hy(t.view),i=r.getContext("2d");return i.drawImage(e,(n.width-e.width)/2,(n.height-e.height)/2),i.drawImage(t.canvas,0,0),t.canvas=r,t})):t}function ly(t){var e=t.ogma,n=t.parameters,r=t.canvas,i=t.view,o=r.getContext("2d");return iy(e,n,i,"canvas",!n.images).then((function(r){try{return r.getContext("2d").getImageData(0,0,1,1),o.drawImage(r,0,0),t}catch(r){return An(r),iy(e,n,i,"canvas",!0).then((function(e){return o.drawImage(e,0,0),t}))}}))}function dy(t){var e=t.canvas,n=t.parameters,r=t.type,i=e.toDataURL("image/"+r);return n.download&&Mt(i,n.filename,"dataURL"),i}function hy(t){var e=t.width,n=t.height,r=ti();return r.width=e,r.height=n,r}function fy(t,e,n){var r=tt(e,sy[n]);null===r.background&&(r.background=t.modules.graphics.getTransparentBackgroundColor());var i=ry(t,r),o={ogma:t,parameters:r,canvas:hy(i),view:i,type:n};return Promise.resolve(o).then(cy).then(ly).then(ay).then(uy).then(dy)}function py(t,e,n,r){t.textAlign="center",t.textBaseline="middle",t.fillText(e,n,r)}function gy(t,e,n){return{width:t.measureText(e).width,height:n}}function _y(t,e,n,r,i){return{width:void 0===r?e.width:r,height:void 0===i?e.height:i}}function vy(t,e,n,r,i,o){t.drawImage(e,n-i/2,r-o/2,i,o)}function yy(t,e,n,r){if(e){if("object"!=typeof e)e={content:e};else if(!e.content)return;var i=e.fontFamily,o=e.fontSize,s=e.fontStyle,a=e.fontColor,u=e.repeat,c=e.angle,l=e.alpha,d=e.space,h=e.content,f=t.getContext("2d"),p=t.width,g=t.height,_=void 0===e.x?p/2:e.x,v=void 0===e.y?g/2:e.y,y=e.height,m=e.width;c=c/180*Math.PI,ni(f,i,o,s),f.fillStyle=a,f.globalAlpha=l;var b=r(f,h,o,m,y);if(u){var x=b.width+d,E=b.height+d,w=Math.sqrt(p*p+g*g);f.save(),f.translate(0,0),f.rotate(c);for(var S=0;S<w;S+=x)for(var A=0;A<w;A+=E)n(f,h,S,A,b.width,b.height),0!==A&&n(f,h,S,-A,b.width,b.height);f.restore()}else f.save(),f.translate(_,v),f.rotate(c),n(f,h,0,0,b.width,b.height),f.restore()}}var my={download:!0,filename:"graph.svg",width:void 0,height:void 0,background:null,texts:!0,images:!0,badges:!0,embedFonts:!1,clip:!1,margin:10,prefix:"ogma"},by={what:void 0,dataProperties:void 0,filter:"visible",nodes:void 0,edges:void 0,download:!0,filename:"graph.xlsx",tab:void 0,nodeData:void 0,edgeData:void 0};function xy(t,e){for(var n,r={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},o=0;o!==e.length;++o)for(var s=e[o],a=0;a!==s.length;++a){var u=s[a];i.s.r>o&&(i.s.r=o),i.s.c>a&&(i.s.c=a),i.e.r<o&&(i.e.r=o),i.e.c<a&&(i.e.c=a);var c={v:void 0===(n=u)?"":n instanceof Date?n.toISOString():""+n};r[t.utils.encode_cell({c:a,r:o})]=c}return i.s.c<1e7&&(r["!ref"]=t.utils.encode_range(i)),r}var Ey=function(){this.SheetNames=[],this.Sheets={}};function wy(t){return t.styles.createClass({name:pn,isBuiltin:!0}),w(w(w(w(w(w(w({},Yv(t)),function(t){return{gexf:function(e){void 0===e&&(e={});var n=tt(e,Zv),r=n.styles,i=n.nodes,o=n.edges,s=n.download,a=n.filename,u=n.creator,c=n.description,l=n.filter,d=n.nodeData,h=n.edgeData,f=function(t,e){var n,r=new Or,i=Ao(),o={},s={},a=0,u=0,c=i.createElement("gexf");c.setAttribute("xmlns","http://www.gexf.net/1.2draft"),c.setAttribute("xmlns:viz","http://www.gexf.net/1.2draft/viz"),c.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),c.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),c.setAttribute("version","1.2");var l=i.createElement("meta");if(l.setAttribute("lastmodifieddate",$t()),e.creator){var d=i.createElement("creator");n=i.createTextNode(""+e.creator),d.appendChild(n),l.appendChild(d)}if(e.description){var h=i.createElement("description");n=i.createTextNode(""+e.description),h.appendChild(n),l.appendChild(h)}var f=i.createElement("graph");f.setAttribute("mode","static");var p=i.createElement("nodes");t.nodes.forEach((function(t){var e=i.createElement("node");if(e.setAttribute("id",String(t.id)),t.text&&e.setAttribute("label",Wt(t.text)),Qv(t.data)){var n=$v(t.data),s=i.createElement("attvalues");Object.keys(n).forEach((function(t){t in o||(o[t]={id:a,type:"integer"},a++);var e=n[t];o[t].type=Jv(e,o[t].type);var r=i.createElement("attvalue");r.setAttribute("for",o[t].id),r.setAttribute("value",Wt(e)),s.appendChild(r)})),e.appendChild(s)}if(t.color){var u=r.parseColor(t.color);if(u){var c=i.createElement("viz:color");c.setAttribute("r",Kv(u[0])),c.setAttribute("g",Kv(u[1])),c.setAttribute("b",Kv(u[2])),c.setAttribute("a",u[3]),e.appendChild(c)}}var l=i.createElement("viz:position");if(l.setAttribute("x",t.x),l.setAttribute("y",-t.y),e.appendChild(l),t.size){var d=i.createElement("viz:size");d.setAttribute("value",t.size),e.appendChild(d)}p.appendChild(e)}));var g=i.createElement("attributes");g.setAttribute("class","node"),Object.keys(o).forEach((function(t){var e=i.createElement("attribute");e.setAttribute("id",o[t].id),e.setAttribute("title",t),e.setAttribute("type",o[t].type),g.appendChild(e)}));var _=i.createElement("edges");t.edges.forEach((function(t){var e=i.createElement("edge");if(e.setAttribute("id",t.id.toString()),e.setAttribute("source",t.source),e.setAttribute("target",t.target),t.size&&e.setAttribute("weight",t.size),t.text&&e.setAttribute("label",Wt(t.text)),Qv(t.data)){var n=$v(t.data),o=i.createElement("attvalues");Object.keys(n).forEach((function(t){t in s||(s[t]={id:u,type:"integer"},u++);var e=n[t];s[t].type=Jv(e,s[t].type);var r=i.createElement("attvalue");r.setAttribute("for",s[t].id),r.setAttribute("value",Wt(e)),o.appendChild(r)})),e.appendChild(o)}if(t.color){var a=r.parseColor(t.color);if(a){var c=i.createElement("viz:color");c.setAttribute("r",Kv(a[0])),c.setAttribute("g",Kv(a[1])),c.setAttribute("b",Kv(a[2])),c.setAttribute("a",a[3]),e.appendChild(c)}}if(t.size){var l=i.createElement("viz:size");l.setAttribute("value",t.size),e.appendChild(l)}_.appendChild(e)}));var v=i.createElement("attributes");return v.setAttribute("class","edge"),Object.keys(s).forEach((function(t){var e=i.createElement("attribute");e.setAttribute("id",s[t].id),e.setAttribute("title",t),e.setAttribute("type",s[t].type),v.appendChild(e)})),f.appendChild(g),f.appendChild(v),f.appendChild(p),f.appendChild(_),c.appendChild(l),c.appendChild(f),i.appendChild(c),'<?xml version="1.0" encoding="UTF-8"?>'+i.serialize()}(jv(t.modules.graph,t.modules.individualAttributes,{styles:r,nodes:i,edges:o,filter:l,nodeData:d,edgeData:h}),{creator:u,description:c});return s&&Mt(f,a,"text"),Promise.resolve(f)}}}(t)),ty(t)),(n=t,{json:function(t){void 0===t&&(t={});var e=tt(t,ny),r=e.nodeAttributes,i=e.edgeAttributes,o=e.nodeData,s=e.edgeData,a=e.filter,u=e.pretty,c=e.download,l=e.filename,d=Vv(n.modules.graph,{nodeAttributes:r,edgeAttributes:i,filter:a,nodeData:o,edgeData:s}),h=u?JSON.stringify(d,null," "):JSON.stringify(d);return c&&Mt(h,l,"text"),Promise.resolve(h)}})),(e=t,{png:function(t){return void 0===t&&(t={}),fy(e,t,"png")},jpg:function(t){return void 0===t&&(t={}),fy(e,t,"jpg")},tiff:function(t){return void 0===t&&(t={}),fy(e,t,"tiff")},gif:function(t){return void 0===t&&(t={}),fy(e,t,"gif")}})),function(t){return{svg:function(e){return void 0===e&&(e={}),function(t,e){var n=tt(e,my),r=n.background,i=n.filename,o=n.download,s=t.modules.graphics;null===r&&(n.background=s.getTransparentBackgroundColor());var a=ry(t,n);return iy(t,n,a,"svg",!n.images).then((function(t){return t.removeAttribute("pointer-events"),t.setAttribute("version","1.1"),t.setAttributeNS(Pt,"xmlns",Rt),t.setAttributeNS(Pt,"xmlns:xlink",Dt),t})).then((function(e){return function(t,e,n){for(var r=e.childNodes[2],i=r.childNodes,o={},s=n.prefix,a=0;a<i.length;a++){var u=(E=i[a]).getAttribute(Hs);null!=u&&(o[u]=o[u]||[],o[u].push(E))}var c=Object.keys(o),l=t.modules.graph,d=l.getNodeAttribute("id"),h=l.getEdgeAttribute("id"),f=Ft("g",{class:s+"-edges"}),p=Ft("g",{class:s+"-nodes"});for(a=0;a<c.length;a++){var g=c[a],_="n"===g.charAt(0),v=parseInt(g.substring(1)),y=o[g],m=Wt((_?d:h).get(v).toString()),b=Ft("g");b.setAttribute("data-"+(_?"node":"edge")+"-id",m),b.setAttribute("class",s+"-"+(_?"node":"edge"));for(var x=0;x<y.length;x++){var E=y[x];b.appendChild(E),E.removeAttribute(Hs)}(_?p:f).appendChild(b)}return r.appendChild(f),r.appendChild(p),e}(t,e,n)})).then((function(t){return r=n,i=function(t){for(var e=[].concat(Array.prototype.slice.call(t.getElementsByTagName("text")||[]),Array.prototype.slice.call(t.getElementsByTagName("tspan")||[])),n=[],r={},i=0;i<e.length;i++){var o=e[i].getAttribute("font-family");if("string"==typeof o)for(var s=o.split(","),a=0;a<s.length;a++){var u=s[a].replace(/['"]/g,"");""===u||r[u]||(r[u]=!0,n.push(u))}}return{list:n,map:r}}(e=t).map,Gi().then((function(t){return t.filter((function(t){return i[t.name]}))})).then((function(t){return qi(t,!!r.embedFonts)})).then((function(t){if(0!==t.length){for(var n=Ft("style"),r=0;r<t.length;r++)n.appendChild(zt(t[r]));e.childNodes[0].appendChild(n)}return e}));var e,r,i})).then((function(t){var e='<?xml version="1.0" encoding="utf-8"?>'+Co(t);return o&&Mt(e,i,"text/xml"),e}))}(t,e)}}}(t)),function(t){return{xlsx:function(e){"string"==typeof e&&(e={what:e});var n=tt(e,by),r=n.what,i=n.nodes,o=n.edges,s=n.tab,a=void 0===s?{nodes:function(){return"nodes"},edges:function(){return"edges"}}:s,u=n.download,c=n.filename,l=n.dataProperties,d=n.filter,h=n.nodeData,f=n.edgeData;a.nodes||(a.nodes=function(){return"nodes"}),a.edges||(a.edges=function(){return"edges"});var p=jv(t.modules.graph,t.modules.individualAttributes,{styles:"none",nodes:i,edges:o,filter:d,nodeData:function(t){return t},edgeData:function(t){return t}}),g=function(t,e,n){var r=e.what,i=e.tabFunctions,o=e.tabContentFunctions,s=M("XLSX")||M("xlsx",{throwOnError:!0});if(!s)throw Error('The xlsx exports requires the "xlsx" peer dependency to be associated');var a=new Ey;if(r){if("nodes"!==r&&"edges"!==r)throw new TypeError('Invalid argument: "what" is not "nodes" or "edges", was '+r);"nodes"===r&&(t.edges=[]),"edges"===r&&(t.nodes=[])}for(var u={},c=0,l=["nodes","edges"];c<l.length;c++)for(var d=l[c],h=qv(t[d],d,i[d],o[d],n[d]),f=0,p=Object.keys(h);f<p.length;f++){var g=p[f];u[g]=A(u[g]||[],h[g])}for(var _=0,v=Object.keys(u);_<v.length;_++)g=v[_],a.SheetNames.push(g),a.Sheets[g]=xy(s,Wv(u[g]));return Ot([function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!==t.length;++r)n[r]=255&t.charCodeAt(r);return e}(s.write(a,{bookType:"xlsx",bookSST:!1,type:"binary"}))])}(p,{what:r,tabFunctions:a,tabContentFunctions:{nodes:h||function(t){return rt(Z(t||{}),l)},edges:f||function(t){return rt(Z(t||{}),l)}}},{nodes:t.modules.graph.getNodes(p.nodes.map((function(t){return t.id}))),edges:t.modules.graph.getEdges(p.edges.map((function(t){return t.id})))});return u&&Mt(g,c,"blob"),Promise.resolve(g)}}}(t));var e,n}var Sy=(Ay.initNamespace=function(t){t.export=wy(t)},Ay);function Ay(){}var Cy=function(t){var e,n=void 0===t?{}:t,r=n.children,i=void 0===r?2:r,o=n.height,s=void 0===o?3:o;if(!("number"==typeof(e=i)&&isFinite(e)&&0<e&&e))throw new TypeError('Invalid argument: "children" is not a positive number, was '+i);if(!tu(s))throw new TypeError('Invalid argument: "height" is not a positive number, was '+s);return{children:i,height:s}},Ty=function(t){var e=t.children,n=t.height;n+=1;for(var r=Math.pow(e,n),i=[],o=[],s=1,a=0,u=0,c=0;c<n;++c){for(var l=r/(s+1)/1.5,d=0;d<s;++d){var h=a++;if(i.push({id:h,attributes:{x:(d+1)*l*10,y:20*c}}),c!==n-1)for(var f=0;f<e;++f)o.push({id:u,source:h,target:h*e+f+1}),u+=1}s*=e}return{nodes:i,edges:o}},ky=function(t){var e=void 0===t?{}:t,n=e.nodes,r=void 0===n?40:n,i=e.m0,o=void 0===i?5:i,s=e.m,a=void 0===s?1:s,u=e.scale,c=void 0===u?100:u;if(!$a(r)||r<3)throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was "+r);if(!$a(o)||r<=o)throw new TypeError("Invalid argument: options.m0 is not a number < "+r+", was "+o);if(!$a(o)||o<=a)throw new TypeError("Invalid argument: options.m is not a number <= "+o+", was "+a);if(!$a(c)||c<0)throw new TypeError("Invalid argument: options.scale is not a number or is less than 0");return{nodes:r,m0:o,m:a,scale:c}},Iy=function(t){for(var e=t.scale,n=t.nodes,r=t.m0,i=t.m,o={nodes:[],edges:[]},s={},a=[],u=e/10,c=0,l=0;l<r;l++)o.nodes.push({id:l,attributes:{x:Math.random()*u,y:Math.random()*u}}),a[l]=0;for(l=0;l<r;l++)for(var d=l+1;d<r;d++)s[(v={id:c++,source:l,target:d}).source+"-"+v.target]=v,o.edges.push(v),a[l]++,a[d]++;for(l=r;l<n;l++){o.nodes.push({id:l,attributes:{x:Math.random()*e,y:Math.random()*e}});var h=a[l]=0;for(d=0;d<l;d++)h+=a[d];for(var f=0,p=0;p<i;p++){var g=Math.random(),_=0;for(d=0;d<l;d++)if(!s[l+"-"+d]&&!s[d+"-"+l]&&g<=(_=1===l?1:_+a[d]/h+f/(l-p))){var v;f+=a[d]/h,s[(v={id:c++,source:l,target:d}).source+"-"+v.target]=v,o.edges.push(v),a[l]++,a[d]++;break}}}return o},Oy=function(t){var e=void 0===t?{}:t,n=e.nodes,r=void 0===n?20:n,i=e.edges,o=e.p,s=e.scale,a=void 0===s?100:s;if(!$a(r)||r<3)throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was "+r);if(void 0!==i&&void 0!==o)throw new TypeError("Invalid argument: choose between options.edges and options.p");return void 0===i&&void 0===o&&(o=.1),void 0===o&&(o=-1),void 0===i&&(i=-1),{nodes:r,p:o,edges:i,scale:a}},My=function(t){var e={nodes:[],edges:[]},n=t.nodes,r=t.p,i=t.scale;if(0<=r)for(var o=0,s=0;s<n;s++){e.nodes.push({id:s,attributes:{x:Math.random()*i,y:Math.random()*i}});for(var a=0;a<s;a++)Math.random()<r&&e.edges.push({id:o++,source:s,target:a})}else{var u=[],c=t.edges;for(s=0;s<n;s++)for(e.nodes.push({id:s,attributes:{x:100*Math.random(),y:100*Math.random()}}),a=s+1;a<n;a++)u.push({source:s,target:a});for(o=u.length-1,s=0;s<c;s++){var l=u.splice(Math.floor(Math.random()*o),1)[0];l.id=s,e.edges.push(l),o--}}return e};function Ly(t){return 10*Math.pow(2.7,t)}function Ny(t){return 5+Ly(t)/10}var Ry=function(t){var e=t.depth,n=void 0===e?3:e,r=t.breadth,i=void 0===r?3:r,o=t.nbNodes;return void 0!==o?(i=5,n=Math.ceil(Math.log(o)/Math.log(5))):o=-1,{depth:n,breadth:i,nbNodes:o}},Py=function(t){var e=t.depth,n=t.breadth,r=t.nbNodes,i={id:0,attributes:{x:0,y:0,radius:Ny(e+1)}},o={nodes:[i],edges:[]};return function t(e,n,r,i,o){if(0===r)return o;for(var s=Ly(r),a=Ny(r),u=.2*a,c=-Math.PI,l=2*Math.PI/n,d=i.attributes.x||0,h=i.attributes.y||0,f=0;f<n;++f){var p={id:o,attributes:{x:d+s*Math.cos(c),y:h+s*Math.sin(c),radius:a}},g={id:o,source:i.id,target:o,attributes:{width:u}};e.nodes.push(p),e.edges.push(g),o=t(e,n,r-1,p,o+1),c+=l}return o}(o,n,e,i,1),void 0!==r&&0<=r&&(o.nodes=o.nodes.slice(0,r),o.edges=o.edges.slice(0,Math.max(r-1,0))),o},Dy=function(t){var e=void 0===t?{}:t,n=e.rows,r=void 0===n?4:n,i=e.columns,o=void 0===i?4:i,s=e.columnDistance,a=void 0===s?20:s,u=e.rowDistance,c=void 0===u?20:u,l=e.xmin,d=void 0===l?0:l,h=e.ymin;return{rows:r,columns:o,columnDistance:a,rowDistance:c,xmin:d,ymin:void 0===h?0:h}},Fy=function(t){for(var e=t.rows,n=t.columns,r=t.columnDistance,i=t.rowDistance,o=t.xmin,s=t.ymin,a={nodes:[],edges:[]},u=0,c=0;c<e;++c)for(var l=0;l<n;++l){var d=c*n+l;a.nodes.push({id:d,attributes:{x:o+l*r,y:s+c*i}}),l!==n-1&&(a.edges.push({id:u,source:d,target:c*n+l+1}),u++),c!==e-1&&(a.edges.push({id:u,source:d,target:(c+1)*n+l}),u++)}return a},zy=function(t){var e=void 0===t?{}:t,n=e.nodes,r=void 0===n?10:n,i=e.edges,o=void 0===i?10:i,s=e.texts,a=void 0!==s&&s,u=e.scale;return{nodes:r,edges:o,texts:a,scale:void 0===u?100:u}},By=function(t){for(var e=t.nodes,n=t.edges,r=t.texts,i=t.scale,o=[],s=[],a=0;a<e;a++)o.push({id:a,attributes:{x:Math.random()*i,y:Math.random()*i,text:r?"Node "+a:void 0}});for(a=0;a<n;a++)s.push({id:a,source:Math.random()*e|0,target:Math.random()*e|0,attributes:{text:r?"Edge "+a:void 0}});return{nodes:o,edges:s}},Uy=function(t){var e=void 0===t?{}:t,n=e.nodes,r=void 0===n?50:n,i=e.width,o=void 0===i?100:i,s=e.height,a=void 0===s?100:s,u=e.x,c=void 0===u?0:u,l=e.y,d=void 0===l?0:l;if(!isFinite(r)||r<1)throw new RangeError("Tree generator: number of nodes must be a positive integer");return{nodes:r,width:o,height:a,x:c,y:d}},Vy=function(t){var e=t.nodes,n=t.x,r=t.y,i=t.width,o=t.height,s=n-i/2,a=r-o/2;return{nodes:new Array(e).fill(0).map((function(t,e){return{id:e,attributes:{x:s+Math.random()*i,y:a+Math.random()*o}}})),edges:new Array(e-1).fill(0).map((function(t,e){return{id:e,source:Math.floor(Math.sqrt(e)),target:e+1}}))}},jy=function(t){var e=void 0===t?{}:t,n=e.length,r=void 0===n?5:n,i=e.scale;return{length:r,scale:void 0===i?100:i}},Hy=function(t){var e=t.length,n=t.scale,r={nodes:[],edges:[]};if(e<=0)return r;r.nodes.push({id:0,attributes:{x:Math.random()*n,y:Math.random()*n}});for(var i=1;i<e;++i)r.nodes.push({id:i,attributes:{x:Math.random()*n,y:Math.random()*n}}),r.edges.push({id:i-1,source:i-1,target:i});return r},Gy=(qy.initNamespace=function(t){t.generate={balancedTree:function(t){return Promise.resolve(Ty(Cy(t)))},barabasiAlbert:function(t){return Promise.resolve(Iy(ky(t)))},erdosRenyi:function(t){return Promise.resolve(My(Oy(t)))},flower:function(t){return Promise.resolve(Py(Ry(t)))},grid:function(t){return Promise.resolve(Fy(Dy(t)))},path:function(t){return Promise.resolve(Hy(jy(t)))},random:function(t){return Promise.resolve(By(zy(t)))},randomTree:function(t){return Promise.resolve(Vy(Uy(t)))}}},qy);function qy(){}var Wy=(Yy.initNamespace=function(t){var e;t.geo=(e=t,{enable:function(t){return e.modules.geo.enable(t)},disable:function(t){return e.modules.geo.disable(t)},setOptions:function(t){return e.modules.geo.setOptions(t)},getOptions:function(){return e.modules.geo.getOptions()},getMap:function(){return e.modules.geo.getMap()},enabled:function(){return e.modules.geo.isEnabled()},getCenter:function(){return e.modules.geo.getCenter()},getView:function(){return e.modules.geo.getView()},getZoom:function(){return e.modules.geo.getZoom()},setZoom:function(t){return e.modules.geo.setZoom(t)},setView:function(t,n,r){return e.modules.geo.setView(t,n,r)},setCenter:function(t,n){return e.modules.geo.setCenter(t,n)},toggle:function(t){return e.modules.geo.toggle(t)},resetCoordinates:function(){return e.modules.geo.resetCoordinates()},updateCoordinates:function(){return e.modules.geo.updateCoordinates()},getUnprojectedCoordinates:function(t){return e.modules.geo.getUnprojectedCoordinates(e.getNodes(t))}})},Yy);function Yy(){}function Xy(t,e,n,r){var i;void 0===r&&(r={}),Array.isArray(n)||n instanceof(e?gr:Jn)||(n=[n]);var o=r.virtual,s=void 0!==o&&o,a={elementsToRemove:t.getElements(e,n),virtual:s};t.fireEvent(me.REQUEST_ELEMENTS_TO_DELETE,a);var u=(s?{elementsToRemove:n}:a).elementsToRemove;if(!u.size)return Promise.resolve();u=u.dedupe(),e&&Xy(t,!1,u.getAdjacentEdges({filter:"all"}),r);var c=u._indexes,l=t.storage.fetch(e),d=t.getCacheLists(e),h=l.getFlexArray("removed");if(qe(l.getFlexArray("virtual").getMultiple(c))!==(s?c.length:0))throw new Error("Attempting to remove virtual elements; you should not do that");var f=((i={virtual:s})[e?"nodes":"edges"]=u,i);if(t.fireEvent(e?me.BEFORE_REMOVE_NODES:me.BEFORE_REMOVE_EDGES,f),d.visible.invalidList(),d.all.invalidList(),s||d.raw.invalidList(),t.setExcluded(u,!0),h.setMultiple(c,1),!e)for(var p=0;p<c.length;++p)t.topology.removeFromAdjacencyList(c[p]);return l.removeElements(c),t.setIndexFreeStep(1),t.fireEvent(e?me.REMOVE_NODES:me.REMOVE_EDGES,f),Promise.resolve()}var Zy=(Ky.prototype.addNodes=function(t,e){return yr(this.modules.graph,!0,t,e)},Ky.prototype.addEdges=function(t,e){return yr(this.modules.graph,!1,t,e)},Ky.prototype.addNode=function(t,e){return vr(this.modules.graph,!0,t,e)},Ky.prototype.addEdge=function(t,e){return vr(this.modules.graph,!1,t,e)},Ky.prototype.removeNodes=function(t,e){return Xy(this.modules.graph,!0,t,e)},Ky.prototype.removeEdges=function(t,e){return Xy(this.modules.graph,!1,t,e)},Ky.prototype.removeNode=function(t,e){return Xy(this.modules.graph,!0,[t],e)},Ky.prototype.removeEdge=function(t,e){return Xy(this.modules.graph,!1,[t],e)},Ky.prototype.getNodes=function(t){return this.modules.graph.getNodes(t)},Ky.prototype.getEdges=function(t){return this.modules.graph.getEdges(t)},Ky.prototype.getNode=function(t){return this.modules.graph.getNode(t)},Ky.prototype.getEdge=function(t){return this.modules.graph.getEdge(t)},Ky.prototype.clearGraph=function(){this.modules.graph.clear()},Ky.prototype.setGraph=function(t,e){return this.modules.graph.clear(),this.addGraph(t,e)},Ky.prototype.addGraph=function(t,e){return n=this.modules.graph,i=e,a=void 0===(s=(r=t).nodes)?[]:s,u=r.edges,c=void 0===u?[]:u,void 0===i&&(i={}),i.batchSize?yr(n,!0,a,i).then((function(t){return o=t,yr(n,!1,c,i)})).then((function(t){return{nodes:o,edges:t}})):Promise.resolve({nodes:mr(n,!0,a,i),edges:mr(n,!1,c,i)});var n,r,i,o,s,a,u,c},Ky.prototype.createNodeList=function(){return this.getNodes([])},Ky.prototype.createEdgeList=function(){return this.getEdges([])},Ky.prototype.getConnectedComponents=function(t){return void 0===t&&(t={}),this.modules.graph.getConnectedComponents(this.getNodes(t.filter),t)},Ky.prototype.getConnectedComponentByNode=function(t,e){var n=this.modules.graph.getNode(t);if(void 0===n)throw new Error("getComponentByNode: cannot find node "+t);return this.modules.graph.getConnectedComponentByNode(n,e)[0]},Ky);function Ky(){}var Jy=(Qy.prototype.reloadFonts=function(){this.modules.graphics.reloadFonts()},Qy);function Qy(){}function $y(t){return t.charCodeAt(0)}var tm=$y(" "),em=$y("<"),nm=$y(">"),rm=$y('"'),im=$y("\n"),om=$y("\r"),sm=$y("/"),am=$y("\\"),um=$y("a"),cm=$y("z"),lm=$y("A"),dm=$y("Z"),hm=$y("0"),fm=$y("9"),pm=$y(":");function gm(t,e,n,r){var i=r.length;if(n-e===i){for(var o=0;o<i;++o)if(t[e+o]!==r[o])return;return 1}}function _m(t,e,n,r){for(var i=t.length,o=0;o<i;++o)if(gm(e,n,r,t[o]))return o;return t.push(e.slice(n,r)),i}function vm(t,e,n){var r=mm(e,n),i=e[r];if(i===nm||i===sm)return r;for(var o,s,a,u=r,c=(o=e,s=u,a=r=bm(e,r),_m(t.attributes,o,s,a));e[r]!==rm;)++r;for(u=++r;(i=e[r])!==rm;)i===am&&++r,++r;return t.tokens.push(-3,c,u,r),r+1}function ym(t){return t===tm||t===im||t===om}function mm(t,e){for(;ym(t[e]);)++e;return e}function bm(t,e){for(;n=t[e],um<=n&&n<=cm||lm<=n&&n<=dm||n===pm||hm<=n&&n<=fm;)++e;var n;return e}function xm(t,e){var n=["return {","  id: undefined,","  attributes: {","    text: undefined,","    color: undefined,","    "+(t?"radius":"width")+": undefined",t?"  ,x: undefined":"",t?"  ,y: undefined":"","  },"];t||n.push("  source: undefined,","  target: undefined,");var r=Object.keys(e);r.length&&n.push("  data: {");for(var i=0;i<r.length;++i){var o=e[r[i]],s=o.title;n.push('  "'+s+'": '+(void 0!==o.default?JSON.stringify(o.default):void 0)+(i===r.length-1?"":","))}return r.length&&n.push("}"),n.push("};"),new Function(n.join("\n"))}function Em(t){return-1===t.indexOf("\\")?t:t=t.replace(/\\"/g,'"')}function wm(t){if(-1===t.indexOf("<gexf"))throw new Error("not a GEXF file");var e=function(t){for(var e=new Int32Array(t.length),n=0,r=t.length;n<r;++n)e[n]=t.charCodeAt(n);return e}(t),n=function(t,e){for(var n,r,i={tags:[],attributes:[],tokens:[]},o=i.tokens,s=mm(t,e);s<t.length;){var a=t[s];if(a===em){if(t[s=mm(t,++s)]===sm)for(o.push(-2);t[++s]!==nm;);else{s=bm(t,n=s);var u=_m(i.tags,t,n,s);for(o.push(-1,u),a=t[s];a!==nm&&a!==sm;)a=t[s=vm(i,t,s)];if(a===sm)for(o.push(-2);t[++s]!==nm;);}s+=1}else{for(n=s;t[++s]!==em;);for(r=s-1;ym(t[r]);)--r;o.push(-4,n,r+1)}s=mm(t,s)}return i}(e,t.indexOf("<gexf ")),r={},i={};n.tags.forEach((function(t,e){var n=String.fromCharCode.apply(null,t);r[n]=e})),n.attributes.forEach((function(t,e){var n=String.fromCharCode.apply(null,t);i[n]=e}));for(var o=r.attributes,s=r.attribute,a=r.node,u=r.edge,c=r.default,l=r["viz:position"],d=r["viz:size"],h=r["viz:color"],f=r.attvalue,p=i.class,g=i.id,_=i.type,v=i.title,y=i.label,m=i.source,b=i.target,x=i.x,E=i.y,w=i.r,S=i.g,A=i.b,C=i.a,T=i.value,k=i.for,I=i.weight,O={float:1,double:1,integer:2,boolean:3,string:4,"list-string":5},M=0,L=n.tokens,N=L.length,R=new Array(16),P=0,D=0,F=0,z=!0,B={},U={},V="",j="",H="",G=void 0,q={attributes:{}},W=0,Y=0,X=0,Z=1,K="",J=void 0,Q=!1,$=!0,tt=null,et=null,nt=[],rt=[],it=0,ot={};M<N;){var st=L[M];if(-1===st)D=P,P=L[M+1],R[F]=P,F+=1,P===a?(q=(tt=tt||xm(!0,B))(),$=!0,ot=B):P===u&&(q=(et=et||xm(!1,U))(),$=!1,ot=U),M+=2;else if(-2===st){if(V&&P===s){ot=z?B:U;var at=O[j];(lt=G)&&(1===at?lt=+lt:2===at?lt=0|+lt:3===at?lt="true"===lt:5===at&&(lt=lt.split(" ").filter((function(t){return t})))),ot[V]={title:H||V,default:lt,type:at},j=H=V="",G=void 0}else if(P===a&&4===F)Q&&q.attributes&&(q.attributes.color="rgba("+W+", "+Y+", "+X+", "+Z+")",X=Y=W=0,Q=!(Z=1)),q.id||(q.id=++it),nt.push(q);else if(P===u&&4===F)q.id||(q.id=++it),rt.push(q);else if(P===f&&6===F&&K){var ut=($?B:U)[K];ut&&(void 0===J?J=ut.default:(at=ut.type)&&(1===at?J=+J:2===at?J=0|+J:3===at?J="true"===J:5===at?J=J.split(" ").filter((function(t){return t})).map((function(t){return Em(t)})):"string"==typeof e&&(J=Em(J))),q.data[ot[K].title]=J),K="",J=null}P=D,D=R[--F-2],M+=1}else if(-3===st){var ct=L[M+1],lt=t.substring(L[M+2],L[M+3]);if(P===o)ct===p&&(z="edge"!==lt&&"edges"!==lt);else if(P===s)ct===g?V=lt:ct===_?j=lt:ct===v&&(H=lt);else if(P!==a&&P!==u||4!==F)if(P===l&&5===F){if(ct===x)q.attributes.x=parseFloat(lt);else if(ct===E){var dt=parseFloat(lt);q.attributes.y=0===dt?dt:-dt}}else P===h&&5===F?(Q=!0,ct===w?W=parseInt(lt):ct===S?Y=parseInt(lt):ct===A?X=parseInt(lt):ct===C&&(Z=parseFloat(lt))):P===d&&5===F?ct===T&&($?q.attributes.radius=+lt:q.attributes.width=+lt):P===f&&6===F&&(ct===k||ct===g?K=lt:ct===T&&(J=lt));else ct===g?q.id=lt:ct===y?q.attributes.text=lt:ct===m?q.source=lt:ct===b?q.target=lt:ct===I&&(q.attributes.width=+lt);M+=4}else{if(-4!==st)throw new Error("at index "+M+": token "+st);lt=t.substring(L[M+1],L[M+2]),P===c&&(G=lt),M+=3}}return{nodes:nt,edges:rt}}function Sm(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(t[i])return Am(t[i])}}function Am(t){return"string"==typeof t||isFinite(t)?String(t):String(t.id||t._id)}function Cm(t,e,n){n=n||e,e in t&&(t.attributes[n]=t[e])}function Tm(t,e){void 0===e&&(e=function(t){return t});for(var n=e(JSON.parse(t)),r=n.nodes||[],i=n.edges||[],o=0;o<r.length;o++){var s=r[o];s.attributes||(s.attributes={}),"string"==typeof s.size&&(s.size=+s.size),"string"==typeof s.x&&(s.x=+s.x),"string"==typeof s.y&&(s.y=+s.y),Cm(s,"x"),Cm(s,"y"),Cm(s,"size","radius"),Cm(s,"color"),Cm(s,"text")}for(o=0;o<i.length;o++){var a=i[o];a.attributes||(a.attributes={}),"string"==typeof a.size&&(a.size=+a.size),Cm(a,"size","width"),Cm(a,"color"),Cm(a,"text")}return{nodes:r,edges:i}}function km(t,e){for(var n=0,r=0;r<20;++r){var i=n+t[r]+e[r];n=+(10<=i),t[r]=i%10}}function Im(){this._decimalPowerOfTwo=new Uint8Array(20),this._binaryNumber=new Uint8Array(64),this._decimalNumber=new Uint8Array(20)}var Om=new(Im.prototype.int64ToString=function(t){var e=t.low,n=t.high;if(0===e&&0===n)return"0";!function(t,e,n){for(var r=0;r<32;++r)n[r]=+!!(t&1<<r);for(r=0;r<32;++r)n[r+32]=+!!(e&1<<r)}(e,n,this._binaryNumber),this._decimalNumber.fill(0),this._decimalPowerOfTwo.fill(0);var r=(this._decimalPowerOfTwo[0]=1)===this._binaryNumber[63];r&&function(t){for(var e=0;e<64;++e)t[e]^=1;for(e=0;e<64&&!(t[e]^=1);++e);}(this._binaryNumber);for(var i=0;i<64;++i)this._binaryNumber[i]&&km(this._decimalNumber,this._decimalPowerOfTwo),km(this._decimalPowerOfTwo,this._decimalPowerOfTwo);var o=[],s=this._decimalNumber.length-1;for(r&&o.push("-");!this._decimalNumber[s];)--s;for(i=s;0<=i;--i)o.push(String(this._decimalNumber[i]));return o.join("")},Im);function Mm(t){return Om.int64ToString(t)}function Lm(t){return"object"==typeof t&&"high"in t&&"low"in t}function Nm(t){return{gexf:function(t){return Promise.resolve(wm(t))},gexfFromUrl:function(t){return Vt(t).then((function(t){return wm(t)}))},janus:function(t){return Promise.resolve(function(t){var e=[],n=[];return function t(e,n,r){if(e&&"object"==typeof e){if(Array.isArray(e))return e.forEach((function(e){return t(e,n,r)}));if("vertex"===(a=e).type||"vertex"===a._type||a.inE||a.outE||a._inE||a._outE){var i={};e.properties&&Object.keys(e.properties).forEach((function(t){i[t]=e.properties[t][0].value}));var o=Am(e);for(var s in n.push({id:o,data:{id:e.id+"",categories:[e.label],properties:i}}),e)"properties"!==s&&t(e[s],n,r)}else{var a,u;if("edge"===(u=e).type||"edge"===u._type||u.inV||u.outV||u._outV||u._inV)for(var s in o=Am(e),r.push({id:o,source:Sm(e,["inV","_inV"]),target:Sm(e,["outV","_outV"]),data:{id:o,type:e.label,properties:e.properties||{}}}),e)"properties"!==s&&t(e[s],n,r);else Object.keys(e).forEach((function(i){return t(e[i],n,r)}))}}}("string"==typeof t?JSON.parse(t):t,e,n),{nodes:e,edges:n}}(t))},json:function(t,e){return Promise.resolve(Tm(t,e))},jsonFromUrl:function(t,e){return Vt(t).then((function(t){return Tm(t,e)}))},neo4j:function(t){return Promise.resolve((n="string"==typeof(e=t)?JSON.parse(e):e,r={nodes:[],edges:[]},i=new Set,o=new Set,n.records.forEach((function(t){t._fields.forEach((function(t){!function t(e,n,r,i){var o,s,a;n&&(Array.isArray(n)?n.forEach((function(n){return t(e,n,r,i)})):function(t){return"segments"in t}(n)?(o=e,s=r,a=i,n.segments.forEach((function(e){t(o,e.start,s,a),t(o,e.end,s,a),t(o,e.relationship,s,a)}))):(function(t){if("object"!=typeof t||null===t)throw new Error("Ogma can only retrieve nodes and relationships from Neo4j. Please make sure that your Cypher query returns nodes and edges, not values.");for(var e,n=0,r=Object.keys(t.properties);n<r.length;n++){var i=r[n],o=t.properties[i];Lm(o)&&(t.properties[i]=Mm(o))}if(void 0!==t.identity&&(Lm(t.identity)&&(t.identity=Mm(t.identity)),"start"in(e=t)&&"end"in e)){var s=t.start.identity||t.start,a=t.end.identity||t.end;Lm(s)&&(t.start=Mm(s)),Lm(a)&&(t.end=Mm(a))}}(n),function(t){return"start"in t&&"end"in t&&"type"in t}(n)?i.has(n.identity)||(i.add(n.identity),e.edges.push({id:n.identity,source:n.start,target:n.end,data:{neo4jType:n.type,neo4jProperties:n.properties}})):r.has(n.identity)||(r.add(n.identity),e.nodes.push({id:n.identity,attributes:{x:100*Math.random(),y:100*Math.random()},data:{neo4jLabels:n.labels,neo4jProperties:n.properties}}))))}(r,t,i,o)}))})),r));var e,n,r,i,o}}}var Rm=(Pm.initNamespace=function(t){t.parse=Nm()},Pm.prototype.fetch=function(t){return Vt(t)},Pm);function Pm(){}var Dm=(Fm.initNamespace=function(t){var e;t.keyboard=(e=t,{isKeyPressed:function(t){return e.modules.keyboard.isPressed(t)},resetKeys:function(){e.modules.keyboard.resetKeys()}})},Fm);function Fm(){}function zm(t,e){return t-e}var Bm={configure:function(t,e){var n=e.graph,r=e.data;if(void 0===t.centralNode)throw new Error('concentric layout: missing parameter "centralNode"');var i,o,s=w(w({},t),{centralNode:(i=n,(o=t.centralNode)instanceof fr?o:i.getNode(o))}),a=s.centralNode,u=s.nodes,c=n.getNode(a);if(void 0===c)throw new Error('concentric layout: "centralNode" parameter is not valid');var l=c._index,d=c.getPosition(),h=d.x,f=d.y,p=u.getAttribute("layoutable"),g=n.getNodes(u)._indexes,_=Array.from(g.filter((function(t,e){return p[e]})));-1===_.indexOf(l)&&_.push(l);var v=n.getNodeAttribute("radius").getMultiple(g),y=function(t,e,n,r){if(e)return"random"===e?"random":"radius"===e?r.slice():"degree"===e?n.getDegree():t.getProperty(n,e)}(r,s.sortBy,u,v),m=_.reduce((function(t,e,n){return t[e]=n,t}),{}),b=_.map((function(t,e){return e})),x=new Set;t.edges.getExtremities()._indexes.forEach((function(t){x.add(t)}));var E=_.map((function(t){return n.topology.getAdjacentElements(!0,new Uint32Array([t])).filter((function(t){return x.has(t)})).map((function(t){return m[t]}))}));return{sourceNodeIndex:_.indexOf(l),centerX:"number"==typeof s.centerX?s.centerX:h,centerY:"number"==typeof s.centerY?s.centerY:f,list:_,indexes:b,size:_.length,totalSize:_.length,attributes:{adjacentNodes:E,size:v},sortAttr:y,clockwise:void 0===s.clockwise||s.clockwise,circleHopRatio:s.circleHopRatio||5,allowOverlap:!!s.allowOverlap}},context:function(){return{dijkstra:function(t,e,n,r,i){var o=Math.pow(2,31)-1,s=new Int32Array(r),a=new Int32Array(r),u=new Int8Array(r);s.fill(o),a.fill(-1);for(var c=0;c<r;++c){var l=e[c];void 0!==l&&(s[l]=o,a[l]=-1)}for(var d=s[i]=0,h=function(){var r=o;d=-1;for(var i=0;i<n;++i){var c=e[i],l=s[c];!u[c]&&l<r&&(r=l,u[d=c]=1)}if(-1<d){var h=t[d],f=r+1;h.forEach((function(t){var e=s[t];f<e&&(s[t]=f,a[t]=d)}))}};-1!==d;)h();return s},determinePropertyType:function(t,e,n){return e.some((function(e){return"number"!==t[e]}))?"string":"number"}}},update:function(t,e){for(var n=t.attributes,r=t.indexes,i=t.size,o=t.sourceNodeIndex,s=t.centerX,a=t.centerY,u=t.sortAttr,c=n.adjacentNodes,l=n.size,d=new Array(t.totalSize),h=new Array(t.totalSize),f=e.dijkstra(c,r,t.size,t.totalSize,o),p=0,g={},_=0;_<i;_++){var v=l[r[_]];p<v&&(p=v)}var y=p*t.circleHopRatio,m=0,b=0,x=Math.PI/9;for(_=0;_<i;_++){var E=r[_],w=f[E],S=g[w];S||(S=[],g[w]=S),S.push(E)}var A,C,T=(C=r,"random"===(A=u)?function(){return Math.random()-.5}:A?"number"===e.determinePropertyType(A,C,C.length)?function(t,e){return A[t]-A[e]}:function(t,e){return A[t]<A[e]?-1:1}:void 0),k="random"===u||u;return Object.keys(g).sort((function(t,e){return parseInt(t)-parseInt(e)})).forEach((function(e,n){var r,i=g[e],o=i.length,u=0,c=b,f=2*Math.PI/o;0===n||t.allowOverlap||2*Math.PI*m<(r=2*(u+=i.reduce((function(t,e){return t+l[e]}),0))*Math.SQRT2)&&(m+=r/(2*Math.PI)-m),k&&(i.sort(T),t.clockwise||i.reverse());for(var p=0;p<o;p++){var _=i[p];d[_]=Math.cos(c)*m+s,h[_]=Math.sin(c)*m+a;var v=l[_];c+=f*(t.allowOverlap?1:v/u*o)}m+=y,b+=x})),{x:d,y:h,indexes:t.list}},isRunning:function(){return!1},onSync:function(t){return{indexes:t.indexes,x:t.x,y:t.y}}},Um={imports:{minHeap:Dh,bellmanFord:Fh,dijkstra:zh,johnson:Bh,distance:Ds,circleCircleIntersection:vc,circleSortCompare:yc,weightedStress:Lh,distanceStress:Nh,constrainedStress:Rh,stressMinimizationStep:Ph,removeRadialOverlap:Yh,quadraticInOut:bu,calculateRadii:Xh},configure:function(t,e){var n=e.graph,r=t.nodes,i=r.size;function o(t,e){return null!=t&&isFinite(t)?t:e}if(void 0===t.centralNode)throw new Error('radial layout: missing parameter "centralNode"');var s=n.getNode(t.centralNode);if(void 0===s)throw new Error('radial layout: parameter "centralNode" is not valid');t.radiusRatio=o(t.radiusRatio,Math.SQRT2),t.radiusDelta=o(t.radiusDelta,0),t.nodeGap=o(t.nodeGap,10),t.repulsion=i*o(t.repulsion,1);var a=s.getPosition(),u=o(t.centerX,a.x),c=o(t.centerY,a.y),l=s._index;r.includes(s)||(r=r.concat(s.toList()));var d=r._indexes,h=r.getAttribute("layoutable");(d=d.filter((function(t,e){return h[e]||t===l}))).sort(zm);var f=d.length,p=function(t,e,n){for(var r=t.slice().sort(zm),i=[],o=0,s=e.length;o<s;o++){for(var a=[],u=e[o],c=!1,l=0,d=u.length;l<d;l++){var h=u[l];-1!==F(r,h)&&(h===n&&(c=!0),a.push(h))}0!==a.length&&i[c?"unshift":"push"](a.sort(zm))}return i}(d,n.getConnectedComponents(r,{internalIndexes:!0}),l),g=n.degrees(d),_=new Float32Array(n.getNodeAttribute("x").getMultiple(d)),v=new Float32Array(n.getNodeAttribute("y").getMultiple(d)),y=n.getNodeAttribute("radius").getMultiple(d),m=n.getEdges()._indexes,b=n.getEdgeAttribute("source").getMultiple(m),x=n.getEdgeAttribute("target").getMultiple(m),E=n.getAdjacencyList({internalIndexes:!0,weight:1,indexes:d});return{centerIndex:l,centerIndexPos:0,cx:u,cy:c,D:null,indexes:d,components:p,normIndexes:null,radii:null,rings:null,x:_,y:v,degree:g,size:f,attributes:{size:y,adjacency:E,weights:x.map((function(){return 1})),sources:b,targets:x},sortAttr:null,allowOverlap:!!t.allowOverlap,nodeGap:t.nodeGap,radiusRatio:t.radiusRatio,radiusDelta:t.radiusDelta,repulsion:t.repulsion,randomize:!("randomize"in t)||!!t.randomize,renderSteps:!!t.renderSteps,epsilon:o(t.epsilon,.001),maxSteps:o(t.maxIterations,100),iterationsPerRender:o(t.iterationsPerRender,20),step:-1,stress:Number.POSITIVE_INFINITY,prevStress:0,converged:!1,overlapRemoved:!1,done:!1}},context:function(){return{data:null,gridPlacement:function(t,e,n){void 0===n&&(n=8);for(var r=t.length,i=new Float32Array(r),o=new Float32Array(r),s=0,a=0,u=t.length;a<u;a++){var c=e[t[a]];s<c&&(s=c)}var l=s*n,d=Math.ceil(Math.sqrt(r)),h=Math.ceil(r/d),f=-Math.floor((h-1)*l/2),p=-Math.floor((d-1)*l/2);for(a=0;a<d;a++)for(var g=0;g<h;g++)i[a*h+g]=f+g*l,o[a*h+g]=p+a*l;return{x:i,y:o}},connectComponents:function(t,e,n,r,i,o){var s;function a(t,e){var n=new Uint32Array(t.length+1);return n.set(t),n[t.length]=e,n}for(var u=function(u){var c=t[u],l=0,d=0;c.forEach((function(t,e){var n=i.get(t);null!=n&&l<n&&(d=e,l=n)})),s=c[d];var h=e[o.get(s)];h.weights=h.weights||[],h.nodes=a(h.nodes,n),h.weights.push(r);var f=e[o.get(n)];f.weights=f.weights||[],f.nodes=a(f.nodes,s),f.weights.push(r)},c=1;c<t.length;c++)u(c)},correctSubgraphsDistances:function(t,e,n,r,i){for(var o=Array.prototype.reduce.call(t[n],(function(t,e,i){return i!==n&&e<r&&t<e&&(t=e),t}),0),s=r-o-1,a=1;a<e.length;a++)for(var u=e[a],c=0,l=u.length;c<l;c++){var d=i.get(u[c]);null!=d&&(t[n][d]-=s,t[d][n]-=s)}},initialize:function(t,e){(t.data=e).step=0;var n=new Map,r=new Map;e.normIndexes=e.indexes.reduce((function(i,o,s){return i[s]=s,n.set(o,s),r.set(o,e.degree[s]),t.data&&o===e.centerIndex&&(t.data.centerIndexPos=s),i}),new Uint32Array(e.indexes.length));var i=e.centerIndexPos,o=e.components[0].length;t.connectComponents(e.components,e.attributes.adjacency,e.centerIndex,o,r,n);var s=Bh({sources:e.attributes.sources,targets:e.attributes.targets,weights:e.attributes.weights,indexes:e.indexes,adjacency:e.attributes.adjacency,undirected:!0});t.correctSubgraphsDistances(s,e.components,i,o,n);for(var a=(e.D=s)[i],u=Object.create(null),c=0,l=e.normIndexes.length;c<l;c++)if(c!==i){var d=a[c];u[d]=u[d]||[],u[d].push(e.normIndexes[c])}e.rings=u,e.radii=Xh(i,e.rings,e.attributes.size,e.nodeGap,e.radiusRatio,e.radiusDelta)},removeOverlaps:function(t,e){if(t.data){var n=t.data.centerIndexPos,r=e.attributes.size,i=e.rings,o=e.x[n],s=e.y[n];for(var a in i){var u=i[a],c=Ds(o,s,e.x[u[0]],e.y[u[0]]);Yh({X:e.x,Y:e.y,sizes:r,indexes:u,center:[o,s],R:c,gap:e.nodeGap,inPlace:!0})}}}}},update:function(t,e){var n,r=(t=t||e.data).indexes,i=t.centerIndex;function o(e){return t.radii&&t.radii[e]||1}t.x=t.x||new Float32Array(t.size),t.y=t.y||new Float32Array(t.size),-1===t.step?e.initialize(e,t):t.step++;var s=t.repulsion;if(0===t.step)t.randomize&&(n=e.gridPlacement(t.indexes,t.attributes.size),t.x=n.x,t.y=n.y);else if(!t.converged)for(var a=t.maxSteps,u=t.iterationsPerRender,c=t.step,l=Math.min(c+u,a+1),d=t.D,h=t.x,f=t.y,p=t.size,g=t.centerIndexPos,_=t.normIndexes;c<=l||!t.converged;){var v=bu(Math.min(c,a)/a);t.step=c++,n=Ph(d,h,f,p,g,s,v,_,o),t.x=n.x,t.y=n.y,t.prevStress=t.stress,t.stress=Rh(d,h,f,p,g,s,v,_),t.converged=t.converged||Math.abs(t.stress-t.prevStress)<=t.epsilon}if(t.converged)if(t.overlapRemoved||t.allowOverlap){t.done=!0;var y=t.rings||{};t.rings=Object.keys(y).reduce((function(t,e){return t[e]=y[e].map((function(t){return r[t]})),t}),{})}else e.removeOverlaps(e,t,i),t.overlapRemoved=!0;return t},isRunning:function(t){var e=t.data;return!(!e||e.converged&&(e.allowOverlap||e.done))},onSync:function(t){if(t.renderSteps||t.done)return Vm(t)},onEnd:function(t,e){return Vm(t)}};function Vm(t){for(var e=t.x,n=t.y,r=t.indexes.length,i=e[t.centerIndexPos]-t.cx,o=n[t.centerIndexPos]-t.cy,s=0;s<r;s++)e[s]-=i,n[s]-=o;return{indexes:t.indexes,x:e,y:n}}
/**
  * @preserve
  * @linkurious/force-layout@0.4.0
  * Ogma general-purpose force-directed layout
  */function jm(){return function(){var t=function(t){var e,n=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(String(t)),this.s0<0&&(this.s0+=1),this.s1-=n(String(t)),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1),n=null};function e(e){return new t(e.toString()).next()}t.prototype.next=function(){var t=this;return function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)}},t.prototype.nextDouble=function(){var t=this.next();return function(){return t()+11102230246251565e-32*(2097152*t()|0)}},t.prototype.nextInt32=function(){var t=this.next();return function(){return 4294967296*t()|0}};var n=e(42);function r(t){n=e(t)}function i(){return 1e-6*(n()-.5)}var o=function(t){return t.x},s=function(t){return t.y},a=function(t){return t.r};function u(t,e,n,r){void 0===e&&(e=o),void 0===n&&(n=s),void 0===r&&(r=a);for(var i,u=function(t){for(var e=t.length-1;0<=e;e--){var n=Math.floor(Math.random()*(e+1));n=Math.max(Math.min(n,e),0);var r=t[e];t[e]=t[n],t[n]=r}return t}(t.slice()),l=u.length,h=[],p=0;p<l;){var g=u[p];i&&d(i,e(g),n(g),r(g))?p++:(i=f(h=c(h,g,e,n,r),e,n,r),p=0)}return i}function c(t,e,n,r,i){var o=n(e),s=r(e),a=i(e),u={x:o,y:s,r:a};if(h(u,t,n,r,i))return[e];for(var c=0;c<t.length;++c){var d=t[c],f=n(d),_=r(d),v=i(d);if(!l(u,f,_,v)&&h(p(f,_,v,o,s,a),t,n,r,i))return[t[c],e]}for(var y=0;y<t.length-1;y++)for(var m=y+1;m<t.length;m++){var b=t[y],x=t[m],E=n(b),w=r(b),S=i(b),A=n(x),C=r(x),T=i(x);if(!l(p(E,w,S,A,C,T),o,s,a)&&!l(p(E,w,S,o,s,a),A,C,T)&&!l(p(A,C,T,o,s,a),E,w,S)&&h(g(E,w,S,A,C,T,o,s,a),t,n,r,i))return[t[y],t[m],e]}throw new Error}function l(t,e,n,r){var i=t.r-r,o=e-t.x,s=n-t.y;return 0<=i&&o*o+s*s<i*i}function d(t,e,n,r){var i=t.r-r+1e-6,o=e-t.x,s=n-t.y;return 0<i&&o*o+s*s<i*i}function h(t,e,n,r,i){for(var o=0;o<e.length;++o){var s=e[o];if(!d(t,n(s),r(s),i(s)))return}return 1}function f(t,e,n,r){return 1===t.length?{x:e(t[0]),y:n(t[0]),r:r(t[0])}:2===t.length?p(e(t[0]),n(t[0]),r(t[0]),e(t[1]),n(t[1]),r(t[1])):g(e(t[0]),n(t[0]),r(t[0]),e(t[1]),n(t[1]),r(t[1]),e(t[2]),n(t[2]),r(t[2]))}function p(t,e,n,r,i,o){var s=r-t,a=i-e,u=o-n,c=Math.sqrt(s*s+a*a);return{x:(t+r+s/c*u)/2,y:(e+i+a/c*u)/2,r:(c+n+o)/2}}function g(t,e,n,r,i,o,s,a,u){var c=t-r,l=t-s,d=e-i,h=e-a,f=o-n,p=u-n,g=t*t+e*e-n*n,_=g-r*r-i*i+o*o,v=g-s*s-a*a+u*u,y=l*d-c*h,m=(d*v-h*_)/(2*y)-t,b=(h*f-d*p)/y,x=(l*_-c*v)/(2*y)-e,E=(c*p-l*f)/y,w=b*b+E*E-1,S=2*(n+m*b+x*E),A=m*m+x*x-n*n,C=-(w?(S+Math.sqrt(S*S-4*w*A))/(2*w):A/S);return{x:t+m+b*C,y:e+x+E*C,r:C}}for(var _=[0,1],v=[0,2],y=4;y<65535;y<<=2)for(var m=0,b=_.length;m<b;m++)_.push(_[m]|y),v.push((_[m]|y)<<1);function x(t,e){return(v[255&e]|_[255&t])+65536*(v[e>>8&255]|_[t>>8&255])+4294967296*(v[e>>16&255]|_[t>>16&255])}function E(t,e){var n=t^e,r=65535^n,i=65535^(t|e),o=t&(65535^e),s=n|r>>1,a=n>>1^n,u=i>>1^r&o>>1^i,c=n&i>>1^o>>1^o;a=(n=s)&(r=a)>>2^r&(n^r)>>2,u^=n&(i=u)>>2^r&(o=c)>>2,c^=r&i>>2^(n^r)&o>>2,a=(n=s=n&n>>2^r&r>>2)&(r=a)>>4^r&(n^r)>>4,u^=n&(i=u)>>4^r&(o=c)>>4,c^=r&i>>4^(n^r)&o>>4,u^=(n=s=n&n>>4^r&r>>4)&(i=u)>>8^(r=a)&(o=c)>>8;var l=t^e,d=(r=(c^=r&i>>8^(n^r)&o>>8)^c>>1)|65535^(l|(n=u^u>>1));return((d=1431655765&((d=858993459&((d=252645135&((d=16711935&(d|d<<8))|d<<4))|d<<2))|d<<1))<<1|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&(l|l<<8))|l<<4))|l<<2))|l<<1)))>>>0}var w=new Uint32Array(1024);function S(t,e,n,r){this.left=null,this.right=null,this.data=null,this.code=t,this.data=e,this.left=n,this.right=r}var A,C,T=Math.clz32||function(t){for(var e=1<<31,n=0;n<31;n+=1){if(e&t)return n;e>>>=1}return 32};function k(t,e,n,r){var i=e[t[n]],o=e[t[r]];if(i===o)return n;for(var s,a,u=T(i^o),c=n,l=r-n;(s=c+(l=l+1>>1))<r&&(a=e[t[s]],u<T(i^a)&&(c=s)),1<l;);return c}(C=A=A||{})[C.HILBERT=1]="HILBERT",C[C.MORTON=0]="MORTON";var I,O,M,L,N,R,P,D,F,z=function(t,e){void 0===e&&(e={});var n=e.getX,r=e.getY,i=e.bucketSize;void 0===i&&(i=0);var o=e.sfc;void 0===o&&(o=A.HILBERT),this.bucketSize=0,this._root=null;var s=t.length,a=new Uint32Array(s),u=1/0,c=1/0,l=-1/0,d=-1/0;this._x=n,this._y=r;var h=o===A.HILBERT?E:x;this._project=h;for(var f=new Uint32Array(s),p=0;p<s;p++){var g=t[p],_=n(g),v=r(g);_<u&&(u=_),v<c&&(c=v),l<_&&(l=_),d<v&&(d=v),f[p]=p}this._minX=u,this._minY=c,this._maxX=l,this._maxY=d;var y=65535/Math.max(l-u,1),m=65535/Math.max(d-c,1);this._hw=y,this._hh=m;for(var b=0;b<s;b++){var C=t[b];a[b]=h(y*(n(C)-u),m*(r(C)-c))}!function(t,e){for(var n=new Uint32Array(e.length),r=0;r<1024;r++)w[r]=0;for(var i=0;i<e.length;i++){var o=e[i];w[255&o]++,w[256+(o>>8&255)]++,w[512+(o>>16&255)]++,w[768+(o>>24&255)]++}for(var s=0;s<4;s++)for(var a=0,u=0,c=256*s,l=0;l<256;l++)a=w[l+c],w[l+c]=u,u+=a;for(var d=0;d<e.length;d++){var h=e[d];n[w[255&h]++]=d}for(var f=0;f<e.length;f++){var p=n[f],g=e[p];t[w[256+(g>>8&255)]++]=p}for(var _=0;_<e.length;_++){var v=t[_],y=e[v];n[w[512+(y>>16&255)]++]=v}for(var m=0;m<e.length;m++){var b=n[m],x=e[b];t[w[768+(x>>24&255)]++]=b}}(f,a),this._root=0===i?function(t,e,n,r,i){for(var o=new S(null,null,null,null),s=[o],a=[0,i];0!==s.length;){var u=a.pop(),c=a.pop(),l=s.pop();if(u-c==0)l.code=n[c],l.data=t[e[c]];else{var d=k(e,n,c,u);c<=(l.code=d)&&(l.left=new S(null,null,null,null),s.push(l.left),a.push(c,d)),d<u&&(l.right=new S(null,null,null,null),s.push(l.right),a.push(d+1,u))}}return o}(t,f,a,0,s-1):function(t,e,n,r,i,o){for(var s=new S(null,null,null,null),a=[s],u=[0,i];0!==a.length;){var c=u.pop(),l=u.pop(),d=a.pop();if(c-l<o){for(var h=new Array(c-l+1),f=l,p=0;f<=c;f++,p++)h[p]=t[e[f]];d.code=n[l],d.data=h}else{var g=k(e,n,l,c);l<=(d.code=g)&&(d.left=new S(null,null,null,null),a.push(d.left),u.push(l,g)),g<c&&(d.right=new S(null,null,null,null),a.push(d.right),u.push(g+1,c))}}return s}(t,f,a,0,s-1,i),this.bucketSize=i},B={root:{configurable:!0}};B.root.get=function(){return this._root},z.prototype.inOrder=function(t,e){for(var n=this._root,r=[],i=!1;!i;)if(n)r.push(n),n=n.left;else if(0!==r.length){if(n=r.pop(),t.call(e,n))break;n=n.right}else i=!0;return this},z.prototype.preOrder=function(t,e){for(var n=[this._root];0!==n.length;){var r=n.pop();t.call(e,r)||(r.right&&n.push(r.right),r.left&&n.push(r.left))}return this},z.prototype.postOrder=function(t,e){var n,r=[],i=this._root;do{for(;i;)i.right&&r.push(i.right),r.push(i),i=i.left;i=r.pop(),n=r.length-1,i=i.right&&r[n]===i.right?(r[n]=i).right:(t.call(e,i),null)}while(0!==r.length);return this},z.prototype.map=function(t,e){var n=[];return this.inOrder((function(r){n.push(t.call(e,r))})),n},z.prototype.height=function(){return function t(e){return e?1+Math.max(t(e.left),t(e.right)):0}(this._root)},z.prototype.toString=function(t){void 0===t&&(t=function(t){return t.code.toString()});var e=[];return function t(e,n,r,i,o){if(e){i(n+(r?"^-- ":"|-- ")+o(e)+"\n");var s=n+(r?"    ":"|   ");e.left&&t(e.left,s,!1,i,o),e.right&&t(e.right,s,!0,i,o)}}(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},z.prototype.size=function(){var t=0;return this.preOrder((function(){t++})),t},z.prototype.destroy=function(){return this._root=null,this},Object.defineProperties(z.prototype,B);var U,V,j,H,G,q,W,Y,X,Z=0;function K(t,e,n,r){var i=r.X,o=r.Y,s=r.R,a=r.bucketSize;Z=t,null===n&&(n=new z(e,{getX:M,getY:L,bucketSize:a})).postOrder(I);for(var u=e.length,c=0;c<u;c++)R=e[c],P=i[R],D=o[R],F=s[R],n.preOrder(O);return n}function J(t,e,n,r){for(var o=n.sources,s=n.targets,a=n.X,u=n.Y,c=n.R,l=n.fx,d=n.fy,h=n.degrees,f=n.weights,p=r.edgeStrength,g=r.edgeLength,_=0;_<e.length;_++){var v=e[_],y=o[v],m=s[v],b=h[y]+1,x=h[m]+1,E=p*f[v],w=a[m]+l[m]-a[y]-l[y]||i(),S=u[m]+d[m]-u[y]-d[y]||i(),A=w*w+S*S,C=Math.sqrt(A),T=g+c[y]+c[m];if(!(C<=T)){var k=T-C,I=1/Math.min(b,x),O=Math.min(1,t*E*(k*k/A)*I);w*=O,S*=O;var M=x/(x+b);l[y]+=w*M,d[y]+=S*M,l[m]-=w*(1-M),d[m]-=S*(1-M)}}}function Q(t,e,n,r,i){var o=r.X,s=r.Y,a=r.R,u=r.fx,c=r.fy,l=r.bucketSize;if(0===i.elasticity)return n;n||(n=new z(e,{getX:U,getY:V,bucketSize:l})).postOrder(H);for(var d=0;d<e.length;d++)q=e[d],W=o[q]+u[q],Y=s[q]+c[q],X=a[q],n.preOrder(G);return n}function $(t,e,n,r){for(var o=n.pinned,s=n.X,a=n.Y,u=n.fx,c=n.fy,l=r.gravity,d=r.cx,h=r.cy,f=0,p=0,g=e.length,_=0;_<g;_++)f+=s[_],p+=a[_];f=f/g-d,p=p/g-h;for(var v=0;v<g;v++){var y=e[v];o[y]||(s[y]-=f,a[y]-=p)}for(var m=0;m<g;m++){var b=e[m],x=d-s[b]||i(),E=h-a[b]||i(),w=l*t;u[b]+=x*w,c[b]+=E*w}}K.initialize=function(t,e,n){var r=t.length,o=e.X,s=e.Y,a=e.R,c=e.degrees,l=e.pinned,d=e.masses,h=e.nodeIds,f=n.scaling,p=n.defaultRadius,g=n.bucketSize;e.bucketSize=void 0===g?Math.floor(Math.log(r)):g;for(var _,v,y,m,b,x,E=1/0,w=1/0,S=-1/0,A=-1/0,C=Math.PI*(3-Math.sqrt(5)),T=0;T<t.length;T++){var k=t[T],z=k.x,B=k.y,U=k.r,V=k.mass;if(isNaN(z)||isNaN(B)){var j=5*Math.sqrt(T),H=T*C;z=j*Math.cos(H),B=j*Math.sin(H)}o[T]=z,s[T]=B,a[T]=U||p,l[T]=k.pinned?1:0,d[T]=void 0===V?(1+c[T])*f:V,h[T]=T,z<E&&(E=z),B<w&&(w=B),S<z&&(S=z),A<B&&(A=B)}if(1<t.length&&(S-E==0||A-w==0))for(var G=(E+S)/2,q=(w+A)/2,W=0;W<r;W++)if(!l[W]){var Y=5*Math.sqrt(W),X=W*C,K=G+Y*Math.cos(X),J=q+Y*Math.sin(X);(o[W]=K)<E&&(E=K),(s[W]=J)<w&&(w=J),S<K&&(S=K),A<J&&(A=J)}M=function(t){return o[t]},L=function(t){return s[t]},N=function(t){return a[t]},v=(_=e).X,y=_.Y,m=_.R,b=_.masses,x=_.bucketSize,I=function(t){var e,n=0,r=0,i=0,o=0,s=t.data;if(null!==s)if(0!==x){var a=s,c=u(a,M,L,N);n=c.x,r=c.y,i=c.r;for(var l=0;l<a.length;l++)o+=b[a[l]]}else n=v[s],r=y[s],i=m[s],o=b[s];else if(t.left&&t.right){var d=t.left.cx,h=t.left.cy,f=t.right.cx,p=t.right.cy,g=t.left.r,_=t.right.r,E=f-d,w=p-h,S=_-g,A=Math.sqrt(E*E+w*w);n=(d+f+E/A*S)/2,r=(h+p+w/A*S)/2,i=(A+g+_)/2,o=t.left.mass+t.right.mass}else n=(e=t.left||t.right).cx,r=e.cy,i=e.r,o=e.mass;t.cx=n,t.cy=r,t.r=i,t.mass=o},O=function(t,e){var n=t.fx,r=t.fy,o=t.X,s=t.Y,a=t.R,u=t.masses,c=t.bucketSize,l=e.charge,d=e.theta;return e.friction,function(t){var e=0,h=0,f=0,p=P-t.cx||i(),g=D-t.cy||i(),_=p*p+g*g,v=F+t.r,y=t.data;if(null!==y){if(y===R)return!1;if(0!==c)for(var m=y,b=0;b<m.length;b++){var x=m[b];x!==R&&(_=(p=P-o[x]||i())*p+(g=D-s[x]||i())*g,v=F+a[x],_<1&&(_=Math.sqrt(+_)),e=l*u[x],h=Z*e/_,n[R]+=p*h,r[R]+=g*h)}else _<1&&(_=Math.sqrt(+_)),e=l*t.mass,h=Z*e/_,n[R]+=p*h,r[R]+=g*h}else if((f=v/d)*f<_)return _<1&&(_=Math.sqrt(+_)),e=l*t.mass,h=Z*e/_,n[R]+=p*h,r[R]+=g*h,!0}}(e,n)},J.initialize=function(t,e){for(var n=e.edgeIds,r=e.sources,i=e.targets,o=e.degrees,s=e.weights,a=0;a<t.length;a++){var u=t[a],c=u.source,l=u.target,d=u.weight;void 0===d&&(d=1),r[a]=c,i[a]=l,s[a]=d,o[c]++,o[l]++,s[n[a]=a]=void 0===d?1:d}},Q.initialize=function(t,e,n){var r,o,s,a,c,l,d,h,f,p,g,_,v,y,m,b=e.X,x=e.Y,E=e.R;U=function(t){return b[t]},V=function(t){return x[t]},j=function(t){return E[t]},o=(r=e).X,s=r.Y,a=r.R,c=r.bucketSize,H=function(t){var e,n,r,i,l=t.data;if(null!==l)if(0!==c){var d=u(l,U,V,j);e=d.x,n=d.y,r=d.r}else e=o[l],n=s[l],r=a[l];else if(t.left&&t.right){var h=t.left.cx,f=t.left.cy,p=t.right.cx,g=t.right.cy,_=t.left.r,v=t.right.r,y=p-h,m=g-f,b=v-_,x=Math.sqrt(y*y+m*m);e=(h+p+y/x*b)/2,n=(f+g+m/x*b)/2,r=(x+_+v)/2}else(i=t.left||t.right)&&(e=i.cx,n=i.cy,r=i.r);t.cx=e,t.cy=n,t.r=r},d=n,h=(l=e).X,f=l.Y,p=l.R,g=l.fx,_=l.fy,v=l.bucketSize,y=d.elasticity,m=d.margin,G=function(t){var e=t.data;if(null===e){var n=t.cx-W,r=t.cy-Y,o=t.r+X;return o*o<n*n+r*r}if(0!==v)for(var s=e,a=0;a<s.length;a++){var u=s[a];if(q<u){var c=p[u],l=W-h[u]-g[u],d=Y-f[u]-_[u],b=X+c+m,x=l*l+d*d;if(x<b*b){0===l&&(x+=(l=i())*l),0===d&&(x+=(d=i())*d);var E=Math.sqrt(x),w=(b-E)*y/E,S=c/b;g[q]+=l*w*S,_[q]+=d*w*S,g[u]-=l*w*(1-S),_[u]-=d*w*(1-S)}}}else{var A=t.data;if(q<A){var C=p[A],T=W-h[A],k=Y-f[A],I=X+C+m,O=T*T+k*k;if(O<I*I){0===T&&(O+=(T=i())*T),0===k&&(O+=(k=i())*k);var M=Math.sqrt(O),L=(I-M)*y/M,N=C/I;g[q]+=T*L*N,_[q]+=k*L*N,g[A]-=T*L*(1-N),_[A]-=k*L*(1-N)}}}}},$.initialize=function(t,e,n){var r=e.X,i=e.Y,o=n.cx,s=n.cy,a=t.length;if(void 0===o||void 0===s){o=s=0;for(var u=0;u<a;u++)o+=r[u],s+=i[u];o/=a,s/=a}n.cx=o,n.cy=s};var tt=function(){this.ids=[],this.xmin=1/0,this.ymin=1/0,this.xmax=-1/0,this.ymax=-1/0,this.x=0,this.y=0,this.w=0,this.h=0,this.cx=0,this.cy=0,this.radius=0,this.mx=0,this.my=0,this.m=0,this.maxr=0};function et(t,e){return(t+e)*(t+e+1)/2+e}function nt(t,e,n,r){var i=n.X,o=n.Y,s=n.R,a=n.components,c=n.pinned,l=n.degrees,d=n.sources,h=n.targets,f=n.edgeIds,p=r.update,g=r.onUpdate,_=r.placement,v=r.placementOffset,y=r.alignSiblings,m=r.siblingsMinAngle,b=r.siblingsOffset;if(y&&(function(t,e,n){var r=t.edgeIds,i=t.sources,o=t.targets,s=t.pinned,a=t.degrees,u=t.X,c=t.Y,l=t.R;void 0===e&&(e=0),void 0===n&&(n=.5);for(var d={},h={},f=0,p=r;f<p.length;f+=1){var g=p[f],_=i[g],v=o[g];_!==v&&(d[_]=d[_]||{},d[v]=d[v]||{},d[_][v]=!0,d[v][_]=!0)}Object.keys(d).forEach((function(t){var e,n,r=Number(t),i=Object.keys(d[Number(r)]);if(2===i.length){var o=i[0],a=i[1],u=(e=Number(o))<(n=Number(a))?e*n+Math.pow(n-e-1,2)/4:e*n+Math.pow(e-n-1,2)/4;u in h||(h[u]=[Number(a),Number(o)]),s[r]||h[u].push(r)}})),Object.keys(h).forEach((function(t){var r=h[Number(t)],i=r[0],o=r[1],s=r.slice(2);if(1!==s.length){var d=u[i],f=c[i],p=u[o],g=c[o],_=a[i],v=.25+.5*_/(_+a[o]),y=d+(p-d)*v,m=f+(g-f)*v,b=-(g-f),x=p-d,E=Math.sqrt(Math.pow(d-p,2)+Math.pow(f-g,2));b=-2*b/E,x=-2*x/E;var w=Math.acos(b/Math.sqrt(b*b+x*x));0<e&&(w<e||w>Math.PI-e&&w<=Math.PI?(b=2*Math.cos(Math.PI-e),x=2*Math.sin(Math.PI-e)):(w>2*Math.PI-e||w>=Math.PI&&w<Math.PI+e)&&(b=2*Math.cos(e),x=2*Math.sin(e)));var S=0,A=1;s.sort((function(t,e){return l[e]-l[t]}));var C=0,T=0,k=Math.max(l[s[0]],l[s[1]])/2;s.length%2==1&&(S=1,y-=b*k,m-=x*k);for(var I=1+n,O=0;O<s.length;O++){var M=(S+O)%2,L=s[O],N=2<=O?l[L]:k,R=(M?C:T)+N;u[L]=y+b*A*R,c[L]=m+x*A*R,M?C+=N*I:T+=N*I,A=-A}}}))}({X:i,Y:o,R:s,degrees:l,pinned:c,sources:d,targets:h,edgeIds:f},m,b),p(t,i,o)),_){var x=function(t,e,n,r){for(var i=0,o=[],s=0,a=r;s<a.length;s+=1){for(var u=a[s],c=new tt,l=0,d=u;l<d.length;l+=1){var h=d[l];c.add(h,t[h],e[h],n[h])}o.push(c.measure()),u.length>o[i].ids.length&&(i=o.length-1)}return{boxes:o,biggest:i}}(i,o,s,a),E=x.boxes,w=x.biggest;if("spiral"===_)!function(t,e,n,r,i){void 0===e&&(e=20);for(var o=0,s=t;o<s.length;o+=1){var a=s[o],c=u(a.ids,(function(t){return n[t]}),(function(t){return r[t]}),(function(t){return i[t]})),l=c.x,d=c.y,h=c.r;a.cx=l,a.cy=d,a.radius=h+e}for(var f=t.slice().sort((function(t,e){return t.radius-e.radius})),p=f.map((function(t){return{x:t.cx,y:t.cy,r:t.radius}})),g=f.pop(),_=3*Math.PI/2,v=g.radius,y=2*Math.PI,m=g.cx,b=g.cy,x=[g],E=function(){var t=f[f.length-1],e=v+t.radius,n=m+Math.cos(_)*e,r=b+Math.sin(_)*e;x.some((function(e){var i=e.cx-n,o=e.cy-r;return Math.sqrt(i*i+o*o)<e.radius+t.radius}))?v+=1:(t.x=n-t.w/2,t.y=r-t.h/2,t.cx=n,t.cy=r,p[f.length-1].x=n,p[f.length-1].y=r,x.push(f.pop()),_+=(2*t.radius+1)/e*1%y)};0!==f.length;)E()}(E,v,i,o,s);else{if("box"!==_)return;!function(t,e){void 0===e&&(e=1),function(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],a=0,u=0,c=0,l=t;c<l.length;c+=1)for(var d=l[c],h=s.length-1;0<=h;h--){var f=s[h];if(!(d.w>f.w||d.h>f.h)){if(d.x=f.x,d.y=f.y,u=Math.max(u,d.y+d.h),a=Math.max(a,d.x+d.w),d.w===f.w&&d.h===f.h){var p=s.pop();h<s.length&&(s[h]=p)}else d.h===f.h?(f.x+=d.w,f.w-=d.w):(d.w===f.w||s.push({x:f.x+d.w,y:f.y,w:f.w-d.w,h:d.h}),f.y+=d.h,f.h-=d.h);break}}}(t.map((function(t){return t.w+=t.maxr+e,t.h+=t.maxr+e,t})).sort((function(t,e){return t.w*t.h-e.w*e.h})))}(E,v)}for(var S=E[w].xmin-E[w].x,A=E[w].ymin-E[w].y,C=0,T=E;C<T.length;C+=1)for(var k=T[C],I=k.xmin,O=k.ymin,M=I-k.x-S,L=O-k.y-A,N=0,R=k.ids;N<R.length;N+=1){var P=R[N];i[P]-=M,o[P]-=L}p(t,i,o),g()}}function rt(t,e,r,i,o,s){var a,u=r.X,c=r.Y,l=r.R,d=r.degrees,h=r.nodeIds,f=r.edgeIds,p=r.layers,g=r.layer,_=r.cluster,v=r.masses,y=r.weights,m=r.sources,b=r.targets,x=i.cx,E=i.cy,w=i.nextTick,S=i.cancelTick,A=i.update,C=i.onUpdate,T=i.batch,k=(i.maxIterations,i.steps),I=i.minMovement,O=p.slice(),M=0;function L(){S(a),A(t,u,c),C(),s(M)}for(var N={},R=0;R<e.length;R++)N[Number(e[R].id)||R]=R;for(var P=new Map,D=0;D<f.length;D++){var F=f[D];P.set(et(m[F],b[F]),F)}for(var z=0;z<p.length;z++){for(var B=p[z],U=z,V=0;V<B.length;V++){var j=B[V],H=_[j];-1!==H&&(v[H]+=v[j])}for(var G=0;G<e.length;G++){var q=e[G],W=Number(q.id)||G,Y=q.source,X=q.target,Z=y[N[W]];if(g[Y]===U&&g[X]===U){var K=_[Y],J=_[X];if(K!==J){var Q=P.get(et(K,J));void 0!==Q&&(y[Q]+=Z)}}}}h.length=0,f.length=0;var $,tt,nt=1,rt=1-Math.pow(.1,1/k/2),it=(nt-.1)/k,ot=.5;return a=setTimeout((function r(){var i=o(nt+=(0-nt)*rt,h,f),s=nt<=ot||i<I;if(0===M||s){var p=O.pop();if(p){$&&(tt=$.reduce((function(t,e){return Math.max(t,x-u[e],E-c[e])}),0)),h.push.apply(h,p);for(var g=0;g<p.length;g++){var y=p[g],m=_[y];if(-1!==m){var b=1<d[y]?2:1,S=l[m]+l[y];v[m]-=v[y],u[y]=u[m]+b*S*(2*n()-1),c[y]=c[m]+b*S*(2*n()-1)}else $&&(u[y]=x+2*tt*(1-2*n()),c[y]=E+2*tt*(1-2*n()))}$=p;for(var k=h.reduce((function(t,e){return t[e]=!0,t}),{}),R=f.length=0;R<e.length;R++){var P=e[R],D=P.source,F=P.target,z=P.id;k[D]&&k[F]&&f.push(N[Number(z)])}s=!1,nt=0===O.length?.2:.1+2*it,ot=.1}}M%T==0&&(A(t,u,c),C()),++M>=1/0||s?L():a=w(r)})),{done:!1,stop:function(){return L(),this},get iterations(){return M}}}function it(t,e,n){var r=n.X,i=n.Y,o=n.fx,s=n.fy,a=n.pinned,u=n.layer,c=(n.masses,n.layers),l=n.surfaces,d=n.movements;d.fill(0);for(var h=0,f=t.length,p=1/0,g=1/0,_=-1/0,v=-1/0,y=0;y<f;y++){var m=t[y],b=o[m]*=e,x=s[m]*=e;if(a[m])o[m]=s[m]=0;else{var E=u[m],w=b,S=x,A=r[m],C=i[m];if(1e4<w||1e4<S){var T=Math.sqrt(w*w+S*S);S/=T,w/=T}r[m]+=w,i[m]+=S;var k=Math.sqrt(w*w+S*S);A<p&&(p=A),C<g&&(g=C),p<A&&(_=A),g<C&&(v=C),d[E-1]+=k,h+=E*k}}for(var I=_-p,O=v-g,M=0;M<c.length;M++){for(var L=c[M].length,N=1/0,R=1/0,P=-1/0,D=-1/0,F=0;F<L;F++){var z=r[F],B=i[F];z<N&&(N=z),B<R&&(R=B),P<z&&(P=z),D<B&&(D=B)}var U=P-N,V=D-R,j=Math.max(1,Math.sqrt(Math.pow(U,2)+Math.pow(V,2)));l[M]=j;var H=d[M]/L;d[M]=H/(I*O)}return h}tt.prototype.add=function(t,e,n,r){this.ids.push(t),e-r<this.xmin&&(this.xmin=e-r),n-r<this.ymin&&(this.ymin=n-r),e+r>this.xmax&&(this.xmax=e+r),n+r>this.ymax&&(this.ymax=n+r),r>this.maxr&&(this.maxr=r),this.mx+=r*e,this.my+=r*n,this.m+=r},tt.prototype.measure=function(t){return void 0===t&&(t=0),this.w=this.xmax-this.xmin+2*t,this.h=this.ymax-this.ymin+2*t,this.cx=this.mx/this.m,this.cy=this.my/this.m,this.x=this.xmin,this.y=this.ymin,this.radius=Math.sqrt(this.w*this.w+this.h*this.h)/2,this};var ot=0,st="undefined"==typeof window,at="undefined"!=typeof performance&&performance.now?performance:Date,ut=st?function(t){var e=at.now(),n=Math.max(0,16-(e-ot)),r=setTimeout((function(){return t(e+n)}),n);return ot=e+n,r}:window.requestAnimationFrame,ct=st?function(t){return clearTimeout(t)}:window.cancelAnimationFrame;function lt(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];i.x=e[r],i.y=n[r]}}function dt(){}function ht(t){for(var e in void 0===t&&(t={}),this.onUpdate=dt,this.update=lt,this.nextTick=ut,this.cancelTick=ct,this.onEnd=dt,this.charge=10,this.maxIterations=300,this.minMovement=.1,this.edgeLength=30,this.edgeStrength=3,this.friction=.1,this.elasticity=.9,this.margin=1,this.cx=void 0,this.cy=void 0,this.gravity=.01,this.theta=.34,this.batch=1,this.inertia=.9,this.integrator=0,this.multilevel=!1,this.placement="none",this.placementOffset=10,this.alignSiblings=!1,this.bucketSize=void 0,this.siblingsMinAngle=0,this.siblingsOffset=.15,this.steps=300,this.scaling=1,this.defaultRadius=1,this.autoStop=ft,"autoStop"in t?t.autoStop&&("boolean"==typeof t.autoStop?t.autoStop=ft:t.autoStop=Object.assign({},t.autoStop,ft)):t.steps,t)void 0!==t[e]&&(this[e]=t[e])}var ft={movementRatio:.1,surfaceRatio:.0025};function pt(t){for(var e=0,n=this.length;e<n;e++)this[e]=t;return this}var gt=Int32Array.prototype.fill||pt,_t=Uint8Array.prototype.fill||pt;function vt(t){this.bucketSize=0;var e=t.nodes.length,n=t.edges.length;r(e+n),this.X=new Array(e),this.Y=new Array(e),this.R=new Array(e),this.fx=new Float32Array(e),this.fy=new Float32Array(e),this.vx=new Float32Array(e),this.vy=new Float32Array(e),this.pinned=new Uint8Array(e),this.masses=new Float32Array(e),this.weights=new Float32Array(n),this.lengths=new Float32Array(n),this.sources=new Uint16Array(n),this.targets=new Uint16Array(n),this.degrees=new Uint32Array(e),this.layer=new Uint32Array(e),this.parent=new Int32Array(e),this.cluster=new Int32Array(e),this.component=new Uint16Array(e),this.components=[],this.layers=[],this.nodeIds=new Array(e),this.edgeIds=new Array(n),function(t,e,n){!function(t,e,n){for(var r=n.sources,i=n.targets,o=n.degrees,s=n.nodeIds,a=n.edgeIds,u={},c=0;c<t.length;c++)u[c]=s[c]=c;for(var l=0;l<e.length;l++){var d=e[l],h=d.source,f=d.target,p=u[h],g=u[f];a[l]=l,r[l]=p,i[l]=g,o[p]++,o[g]++}}(t,e,n),function(t){for(var e=t.nodeIds,n=t.edgeIds,r=t.sources,i=t.targets,o=t.degrees,s=t.layer,a=t.layers,u=t.component,c=t.components,l=t.cluster,d=t.parent,h=0,f=1,p=new Uint32Array(e.length),g=0;g<e.length;g++)p[g]=o[g];for(var _=new Array(e.length),v=0;v<n.length;v++){var y=n[v],m=r[y],b=i[y];_[m]=_[m]||[],_[b]=_[b]||[],_[m].push(b),_[b].push(m)}var x=new Uint8Array(e.length),E=new Uint8Array(e.length);gt.call(d,-1);for(var w=0,S=0;S<e.length;S++)if(0===x[S]){for(var A=[S];0!==A.length;){var C=A.pop();0===x[C]&&(A.push.apply(A,_[C]),x[C]=1,u[C]=w)}w++}for(var T=new Array(e.length),k=0;k<e.length;k++)s[k]=0,T[k]=k;for(;0!==T.length;){for(var I=[],O=[],M=0;M<T.length;M++)p[T[M]]<=h&&(I.push(M),O.push(T[M]));for(var L=0;L<O.length;L++){var N=O[L];E[N]=h,s[N]=f;var R=_[N];if(R)for(var P=0;P<R.length;P++)p[R[P]]--}for(var D=0;D<O.length;D++){var F=O[D],z=_[F];if(z)for(var B=0;B<z.length;B++){var U=z[B],V=s[U];if(void 0===V||f<V){d[F]=U;break}}}I.reverse();for(var j=0;j<I.length;j++)T.splice(I[j],1);if(f+=1,0<T.length){for(var H=1/0,G=0;G<T.length;G++){var q=p[T[G]];q<H&&(H=q)}h+1<=H&&(h=H,f=1)}}_t.call(x,0);for(var W=0;W<e.length;W++){var Y=e[W],X=s[Y];if(-1===d[Y]||s[d[Y]]===X){var Z=[Y];for(_t.call(x,0);0!==Z.length;){var K=Z.pop();if(!x[K]){if(s[K]>X){d[Y]=K;break}var J=_[K];x[K]=1,J&&Z.push.apply(Z,J)}}}}for(var Q=0;Q<e.length;Q++){var $=e[Q],tt=u[$];c[tt]=c[tt]||[],c[tt].push($);var et=s[$]-1;a[et]=a[et]||[],a[et].push($),l[$]=d[$]}}(n)}(t.nodes,t.edges,this),this.movements=new Array(this.layers.length).fill(0),this.surfaces=new Array(this.layers.length).fill(0),this.movementsPrev=new Array(this.layers.length).fill(0),this.surfacesPrev=new Array(this.layers.length).fill(0)}function yt(t){this.promise=new Promise(t)}yt.prototype.then=function(t){return this.promise.then(t)},yt.prototype.stop=function(){return this.simulation.stop(),this},yt.prototype.iterations=function(){return this.simulation.iterations()};var mt={euler:function(t,e,n){for(var r=n.X,i=n.Y,o=n.fx,s=n.fy,a=n.vx,u=n.vy,c=n.masses,l=n.pinned,d=0,h=0,f=t.length,p=0;p<f;p++){var g=t[p],_=c[g],v=o[g]/_,y=s[g]/_;a[g]+=1/8*v,u[g]+=1/8*y;var m=.2*a[g]*(1/8)+.5*v*(1/8)*(1/8),b=.2*u[g]*(1/8)+.5*y*(1/8)*(1/8);o[g]=s[g]=0,l[g]||(r[g]+=m,i[g]+=b,d+=Math.abs(m)*_,h+=Math.abs(b)*_)}return(d*d+h*h)/f},verlet:it,leapfrog:function(t,e,n){for(var r=n.X,i=n.Y,o=n.fx,s=n.fy,a=n.vx,u=n.vy,c=n.pinned,l=n.masses,d=t.length,h=0,f=0;f<d;f++){var p=t[f],g=l[p],_=o[p]/g,v=s[p]/g,y=a[p]+_,m=u[p]+v,b=+y,x=+m;1e4<b&&(b=.1),1e4<x&&(x=.1),a[p]=e*(y+a[p])/2,u[p]=e*(m+u[p])/2,o[p]=s[p]=0,c[p]||(r[p]+=b,i[p]+=x),h+=.5*(b*b+x*x)}return h}};function bt(t,e){var n,i,o=this;function s(t){return void 0===t&&(t={nodes:[],edges:[]}),n=t.nodes,i=t.edges,r(et(n.length,i.length)),new vt(t)}function a(t){return void 0===t&&(t={}),new ht(t)}void 0===e&&(e={});var u=s(t),c=a(e);function l(t,e,n){return f&&(f.destroy(),f=null),e.length<=1?0:(f=K(t,e,f,u),J(t,n,u,c),0!==c.elasticity&&Q(0,e,f,u,c),$(t,e,u,c),h(e,c.inertia,u))}J.initialize(i,u),K.initialize(n,u,c),Q.initialize(n,u,c),$.initialize(n,u,c);var d,h=mt[c.integrator]||it,f=null;return{setOptions:function(t){return void 0===t&&(t={}),c=a(t),o},setGraph:function(e){var n=e.nodes,r=e.edges;return u=s(t),J.initialize(r,u),K.initialize(n,u,c),Q.initialize(n,u,c),$.initialize(n,u,c),o},start:function(){return d=(c.multilevel?rt:function(t,e,n,r,i,o){function s(){k=!0,y(a),w(),o(A)}var a,u=n.X,c=n.Y,l=n.nodeIds,d=n.edgeIds,h=n.layers,f=n.movements,p=n.movementsPrev,g=n.surfaces,_=n.surfacesPrev,v=r.nextTick,y=r.cancelTick,m=r.batch,b=r.steps,x=r.minMovement,E=r.update,w=r.onUpdate,S=r.autoStop,A=0,C=1,T=1-Math.pow(.05,1/b),k=!1,I=!1,O=function(){var e=i(C+=(.001-C)*T,l,d),n=h.length,r=!1,o=!1;if(S){r=o=!0;for(var y=S.movementRatio,M=S.surfaceRatio,L=0;L<n;L++)r&&Math.abs(1-g[L]/_[L])>M&&(r=!1),o&&Math.abs(1-f[L]/p[L])>y&&(o=!1)}r&&o&&!I&&(T=1-Math.pow(.001,1/Math.max(10,A)),I=!0);var N=k||C<.05||0!==e&&e<=x;if(A%m==0&&(E(t,u,c),w()),++A>=b||N)return s();for(var R=0;R<n;R++)p[R]=f[R],_[R]=g[R];a=v(O)};return a=setTimeout(O),{done:!1,stop:function(){return s(),this},get iterations(){return A}}})(n,i,u,c,l,(function(t){d.done||nt(n,0,u,c),c.onEnd(t),d.done=!0})),this},iterations:function(){return d.iterations},data:function(){return u},stop:function(){return d&&d.stop(),this},step:function(t){return void 0===t&&(t=1),l(t,u.nodeIds,u.edgeIds),c.update(n,u.X,u.Y),this}}}return bt.run=function(t,e){var n,r=new yt((function(r){e.onEnd=r,n=bt(t,e).start()}));return r.simulation=n,r.stop=function(){return n.stop(),r},r.iterations=function(){return n.iterations()},r},bt}().apply(this,arguments)}var Hm={imports:{force:jm},configure:function(t,e){var n=e.graph,r=t.nodes._indexes,i=n.getNodeAttribute("x").getMultiple(r),o=n.getNodeAttribute("y").getMultiple(r),s=n.getNodeAttribute("radius").getMultiple(r),a=n.getNodeAttribute("layoutable").getMultiple(r),u=t.edges,c=[],l=[],d={};void 0===t.edgeStrength&&(t.edgeStrength=.75),null==t.gravity&&(t.gravity=.05),null==t.siblingsOffset&&(t.siblingsOffset=0),null==t.theta&&(t.theta=.62),t.autoStop=!!t.autoStop,t.alignSiblings=!!t.alignSiblings;for(var h=t.radiusRatio||1.25,f=0;f<t.nodes._indexes.length;f++){var p=t.nodes._indexes[f];d[p]=f,c.push({id:f,x:i[f],y:o[f],r:s[f]*h,pinned:!a[f]})}u.forEach((function(t){var e=d[t.getSource()._index],n=d[t.getTarget()._index];e!==n&&void 0!==e&&void 0!==n&&l.push({source:e,target:n})}));var g=$(w({},t));return delete g.nodes,delete g.edges,{graph:{nodes:c,edges:l},options:g,indexes:t.nodes._indexes,done:!1,x:i,y:o}},update:function(t,e){if(!e.simulation){e.graph=t.graph,e.options=t.options,e.indexes=t.indexes,t.options.nextTick=function(t){return t()},t.options.update=function(t,n,r){e.x=n,e.y=r},t.options.onEnd=function(){return e.done=!0};var n=jm(t.graph,t.options).start(),r=n.data(),i=r.X,o=r.Y;e.simulation=n,e.x=i,e.y=o}return{graph:e.graph,indexes:e.indexes,x:e.x,y:e.y}},context:function(){return{done:!1,graph:null,x:null,y:null,indexes:null}},isRunning:function(t){return!t.done},onSync:function(t){return{indexes:t.indexes,x:t.x,y:t.y}}};function Gm(t,e,n){var r=e.duration,i=void 0===r?0:r,o=e.margin,s=void 0===o?5:o,a=e.referenceNodes,u=e.nodes,c=a;!c||c instanceof gr||(c=t.getNodes(c));var l=c||u.inverse(),d=l.getPosition().map((function(t){return[t.x,t.y]})),h=n,f=u.getBoundingBox(),p=l.getBoundingBox();p.pad(p.maxScaledSize);var g,_,v,y,m,b,x,E=Vd(h.map((function(t){return t.x})),h.map((function(t){return t.y})),u.getAttribute("radius")),w=E[0],S=E[1],A=E[2]+p.maxScaledSize+s,C=0,T=0;if(function(t,e,n,r){for(var i=0;i<t.length;i++){var o=t[i],s=o[0],a=o[1],u=Math.abs(s-e),c=Math.abs(a-n);if(u+c<=r)return 1;if(!(r<u||r<c)&&u*u+c*c<=r*r)return 1}}(d,w,S,A))if(l.size<=3){if(xc(w,S,E[2],p.minX,p.minY,p.maxX,p.maxY)){var k=function(t,e,n){for(var r,i=Ca(n.cx,n.cy,t,e,n.minX,n.minY,n.maxX,n.maxY),o=1/0,s={x:n.maxX,y:e},a=0,u=i;a<u.length;a++){var c=u[a];(r=Ds(t,e,c.x,c.y))<o&&(o=r,s=c)}return s}(w,S,p);g=Ds(p.cx,p.cy,k.x,k.y);var I=(m=p.cx,b=p.cy,{x:m+(x=(g+A)/g)*(k.x-m),y:b+x*(k.y-b)});C=I.x-w,T=I.y-S}}else{var O=new Vh(d.slice()).triangulate(),M=3<d.length?Hh(d):(v=(_=p).bottomLeft(),y=_.topRight(),[[v.x,v.y],[v.x,y.y],[y.x,y.y],[y.x,v.y]]),L=Gh(l.getPosition(),10,A,O,M);if(k=function(t,e,n){for(var r,i,o=1/0,s=0,a=e.length;s<a;s++){var u=e[s],c=e[(s+1)%a],l=Oa(t[0],t[1],u[0],u[1],c[0],c[1]);l<o&&(o=l,r=u,i=c)}return function(t,e,n,r,i,o,s){var a=Ma(t,e,n,r,i,o),u=-(r-o),c=n-i,l=Math.sqrt(u*u+c*c);return u/=l,c/=l,[a.x-s*u,a.y-s*c]}(t[0],t[1],r[0],r[1],i[0],i[1],n)}([w,S],M,A),0<L.length){for(var N=Math.pow(w-k[0],2)+Math.pow(S-k[1],2),R=0,P=L;R<P.length;R++){var D=P[R];C=w-D[0],T=S-D[1],(g=C*C+T*T)<N&&(N=g,k=D.slice(0,2))}C=k[0]-w,T=k[1]-S}else C=k[0]-f.cx,T=k[1]-f.cy}var F={layoutName:"incremental",ids:u.getId(),positions:{before:h,current:h}};if(C||T){var z=h.map((function(t){return t.x+=C,t.y+=T,t}));if(e.locate){"boolean"==typeof e.locate&&(e.locate={});var B=t.modules.locate.layoutDataBoundingBox({x:d.map((function(t){return t[0]})).concat(z.map((function(t){return t.x}))),y:d.map((function(t){return t[1]})).concat(z.map((function(t){return t.y}))),indexes:t.getNodes()._indexes}),U=t.modules.locate.computeConfigForBounds(B,e.locate);t.modules.camera.setView(U,{duration:i,easing:e.locate.easing,ignoreZoomLimits:!0})}return F.positions.current=z,u.setAttributes(z,i).then((function(){return F}))}return u.setAttributes(h,i).then((function(){return F}))}function qm(t,e,n){var r=W(e);return r.duration=0,r.dryRun=!0,r.locate=!1,delete r.incremental,n(r).then((function(n){return Gm(t,e,n.positions.current)}))}function Wm(t,e,n){var r=e.nodes,i=e.duration,o=e.centralNode,s=r,a=s.reduce((function(t,e){return t[e._index]=!0,t}),{}),u=t.getNodes();if(e.focusOnGroupShape)return n({nodes:s,duration:0}).then((function(){var e=s.concat(o),r=e.getAttribute("layoutable");return e.setAttributes({layoutable:!1}),n({nodes:t.getNodes(),duration:i}).then((function(){return e.setAttributes(r)}))}));var c=W(e);return delete c.centralNode,c.incremental=!1,c.nodes=u,c.nodeMass=function(t,e){return(e+1)*(a[t._index]?1:2)},n(c)}function Ym(t,e,n){var r=Yf(e.modules.graph,t);if("boolean"!=typeof r.incremental&&"margin"in r.incremental&&!isFinite(r.incremental.margin))throw new Error("Incremental layout: margin has to be a positive number");var i=W(r);return"boolean"!=typeof r.incremental&&(i.margin=r.incremental.margin,i.referenceNodes=r.incremental.referenceNodes),(i.centralNode&&!i.centralNode.getAttribute("layoutable")?Wm:qm)(e,i,n)}var Xm={configure:function(t,e){var n,r=e.graph,i=e.camera,o=(e.graphics,t.nodes._indexes),s=t.edges._indexes,a={},u={},c=o.length,l=s.length,d=r.getObjectList(!0),h=r.getObjectList(!1);(t.nodes||t.edges)&&(delete(t=W(t)).nodes,delete t.edges);var f=r.getNodeAttribute("innerStroke.width").getMultiple(o),p=r.getNodeAttribute("outerStroke.width").getMultiple(o),g=r.degrees(o),_=r.getNodeAttribute("x").getMultiple(o),v=r.getNodeAttribute("y").getMultiple(o),y=r.getNodeAttribute("radius").getMultiple(o),m=r.nodeList(o).getAttribute("layoutable"),b="function"==typeof t.nodeMass?t.nodeMass:function(t,e,n){return e+1};delete t.nodeMass;var x="function"==typeof t.edgeWeight?t.edgeWeight:function(t){return 1};delete t.edgeWeight,isFinite(t.scalingRatio)||delete t.scalingRatio;var E=o.reduce((function(t,e,n){return m[n]||(t[e]=!0),t}),{}),w=0,S=0,A=0,C=i.getZoom();for(n=0;n<o.length;++n){var T=o[n],k=_[n],I=v[n],O=y[n]+(f[n]+p[n])/C;a[T]={id:T,x:k,y:I,degree:g[n],size:O,pinned:!!E[T],mass:b(d.get(T),g[n],n)},A=Math.max(O,A)}if(1<c)for(n=0;n<c;n++){var M=a[o[n]];w+=M.x,S+=M.y}var L={x:w/=c,y:S/=c},N=r.edgeList(s),R=N.getSource()._indexes,P=N.getTarget()._indexes;for(n=0;n<l;n++){var D=s[n],F=R[n],z=P[n];a[F]&&a[z]&&(u[D]={source:F,target:z},u[D].weight=x(h.get(D)))}return{nodes:a,edges:u,maxSize:A,config:$(t),barycentre:L}},context:function(){return{}},update:function(t,e){var n,r,i,o;e.W?n=e.W:(n={ppn:10,ppe:3,ppr:9,MAX_SUBDIVISION_RETRIES:3,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:100,strongGravityMode:!0,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:10,iterationsPerRender:10,maxIterations:1e3,avgDistanceThreshold:.01,autoStop:!0,alignNodeSiblings:!0,nodeSiblingsScale:5,nodeSiblingsAngleMin:0}},e.W=n,i=(r=t).config,o=function(t,e){var r,i,o,s,a=t.nodes,u=t.edges,c=t.maxSize,l=Object.keys(t.nodes),d=Object.keys(t.edges),h=l.length*n.ppn,f=d.length*n.ppe,p={},g=Math.pow(10,Math.log(Math.max(c,1))-6),_=g/2,v=Math.random,y=e.randomizeFactor||1;s="locally"===e.randomize?function(t){return t+v()*y}:"globally"===e.randomize?function(t){return v()*y}:function(t){return t+v()*g-_};var m=new Float32Array(h),b=new Float32Array(f);for(r=i=0,o=l.length;r<o;r++){var x=l[r],E=a[x],w=E.x,S=E.y;E.pinned||(w=s(w),S=s(S)),p[x]=i,m[i]=w,m[i+1]=S,m[i+2]=0,m[i+3]=0,m[i+4]=0,m[i+5]=0,m[i+6]=E.mass,m[i+7]=1,m[i+8]=E.size,m[i+9]=E.pinned||0,i+=n.ppn}for(r=i=0,o=d.length;r<o;r++){var A=u[x=d[r]];b[i]=p[A.source],b[i+1]=p[A.target],b[i+2]=A.weight||0,i+=n.ppe}return{nodes:m,edges:b}}(r,i),e.NodeMatrix=o.nodes,e.EdgeMatrix=o.edges,n.nodesLength=e.NodeMatrix.length,n.edgesLength=e.EdgeMatrix.length,n.settings=function(t,e){for(var n in t)e[n]=t[n];return e}(t.config,n.settings),e.nodes=t.nodes,e.edges=t.edges,e.barycentre=t.barycentre);var s,a=e.NodeMatrix,u=e.EdgeMatrix;function c(){var t,e,r,i,o,c,l,d,h,f,p,g,_,v,y,m,b;for(r=0;r<n.nodesLength;r+=n.ppn)a[r+4]=a[r+2],a[r+5]=a[r+3],a[r+2]=0,a[r+3]=0;if(n.settings.outboundAttractionDistribution){for(r=h=0;r<n.nodesLength;r+=n.ppn)h+=a[r+6];h/=n.nodesLength}if(n.settings.barnesHutOptimize){var x,E,w,S,A=1/0,C=-1/0,T=1/0,k=-1/0;for(s=[],r=0;r<n.nodesLength;r+=n.ppn)A=Math.min(A,a[r+0]),C=Math.max(C,a[r+0]),T=Math.min(T,a[r+1]),k=Math.max(k,a[r+1]);var I=C-A,O=k-T;for(O<I?k=(T-=(I-O)/2)+I:C=(A-=(O-I)/2)+O,s[0]=-1,s[1]=(A+C)/2,s[2]=(T+k)/2,s[3]=Math.max(C-A,k-T),s[4]=-1,s[5]=-1,s[6]=0,s[7]=0,t=1,r=s[8]=0;r<n.nodesLength;r+=n.ppn)for(e=0,w=n.MAX_SUBDIVISION_RETRIES;;){if(!(0<=s[e+5])){if(s[e+0]<0){s[e+0]=r;break}if(s[e+5]=t*n.ppr,l=s[e+3]/2,d=s[e+5],s[d+0]=-1,s[d+1]=s[e+1]-l,s[d+2]=s[e+2]-l,s[d+3]=l,s[d+4]=d+n.ppr,s[d+5]=-1,s[d+6]=0,s[d+7]=0,s[d+8]=0,d+=n.ppr,s[d+0]=-1,s[d+1]=s[e+1]-l,s[d+2]=s[e+2]+l,s[d+3]=l,s[d+4]=d+n.ppr,s[d+5]=-1,s[d+6]=0,s[d+7]=0,s[d+8]=0,d+=n.ppr,s[d+0]=-1,s[d+1]=s[e+1]+l,s[d+2]=s[e+2]-l,s[d+3]=l,s[d+4]=d+n.ppr,s[d+5]=-1,s[d+6]=0,s[d+7]=0,s[d+8]=0,d+=n.ppr,s[d+0]=-1,s[d+1]=s[e+1]+l,s[d+2]=s[e+2]+l,s[d+3]=l,s[d+4]=s[e+4],s[d+5]=-1,s[d+6]=0,s[d+7]=0,s[d+8]=0,t+=4,x=a[s[S=e+0]+0]<s[e+1]?a[s[S]+1]<s[e+2]?s[e+5]:s[e+5]+n.ppr:a[s[S]+1]<s[e+2]?s[e+5]+2*n.ppr:s[e+5]+3*n.ppr,s[e+6]=a[s[S]+6],s[e+7]=a[s[S]+0],s[e+8]=a[s[S]+1],s[x+0]=s[e+0],s[e+0]=-1,x===(E=a[r+0]<s[e+1]?a[r+1]<s[e+2]?s[e+5]:s[e+5]+n.ppr:a[r+1]<s[e+2]?s[e+5]+2*n.ppr:s[e+5]+3*n.ppr)){if(w--){e=x;continue}w=n.MAX_SUBDIVISION_RETRIES;break}s[E+0]=r;break}x=a[r+0]<s[e+1]?a[r+1]<s[e+2]?s[e+5]:s[e+5]+n.ppr:a[r+1]<s[e+2]?s[e+5]+2*n.ppr:s[e+5]+3*n.ppr,s[e+7]=(s[e+7]*s[e+6]+a[r+0]*a[r+6])/(s[e+6]+a[r+6]),s[e+8]=(s[e+8]*s[e+6]+a[r+1]*a[r+6])/(s[e+6]+a[r+6]),s[e+6]+=a[r+6],e=x}}if(n.settings.barnesHutOptimize)for(f=n.settings.scalingRatio,r=0;r<n.nodesLength;r+=n.ppn)for(e=0;;)if(0<=s[e+5]){if(m=Math.sqrt((a[r+0]-s[e+7])*(a[r+0]-s[e+7])+(a[r+1]-s[e+8])*(a[r+1]-s[e+8])),2*s[e+3]/m<n.settings.barnesHutTheta){if(p=a[r+0]-s[e+7],g=a[r+1]-s[e+8],n.settings.adjustSizes?0<m?(b=f*a[r+6]*s[e+6]/m/m,a[r+2]+=p*b,a[r+3]+=g*b):m<0&&(b=-f*a[r+6]*s[e+6]/m,a[r+2]+=p*b,a[r+3]+=g*b):0<m&&(b=f*a[r+6]*s[e+6]/m/m,a[r+2]+=p*b,a[r+3]+=g*b),s[e+4]<0)break;e=s[e+4];continue}e=s[e+5]}else{if(0<=s[e+0]&&s[e+0]!==r&&(p=a[r+0]-a[s[e+0]+0],g=a[r+1]-a[s[e+0]+1],m=Math.sqrt(p*p+g*g),n.settings.adjustSizes?0<m?(b=f*a[r+6]*a[s[e+0]+6]/m/m,a[r+2]+=p*b,a[r+3]+=g*b):m<0&&(b=-f*a[r+6]*a[s[e+0]+6]/m,a[r+2]+=p*b,a[r+3]+=g*b):0<m&&(b=f*a[r+6]*a[s[e+0]+6]/m/m,a[r+2]+=p*b,a[r+3]+=g*b)),s[e+4]<0)break;e=s[e+4]}else for(f=n.settings.scalingRatio,i=0;i<n.nodesLength;i+=n.ppn)for(o=0;o<i;o+=n.ppn)p=a[i+0]-a[o+0],g=a[i+1]-a[o+1],n.settings.adjustSizes?0<(m=Math.sqrt(p*p+g*g)-a[i+8]-a[o+8])?(b=f*a[i+6]*a[o+6]/m/m,a[i+2]+=p*b,a[i+3]+=g*b,a[o+2]+=p*b,a[o+3]+=g*b):m<0&&(b=100*f*a[i+6]*a[o+6],a[i+2]+=p*b,a[i+3]+=g*b,a[o+2]-=p*b,a[o+3]-=g*b):0<(m=Math.sqrt(p*p+g*g))&&(b=f*a[i+6]*a[o+6]/m/m,a[i+2]+=p*b,a[i+3]+=g*b,a[o+2]-=p*b,a[o+3]-=g*b);for(d=n.settings.gravity/n.settings.scalingRatio,f=n.settings.scalingRatio,r=0;r<n.nodesLength;r+=n.ppn)p=a[r+(b=0)],g=a[r+1],m=Math.sqrt(p*p+g*g),n.settings.strongGravityMode?0<m&&(b=f*a[r+6]*d):0<m&&(b=f*a[r+6]*d/m),a[r+2]-=p*b,a[r+3]-=g*b;for(f=+(n.settings.outboundAttractionDistribution?h:1),c=0;c<n.edgesLength;c+=n.ppe)i=u[c+0],o=u[c+1],l=u[c+2],y=Math.pow(l,n.settings.edgeWeightInfluence),p=a[i+0]-a[o+0],g=a[i+1]-a[o+1],n.settings.adjustSizes?(m=Math.sqrt(p*p+g*g)-a[i+8]-a[o+8],n.settings.linLogMode?n.settings.outboundAttractionDistribution?0<m&&(b=-f*y*Math.log(1+m)/m/a[i+6]):0<m&&(b=-f*y*Math.log(1+m)/m):n.settings.outboundAttractionDistribution?0<m&&(b=-f*y/a[i+6]):0<m&&(b=-f*y)):(m=Math.sqrt(p*p+g*g),n.settings.linLogMode?n.settings.outboundAttractionDistribution?0<m&&(b=-f*y*Math.log(1+m)/m/a[i+6]):0<m&&(b=-f*y*Math.log(1+m)/m):b=n.settings.outboundAttractionDistribution?(m=1,-f*y/a[i+6]):(m=1,-f*y)),0<m&&(a[i+2]+=p*b,a[i+3]+=g*b,a[o+2]-=p*b,a[o+3]-=g*b);var M,L,N,R,P=0;if(n.settings.adjustSizes)for(r=0;r<n.nodesLength;r+=n.ppn)a[r+9]||((M=Math.sqrt(a[r+2]*a[r+2]+a[r+3]*a[r+3]))>n.maxForce&&(a[r+2]=a[r+2]*n.maxForce/M,a[r+3]=a[r+3]*n.maxForce/M),L=a[r+6]*Math.sqrt((a[r+4]-a[r+2])*(a[r+4]-a[r+2])+(a[r+5]-a[r+3])*(a[r+5]-a[r+3])),N=Math.sqrt((a[r+4]+a[r+2])*(a[r+4]+a[r+2])+(a[r+5]+a[r+3])*(a[r+5]+a[r+3]))/2,R=.1*Math.log(1+N)/(1+Math.sqrt(L)),_=a[r+0],v=a[r+1],a[r+0]=a[r+0]+a[r+2]*(R/n.settings.slowDown),a[r+1]=a[r+1]+a[r+3]*(R/n.settings.slowDown),p=a[r+0],g=a[r+1],P+=m=Math.sqrt((p-_)*(p-_)+(g-v)*(g-v)));else for(r=0;r<n.nodesLength;r+=n.ppn)a[r+9]||(L=a[r+6]*Math.sqrt((a[r+4]-a[r+2])*(a[r+4]-a[r+2])+(a[r+5]-a[r+3])*(a[r+5]-a[r+3])),N=Math.sqrt((a[r+4]+a[r+2])*(a[r+4]+a[r+2])+(a[r+5]+a[r+3])*(a[r+5]+a[r+3]))/2,R=a[r+7]*Math.log(1+N)/(1+Math.sqrt(L)),a[r+7]=Math.min(1,Math.sqrt(R*(a[r+2]*a[r+2]+a[r+3]*a[r+3])/(1+Math.sqrt(L)))),_=a[r+0],v=a[r+1],a[r+0]=a[r+0]+a[r+2]*(R/n.settings.slowDown),a[r+1]=a[r+1]+a[r+3]*(R/n.settings.slowDown),p=a[r+0],g=a[r+1],P+=m=Math.sqrt((p-_)*(p-_)+(g-v)*(g-v)));if(n.iterations++,n.settings.autoStop&&(n.converged=n.iterations>n.settings.maxIterations||P/n.nodesLength<n.settings.avgDistanceThreshold,n.converged&&n.settings.alignNodeSiblings)){var D,F,z={},B={};for(c=0;c<n.edgesLength;c+=n.ppe)(i=u[c+0])!==(o=u[c+1])&&(z[i]=z[i]||{},z[o]=z[o]||{},z[i][o]=!0,z[o][i]=!0);Object.keys(z).forEach((function(t){var e=~~t;2==(F=Object.keys(z[e])).length&&((D=F[0]+";"+F[1])in B||(D=F[1]+";"+F[0],B[D]||(B[D]=[~~F[1],~~F[0]])),B[D].push(e))}));var U,V,j,H,G,q,W,Y,X,Z,K,J,Q,$,tt=n.settings.nodeSiblingsAngleMin;Object.keys(B).forEach((function(t){if(V=B[t].shift(),j=B[t].shift(),1!=(U=B[t].filter((function(t){return!a[t+9]}))).length){var e,r,i,o,s,u,c,l,d,h,f,p;if(q=a[V+0],W=a[V+1],Y=a[j+0],X=a[j+1],H=Object.keys(z[V]).length,G=Object.keys(z[j]).length,K={x:(e=q)+(Y-e)*(i=.5*(H/(H+G)-0)/1+.25),y:(r=W)+(X-r)*i},J={xi:-((c=X)-(s=W)),yi:(u=Y)-(o=q),xiPrime:c-s,yiPrime:-(u-o)},l=Y-q,d=X-W,Z=Math.sqrt(l*l+d*d),p=Q={x:((h=J).xiPrime-h.xi)/(f=Z),y:(h.yiPrime-h.yi)/f},$=Math.acos(p.x/Math.sqrt(p.x*p.x+p.y*p.y)),2*tt>Math.PI)throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");0<tt&&($<tt||$>Math.PI-tt&&$<=Math.PI?Q={x:2*Math.cos(Math.PI-tt),y:2*Math.sin(Math.PI-tt)}:($>2*Math.PI-tt||$>=Math.PI&&$<Math.PI+tt)&&(Q={x:2*Math.cos(tt),y:2*Math.sin(tt)}));var g=0,_=1,v=1;U.length%2==1&&(v=0,g=1);for(var y=0;y<U.length;y++)a[U[y]+0]=K.x+_*Q.x*v*(g||2<=y?n.settings.nodeSiblingsScale:2*n.settings.nodeSiblingsScale/3),a[U[y]+1]=K.y+_*Q.y*v*(g||2<=y?n.settings.nodeSiblingsScale:2*n.settings.nodeSiblingsScale/3),_=-_,v+=(y+g)%2}}))}}return function(){if(n.settings.autoStop)for(;!n.converged;)c();else for(var t=0===n.iterations?n.settings.startingIterations:n.iterations+n.settings.iterationsPerRender;n.iterations!==t;)c();return{nodes:function(t){for(var e=Object.keys(t),r={},i=0;i<a.length;i+=n.ppn){var o=e[i/n.ppn];r[o]={id:o,x:a[i+0],y:a[i+1],pinned:a[i+9]}}return r}(e.nodes),barycentre:e.barycentre}}()},isRunning:function(t){return!t.W.settings.autoStop},onSync:function(t,e){var n,r,i,o,s,a,u,c,l=t.nodes,d=t.barycentre,h=e.graph,f=Object.keys(l),p=f.length,g=0,_=0,v=new Array(p),y=new Array(p),m=new Array(p),b=new Array(p),x=h.getAttributes(!0,["x","y"]),E=x[0],w=x[1];for(n=0;n<p;n++)i=l[r=f[n]],c=parseInt(r),v[n]=c,b[n]=i.pinned,s=i.pinned?(o=E.get(c),w.get(c)):(o=i.x,i.y),g+=y[n]=o,_+=m[n]=s;for(a=g/p-d.x,u=_/p-d.y,n=0;n<p;n++)b[n]||(y[n]-=a,m[n]-=u);return{indexes:v,x:y,y:m}}},Zm=function(t){return t.reduce((function(t,e){return t[e]=!0,t}),{})};function Km(t,e){for(var n=[t],r=Zm(n),i=[t];n.length;)for(var o=0,s=e[n.shift()];o<s.length;o+=1){var a=s[o];r[a]||(r[a]=!0,i.push(a),n.push(a))}return i}function Jm(t){return t.reduce((function(t,e){return t[e.source]=t[e.source]||[],t[e.target]=t[e.target]||[],t[e.source].push(""+e.target),t[e.target].push(""+e.source),t}),{})}function Qm(t,e){var n=Math.max(Math.min(e||10,100),1)/1e3;return function(e,r){var i=Math.abs(e.layer-r.layer),o=[r,e].reduce((function(t,e){return t+(ob(e)?1:n)}),0);return i?2*i*t:o*t}}function $m(t){return t.reduce((function(t,e){return t+function(t,e){for(var n=[],r=arguments.length-2;0<r--;)n[r]=arguments[r+2];for(var i=e,o=0,s=n;o<s.length;o+=1){var a=s[o];if(!i[a])return t;i=i[a]}return i}(ob(e)?.5:0,e,"data","radius")}),0)/t.length}function tb(t,e,n){var r=n||Jm(e||[]);return t.filter((function(t){return!(t.id in r)}))}function eb(t,e){var n=Zm(e);return t.filter((function(t){return!(t in n)}))}function nb(t,e){t.forEach((function(t,n){t.forEach((function(t,r,i){e(t,r,i,n)}))}))}function rb(t){return Object.keys(t).map((function(e){return t[e]}))}function ib(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),{})}function ob(t){return!!t.data}function sb(t,e){return{id:t,data:e,children:[]}}function ab(t,e){e.forEach((function(t){return t._median=[]})),t.forEach((function(t,e){t.children.filter((function(e){return e.layer>t.layer})).forEach((function(t){t._median.push(e)}))})),e.forEach((function(t,e){t.children.forEach((function(){return t._median.push(e)}))})),e.forEach((function(t){return t._median=function(t){if(t.sort((function(t,e){return t-e})),0===t.length)return 0;var e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2}(t._median)||0})),e.sort((function(t,e){return t._median-e._median})),e.forEach((function(t){return delete t._median}))}var ub="left",cb="right",lb=Number.POSITIVE_INFINITY;function db(t){for(var e=0,n=["up","down"];e<n.length;e+=1)t(n[e])}function hb(t){for(var e=0,n=[ub,cb];e<n.length;e+=1)t(n[e])}function fb(){return function(t,e){var n,r,i,o,s,a,u=(n={},nb(t,(function(t){n[t.id]||(n[t.id]={successors:[],ancestors:[]});for(var e=0,r=t.children;e<r.length;e+=1){var i=r[e];n[i.id]||(n[i.id]={successors:[],ancestors:[]}),i.layer>t.layer&&(n[t.id].successors.push(i),n[i.id].ancestors.push(t)),i.layer<t.layer&&(n[t.id].ancestors.push(i),n[i.id].successors.push(t))}})),{getSuccessors:function(t){return n[t.id].successors},getAncestors:function(t){return n[t.id].ancestors}}),c=u.getSuccessors,l=u.getAncestors,d=(r={},nb(t,(function(t,e){r[t.id]=e})),r),h=(o=c,s=function(t){var e=t.id;return d[e]},a=(i=t).length,i.reduce((function(t,e,n){var r=t.prevLayer,i=t.conflicts;if(!n||a-2<n)return{prevLayer:r,conflicts:i};var u=0,c=e.length,l=e[c-1];return e.forEach((function(t,n){var r=function(t){if(ob(t))return o(t).find(ob)}(t),a=r?s(r):c-1;if(r||t===l)for(var d=function(){var t=e[u];o(t).forEach((function(e){var n=s(e);(n<0||a<n)&&(i[t.id]=i[t.id]||{},i[t.id][e.id]=!0)})),u++};u<=n;)d()})),{prevLayer:e,conflicts:i}}),{prevLayer:i[0],conflicts:{}}).conflicts),f={};db((function(n){var r="up"===n?t:[].concat(t).reverse();hb((function(t){t===cb&&(r=r.map((function(t){return[].concat(t).reverse()})));var i,o,s,a,u,d,p=e,g=(o=h,s="up"===n?l:c,a={},u={},d={},nb(i=r,(function(t,e){a[t.id]=t.id,u[t.id]=t.id,d[t.id]=e})),i.forEach((function(t){var e=-1;t.forEach((function(t){var n,r,i=s(t).sort((function(t,e){return d[t.id]-d[e.id]}));if(i.length)for(var c=(i.length-1)/2,l=0,h=[Math.floor(c),Math.ceil(c)];l<h.length;l+=1){var f=i[h[l]];u[t.id]===t.id&&(r=f,!(o[(n=t).id]&&o[n.id][r.id]||o[r.id]&&o[r.id][n.id])&&e<d[f.id]&&(u[f.id]=t.id,a[t.id]=a[f.id],u[t.id]=a[t.id],e=d[f.id]))}}))})),{roots:a,aligns:u}),_=function(t,e,n,r){var i={},o={},s={},a={},u={},c={},l={};return nb(t,(function(t,e,n){i[t.id]=t,o[t.id]=lb,s[t.id]=e,u[t.id]=n[e-1]||t,c[t.id]=t,l[t.id]=0})),t.forEach((function(t){t.filter((function(t){return e[t.id]===t.id})).forEach((function(t){return function t(s,d){if(void 0===d&&(d=0),null==a[s.id]){a[s.id]=0;for(var h=s,f=!1;!f;){if(null!=u[h.id]){var p=c[e[u[h.id].id]];if(l[p.id]>350||3500<d)return;t(p,d+1),l[p.id]++,i[s.id]===s&&(i[s.id]=i[p.id]),i[s.id]!==i[p.id]?o[i[p.id].id]=Math.min(o[i[p.id].id],a[s.id]-a[p.id]-r(s,u[s.id])):a[s.id]=Math.max(a[s.id],a[p.id]+r(s,u[s.id]))}f=(h=c[n[h.id]])===s}}}(t)}))})),nb(t,(function(t){a[t.id]=a[e[t.id]];var n=o[i[e[t.id]].id];t.id===e[t.id]&&isFinite(n)&&(a[t.id]+=n)})),a}(r,g.roots,g.aligns,p);t===cb&&(_=ib(_,(function(t){return-t}))),f[n+t]=_}))}));var p,g,_,v,y,m,b,x=(p=f,g=Object.keys(p).reduce((function(t,e){var n=t.alignment,r=t.value,i=rb(p[e]),o=Math.max.apply(Math,i)-Math.min.apply(Math,i);return r<=o?{alignment:n,value:r}:{alignment:e,value:o}}),{alignment:null,value:lb}).alignment,p[g]);_=f,y=rb(v=x),m=Math.min.apply(Math,y),b=Math.max.apply(Math,y),db((function(t){hb((function(e){var n=t+e,r=_[n];if(r!==v){var i=rb(r),o=e===ub?m-Math.min.apply(Math,i):b-Math.max.apply(Math,i);o&&(_[n]=ib(r,(function(t){return t+o})))}}))}));var E,w=ib((E=f).upleft,(function(t,e){var n=[];return db((function(t){hb((function(r){var i=t+r;n.push(E[i][e])}))})),n.sort((function(t,e){return t-e})),(n[1]+n[2])/2}));return nb(t,(function(t){t.x=w[t.id]})),t}}function pb(){return function(t,e){var n=-lb;return t.forEach((function(t){var r=t.filter(ob);if(1===r.length)r[0].x=.5;else{r.reduce((function(t,n){return n.x=void 0===t?0:t.x+e(t,n),n}),void 0);var i=r[r.length-1].x;n=Math.max(n,i),r.forEach((function(t){return t.x/=i}))}})),n=Math.max(n,1),nb(t,(function(t){return t.x*=n})),t}}function gb(t,e,n,r){this.feasible=n,this.evaluation=e,this.bounded=r,this._tableau=t}var _b=gb;function vb(t,e,n,r,i){_b.call(this,t,e,n,r),this.iter=i}gb.prototype.generateSolutionSet=function(){for(var t={},e=this._tableau,n=e.varIndexByRow,r=e.variablesPerIndex,i=e.matrix,o=e.rhsColumn,s=e.height-1,a=Math.round(1/e.precision),u=1;u<=s;u+=1){var c=r[n[u]];if(void 0!==c&&!0!==c.isSlack){var l=i[u][o];t[c.id]=Math.round(l*a)/a}}return t};var yb=vb;function mb(t){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=t||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}vb.prototype=Object.create(_b.prototype),vb.constructor=vb;var bb=mb;function xb(t,e){this.priority=t,this.reducedCosts=new Array(e);for(var n=0;n<e;n+=1)this.reducedCosts[n]=0}mb.prototype.solve=function(){return 0<this.model.getNumberOfIntegerVariables()?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()},xb.prototype.copy=function(){var t=new xb(this.priority,this.reducedCosts.length);return t.reducedCosts=this.reducedCosts.slice(),t},mb.prototype.setOptionalObjective=function(t,e,n){var r=this.objectivesByPriority[t];void 0===r&&(r=new xb(t,Math.max(this.width,e+1)),this.objectivesByPriority[t]=r,this.optionalObjectives.push(r),this.optionalObjectives.sort((function(t,e){return t.priority-e.priority}))),r.reducedCosts[e]=n},mb.prototype.initialize=function(t,e,n,r){this.variables=n,this.unrestrictedVars=r,this.width=t,this.height=e;for(var i=new Array(t),o=0;o<t;o++)i[o]=0;this.matrix=new Array(e);for(var s=0;s<e;s++)this.matrix[s]=i.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=t+e-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},mb.prototype._resetMatrix=function(){var t,e,n=this.model.variables,r=this.model.constraints,i=n.length,o=r.length,s=this.matrix[0],a=!0===this.model.isMinimization?-1:1;for(t=0;t<i;t+=1){var u=n[t],c=u.priority,l=a*u.cost;0===c?s[t+1]=l:this.setOptionalObjective(c,t+1,l),e=n[t].index,this.rowByVarIndex[e]=-1,this.colByVarIndex[e]=t+1,this.varIndexByCol[t+1]=e}for(var d=1,h=0;h<o;h+=1){var f,p,g=r[h],_=g.index;this.rowByVarIndex[_]=d,this.colByVarIndex[_]=-1,this.varIndexByRow[d]=_;var v=g.terms,y=v.length,m=this.matrix[d++];if(g.isUpperBound){for(f=0;f<y;f+=1)p=v[f],m[this.colByVarIndex[p.variable.index]]=p.coefficient;m[0]=g.rhs}else{for(f=0;f<y;f+=1)p=v[f],m[this.colByVarIndex[p.variable.index]]=-p.coefficient;m[0]=-g.rhs}}},mb.prototype.setModel=function(t){var e=(this.model=t).nVariables+1,n=t.nConstraints+1;return this.initialize(e,n,t.variables,t.unrestrictedVariables),this._resetMatrix(),this},mb.prototype.getNewElementIndex=function(){if(0<this.availableIndexes.length)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},mb.prototype.density=function(){for(var t=0,e=this.matrix,n=0;n<this.height;n++)for(var r=e[n],i=0;i<this.width;i++)0!==r[i]&&(t+=1);return t/(this.height*this.width)},mb.prototype.setEvaluation=function(){var t=Math.round(1/this.precision),e=this.matrix[this.costRowIndex][this.rhsColumn];this.evaluation=Math.round(e*t)/t},mb.prototype.getSolution=function(){var t=!0===this.model.isMinimization?this.evaluation:-this.evaluation;return 0<this.model.getNumberOfIntegerVariables()?new yb(this,t,this.feasible,this.bounded,this.branchAndCutIterations):new _b(this,t,this.feasible,this.bounded)},bb.prototype.simplex=function(){return this.bounded=!0,this.phase1(),!0===this.feasible&&this.phase2(),this},bb.prototype.phase1=function(){for(var t=this.model.checkForCycles,e=[],n=this.matrix,r=this.rhsColumn,i=this.width-1,o=this.height-1,s=0;;){for(var a=0,u=-this.precision,c=1;c<=o;c++)if(!0!==this.unrestrictedVars[this.varIndexByRow[c]]){var l=n[c][r];l<u&&(u=l,a=c)}if(0===a)return this.feasible=!0,s;for(var d=0,h=-1/0,f=n[0],p=n[a],g=1;g<=i;g++){var _=p[g];if(!(-this.precision<_&&_<this.precision)&&(!0===this.unrestrictedVars[this.varIndexByCol[g]]||_<-this.precision)){var v=-f[g]/_;h<v&&(h=v,d=g)}}if(0===d)return this.feasible=!1,s;if(t){e.push([this.varIndexByRow[a],this.varIndexByCol[d]]);var y=this.checkForCycles(e);if(0<y.length)throw console.log("Cycle in phase 1"),console.log("Start :",y[0]),console.log("Length :",y[1]),new Error}this.pivot(a,d),s+=1}},bb.prototype.phase2=function(){for(var t,e,n=this.model.checkForCycles,r=[],i=this.matrix,o=this.rhsColumn,s=this.width-1,a=this.height-1,u=this.precision,c=this.optionalObjectives.length,l=null,d=0;;){var h=i[this.costRowIndex];0<c&&(l=[]);for(var f=0,p=u,g=!1,_=1;_<=s;_++)t=h[_],e=!0===this.unrestrictedVars[this.varIndexByCol[_]],0<c&&-u<t&&t<u?l.push(_):e&&t<0?p<-t&&(p=-t,f=_,g=!0):p<t&&(p=t,f=_,g=!1);if(0<c)for(var v=0;0===f&&0<l.length&&v<c;){var y=[],m=this.optionalObjectives[v].reducedCosts;p=u;for(var b=0;b<l.length;b++)t=m[_=l[b]],e=!0===this.unrestrictedVars[this.varIndexByCol[_]],-u<t&&t<u?y.push(_):e&&t<0?p<-t&&(p=-t,f=_,g=!0):p<t&&(p=t,f=_,g=!1);l=y,v+=1}if(0===f)return this.setEvaluation(),d;for(var x=0,E=1/0,w=(this.varIndexByRow,1);w<=a;w++){var S=i[w],A=S[o],C=S[f];if(!(-u<C&&C<u)){if(0<C&&A<u&&-u<A){E=0,x=w;break}var T=g?-A/C:A/C;u<T&&T<E&&(E=T,x=w)}}if(E===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[f],d;if(n){r.push([this.varIndexByRow[x],this.varIndexByCol[f]]);var k=this.checkForCycles(r);if(0<k.length)throw console.log("Cycle in phase 2"),console.log("Start :",k[0]),console.log("Length :",k[1]),new Error}this.pivot(x,f,!0),d+=1}};var Eb=[];function wb(t,e,n,r){this.id=t,this.cost=e,this.index=n,this.value=0,this.priority=r}function Sb(t,e,n,r){wb.call(this,t,e,n,r)}function Ab(t,e){wb.call(this,t,0,e,0)}function Cb(t,e){this.variable=t,this.coefficient=e}function Tb(t,e,n){return 0===n||"required"===n?null:(e=e||1,n=n||1,!1===t.isMinimization&&(e=-e),t.addVariable(e,"r"+t.relaxationIndex++,!1,!1,n))}function kb(t,e,n,r){this.slack=new Ab("s"+n,n),this.index=n,this.model=r,this.rhs=t,this.isUpperBound=e,this.terms=[],this.termsByVarIndex={},this.relaxation=null}function Ib(t,e){this.upperBound=t,this.lowerBound=e,this.model=t.model,this.rhs=t.rhs,this.relaxation=null}bb.prototype.pivot=function(t,e){var n=this.matrix,r=n[t][e],i=this.height-1,o=this.width-1,s=this.varIndexByRow[t],a=this.varIndexByCol[e];this.varIndexByRow[t]=a,this.varIndexByCol[e]=s,this.rowByVarIndex[a]=t,this.rowByVarIndex[s]=-1,this.colByVarIndex[a]=-1,this.colByVarIndex[s]=e;for(var u,c,l,d=n[t],h=0,f=0;f<=o;f++)0!==d[f]&&(d[f]/=r,Eb[h]=f,h+=1);d[e]=1/r,this.precision;for(var p=0;p<=i;p++){var g=n[p];if(p!==t&&0!==(u=g[e])){for(c=0;c<h;c++)0!==(l=d[f=Eb[c]])&&(g[f]=g[f]-u*l);g[e]=-u/r}}var _=this.optionalObjectives.length;if(0<_)for(var v=0;v<_;v+=1){var y=this.optionalObjectives[v].reducedCosts;if(0!==(u=y[e])){for(c=0;c<h;c++)0!==(l=d[f=Eb[c]])&&(y[f]=y[f]-u*l);y[e]=-u/r}}},bb.prototype.checkForCycles=function(t){for(var e=0;e<t.length-1;e++)for(var n=e+1;n<t.length;n++){var r=t[e],i=t[n];if(r[0]===i[0]&&r[1]===i[1]){if(n-e>t.length-n)break;for(var o=!0,s=1;s<n-e;s++){var a=t[e+s],u=t[n+s];if(a[0]!==u[0]||a[1]!==u[1]){o=!1;break}}if(o)return[e,n-e]}}return[]},Ab.prototype.isSlack=Sb.prototype.isInteger=!0,kb.prototype.addTerm=function(t,e){var n=e.index,r=this.termsByVarIndex[n];if(void 0===r)r=new Cb(e,t),this.termsByVarIndex[n]=r,this.terms.push(r),!0===this.isUpperBound&&(t=-t),this.model.updateConstraintCoefficient(this,e,t);else{var i=r.coefficient+t;this.setVariableCoefficient(i,e)}return this},kb.prototype.removeTerm=function(t){return this},kb.prototype.setRightHandSide=function(t){if(t!==this.rhs){var e=t-this.rhs;!0===this.isUpperBound&&(e=-e),this.rhs=t,this.model.updateRightHandSide(this,e)}return this},kb.prototype.setVariableCoefficient=function(t,e){var n=e.index;if(-1!==n){var r=this.termsByVarIndex[n];if(void 0===r)this.addTerm(t,e);else if(t!==r.coefficient){var i=t-r.coefficient;!0===this.isUpperBound&&(i=-i),r.coefficient=t,this.model.updateConstraintCoefficient(this,e,i)}return this}console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.")},kb.prototype.relax=function(t,e){this.relaxation=Tb(this.model,t,e),this._relax(this.relaxation)},kb.prototype._relax=function(t){null!==t&&(this.isUpperBound?this.setVariableCoefficient(-1,t):this.setVariableCoefficient(1,t))},Ib.prototype.isEquality=!0,Ib.prototype.addTerm=function(t,e){return this.upperBound.addTerm(t,e),this.lowerBound.addTerm(t,e),this},Ib.prototype.removeTerm=function(t){return this.upperBound.removeTerm(t),this.lowerBound.removeTerm(t),this},Ib.prototype.setRightHandSide=function(t){this.upperBound.setRightHandSide(t),this.lowerBound.setRightHandSide(t),this.rhs=t},Ib.prototype.relax=function(t,e){this.relaxation=Tb(this.model,t,e),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)};var Ob={Constraint:kb,Variable:wb,IntegerVariable:Sb,SlackVariable:Ab,Equality:Ib,Term:Cb},Mb=Ob.SlackVariable;function Lb(t,e){this.index=t,this.value=e}bb.prototype.addCutConstraints=function(t){for(var e,n=t.length,r=this.height,i=r+n,o=r;o<i;o+=1)void 0===this.matrix[o]&&(this.matrix[o]=this.matrix[o-1].slice());this.height=i,this.nVars=this.width+this.height-2;for(var s=this.width-1,a=0;a<n;a+=1){var u=t[a],c=r+a,l="min"===u.type?-1:1,d=u.varIndex,h=this.rowByVarIndex[d],f=this.matrix[c];if(-1===h){for(f[this.rhsColumn]=l*u.value,e=1;e<=s;e+=1)f[e]=0;f[this.colByVarIndex[d]]=l}else{var p=this.matrix[h],g=p[this.rhsColumn];for(f[this.rhsColumn]=l*(u.value-g),e=1;e<=s;e+=1)f[e]=-l*p[e]}var _=this.getNewElementIndex();this.varIndexByRow[c]=_,this.rowByVarIndex[_]=c,this.colByVarIndex[_]=-1,this.variablesPerIndex[_]=new Mb("s"+_,_),this.nVars+=1}},bb.prototype._addLowerBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var e=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var n=e[t][this.rhsColumn],r=n-Math.floor(n);if(r<this.precision||1-this.precision<r)return!1;var i=this.height;e[i]=e[i-1].slice(),this.height+=1,this.nVars+=1;var o=this.getNewElementIndex();this.varIndexByRow[i]=o,this.rowByVarIndex[o]=i,this.colByVarIndex[o]=-1,this.variablesPerIndex[o]=new Mb("s"+o,o),e[i][this.rhsColumn]=Math.floor(n);for(var s=1;s<this.varIndexByCol.length;s+=1)if(this.variablesPerIndex[this.varIndexByCol[s]].isInteger){var a=e[t][s],u=Math.floor(a)+Math.max(0,a-Math.floor(a)-r)/(1-r);e[i][s]=u}else e[i][s]=Math.min(0,e[t][s]/(1-r));for(var c=0;c<this.width;c+=1)e[i][c]-=e[t][c];return!0},bb.prototype._addUpperBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var e=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var n=e[t][this.rhsColumn],r=n-Math.floor(n);if(r<this.precision||1-this.precision<r)return!1;var i=this.height;e[i]=e[i-1].slice(),this.height+=1,this.nVars+=1;var o=this.getNewElementIndex();this.varIndexByRow[i]=o,this.rowByVarIndex[o]=i,this.colByVarIndex[o]=-1,this.variablesPerIndex[o]=new Mb("s"+o,o),e[i][this.rhsColumn]=-r;for(var s=1;s<this.varIndexByCol.length;s+=1){var a=this.variablesPerIndex[this.varIndexByCol[s]],u=e[t][s],c=u-Math.floor(u);a.isInteger?e[i][s]=c<=r?-c:-(1-c)*r/c:e[i][s]=0<=u?-u:u*r/(1-r)}return!0},bb.prototype.applyMIRCuts=function(){for(var t=this.height,e=0;e<t;e+=1)this._addUpperBoundMIRCut(e);for(e=0;e<t;e+=1)this._addLowerBoundMIRCut(e)},bb.prototype._putInBase=function(t){var e=this.rowByVarIndex[t];if(-1===e){for(var n=this.colByVarIndex[t],r=1;r<this.height;r+=1){var i=this.matrix[r][n];if(i<-this.precision||this.precision<i){e=r;break}}this.pivot(e,n)}return e},bb.prototype._takeOutOfBase=function(t){var e=this.colByVarIndex[t];if(-1===e){for(var n=this.rowByVarIndex[t],r=this.matrix[n],i=1;i<this.height;i+=1){var o=r[i];if(o<-this.precision||this.precision<o){e=i;break}}this.pivot(n,e)}return e},bb.prototype.updateVariableValues=function(){for(var t=this.variables.length,e=Math.round(1/this.precision),n=0;n<t;n+=1){var r=this.variables[n],i=r.index,o=this.rowByVarIndex[i];if(-1===o)r.value=0;else{var s=this.matrix[o][this.rhsColumn];r.value=Math.round(s*e)/e}}},bb.prototype.updateRightHandSide=function(t,e){var n=this.height-1,r=this.rowByVarIndex[t.index];if(-1===r){for(var i=this.colByVarIndex[t.index],o=0;o<=n;o+=1){var s=this.matrix[o];s[this.rhsColumn]-=e*s[i]}var a=this.optionalObjectives.length;if(0<a)for(var u=0;u<a;u+=1){var c=this.optionalObjectives[u].reducedCosts;c[this.rhsColumn]-=e*c[i]}}else this.matrix[r][this.rhsColumn]-=e},bb.prototype.updateConstraintCoefficient=function(t,e,n){if(t.index===e.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var r=this._putInBase(t.index),i=this.colByVarIndex[e.index];if(-1===i)for(var o=this.rowByVarIndex[e.index],s=0;s<this.width;s+=1)this.matrix[r][s]+=n*this.matrix[o][s];else this.matrix[r][i]-=n},bb.prototype.updateCost=function(t,e){var n=t.index,r=this.width-1,i=this.colByVarIndex[n];if(-1===i){var o,s=this.matrix[this.rowByVarIndex[n]];if(0===t.priority){var a=this.matrix[0];for(o=0;o<=r;o+=1)a[o]+=e*s[o]}else{var u=this.objectivesByPriority[t.priority].reducedCosts;for(o=0;o<=r;o+=1)u[o]+=e*s[o]}}else this.matrix[0][i]-=e},bb.prototype.addConstraint=function(t){var e=t.isUpperBound?1:-1,n=this.height,r=this.matrix[n];void 0===r&&(r=this.matrix[0].slice(),this.matrix[n]=r);for(var i=this.width-1,o=0;o<=i;o+=1)r[o]=0;r[this.rhsColumn]=e*t.rhs;for(var s=t.terms,a=s.length,u=0;u<a;u+=1){var c=s[u],l=c.coefficient,d=c.variable.index,h=this.rowByVarIndex[d];if(-1===h)r[this.colByVarIndex[d]]+=e*l;else{var f=this.matrix[h];for(f[this.rhsColumn],o=0;o<=i;o+=1)r[o]-=e*l*f[o]}}var p=t.index;this.varIndexByRow[n]=p,this.rowByVarIndex[p]=n,this.colByVarIndex[p]=-1,this.height+=1},bb.prototype.removeConstraint=function(t){var e=t.index,n=this.height-1,r=this._putInBase(e),i=this.matrix[n];this.matrix[n]=this.matrix[r],this.matrix[r]=i,this.varIndexByRow[r]=this.varIndexByRow[n],this.varIndexByRow[n]=-1,this.rowByVarIndex[e]=-1,this.availableIndexes[this.availableIndexes.length]=e,t.slack.index=-1,--this.height},bb.prototype.addVariable=function(t){var e=this.height-1,n=this.width,r=!0===this.model.isMinimization?-t.cost:t.cost,i=t.priority,o=this.optionalObjectives.length;if(0<o)for(var s=0;s<o;s+=1)this.optionalObjectives[s].reducedCosts[n]=0;0===i?this.matrix[0][n]=r:(this.setOptionalObjective(i,n,r),this.matrix[0][n]=0);for(var a=1;a<=e;a+=1)this.matrix[a][n]=0;var u=t.index;this.varIndexByCol[n]=u,this.rowByVarIndex[u]=-1,this.colByVarIndex[u]=n,this.width+=1},bb.prototype.removeVariable=function(t){var e=t.index,n=this._takeOutOfBase(e),r=this.width-1;if(n!==r){for(var i=this.height-1,o=0;o<=i;o+=1){var s=this.matrix[o];s[n]=s[r]}var a=this.optionalObjectives.length;if(0<a)for(var u=0;u<a;u+=1){var c=this.optionalObjectives[u].reducedCosts;c[n]=c[r]}var l=this.varIndexByCol[r];this.varIndexByCol[n]=l,this.colByVarIndex[l]=n}this.varIndexByCol[r]=-1,this.colByVarIndex[e]=-1,this.availableIndexes[this.availableIndexes.length]=e,t.index=-1,--this.width},bb.prototype.log=function(t,e){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var n,r,i,o,s,a,u,c,l,d,h="",f=[" "];for(r=1;r<this.width;r+=1)s=this.varIndexByCol[r],u=" ",c="\t",5<(a=void 0===(o=this.variablesPerIndex[s])?"c"+s:o.id).length?u+=" ":c+="\t",f[r]=u,h+=c+a;console.log(h);var p=this.matrix[this.costRowIndex],g="\t";for(n=1;n<this.width;n+=1)g+="\t",g+=f[n],g+=p[n].toFixed(5);for(g+="\t"+f[0]+p[0].toFixed(5),console.log(g+"\tZ"),i=1;i<this.height;i+=1){for(l=this.matrix[i],d="\t",r=1;r<this.width;r+=1)d+="\t"+f[r]+l[r].toFixed(5);d+="\t"+f[0]+l[0].toFixed(5),s=this.varIndexByRow[i],a=void 0===(o=this.variablesPerIndex[s])?"c"+s:o.id,console.log(d+"\t"+a)}console.log("");var _=this.optionalObjectives.length;if(0<_){console.log("    Optional objectives:");for(var v=0;v<_;v+=1){var y=this.optionalObjectives[v].reducedCosts,m="";for(n=1;n<this.width;n+=1)m+=y[n]<0?"":" ",m+=f[n],m+=y[n].toFixed(5);m+=(y[0]<0?"":" ")+f[0]+y[0].toFixed(5),console.log(m+" z"+v)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},bb.prototype.copy=function(){var t=new bb(this.precision);t.width=this.width,t.height=this.height,t.nVars=this.nVars,t.model=this.model,t.variables=this.variables,t.variablesPerIndex=this.variablesPerIndex,t.unrestrictedVars=this.unrestrictedVars,t.lastElementIndex=this.lastElementIndex,t.varIndexByRow=this.varIndexByRow.slice(),t.varIndexByCol=this.varIndexByCol.slice(),t.rowByVarIndex=this.rowByVarIndex.slice(),t.colByVarIndex=this.colByVarIndex.slice(),t.availableIndexes=this.availableIndexes.slice();for(var e=[],n=0;n<this.optionalObjectives.length;n++)e[n]=this.optionalObjectives[n].copy();t.optionalObjectives=e;for(var r=this.matrix,i=new Array(this.height),o=0;o<this.height;o++)i[o]=r[o].slice();return t.matrix=i,t},bb.prototype.save=function(){this.savedState=this.copy()},bb.prototype.restore=function(){if(null!==this.savedState){var t,e,n=this.savedState,r=n.matrix;for(this.nVars=n.nVars,this.model=n.model,this.variables=n.variables,this.variablesPerIndex=n.variablesPerIndex,this.unrestrictedVars=n.unrestrictedVars,this.lastElementIndex=n.lastElementIndex,this.width=n.width,this.height=n.height,t=0;t<this.height;t+=1){var i=r[t],o=this.matrix[t];for(e=0;e<this.width;e+=1)o[e]=i[e]}var s=n.varIndexByRow;for(e=0;e<this.height;e+=1)this.varIndexByRow[e]=s[e];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var a=n.varIndexByCol;for(t=0;t<this.width;t+=1)this.varIndexByCol[t]=a[t];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var u=n.rowByVarIndex,c=n.colByVarIndex,l=0;l<this.nVars;l+=1)this.rowByVarIndex[l]=u[l],this.colByVarIndex[l]=c[l];if(0<n.optionalObjectives.length&&0<this.optionalObjectives.length){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var d=0;d<n.optionalObjectives.length;d++){var h=n.optionalObjectives[d].copy();this.optionalObjectives[d]=h,this.optionalObjectivePerPriority[h.priority]=h}}}},bb.prototype.getMostFractionalVar=function(){for(var t=0,e=null,n=null,r=this.model.integerVariables,i=r.length,o=0;o<i;o++){var s=r[o].index,a=this.rowByVarIndex[s];if(-1!==a){var u=this.matrix[a][this.rhsColumn],c=Math.abs(u-Math.round(u));t<c&&(t=c,e=s,n=u)}}return new Lb(e,n)},bb.prototype.getFractionalVarWithLowestCost=function(){for(var t=1/0,e=null,n=null,r=this.model.integerVariables,i=r.length,o=0;o<i;o++){var s=r[o],a=s.index,u=this.rowByVarIndex[a];if(-1!==u){var c=this.matrix[u][this.rhsColumn];if(Math.abs(c-Math.round(c))>this.precision){var l=s.cost;l<t&&(t=l,e=a,n=c)}}}return new Lb(e,n)},bb.prototype.countIntegerValues=function(){for(var t=0,e=1;e<this.height;e+=1)if(this.variablesPerIndex[this.varIndexByRow[e]].isInteger){var n=this.matrix[e][this.rhsColumn];(n-=Math.floor(n))<this.precision&&-n<this.precision&&(t+=1)}return t},bb.prototype.isIntegral=function(){for(var t=this.model.integerVariables,e=t.length,n=0;n<e;n++){var r=this.rowByVarIndex[t[n].index];if(-1!==r){var i=this.matrix[r][this.rhsColumn];if(Math.abs(i-Math.round(i))>this.precision)return!1}}return!0},bb.prototype.computeFractionalVolume=function(t){for(var e=-1,n=1;n<this.height;n+=1)if(this.variablesPerIndex[this.varIndexByRow[n]].isInteger){var r=this.matrix[n][this.rhsColumn];if(r=Math.abs(r),Math.min(r-Math.floor(r),Math.floor(r+1))<this.precision){if(!t)return 0}else-1===e?e=r:e*=r}return-1===e?0:e};var Nb=bb;function Rb(t,e,n){this.type=t,this.varIndex=e,this.value=n}function Pb(t,e){this.relaxedEvaluation=t,this.cuts=e}function Db(t,e){return e.relaxedEvaluation-t.relaxedEvaluation}bb.prototype.applyCuts=function(t){if(this.restore(),this.addCutConstraints(t),this.simplex(),this.model.useMIRCuts)for(var e=!0;e;){var n=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex(),.9*n<=this.computeFractionalVolume(!0)&&(e=!1)}},bb.prototype.branchAndCut=function(){for(var t=[],e=0,n=1/0,r=null,i=[],o=0;o<this.optionalObjectives.length;o+=1)i.push(1/0);var s=new Pb(-1/0,[]);for(t.push(s);0<t.length;)if(!((s=t.pop()).relaxedEvaluation>n)){var a=s.cuts;if(this.applyCuts(a),e++,!1!==this.feasible){var u=this.evaluation;if(!(n<u)){if(u===n){for(var c=!0,l=0;l<this.optionalObjectives.length&&!(this.optionalObjectives[l].reducedCosts[0]>i[l]);l+=1)if(this.optionalObjectives[l].reducedCosts[0]<i[l]){c=!1;break}if(c)continue}if(!0===this.isIntegral()){if(1===e)return void(this.branchAndCutIterations=e);r=s,n=u;for(var d=0;d<this.optionalObjectives.length;d+=1)i[d]=this.optionalObjectives[d].reducedCosts[0]}else{1===e&&this.save();for(var h=this.getMostFractionalVar(),f=h.index,p=[],g=[],_=a.length,v=0;v<_;v+=1){var y=a[v];y.varIndex===f?"min"===y.type?g.push(y):p.push(y):(p.push(y),g.push(y))}var m=Math.ceil(h.value),b=Math.floor(h.value),x=new Rb("min",f,m);p.push(x);var E=new Rb("max",f,b);g.push(E),t.push(new Pb(u,p)),t.push(new Pb(u,g)),t.sort(Db)}}}}null!==r&&this.applyCuts(r.cuts),this.branchAndCutIterations=e};var Fb={},zb=Ob.Constraint,Bb=Ob.Equality,Ub=Ob.Variable,Vb=Ob.IntegerVariable;function jb(t,e){this.tableau=new bb(t),this.name=e,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!0,this.checkForCycles=!1}var Hb=jb;jb.prototype.minimize=function(){return this.isMinimization=!0,this},jb.prototype.maximize=function(){return this.isMinimization=!1,this},jb.prototype._getNewElementIndex=function(){if(0<this.availableIndexes.length)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},jb.prototype._addConstraint=function(t){var e=t.slack;this.tableau.variablesPerIndex[e.index]=e,this.constraints.push(t),this.nConstraints+=1,!0===this.tableauInitialized&&this.tableau.addConstraint(t)},jb.prototype.smallerThan=function(t){var e=new zb(t,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),e},jb.prototype.greaterThan=function(t){var e=new zb(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),e},jb.prototype.equal=function(t){var e=new zb(t,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(e);var n=new zb(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(n),new Bb(e,n)},jb.prototype.addVariable=function(t,e,n,r,i){if("string"==typeof i)switch(i){case"required":i=0;break;case"strong":i=1;break;case"medium":i=2;break;case"weak":i=3;break;default:i=0}var o,s=this.tableau.getNewElementIndex();return null==e&&(e="v"+s),null==t&&(t=0),null==i&&(i=0),n?(o=new Vb(e,t,s,i),this.integerVariables.push(o)):o=new Ub(e,t,s,i),this.variables.push(o),this.tableau.variablesPerIndex[s]=o,r&&(this.unrestrictedVariables[s]=!0),this.nVariables+=1,!0===this.tableauInitialized&&this.tableau.addVariable(o),o},jb.prototype._removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e?(this.constraints.splice(e,1),--this.nConstraints,!0===this.tableauInitialized&&this.tableau.removeConstraint(t),t.relaxation&&this.removeVariable(t.relaxation)):console.warn("[Model.removeConstraint] Constraint not present in model")},jb.prototype.removeConstraint=function(t){return t.isEquality?(this._removeConstraint(t.upperBound),this._removeConstraint(t.lowerBound)):this._removeConstraint(t),this},jb.prototype.removeVariable=function(t){var e=this.variables.indexOf(t);if(-1!==e)return this.variables.splice(e,1),!0===this.tableauInitialized&&this.tableau.removeVariable(t),this;console.warn("[Model.removeVariable] Variable not present in model")},jb.prototype.updateRightHandSide=function(t,e){return!0===this.tableauInitialized&&this.tableau.updateRightHandSide(t,e),this},jb.prototype.updateConstraintCoefficient=function(t,e,n){return!0===this.tableauInitialized&&this.tableau.updateConstraintCoefficient(t,e,n),this},jb.prototype.setCost=function(t,e){var n=t-e.cost;return!1===this.isMinimization&&(n=-n),e.cost=t,this.tableau.updateCost(e,n),this},jb.prototype.loadJson=function(t){this.isMinimization="max"!==t.opType;for(var e=t.variables,n=t.constraints,r={},i={},o=Object.keys(n),s=o.length,a=0;a<s;a+=1){var u,c,l=o[a],d=n[l],h=d.equal,f=d.weight,p=d.priority,g=void 0!==f||void 0!==p;if(void 0===h){var _=d.min;void 0!==_&&(u=this.greaterThan(_),r[l]=u,g&&u.relax(f,p));var v=d.max;void 0!==v&&(c=this.smallerThan(v),i[l]=c,g&&c.relax(f,p))}else{u=this.greaterThan(h),r[l]=u,c=this.smallerThan(h),i[l]=c;var y=new Bb(u,c);g&&y.relax(f,p)}}for(var m=Object.keys(e),b=m.length,x=t.ints||{},E=t.binaries||{},w=t.unrestricted||{},S=t.optimize,A=0;A<b;A+=1){var C=m[A],T=e[C],k=T[S]||0,I=!!E[C],O=!!x[C]||I,M=!!w[C],L=this.addVariable(k,C,O,M);I&&this.smallerThan(1).addTerm(1,L);var N=Object.keys(T);for(a=0;a<N.length;a+=1){var R=N[a];if(R!==S){var P=T[R],D=r[R];void 0!==D&&D.addTerm(P,L);var F=i[R];void 0!==F&&F.addTerm(P,L)}}}return this},jb.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},jb.prototype.solve=function(){return!1===this.tableauInitialized&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},jb.prototype.isFeasible=function(){return this.tableau.feasible},jb.prototype.save=function(){return this.tableau.save()},jb.prototype.restore=function(){return this.tableau.restore()},jb.prototype.activateMIRCuts=function(t){this.useMIRCuts=t},jb.prototype.debug=function(t){this.checkForCycles=t},jb.prototype.log=function(t){return this.tableau.log(t)};var Gb={CleanObjectiveAttributes:function(t){var e,n,r;if("string"==typeof t.optimize){if(t.constraints[t.optimize]){for(n in e=Math.random(),t.variables)t.variables[n][t.optimize]&&(t.variables[n][e]=t.variables[n][t.optimize]);return t.constraints[e]=t.constraints[t.optimize],delete t.constraints[t.optimize],t}return t}for(r in t.optimize)if(t.constraints[r])if("equal"===t.constraints[r])delete t.optimize[r];else{for(n in e=Math.random(),t.variables)t.variables[n][r]&&(t.variables[n][e]=t.variables[n][r]);t.constraints[e]=t.constraints[r],delete t.constraints[r]}return t}};function qb(t){return(t.length?function(t){var e={is_blank:/^\W{0,}$/,is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},n={opType:"",optimize:"_obj",constraints:{},variables:{}},r={">=":"min","<=":"max","=":"equal"},i="",o=null,s="",a="",u="",c=0;"string"==typeof t&&(t=t.split("\n"));for(var l=0;l<t.length;l++)if(u="__"+l,i=t[l],o=null,e.is_objective.test(i))n.opType=i.match(/(max|min)/gi)[0],(o=i.match(e.parse_lhs).map((function(t){return t.replace(/\s+/,"")})).slice(1)).forEach((function(t){s=null===(s=t.match(e.get_num))?"-"===t.substr(0,1)?-1:1:s[0],s=parseFloat(s),a=t.match(e.get_word)[0].replace(/\;$/,""),n.variables[a]=n.variables[a]||{},n.variables[a]._obj=s}));else if(e.is_int.test(i))o=i.match(e.parse_int).slice(1),n.ints=n.ints||{},o.forEach((function(t){t=t.replace(";",""),n.ints[t]=1}));else if(e.is_constraint.test(i)){var d=i.indexOf(":");(o=(-1===d?i:i.slice(d+1)).match(e.parse_lhs).map((function(t){return t.replace(/\s+/,"")}))).forEach((function(t){s=null===(s=t.match(e.get_num))?"-"===t.substr(0,1)?-1:1:s[0],s=parseFloat(s),a=t.match(e.get_word)[0],n.variables[a]=n.variables[a]||{},n.variables[a][u]=s})),c=parseFloat(i.match(e.parse_rhs)[0]),i=r[i.match(e.parse_dir)[0]],n.constraints[u]=n.constraints[u]||{},n.constraints[u][i]=c}else e.is_unrestricted.test(i)&&(o=i.match(e.parse_int).slice(1),n.unrestricted=n.unrestricted||{},o.forEach((function(t){t=t.replace(";",""),n.unrestricted[t]=1})));return n}:function(t){if(!t)throw new Error("Solver requires a model to operate on");var e="",n={max:"<=",min:">=",equal:"="},r=new RegExp("[^A-Za-z0-9]+","gi");for(var i in e+=t.opType+":",t.variables)t.variables[i][i]=t.variables[i][i]?t.variables[i][i]:1,t.variables[i][t.optimize]&&(e+=" "+t.variables[i][t.optimize]+" "+i.replace(r,"_"));for(i in e+=";\n",t.constraints)for(var o in t.constraints[i]){for(var s in t.variables)t.variables[s][i]&&(e+=" "+t.variables[s][i]+" "+s.replace(r,"_"));e+=" "+n[o]+" "+t.constraints[i][o],e+=";\n"}if(t.ints)for(i in e+="\n\n",t.ints)e+="int "+i.replace(r,"_")+";\n";if(t.unrestricted)for(i in e+="\n\n",t.unrestricted)e+="unrestricted "+i.replace(r,"_")+";\n";return e})(t)}function Wb(){this.Model=Hb,this.branchAndCut=Fb,this.Constraint=Yb,this.Variable=Xb,this.Numeral=Zb,this.Term=Kb,this.Tableau=Nb,this.lastSolvedModel=null,this.Solve=function(t,e,n,r){if(r)for(var i in Gb)t=Gb[i](t);if(!t)throw new Error("Solver requires a model to operate on");t instanceof Hb==0&&(t=new Hb(e).loadJson(t));var o=t.solve();if(this.lastSolvedModel=t,o.solutionSet=o.generateSolutionSet(),n)return o;var s={};return s.feasible=o.feasible,s.result=o.evaluation,s.bounded=o.bounded,Object.keys(o.solutionSet).map((function(t){s[t]=o.solutionSet[t]})),s},this.ReformatLP=qb,this.MultiObjective=function(t){return function(t,e){var n,r,i,o,s,a=e.optimize,u=JSON.parse(JSON.stringify(e.optimize)),c=Object.keys(e.optimize),l=0,d={},h="",f={},p=[];for(delete e.optimize,r=0;r<c.length;r++)u[c[r]]=0;for(r=0;r<c.length;r++){for(s in e.optimize=c[r],e.opType=a[c[r]],n=t.Solve(e,void 0,void 0,!0),c)if(!e.variables[c[s]])for(o in n[c[s]]=n[c[s]]?n[c[s]]:0,e.variables)e.variables[o][c[s]]&&n[o]&&(n[c[s]]+=n[o]*e.variables[o][c[s]]);for(h="base",i=0;i<c.length;i++)n[c[i]]?h+="-"+(1e3*n[c[i]]|0)/1e3:h+="-0";if(!d[h]){for(d[h]=1,l++,i=0;i<c.length;i++)n[c[i]]&&(u[c[i]]+=n[c[i]]);delete n.feasible,delete n.result,p.push(n)}}for(r=0;r<c.length;r++)e.constraints[c[r]]={equal:u[c[r]]/l};for(r in e.optimize="cheater-"+Math.random(),e.opType="max",e.variables)e.variables[r].cheater=1;for(r in p)for(o in p[r])f[o]=f[o]||{min:1e99,max:-1e99};for(r in f)for(o in p)p[o][r]?(p[o][r]>f[r].max&&(f[r].max=p[o][r]),p[o][r]<f[r].min&&(f[r].min=p[o][r])):(p[o][r]=0,f[r].min=0);return{midpoint:n=t.Solve(e,void 0,void 0,!0),vertices:p,ranges:f}}(this,t)}}var Yb=Ob.Constraint,Xb=Ob.Variable,Zb=Ob.Numeral,Kb=Ob.Term;"object"==typeof window&&(window.solver=new Wb);var Jb=new Wb;function Qb(t){var e={},n={},r={};t.nodes.forEach((function(t){n[t.id]=1,e[t.id]={opt:t.children.length},t.children.forEach((function(n){var i=t.id+"->"+n.id;r[i]={min:1},e[t.id][i]=-1}))})),t.nodes.forEach((function(t){t.children.forEach((function(n){var r=t.id+"->"+n.id;e[n.id].opt--,e[n.id][r]=1}))}));var i=Jb.Solve({optimize:"opt",opType:"max",constraints:r,variables:e,ints:n});return t.nodes.forEach((function(t){t.layer=i[t.id]||0})),t}function $b(t){return t.nodes.forEach((function(t){t.layer=null!=t.data.layer?t.data.layer:t.layer})),t}function tx(t){var e=Object.assign({},{normalization:!0},t),n=Qb;return function(t){if(t.nodes.some((function(t){return"layer"in t.data&&t.data.layer<0})))throw new Error("Some nodes have negative layering information");if(!e.normalization&&t.nodes.every((function(t){return"layer"in t.data&&-1<t.data.layer}))){var r=[];t.nodes.forEach((function(t){return r[t.data.layer]=1}));for(var i=r.findIndex((function(t){return null!=t})),o=0,s=r.slice(i);o<s.length;o+=1)if(null==s[o])throw new Error("The overall layering contains gaps (two non-consecutive layers)")}t.nodes.some((function(t){return"layer"in t.data&&0===t.data.layer}))||$b(n(t));var a,u,c=function(t){if(t.nodes.every((function(t){return t.layer}))){var e=1/0;t.nodes.forEach((function(t){e=Math.min(e,t.layer)})),t.nodes.forEach((function(t){t.layer-=e}))}return t}(function(t){if(t.nodes.some((function(t){return t.data.sink}))){var e=-1/0;t.nodes.forEach((function(t){e=Math.max(e,t.layer)})),t.nodes.forEach((function(t){t.data.sink&&(t.layer=e+1)}))}return t}(function(t){var e={};t.nodes.forEach((function(t){e[t.id]=(e[t.id]||[]).concat(t.children),t.children.forEach((function(n){e[n.id]=(e[n.id]||[]).concat([t])}))}));var n=[];t.nodes.forEach((function(t){0===t.layer&&n.push(t)}));var r={},i={};for(t.nodes.forEach((function(t){null!=t.layer&&(i[t.id]=t.layer)}));n.length;)for(var o=n.shift().id,s=0,a=e[o];s<a.length;s+=1){var u=a[s];if(!r[u.id]){if(null==i[u.id]){var c=i[o]+1;i[u.id]=c,u.layer=c}r[u.id]=!0,n.push(u)}}return t}($b(t))));return function(t,e){if(e.normalization){var n=[];t.nodes.forEach((function(t){return n[t.layer]=0}));var r=Array.from(n).reduce((function(t,e,n){if(0===n)return t.push(0),t;var r=t[n-1];return null!=e?t.push(r):t.push(r-1),t}),[]);t.nodes.forEach((function(t){t.layer+=r[t.layer]}))}}(c,e),(u=(a=c).nodes.reduce((function(t,e){if(e.data.fixed){if(null==t)return e;if(t.layer>e.layer)return e}return t}),null))&&a.nodes.forEach((function(t){t.ref=u.id})),a}}var ex=function(){this.root=null};function nx(t){var e={x:0,y:0};for(var n in t)e.x+=t[n].x||0,e.y+=t[n].y||0;return e.x/=Object.keys(t).length,e.y/=Object.keys(t).length,e}ex.prototype.fit=function(t){var e=t.length?t[0].w:0,n=t.length?t[0].h:0;this.root={x:0,y:0,w:e,h:n};for(var r=0,i=t;r<i.length;r+=1){var o=i[r],s=this.findNode(this.root,o.w,o.h);o.fit=s?this.splitNode(s,o.w,o.h):this.growNode(o.w,o.h)}},ex.prototype.findNode=function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.w&&n<=t.h?t:void 0},ex.prototype.splitNode=function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,w:t.w,h:t.h-n},t.right={x:t.x+e,y:t.y,w:t.w-e,h:n},t},ex.prototype.growNode=function(t,e){var n=t<=this.root.w,r=e<=this.root.h;return r&&this.root.h>=this.root.w+t?this.growRight(t,e):n&&this.root.w>=this.root.h+e?this.growDown(t,e):r?this.growRight(t,e):n?this.growDown(t,e):void 0},ex.prototype.getNewRoot=function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.root),void 0===r&&(r=this.root),{used:!0,x:0,y:0,w:this.root.w+t,h:this.root.h+e,right:n,down:r}},ex.prototype.growRight=function(t,e){return this.root=this.getNewRoot(t,0,{x:this.root.w,y:0,w:t,h:this.root.h}),this.grow(t,e)},ex.prototype.growDown=function(t,e){return this.root=this.getNewRoot(0,e,void 0,{x:0,y:this.root.h,w:this.root.w,h:e}),this.grow(t,e)},ex.prototype.grow=function(t,e){var n=this.findNode(this.root,t,e);if(n)return this.splitNode(n,t,e)};var rx={down:function(){},up:function(t){t.y=-t.y},left:function(t){var e=t.x;t.x=-t.y,t.y=e},right:function(t){var e=t.x;t.x=t.y,t.y=-e}};function ix(t,e){return null!=t&&0<t?t:e}function ox(t){if(!t||!t.length)throw Error("Cannot stratify empty data");for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(null==r)throw Error('Node data is "null"');if(null==r.id)throw Error('Node id contains a "null" value')}for(var i=t.map((function(t){return sb(t.id,t)})),o=i.reduce((function(t,e){if(t[e.id])throw Error("The connected component contains id duplicates: "+e.id);return t[e.id]=e,t}),{}),s=sb(),a=0,u=i;a<u.length;a+=1){for(var c=u[a],l=0,d=c.data.parentIds;l<d.length;l+=1){var h=d[l],f=o[h];if(!f)throw Error("The node "+c.id+" has a missing parent id "+h);f.children.push(c)}c.data.parentIds.length||s.children.push(c)}return{nodes:function(t){for(var e={},n=[].concat(t.children),r=[];n.length;){var i=n.pop();e[i.id]||(r.push(i),e[i.id]=1,n.push.apply(n,i.children))}return r}(s)}}function sx(t,e){var n=e.decross,r=e.separation,i=e.coord;(0,e.layering)(t);var o,s,a=t.nodes.reduce((function(t,e){return t[e.layer]=t[e.layer]||[],t[e.layer].push(e),e.children=e.children.map((function(n){if(n.layer===e.layer+1)return n;for(var r=n,i=n.layer-1;i>e.layer;i--){var o=sb(e.id+"->"+n.id+"@"+i);o.children=[r],t[i]=t[i]||[],t[i].push(o),r=o}return r})),t}),[]);return s=1===(o=a).length?ax:ux,o.forEach((function(t,e){for(var n=0,r=t;n<r.length;n+=1)r[n].y=s(e,o.length)})),function(t,e){var n=e.coord,r=e.decross,i=e.separation;if(t.every((function(t){return 1===t.length})))return t.forEach((function(t){return t[0].x=.5}));r(t),n(t,i)}(a,{decross:n,coord:i,separation:r}),t.nodes.forEach((function(t){t.data&&(t.children=t.children.filter((function(t){return t.data})))})),t}function ax(){return.5}function ux(t,e){return 1*t/(e-1)}function cx(t){return{id:""+t.id,layer:t.layer,sink:t.sink,radius:t.r,fixed:!1===t.layoutable,parentIds:[],ref:null}}function lx(t,e){if(!t||!t.nodes)return t;var n,r,i=e||{},o=function(t,e){void 0===e&&(e={});for(var n=(t.edges||[]).filter((function(t){return t.source!==t.target})),r={},i=0,o=t.nodes;i<o.length;i+=1){var s=o[i];r[s.id]=s}var a=function(t,e,n){var r=e.reduce((function(t,e){return t[e.source]=t[e.source]||[],t[e.source].push(e),t}),{}),i=t.reduce((function t(e,i){var o=e.visited,s=e.stack,a=e.result;if(o[i.id])return e;o[i.id]=s[i.id]=1;for(var u=0,c=r[i.id]||[];u<c.length;u+=1){var l=c[u];s[l.target]?a.push(l):t(e,n[l.target])}return delete s[i.id],e}),{visited:{},stack:{},result:[]}).result.reduce((function(t,e){var n=e.source,r=e.target;return t[n]=t[n]||{},t[n][r]=1,t}),{});return e.map((function(t){var e=t.source,n=t.target;return i[e]&&i[e][n]?{source:n,target:e}:t}))}(t.nodes,n,r),u=function(t,e,n){void 0===n&&(n={});for(var r=Jm(e),i=Object.keys(r),o=[];i.length;){var s=Km(i[0],r);o.push(s),i=eb(i,s)}return n.skipSingletons?o:o.concat(tb(t,e,r).map((function(t){return[t.id+""]})))}(t.nodes,a,{skipSingletons:"singleton"===e.packing}),c=a.reduce((function(t,e){return t[e.source]||(t[e.source]=cx(r[e.source])),t[e.target]||(t[e.target]=cx(r[e.target])),t[e.target].parentIds.push(""+e.source),t}),{});return{shapes:u.map((function(t){return t.map((function(t){return c[t]||cx(r[t]||{id:t})}))})),nLookup:r}}(t,i),s=o.shapes,a=o.nLookup,u=function(t,e){void 0===e&&(e={});for(var n=[],r=0,i=t;r<i.length;r+=1){var o=ox(i[r]);n.push(o),sx(o,{decross:function(t){return t.slice(0,t.length-1).forEach((function(e,n){return ab(e,t[n+1])})),t},separation:Qm($m(o.nodes),e.gapDistance),coord:(e.evenDistribution?pb:fb)(),layering:tx(e)})}return n}(s,i);if("singleton"===i.packing){var c=tb(t.nodes,t.edges),l=function(t,e){void 0===e&&(e={});var n=t.slice().sort((function(t,e){return e.r-t.r})),r=Math.sqrt(n.length),i=Math.floor(r),o=Math.ceil(r);i*o<n.length&&(i<o?i++:o++);var s=1.2*n.reduce((function(t,e){var n=e.r;return Math.max(t,2*n)}),0),a=Math.max(e.nodesGridSeparation||50,1),u=s*o+a*(o-1),c=s*i+a*Math.max(i-1,0);return n.forEach((function(t,e){var n=e%o,r=Math.floor(e/o);t.x=u*n/o,t.y=c*r/i})),{w:u,h:c}}(c,i);u.push((n=c,r=l,Object.assign({},{nodes:n.map((function(t){return Object.assign({},t,{data:t})})),isFake:!0},r)))}return function(t,e,n){void 0===n&&(n={});for(var r=-1/0,i=-1/0,o=ix(n.nodesSeparation,0),s=ix(n.componentsSeparation,25),a=ix(n.layerSeparation,50),u=[],c=nx(e),l=t.reduce((function(t,n){return n.nodes.filter((function(t){return t.data&&t.data.fixed})).reduce((function(t,n){var r=e[n.id],i=r.x,o=r.y;return t[n.id]={x:i||0,y:o||0},t}),t)}),{}),d=function(){var t=f[h],n={},c=t.nodes,l=1==c.length,d=2*$m(c)|5,p=c.reduce((function(t,e){var n=e.x;return Math.min(t,n)}),1/0);r=c.reduce((function(t,e){var n=e.x;return Math.max(t,n)}),-1/0)-p;for(var g=0,_=c;g<_.length;g+=1){var v=_[g],y=v.x,m=v.y,b=v.id;e[b]&&(l?e[b].x=e[b].y=0:(e[b].x=y-p,e[b].y=m,n[m]=n[m]||[],n[m].push(e[b])))}var x=Math.max(d,a),E=Object.keys(n),w=E.reduce((function(t,e){return Math.max(t,n[e].length-1)}),1)*(3+Math.max(1,o));i=(E.length||1)*x,r=Math.max(r,1),t.isFake||E.sort((function(t,e){return t-e})).forEach((function(t,e){n[t].forEach((function(t){t.y=e*x,t.x=t.x/r*w}))})),u.push({w:Math.ceil(w)+s,h:Math.ceil(i),dag:t}),i=r=-1/0},h=0,f=t;h<f.length;h+=1)d();if(u.sort((function(t,e){return Math.max(e.w,e.h)-Math.max(t.w,t.h)})),"hierarchy"!==n.packing)(new ex).fit(u);else for(var p=0,g=0,_=u;g<_.length;g+=1){var v=_[g];v.fit={x:p,y:0},p+=v.w}for(var y,m,b=u.reduce((function(t,e){var n=e.h;return Math.max(t,n)}),1),x=0,E=u;x<E.length;x+=1)for(var w=E[x],S=w.fit,A=w.dag,C=S||{x:0,y:0},T=C.y/b*50+C.y,k=C.x,I=0,O=A.nodes;I<O.length;I+=1){var M=O[I].id;e[M]&&(e[M].x+=k,e[M].y+=T,y=e[M],(m=n.direction)&&m in rx&&rx[m](y))}var L=nx(e),N=L.x-c.x,R=L.y-c.y;for(var P in e)e[P].x-=N,e[P].y-=R;for(var D=0,F=u;D<F.length;D+=1){var z=F[D].dag,B=z.nodes[0]&&z.nodes[0].ref,U=0,V=0;if(B&&(U=e[B].x-l[B].x,V=e[B].y-l[B].y),U||V)for(var j=0,H=z.nodes;j<H.length;j+=1){var G=H[j].id;e[G]&&(e[G].x-=U,e[G].y-=V)}}for(var q=0,W=Object.keys(l);q<W.length;q+=1){var Y=W[q];e[Y].x=l[Y].x,e[Y].y=l[Y].y}}(u,a,i),t}var dx={direction:"TB",nodeDistance:50,levelDistance:50,componentDistance:50,gapWidth:1,arrangeComponents:"fit",gridDistance:50,layer:"layer"},hx={imports:{sequential:lx},configure:function(t,e){var n=e.graph,r=e.data;function i(t,e,n){return void 0===n&&(n=t.getNodes()),e?e instanceof gr?e:t.getNodes(e):n}var o=w(w(w({},dx),t),{nodeList:t.nodes});o.direction=t.direction||o.rankdir||dx.direction,o.layerSeparation=o.levelDistance,o.nodesSeparation=o.nodeDistance,o.componentsSeparation=o.componentDistance,o.gapDistance=o.gapWidth,o.packing=o.arrangeComponents;var s=w({},o),a=o.edges,u=o.nodeList;if(-1===["TB","BT","LR","RL"].indexOf(o.direction))throw new Error('direction should be one of the "TB", "BT", "LR", "RL"');if(-1===["fit","grid","singleLine"].indexOf(o.packing))throw new Error('arrangeComponents should be one of the "fit", "grid", "singleLine"');o.nodesGridSeparation=t.gridDistance||dx.gridDistance;var c=u.getId(),l=u.getAttribute("layoutable").reduce((function(t,e,n){return t[c[n]]=e,t}),{}),d=u.getAttributes(["x","y"]).reduce((function(t,e,n){return t[c[n]]=e,t}),{}),h=u.getAttribute("radius");if("string"!=typeof s.layer)throw new Error("'layer' should be the valid data field name");for(var f=i(n,o.roots,n.nodeList()),p=r.getProperty(o.nodeList,s.layer),g=0,_=f.map((function(t){var e=-1;return o.nodeList.forEach((function(n,r){n===t&&(e=r)})),e}));g<_.length;g++)p[_[g]]=0;var v=i(n,o.sinks,n.nodeList()).toArray().reduce((function(t,e){return t[e.getId()]=!0,t}),{}),y=c.map((function(t){return v[t]}));return{nodes:c,edges:a.map((function(t){return{id:t.getId(),source:t.getSource().getId(),target:t.getTarget().getId()}})),options:$(o),layoutable:l,radiuses:h,layers:p,sinks:y,coords:d}},context:function(){},update:function(t){var e=t.nodes,n=t.edges,r=t.options,i=t.layoutable,o=t.radiuses,s=t.layers,a=t.sinks,u=t.coords,c=n.filter((function(t){var e=t.source,n=t.target;return e in i&&n in i}));return{positions:lx({nodes:e.map((function(t,e){return{id:t,r:o[e],layer:s[e],sink:a[e],layoutable:i[t],x:u[t].x,y:u[t].y}})),edges:c},{packing:{fit:"rect",singleLine:"hierarchy",grid:"singleton"}[r.arrangeComponents],direction:{TB:"down",BT:"up",RL:"left",LR:"right"}[r.direction],layerSeparation:r.layerSeparation,nodesSeparation:r.nodesSeparation,componentsSeparation:r.componentsSeparation,gapDistance:r.gapWidth,nodesGridSeparation:r.nodesGridSeparation,evenDistribution:r.evenDistribution}).nodes}},isRunning:function(){return!1},onSync:function(t,e){var n=t.positions,r=e.graph;return{indexes:n.map((function(t){var e=t.id;return(r.getNode(e)||{_index:-1})._index})),x:n.map((function(t){return t.x})),y:n.map((function(t){return t.y}))}}},fx={configure:function(t,e){var n=e.graph,r=e.camera;function i(t){return void 0===t||"number"==typeof t&&isFinite(t)&&0<t}var o,s,a,u,c,l=t.sortBy,d=t,h=d.nodes,f=Array.from(h._indexes),p=f.length,g=function(t,e,n){if(!i(t))throw new TypeError('"rows" should be a positive integer');if(!i(e))throw new TypeError('"cols" should be a positive integer');if(t)return{rows:t,cols:Math.ceil(n/t)};if(e)return{cols:e,rows:Math.ceil(n/e)};var r=Math.ceil(Math.sqrt(n));return{cols:r,rows:Math.ceil(n/r)}}(d.rows,d.cols,p),_=g.rows,v=g.cols,y=(o=l,s=n,a=h,u=f,c=t.sortFallbackValue,"string"!=typeof o?u.map((function(t,e){return e})):"radius"===o?s.getAttribute(!0,"radius").getMultiple(u):"random"===o?u.map((function(){return Math.random()})):a.getData(o).map((function(t){return t||c}))),m=h.getAttribute("layoutable"),b=f.reduce((function(t,e,n){return m[n]&&t.push({id:e,attr:y[n]}),t}),[]),x=h.getBoundingBox(),E=.65*Math.max(x.maxScaledSize,x.maxFixedSize/r.getZoom()),w=x.minX+E,S=x.maxX-E,A=x.minY+E,C=x.maxY-E;return x.width<E*v*2&&(w=x.cx-E*v+E,S=x.cx+E*v-E),x.height<E*_*2&&(A=x.cy-E*_+E,C=x.cy+E*_-E),{sort:!!l,nodes:b,reverse:!!d.reverse,cols:v,rows:_,minX:w,maxX:S,minY:A,maxY:C}},update:function(t){var e=t.sort,n=t.nodes,r=t.maxX,i=t.minX,o=t.maxY,s=t.minY,a=t.reverse,u=t.rows,c=t.cols;e&&n.sort((function(t,e){var n=t.attr,r=e.attr;return n<r?-1:r<n?1:0})),a&&n.reverse();var l=(r-i)/(c-1),d=(o-s)/(u-1),h=i,f=s;isFinite(l)||(l=0),isFinite(d)||(d=0);var p=0,g=0;return n.forEach((function(t){t.x=h+p*l,t.y=f+g*d,(p+=1)===c&&(g+=1,p=0)})),n},onSync:function(t){return{indexes:t.map((function(t){return t.id})),x:t.map((function(t){return t.x})),y:t.map((function(t){return t.y}))}}},px=(gx.initNamespace=function(t){t.layouts=function(t){return w(w(w(w(w(w(w(w(w({},((u=t).modules.layouts.register("concentric",Bm),{concentric:function(t){return u.modules.layouts.start("concentric",t)}})),((a=t).modules.layouts.register("radial",Um),{radial:function(t){if(void 0===t.centralNode)throw new Error('concentric layout: missing parameter "centralNode"');if(t.maxIterations=t.maxIterations&&isFinite(t.maxIterations)?Math.floor(t.maxIterations):100,t.maxIterations<1)throw new RangeError("maxIterations must be a positive integer");if(t.iterationsPerRender=t.iterationsPerRender&&isFinite(t.iterationsPerRender)?Math.floor(t.iterationsPerRender):20,t.iterationsPerRender<1)throw new RangeError("iterationsPerRender must be a positive integer");if(t.epsilon=t.epsilon&&isFinite(t.epsilon)?t.epsilon:.001,t.epsilon<=0)throw new RangeError("epsilon has to be a positive number");return a.modules.layouts.start("radial",t)}})),((s=t).modules.layouts.register("force",Hm),{force:function(t){if(void 0===t&&(t={}),t.incremental)return Ym(t,s,s.layouts.force);if(void 0!==t.edgeStrength&&(!isFinite(t.edgeStrength)||t.edgeStrength<0))throw new Error("force layout: edgeStrength must be a positive number");if(void 0!==t.steps&&(!isFinite(t.steps)||t.steps<=0))throw new Error("force layout: 'steps' must be a positive integer");if(void 0!==t.edgeLength&&(!isFinite(t.edgeLength)||t.edgeLength<=0))throw new Error("force layout: 'edgeLength' must be positive");if(void 0!==t.gravity&&(!isFinite(t.gravity)||t.gravity<0||1<=t.gravity))throw new Error("force layout: 'gravity' must be between 0 and 1");if(void 0!==t.charge&&!isFinite(t.charge))throw new Error("force layout: 'charge' must be a number");if(void 0!==t.radiusRatio&&(!isFinite(t.radiusRatio)||t.radiusRatio<0))throw new Error("force layout: 'radiusRatio' must be a positive number");if(void 0!==t.theta&&(!isFinite(t.theta)||t.theta<0||1<t.theta))throw new Error("force layout: 'theta' must be between 0 and 1");if(!(void 0===t.cx&&void 0===t.cy||"number"==typeof t.cx&&"number"==typeof t.cy))throw new Error("force layout: both 'cx' and 'cy' must be numbers");if(void 0!==t.siblingsOffset&&!isFinite(t.siblingsOffset))throw new Error("force layout: 'siblingsOffset' must be a number");return s.modules.layouts.start("force",t)}})),((o=t).modules.layouts.register("forceLink",Xm),{forceLink:function(t){return void 0===t&&(t={}),t.incremental?Ym(t,o,o.layouts.forceLink):o.modules.layouts.start("forceLink",t)}})),((i=t).modules.layouts.register("hierarchical",hx),{hierarchical:function(t){return void 0===t&&(t={}),t.useWebWorker=!1,i.modules.layouts.start("hierarchical",t)}})),((r=t).modules.layouts.register("sequential",hx),{sequential:function(t){void 0===t&&(t={}),t.useWebWorker=!1;var e=w(w({},t),{evenDistribution:!0});return r.modules.layouts.start("sequential",e)}})),((n=t).modules.layouts.register("grid",fx),{grid:function(t){return void 0===t&&(t={}),n.modules.layouts.start("grid",t)}})),(e=t,{incremental:function(t){An("Incremental ForceLink layout is now deprecated.\n    Please use the incremental option in force and forceLink layouts.");var n=t.centralNode;if("margin"in t&&(null==t.margin||!isFinite(t.margin)))throw new Error("Incremental ForceLink layout: margin has to be a positive number");return n&&!n.getAttribute("layoutable")?Wm(e,t,e.layouts.forceLink):qm(e,Yf(e.modules.graph,t),e.layouts.forceLink)}})),{stop:function(){return t.modules.layouts.stop()}});var e,n,r,i,o,s,a,u}(t)},gx);function gx(){}var _x=(vx.initNamespace=function(t){var e;t.mouse=(e=t,{move:function(t){return e.modules.virtualMouse.move(t)},down:function(t){return e.modules.virtualMouse.down(t)},up:function(t){return e.modules.virtualMouse.up(t)},click:function(t){return e.modules.virtualMouse.click(t)},rightClick:function(t){return e.modules.virtualMouse.rightClick(t)},doubleClick:function(t){return e.modules.virtualMouse.doubleClick(t)},drag:function(t,n){return e.modules.virtualMouse.drag(t,n)},wheel:function(t){return e.modules.virtualMouse.wheel(t)}})},vx);function vx(){}var yx=(mx.initNamespace=function(t){var e;t.pathfinding=(e=t,{astar:function(t,n,r){return void 0===r&&(r={}),e.modules.pathfinding.astar(t,n,r)},dijkstra:function(t,n,r){return void 0===r&&(r={}),e.modules.pathfinding.dijkstra(t,n,r)},dijkstraBig:function(t,n,r){return void 0===r&&(r={}),e.modules.pathfinding.dijkstraBig(t,n,r)}})},mx);function mx(){}var bx=(xx.initNamespace=function(t){var e;t.rules=(e=t,{map:function(t){return e.modules.rules.createMapping(t)},slices:function(t){return e.modules.rules.createSlices(t)},template:function(t){return e.modules.rules.createTemplate(t)}})},xx);function xx(){}var Ex=(wx.prototype.clearSelection=function(){return this.modules.selection.clear()},wx.prototype.getSelectedNodes=function(){return this.modules.selection.getSelectedNodes()},wx.prototype.getNonSelectedNodes=function(){return this.modules.selection.getNonSelectedNodes()},wx.prototype.getSelectedEdges=function(){return this.modules.selection.getSelectedEdges()},wx.prototype.getNonSelectedEdges=function(){return this.modules.selection.getNonSelectedEdges()},wx);function wx(){}var Sx=(Ax.prototype.setOptions=function(t){return this.modules.settings.update(t)},Ax.prototype.getOptions=function(){return this.modules.settings.get()},Ax);function Ax(){}var Cx=(Tx.initNamespace=function(t){var e;t.styles=(e=t,{setNodesVisibility:function(t){return e.modules.graphics.setNodesVisibility(t)},setEdgesVisibility:function(t){return e.modules.graphics.setEdgesVisibility(t)},setNodeTextsVisibility:function(t){return e.modules.graphics.setNodeTextsVisibility(t)},setEdgeTextsVisibility:function(t){return e.modules.graphics.setEdgeTextsVisibility(t)},addRule:function(t){return e.modules.styleRules.addRule(t)},getRuleList:function(){return e.modules.styleRules.getRuleList()},addNodeRule:function(t,n){var r,i;return i=1===arguments.length?void(r=t):(r=n,t),e.styles.addRule({nodeAttributes:r,nodeSelector:i})},addEdgeRule:function(t,n){var r,i;return i=1===arguments.length?void(r=t):(r=n,t),e.styles.addRule({edgeAttributes:r,edgeSelector:i})},getNodeRules:function(){return e.styles.getRuleList().filter((function(t){return void 0===t.getDefinition().edgeAttributes}))},getEdgeRules:function(){return e.styles.getRuleList().filter((function(t){return void 0===t.getDefinition().nodeAttributes}))},createClass:function(t){return e.modules.classes.createClass(t)},getClass:function(t){return e.modules.classes.getClassByName(t)},getClassList:function(){return e.modules.classes.getClassList()},setHoveredNodeAttributes:function(t,n){e.modules.hover.updateNodeAttributes(t,n)},setHoveredEdgeAttributes:function(t,n){e.modules.hover.updateEdgeAttributes(t,n)},setSelectedNodeAttributes:function(t,n){return e.modules.selection.setNodeAttributes(t,n)},setSelectedEdgeAttributes:function(t,n){return e.modules.selection.setEdgeAttributes(t,n)}})},Tx);function Tx(){}var kx=(Ix.initNamespace=function(t){var e;t.schema=(e=t,{watchNodeObjectProperty:function(t){return e.modules.watcher.watchNodeObjectProperty(t)},watchEdgeObjectProperty:function(t){return e.modules.watcher.watchEdgeObjectProperty(t)},watchNodeNonObjectProperty:function(t){return e.modules.watcher.watchNodeNonObjectProperty(t)},watchEdgeNonObjectProperty:function(t){return e.modules.watcher.watchEdgeNonObjectProperty(t)}})},Ix);function Ix(){}var Ox=(Mx.initNamespace=function(t){t.tools=function(t){return{lasso:{enable:function(t){return c.modules.lasso.enable(t),this},disable:function(){return c.modules.lasso.disable(),this},enabled:function(){return c.modules.lasso.enabled()}},connectNodes:{enable:function(t){return u.modules.connectNodes.enable(t),this},disable:function(){return u.modules.connectNodes.disable(),this},enabled:function(){return u.modules.connectNodes.enabled()}},legend:{enable:function(t){return a.modules.legend.enable(t)},disable:function(){return a.modules.legend.disable()},enabled:function(){return a.modules.legend.enabled()},getOptions:function(){return a.modules.legend.getOptions()}},rectangleSelect:{enable:function(t){s.modules.rectangleSelect.enable(t)},disable:function(){s.modules.rectangleSelect.disable()},enabled:function(){return s.modules.rectangleSelect.enabled()}},resize:{enable:function(t){return o.modules.resizing.enable(t),this},disable:function(){return o.modules.resizing.disable(),this},enabled:function(){return o.modules.resizing.enabled()}},rewire:{enable:function(t){return i.modules.rewiring.enable(t),this},disable:function(){return i.modules.rewiring.disable(),this},enabled:function(){return i.modules.rewiring.enabled()}},snapping:{enable:function(t){return r.modules.snapping.enable(t),this},disable:function(){return r.modules.snapping.disable(),this},enabled:function(){return r.modules.snapping.enabled()}},tooltip:{onNodeHover:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("hover.node",t,e)},onNodeClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("click.left.node",t,e)},onNodeRightClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("click.right.node",t,e)},onNodeDoubleClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("doubleClick.left.node",t,e)},onEdgeHover:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("hover.edge",t,e)},onEdgeClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("click.left.edge",t,e)},onEdgeRightClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("click.right.edge",t,e)},onEdgeDoubleClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("doubleClick.left.edge",t,e)},onBackgroundClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("click.left.background",t,e)},onBackgroundRightClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("click.right.background",t,e)},onBackgroundDoubleClick:function(t,e){void 0===e&&(e={}),n.modules.tooltip.setHandler("doubleClick.left.background",t,e)},refresh:function(){return n.modules.tooltip.refresh()},isShown:function(){return n.modules.tooltip.isShown()},hide:function(){n.modules.tooltip.hide()},show:function(t,e){return n.modules.tooltip.show(t,e)}},brand:(e=n=r=i=o=s=a=u=c=t,{set:function(t,n){return e.modules.brand.set(t,n)},remove:function(){e.modules.brand.remove()}})};var e,n,r,i,o,s,a,u,c}(t)},Mx);function Mx(){}function Lx(t){return!0}function Nx(t){return""}function Rx(t,e,n){return{}}var Px,Dx=(E(Fx,Px=Xd),Fx.prototype._computeNodeGroupId=function(t){if(this._nodeSelector&&this._nodeGroupIdFunction)return this._nodeSelector(t)?this._nodeGroupIdFunction(t):void 0},Fx.prototype._computeEdgeGroupId=function(t){if(this._edgeSelector&&this._edgeGroupIdFunction)return this._edgeSelector(t)?this._edgeGroupIdFunction(t):void 0},Fx.prototype._addMetaNodes=function(t,e){for(var n=e.getId(),r=t.getNodes().filter((function(t){return null===t.getMetaNode()})),i=new Map,o=0;o<r.size;++o){var s=r.get(o);if(void 0!==(d=this._computeNodeGroupId(s))){var a=i.get(d);a||(a={id:d,nodes:[]},i.set(d,a)),a.nodes.push(s)}}var u=Ki(i),c=u.map((function(e){var n=e.nodes;return t.getNodes(n)})),l=[];for(o=0;o<u.length;++o){var d=u[o].id,h=c[o],f=this._nodeGenerator(h,d,e);void 0===f.id&&(f.id=Bx(d,n)),f.position=nl(h.getPosition()),l.push(f)}return t.addNodes(l.map((function(t){return{id:t.id,attributes:t.position}})),{virtual:!0}).then((function(){var e=t.getNodes(l.map((function(t){return t.id})));e.replaceOriginalAttributes(l.map((function(t){return t.attributes})),["x","y","radius"]);for(var n=e.getData(),r=0;r<n.length;r++){var i=n[r],o=l[r];n[r]=void 0===i?o.data:w(w({},o.data),i)}return e.setData(null,n),e.setVisible(!0),t.modules.grouping.setSubElements(e,c),c.forEach((function(n,r){t.modules.grouping.setMetaElement(n,e.get(r))})),e}))},Fx.prototype._addMetaEdges=function(t,e){for(var n=e.getId(),r=t.getEdges(),i=new Map,o=t.modules.graphics.getAttributesManager().getUsedEdgeAttributes(),s=0;s<r.size;++s){var a=r.get(s);if(void 0!==(m=this._computeEdgeGroupId(a))){var u=this._edgeSource(a),c=this._edgeTarget(a),l=this._groupEdges?zx(m,u.getId(),c.getId(),this._separateEdgesByDirection):String(a.getId());(y=i.get(l))||(y={id:l,source:u,target:c,edges:[]},i.set(l,y)),y.edges.push(a)}}var d,h,f,p,g=Ki(i),_=g.map((function(e){var n=e.edges;return t.getEdges(n)})),v=[];for(s=0;s<g.length;++s){var y,m=(y=g[s]).id,b=_[s],x=this._groupEdges?this._edgeGenerator(b,m,e):(f=o,p=void 0,{data:(p=b.get(0)).getData(),attributes:p.getAttributes(f)});if(null!=x.id&&(d=t,h=x.id,null!=d.getEdge(h)))throw Error("The id "+x.id+" returned by the edgeGenerator function is not a unique id.");void 0===x.id&&(x.id=Bx(m,n)),x.source=y.source.getId(),x.target=y.target.getId(),v.push(x)}return t.addEdges(v.map((function(t){return{id:t.id,source:t.source,target:t.target}})),{virtual:!0}).then((function(){var e=t.getEdges(v.map((function(t){return t.id})));e.setAttributes(v.map((function(t){return t.attributes})));for(var n=e.getData(),r=0;r<n.length;r++){var i=v[r],o=n[r];n[r]=void 0===o?i.data:w(w({},o),i.data)}return e.setData(null,n),e.setVisible(!0),t.modules.grouping.setSubElements(e,_),_.forEach((function(n,r){t.modules.grouping.setMetaElement(n,e.get(r))})),e}))},Fx);function Fx(t){var e=Px.call(this,t)||this;return e._nodeSelector=t.nodeSelector||Lx,e._nodeGroupIdFunction=t.nodeGroupIdFunction||Nx,e._nodeGenerator=t.nodeGenerator||Rx,e._edgeSelector=t.edgeSelector||Lx,e._edgeGroupIdFunction=t.edgeGroupIdFunction||Nx,e._edgeGenerator=t.edgeGenerator||Rx,e._edgeSource=t.edgeSource,e._edgeTarget=t.edgeTarget,e._separateEdgesByDirection=t.separateEdgesByDirection,e._groupSelfLoopEdges=!!t.groupSelfLoopEdges,e._groupEdges=t.groupEdges,e}function zx(t,e,n,r){var i=e,o=n;return!r&&i.toString()>o.toString()&&(i=n,o=e),t+"["+i+"-"+o+"]"}function Bx(t,e){return"gen_grp_"+e+"_"+t}var Ux,Vx=(E(jx,Ux=Dx),jx.prototype.getName=function(){return rv.NodeGrouping},jx.prototype.run=function(t){var e,n,r=this,i=t.ogma,o=t.duration,s=t.wrapper,a=t.context,u=i.createNodeList(),c=i.createNodeList(),l=i.createEdgeList(),d=[],h=i.modules.grouping,f=[],p=new Set,g=new Set;return this._addMetaNodes(i,s).then((function(t){return(e=t).setVisible(!1),r._addMetaEdges(i,s)})).then((function(t){return(n=t).setVisible(!1),e.forEach((function(t){var e=t.getSubNodes(),n=t.getPosition(),i=r._showContents(t);if(e){if(i){p.add(t._index);var o=e.getAdjacentEdges({bothExtremities:!0});e.setVisible(!0),o.forEach((function(t){return g.add(t._index)}))}else{p.delete(t._index),h.removeVisibleGroup(t),d.push.apply(d,e.getPosition().map((function(t){return t.x=t.x-n.x,t.y=t.y-n.y,t}))),u=u.concat(e);for(var s=e.toArray();0!==s.length;){var a=s.pop(),l=a.getSubNodes();l&&h.isVisibleGroup(a)&&(l.setVisible(!1),l.getAdjacentEdges({bothExtremities:!0}).setVisible(!1),s.push.apply(s,l.toArray()))}}c=c.concat(e)}})),l=n.getSubEdges().reduce((function(t,e){var n=e.filter((function(t){if(g.has(t._index))return!1;var e=t.getSource().getMetaNode(),n=t.getTarget().getMetaNode();return!(e&&n&&h.isVisibleGroup(e)&&h.isVisibleGroup(n)&&e===n)}));return t.concat(n)}),i.createEdgeList()),u.setAttributes(u.getPosition().map((function(t,e){var n=d[e];return t.x-=n.x,t.y-=n.y,t})),o)})).then((function(){u.setVisible(!1),l.setVisible(!1),e.setVisible(!0),n.filter((function(t){return r._groupSelfLoopEdges||t.getSource()!==t.getTarget()})).setVisible(!0)})).then((function(){var t=new Set;e.forEach((function(e){var n,o=p.has(e._index),s=e.getSubNodes();if(s){var a=s.getAdjacentEdges({filter:"all",bothExtremities:!0});if(o){var u=s.reduce((function(e,n){var r=h.getNodeDepth(n);return t.add(n._index),r<e?r:e}),0);a.forEach((function(t){return g.add(t._index)})),h.addVisibleGroup(e,-1+u),r._metaNodesIds.has(e.getId())||(r._metaNodesIds.add(e.getId()),f.push(((n=r._onCreated(e,o,s,a))&&"function"===n.then?n:Promise.resolve(n)).then(i.view.afterNextFrame)))}}})),n.forEach((function(t){var e=Math.min(h.getNodeDepth(t.getSource()),h.getNodeDepth(t.getTarget()));t.setAttribute("layer",e)})),l=l.filter((function(t){return!g.has(t._index)})),u=u.filter((function(e){return!t.has(e._index)})),i.modules.graphics.getAttributesManager().update()})).then((function(){return Promise.all(f)})).then((function(){return{metaNodes:e,metaEdges:n,virtualNodes:e,virtualEdges:n,subNodes:c,collapsedSubNodes:u,subEdges:l,offsets:d,invalidMetaNodes:null==a?void 0:a.metaNodes.filter((function(t){return null===t.getSubNodes()})),invalidMetaEdges:null==a?void 0:a.metaEdges.filter((function(t){return null===t.getSubEdges()}))}}))},jx.prototype.undo=function(t){var e=this,n=t.ogma,r=t.duration,i=t.context,o=i.metaNodes,s=i.metaEdges,a=i.subNodes,u=i.subEdges,c=i.offsets,l=i.collapsedSubNodes,d=n.getNodes(l.getMetaNode()).getPosition(),h=d.map((function(t,e){return n=t,r=c[e],{x:n.x+r.x,y:n.y+r.y};var n,r})),f=n.modules.grouping;return a.setVisible(!0),u.setVisible(!0),f.setMetaElement(a,null),f.setMetaElement(u,null),o.setVisible(!1),s.setVisible(!1),o.forEach((function(t){if(!t.getSubNodes()||f.isVisibleGroup(t))f.removeVisibleGroup(t);else for(var e=t.getSubNodes().filter((function(t){return f.isVisibleGroup(t)})).toArray();0!==e.length;){var n=e.pop();if(f.isVisibleGroup(n)){var r=n.getSubNodes();r&&(r.setVisible(!0),r.getAdjacentEdges({bothExtremities:!0,filter:"all"}).setVisible(!0),e.push.apply(e,r.toArray()))}}})),f.setSubElements(o,null),f.setSubElements(s,null),f.resetOffsets(),l.setAttributes(d).then((function(){return e._restorePositions?l.setAttributes(h,r):Promise.resolve(l)}))},jx.prototype.cleanup=function(t){var e=t.ogma,n=t.context,r=n.metaNodes,i=n.metaEdges,o=n.invalidMetaNodes,s=n.invalidMetaEdges,a=e.modules.graph;o&&(r=r.concat(o)),s&&(i=i.concat(s));var u=Fn(a,r,(function(t){return t.isVisible()})),c=Fn(a,i,(function(t){return t.isVisible()}));return n.metaNodes=n.virtualNodes=u.valid,n.metaEdges=n.virtualEdges=c.valid,Promise.all([function(){return e.modules.grouping.resetOffsets()},e.removeEdges(c.invalid,{virtual:!0}),e.removeNodes(u.invalid,{virtual:!0})]).then((function(){return Promise.resolve()}))},jx);function jx(t){var e=void 0===t?{}:t,n=e.selector,r=void 0===n?Lx:n,i=e.groupIdFunction,o=void 0===i?Nx:i,s=e.nodeGenerator,a=void 0===s?Rx:s,u=e.edgeGenerator,c=void 0===u?Rx:u,l=e.separateEdgesByDirection,d=void 0!==l&&l,h=e.groupSelfLoopEdges,f=void 0!==h&&h,p=e.groupEdges,g=void 0===p||p,_=e.restorePositions,v=void 0===_||_,y=e.showContents,m=void 0!==y&&y,b=e.onCreated,x=Ux.call(this,{nodeSelector:r,nodeGroupIdFunction:o,nodeGenerator:a,edgeSelector:function(t){return!(!t.getSource().getMetaNode()&&!t.getTarget().getMetaNode())},edgeGroupIdFunction:function(){return""},edgeGenerator:c,edgeSource:function(t){return Hx(t.getSource())},edgeTarget:function(t){return Hx(t.getTarget())},separateEdgesByDirection:d,groupEdges:g,groupSelfLoopEdges:f})||this;return x._metaNodesIds=new Set,x._showContents="function"!=typeof m?function(){return m}:m,x._restorePositions=v,x._onCreated=b||function(t,e,n,r){},x}function Hx(t){return t.getMetaNode()||t}var Gx,qx=(E(Wx,Gx=Dx),Wx.prototype.getName=function(){return rv.EdgeGrouping},Wx.prototype.run=function(t){var e,n,r=t.ogma,i=t.wrapper,o=t.context;return this._addMetaEdges(r,i).then((function(t){return(n=(e=t).getSubEdges().reduce((function(t,e){return t.concat(e)}),r.createEdgeList())).setVisible(!1),{metaEdges:o?e.concat(o.metaEdges).dedupe():e,subEdges:n,virtualNodes:null,virtualEdges:e}}))},Wx.prototype.undo=function(t){var e=t.ogma,n=t.context,r=n.metaEdges,i=n.subEdges;return e.modules.grouping.setMetaElement(i,null),e.modules.grouping.setSubElements(r,null),i.filter((function(t){return t.getSource().isVisible()&&t.getTarget().isVisible()})).setVisible(!0),r.setVisible(!1),Promise.resolve()},Wx.prototype.cleanup=function(t){var e=t.ogma,n=t.context,r=n.metaEdges,i=Fn(e.modules.graph,r,(function(t){return t.isVisible()}));return e.removeEdges(i.invalid,{virtual:!0}).then((function(){return n.metaEdges=i.valid,n.virtualEdges=i.valid,Promise.resolve()}))},Wx);function Wx(t){var e=void 0===t?{}:t,n=e.selector,r=void 0===n?Lx:n,i=e.groupIdFunction,o=void 0===i?Nx:i,s=e.generator,a=void 0===s?Rx:s,u=e.separateEdgesByDirection,c=void 0!==u&&u;return Gx.call(this,{nodeSelector:null,nodeGroupIdFunction:null,nodeGenerator:null,edgeSelector:r,edgeGroupIdFunction:o,edgeGenerator:a,edgeSource:function(t){return t.getSource()},edgeTarget:function(t){return t.getTarget()},separateEdgesByDirection:c,groupEdges:!0})||this}function Yx(t){return null!=t}function Xx(t,e){return{source:t.getId(),target:e.getId()}}var Zx,Kx=(E(Jx,Zx=Xd),Jx.prototype.getName=function(){return rv.NeighborGeneration},Jx.prototype.run=function(t){for(var e,n=this,r=t.ogma,i=t.duration,o=t.wrapper.getId(),s=r.getNodes(),a=new Map,u=0;u<s.size;++u){var c=s.get(u),l=(e=this._generateIds(c),((Array.isArray(e)?e:e?[e]:null)||[]).filter(Yx));if(l)for(var d=0;d<l.length;++d){var h=l[d];(y=a.get(h))||(y=[],a.set(h,y)),y.push(c)}}var f,p,g=new Array(a.size),_=Zi(a),v=Ki(a).map((function(t){return r.getNodes(t)}));for(u=0;u<g.length;++u){h=_[u];var y=v[u],m=this._nodeGenerator(h,y);m.id="_gen_"+o+"_"+h;var b=nl(y.getPosition());m.attributes=m.attributes||{},m.attributes.x=b.x,m.attributes.y=b.y,g[u]=m}return r.addNodes(g.map((function(t){return{id:t.id,attributes:t.attributes}})),{virtual:!0}).then((function(t){(f=t).replaceOriginalAttributes(g.map((function(t){return t.attributes})),["x","y"]),f.setData(null,g.map((function(t){return t.data})));for(var e=[],i=0;i<t.size;++i)for(var o=t.get(i),s=v[i],a=0;a<s.size;++a){var u=s.get(a),c=n._edgeGenerator(u,o);c.source||c.target||(c.source=u.getId(),c.target=o.getId()),e.push(c)}return r.addEdges(e,{virtual:!0})})).then((function(t){return p=t,f.setVisible(!0),p.setVisible(!0),f.addClass(gn),p.addClass(gn),Promise.all([f.removeClass(gn,i),p.removeClass(gn,i)])})).then((function(){return{virtualNodes:f,virtualEdges:p}}))},Jx.prototype.undo=function(t){var e=t.context,n=t.duration,r=e.virtualNodes,i=e.virtualEdges;return i&&r?Promise.all([r.addClass(gn,n),i.addClass(gn,n)]).then((function(){r.setVisible(!1),i.setVisible(!1)})):Promise.resolve()},Jx.prototype.cleanup=function(t){var e=t.ogma,n=t.context,r=n.virtualEdges,i=n.virtualNodes;if(r&&i){var o=i.filter((function(t){return!t.isVisible()})),s=r.filter((function(t){return!t.isVisible()}));e.removeNodes(o,{virtual:!0}),e.removeEdges(s,{virtual:!0})}return Promise.resolve()},Jx);function Jx(t){var e=Zx.call(this)||this,n=t.selector,r=void 0===n?function(){return!0}:n,i=t.neighborIdFunction,o=void 0===i?function(){return null}:i,s=t.nodeGenerator,a=void 0===s?function(){return{}}:s,u=t.edgeGenerator,c=void 0===u?Xx:u;return e._generateIds=function(t){return r&&r(t)&&o(t)||null},e._nodeGenerator=a,e._edgeGenerator=c||Xx,e}var Qx,$x=(E(tE,Qx=Xd),tE.prototype.run=function(t){for(var e=t.ogma,n=t.duration,r=e.getNodes().filter(this._selector?this._selector:function(t){return!0}),i=[],o=new Map,s=0;s<r.size;++s)for(var a=r.get(s),u=a.getAdjacentEdges(),c=this._dataFunction(a),l=0;l<u.size;++l){var d=u.get(l),h=d.getSource(),f=d.getTarget();if(h!==f&&void 0!==c){var p=h===a?f:h,g=o.get(p);g||(g=[],o.set(p,g)),g.push(c)}i.push(d)}var _=e.getEdges(i),v=e.getNodes(Zi(o)),y=Ki(o),m=v.getData(),b=new Array(v.size);for(s=0;s<b.length;++s){var x=y[s],E=m[s];for(l=0;l<x.length;++l)E=nt(E,x[l]);b[s]=E}return Promise.all([r.addClass(gn,n),_.addClass(gn,n)]).then((function(){return r.setVisible(!1),_.setVisible(!1),v.setData(b),{hiddenNodes:r,hiddenEdges:_,nodesWithDataChange:v,oldDataList:m,virtualNodes:new gr(new Uint32Array,e),virtualEdges:new Jn(new Uint32Array,e)}}))},tE.prototype.getName=function(){return rv.NeighborMerging},tE.prototype.undo=function(t){var e=t.duration,n=t.context,r=n.hiddenNodes,i=n.hiddenEdges,o=n.nodesWithDataChange,s=n.oldDataList;return r.setVisible(!0),i.setVisible(!0),r.addClass(gn),i.addClass(gn),Promise.all([r.removeClass(gn,e),i.removeClass(gn,e)]).then((function(){o.setData(s)}))},tE);function tE(t){var e=t.selector,n=void 0===e?function(){return!1}:e,r=t.dataFunction,i=void 0===r?function(){}:r,o=Qx.call(this)||this;return o._selector=n,o._dataFunction=i,o}function eE(t,e){return t.size===e.size&&0<t.filter((function(t){return e.includes(t)})).size}var nE,rE=(E(iE,nE=Xd),iE.prototype.getName=function(){return rv.NodeCollapsing},iE.prototype.run=function(t){for(var e=this,n=t.ogma,r=t.duration,i=n.getNodes().filter(this._selector),o=i.getAdjacentEdges(),s=[],a=i.map((function(t){return t.getAdjacentNodes().filter((function(t){return!e._selector(t)}))})),u=0;u<i.size;u++)for(var c=u;c<i.size;c++){var l=i.get(u),d=i.get(c);if(0<n.modules.graph.getEdgesBetweenTwoNodes(l,d).size&&(a[u].size||a[c].size)&&!eE(a[u],a[c]))throw Error("addNodeCollapsing: invalid connected nodes ["+l.getId()+"] and ["+d.getId()+"] to be collapsed. The addNodeCollapsing function supports only disconnected nodes.")}for(u=0;u<i.size;++u){var h=i.get(u),f=a[u];for(c=0;c<f.size-1;++c){var p=f.get(c),g=n.modules.graph.getEdgesBetweenTwoNodes(h,p);if(p!==h)for(var _=c+1;_<f.size;++_){var v=f.get(_),y=n.modules.graph.getEdgesBetweenTwoNodes(h,v),m=this._edgeGenerator(h,p,v,g,y);if(m)for(var b=R(m),x=0;x<b.length;++x)s.push(oE(n,b[x],x,h,p,v,g,y))}}}return n.addEdges(s,{virtual:!0}).then((function(t){return t.addClass(gn)})).then((function(t){return Promise.all([t.removeClass(gn,r),i.addClass(gn,r),o.addClass(gn,r)])})).then((function(t){var e=t[0];return i.setVisible(!1),o.setVisible(!1),{virtualEdges:e,virtualNodes:null,hiddenNodes:i,hiddenEdges:o}}))},iE.prototype.undo=function(t){var e=t.duration,n=t.context,r=t.ogma,i=n.hiddenNodes,o=n.hiddenEdges,s=n.virtualEdges||r.createEdgeList();return i.setVisible(!0),o.setVisible(!0),Promise.all([i.addClass(gn),o.addClass(gn)]).then((function(){return Promise.all([i.removeClass(gn,e),o.removeClass(gn,e),s.addClass(gn,e)])})).then((function(){s.setVisible(!1)}))},iE.prototype.cleanup=function(t){var e=t.ogma,n=t.context.virtualEdges||e.createEdgeList();return e.removeEdges(n.filter((function(t){return!t.isVisible()})),{virtual:!0})},iE);function iE(t){var e=t.selector,n=t.edgeGenerator,r=void 0===n?function(){return{}}:n,i=nE.call(this)||this;return i._selector=e||function(t){return!1},i._edgeGenerator=r,i}function oE(t,e,n,r,i,o,s,a){var u=void 0,c=void 0;if(void 0!==e.source&&(u=t.getNode(e.source))!==i&&u!==o)throw new Error(["addNodeCollapsing: edge generator produced RawEdge with invalid source ["+e.source+"]","expected to be ["+i.getId()+"] or ["+o.getId()+"]"].join("; "));if(void 0!==e.target&&(c=t.getNode(e.target))!==i&&c!==o)throw new Error(["addNodeCollapsing: edge generator produced RawEdge with invalid target ["+e.target+"]","expected to be ["+i.getId()+"] or ["+o.getId()+"]"].join("; "));if(u&&c&&u===c)throw new Error("addNodeCollapsing: edge generator produced RawEdge with same source and target ["+u.getId()+"]");if(u&&!c)c=u===i?o:i;else if(c&&!u)u=c===i?o:i;else if(!u&&!c){for(var l=!0,d=0;d<s.size;++d)s.get(d).getSource()===i&&(l=!1);for(d=0;d<a.size;++d)a.get(d).getTarget()===o&&(l=!1);c=l?(u=o,i):(u=i,o)}return u&&c?w(w({},e),{id:"_gen_"+r.getId()+"_"+u.getId()+"_"+c.getId()+"_"+n,source:u.getId(),target:c.getId()}):{}}var sE,aE=(E(uE,sE=Xd),uE.prototype.getName=function(){return rv.VirtualProperties},uE.prototype.run=function(t){var e=t.ogma,n={nodes:null,edges:null,oldNodesData:null,oldEdgesData:null,virtualEdges:null,virtualNodes:null};return this._nodeDataFunction&&(n.nodes=e.getNodes().filter(this._nodeSelector),n.oldNodesData=cE(n.nodes,this._nodeDataFunction)),this._edgeDataFunction&&(n.edges=e.getEdges().filter(this._edgeSelector),n.oldEdgesData=cE(n.edges,this._edgeDataFunction)),Promise.resolve(n)},uE.prototype.undo=function(t){var e=t.context,n=e.nodes,r=e.oldNodesData,i=e.edges,o=e.oldEdgesData;return n&&n.setData(r),i&&i.setData(o),Promise.resolve()},uE);function uE(t){var e=t.nodeSelector,n=void 0===e?function(){return!0}:e,r=t.edgeSelector,i=void 0===r?function(){return!0}:r,o=t.nodeDataFunction,s=void 0===o?null:o,a=t.edgeDataFunction,u=void 0===a?null:a,c=sE.call(this)||this;return c._nodeSelector=n||function(t){return!0},c._edgeSelector=i||function(t){return!0},c._nodeDataFunction=s,c._edgeDataFunction=u,c}function cE(t,e){for(var n=[],r=0;r<t.size;++r){var i=t.get(r),o=i.getData(),s=nt(o,e(i));n.push(o),i.setData(s)}return n}var lE=(dE.initNamespace=function(t){t.transformations=function(t){return w(w(w(w(w(w({},(s=t,{getList:function(){return s.modules.transformations.getList()},clear:function(){return s.modules.transformations.clear()},afterNextUpdate:function(){return s.modules.transformations.whenApplied()}})),(o=t,{addNodeGrouping:function(t){return void 0===t&&(t={}),o.modules.transformations.add(new Vx(t),{duration:t.duration,enabled:t.enabled})},addEdgeGrouping:function(t){return void 0===t&&(t={}),o.modules.transformations.add(new qx(t),{duration:t.duration,enabled:t.enabled})}})),(i=t,{addNodeFilter:function(t){return i.modules.filters.addNodeFilter(t)},addEdgeFilter:function(t){return i.modules.filters.addEdgeFilter(t)}})),(r=t,{addNeighborGeneration:function(t){return r.modules.transformations.add(new Kx(t),{duration:t.duration,enabled:t.enabled})},addNeighborMerging:function(t){return r.modules.transformations.add(new $x(t),{duration:t.duration,enabled:t.enabled})}})),(n=t,{addNodeCollapsing:function(t){return void 0===t&&(t={}),n.modules.transformations.add(new rE(t),{duration:t.duration,enabled:t.enabled})}})),(e=t,{addVirtualProperties:function(t){return e.modules.transformations.add(new aE(t),{duration:t.duration,enabled:t.enabled})}}));var e,n,r,i,o,s}(t)},dE.prototype.addNodeFilter=function(t){return this.modules.filters.addNodeFilter(t)},dE.prototype.addEdgeFilter=function(t){return this.modules.filters.addEdgeFilter(t)},dE.prototype.getNodeFilters=function(){return this.modules.transformations.getList().filter((function(t){return t.getName()===rv.NodeFilter}))},dE.prototype.getEdgeFilters=function(){return this.modules.transformations.getList().filter((function(t){return t.getName()===rv.EdgeFilter}))},dE.prototype.clearNodeFilters=function(){return Promise.all(this.getNodeFilters().map((function(t){return t.destroy()}))).then((function(){return Promise.resolve()}))},dE.prototype.clearEdgeFilters=function(){return Promise.all(this.getEdgeFilters().map((function(t){return t.destroy()}))).then((function(){return Promise.resolve()}))},dE);function dE(){}var hE=(fE.initNamespace=function(t){var e,n,r,i,o,s,a,u;t.view=(n=(e=t).modules,r=n.camera,i=n.captor,o=n.dom,s=n.graphics,a=n.locate,u=n.spatial,{setZoom:function(t,e){return r.setZoom(t,e)},zoomIn:function(t,e){return r.zoomIn(t,e)},zoomOut:function(t,e){return r.zoomOut(t,e)},getZoom:function(){return r.getZoom()},setCenter:function(t,e){return r.setCenter(t,e)},move:function(t,e){return r.move(t,e)},getCenter:function(){return r.getCenter()},setAngle:function(t,e){return r.setAngle(t,e)},rotate:function(t,e){return r.rotate(t,e)},getAngle:function(){return r.getAngle()},set:function(t,e){return r.setView(t,e)},get:function(){return r.getView()},graphToScreenCoordinates:function(t){return r.graphToScreenCoordinates(t)},screenToGraphCoordinates:function(t){return r.screenToGraphCoordinates(t)},getImageData:function(){return s.getImageData()},getElementAt:function(t,n){return void 0===n&&(n=!1),n&&(t=e.view.graphToScreenCoordinates(t)),i.getElementAt(t)},getElementsInside:function(t,n,r,i,o){if(void 0===o&&(o=!0),o){var s=e.view.graphToScreenCoordinates({x:t,y:n}),a=e.view.graphToScreenCoordinates({x:r,y:i});return u.queryProjected(s.x,s.y,a.x,a.y)}return u.queryProjected(t,n,r,i)},beforeNextFrame:function(){return o.beforeNextFrame()},afterNextFrame:function(){return o.afterNextFrame()},setFullScreen:function(t){return o.setFullScreen(t)},isFullScreen:function(){return o.isFullScreen()},forceResize:function(){return o.forceResize()},getSize:function(){return o.getDimensions()},setSize:function(t){if(!t||isNaN(t.width)||isNaN(t.height))throw new Error("Size must follow the format { width: number, height: number }");if(t.width<0)throw new Error("width must be positive");if(t.height<0)throw new Error("height must be positive");return o.setDimensions(t),Promise.resolve()},locateGraph:function(t){return a.locateGraph(t)},locateRawGraph:function(t,e){return a.locateRawGraph(t,e)},getGraphBoundingBox:function(){return a.getGraphBoundingBox()}})},fE);function fE(){}var pE=Object.freeze({__proto__:null,circleCircleIntersection:vc,circleSortCompare:yc,circleContainsPoint:mc,circleContainsCircle:bc,circleIntersectsBox:xc,circleLineIntersection:Ec,isPointInLine:Ea,twoSegmentsIntersect:function(t,e,n,r,i){if(void 0===i&&(i=!1),i&&(wa(t,n)||wa(t,r)||wa(e,n)||wa(e,r)))return!1;var o=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0==s)return!1;var a=o/s,u=(o=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/s;return!(a<=0||1<=a||u<=0||1<=u)},lineAngle:Sa,angle:function(t,e,n){var r=Sa(t.x,t.y,e.x,e.y)-Sa(n.x,n.y,e.x,e.y);return r<0?r+2*Math.PI:r},lineIntersection:function(t,e,n,r,i,o,s,a){var u=(a-o)*(n-t)-(s-i)*(r-e);if(0==u)return null;var c=e-o;return{x:t+(c=((s-i)*c-(a-o)*(t-i))/u)*(n-t),y:e+c*(r-e)}},segmentIntersection:Aa,segmentRectangleIntersection:Ca,lineLine:Ta,lineAABB:ka,distancePointSegment:Ia,distToSegmentSquared:Oa,getClosestPointOnSegment:Ma,getClosestPointOnLine:function(t,e,n,r,i,o){var s=i-n,a=o-r,u=((t-n)*s+(e-r)*a)/(s*s+a*a);return{x:n+s*u,y:r+a*u}},defaultAABB:Rs,rotate:Ps,move:function(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r={x:0,y:0}),r.x=t.x+n*Math.sin(e),r.y=t.y+n*Math.cos(e),r},distance:Ds,squaredDistance:Fs,radiansToDegrees:zs,degreesToRadians:function(t){return t*Math.PI/180},extendBounds:Bs,isPointInPolygon:Qc,polygonsIntersect:el,computeCentroid:nl,quadBezierAABB:Ra,cubicBezierAABB:Da,getSelfLoopControlPoints:Cs,getQuadraticCurveControlPoint:As,getPointOnQuadraticCurve:Fa,isPointOnQuadraticCurve:za,getPointOnBezierCurve:Ba,isPointOnBezierCurve:Ua,getQuadraticCurveBoundingBox:Va,getBezierCurveBoundingBox:ja,getAABB:Jh,getOBBPoints:Qh,moveAABB:$h,padBounds:function(t,e){return Bs(t,e)},overlapsAABB:function(t,e){return ef(t[0],t[1],t[2],t[3],e[0],e[1],e[2],e[3])},intersects:tf,overlaps:ef}),gE=1,_E=function(){function t(t){var e=this;void 0===t&&(t={}),this.node=function(t){return new fr(t,e)},this.edge=function(t){return new Zn(t,e)},this.nodeList=function(t){return new gr(t||new Uint32Array(0),e)},this.edgeList=function(t){return new Jn(t||new Uint32Array(0),e)},this._onReady=[],this._init(t)}return t.prototype._init=function(t){var e=this;this._initParameters=t,this._debug=!!t.debug,this._token=gE++,this.modules=new vv(this,t),Cx.initNamespace(this),mv.initNamespace(this),Sy.initNamespace(this),Dm.initNamespace(this),Gy.initNamespace(this),px.initNamespace(this),Rm.initNamespace(this),lE.initNamespace(this),Ox.initNamespace(this),hE.initNamespace(this),_x.initNamespace(this),Iv.initNamespace(this),kx.initNamespace(this),bx.initNamespace(this),Wy.initNamespace(this),yx.initNamespace(this),Av.initNamespace(this),this._onReady.forEach((function(t){return t(e)})),this.safelyBindToInstance()},t.prototype.safelyBindToInstance=function(){for(var e=0,n=Object.keys(t.prototype);e<n.length;e++){var r=n[e];"function"==typeof t.prototype[r]&&(this[r]=this[r].bind(this))}},t.prototype.onReady=function(t){this._onReady.push(t)},t.prototype._destroy=function(){if(!this._token)throw new Error('"destroy" called twice on the same instance of Ogma');this._onReady=[],this.modules.destroy(),this.modules=null},t.prototype.destroy=function(){this._destroy()},t.prototype.reset=function(){var t=this._initParameters;this._destroy(),this._init(t)},t.prototype.isDebug=function(){return this._debug},t.libraries=C,t.build={version:"3.1.0",commit:"d0e62a2",date:"Fri Sep 04 2020 16:52:54 GMT+0200 (Central European Summer Time)"},t.geometry=pE,t.algorithms=bf,t.utils=Do,t}(),vE=[mv,xv,wv,Av,Tv,Iv,Sy,Gy,Wy,Zy,Jy,Rm,Dm,px,yx,Ex,Sx,Cx,Ox,lE,hE,_x,kx,bx];return Object.assign.apply(Object,A([_E.prototype],vE.map((function(t){return t.prototype})))),_E}()}).call(this,n(111),n(180)(t))},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(u," */")),o=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(o).concat([i]).join("\n")}var s,a,u;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var u=[].concat(t[a]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e,n){"use strict";e.a=n.p+"f94dcc1d8e9a82597625b781e5975a26.woff"},function(t,e,n){"use strict";e.a=n.p+"3de0c8962a3ba1462c0eb64017fc1e5d.ttf"},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg"><defs><font id="webfont" horiz-adv-x="640"><font-face font-family="webfont" units-per-em="640" ascent="640" descent="0"></font><missing-glyph horiz-adv-x="0"></missing><glyph glyph-name="bicycle" unicode="" horiz-adv-x="512.001" d="M467.001 430.984H169.258L147.301 491.364C138.79 514.764 112.903 526.7909999999999 89.622 518.275C66.317 509.791 54.245 483.922 62.713 460.603L87.677 391.953L4.752 226.104C-7.446 201.664 4.765 171.982 30.773 163.296L153.876 122.262C163.829 92.505 191.943 70.99 225.006 70.99C264.197 70.99 296.443 101.212 299.712 139.572L490.855 257.829C504.096 266.1189999999999 512.0020000000001 280.3829999999999 512.0020000000001 295.986V385.9839999999999C512.0010000000001 410.7969999999999 491.8150000000001 430.9839999999999 467.0010000000001 430.9839999999999zM150.567 154.988L40.269 191.753C31.555 194.664 27.543 204.589 31.59 212.698L101.8 353.117L115.926 314.272L73.898 230.215C69.815 222.049 73.926 212.158 82.571 209.277L160.073 183.446C155.111 174.879 151.8 165.252 150.567 154.988zM130.048 275.436L150.887 218.129L108.465 232.269zM90.91 470.849C88.085 478.627 92.112 487.256 99.908 490.095C107.647 492.923 116.281 488.888 119.111 481.112L213.997 220.173C203.788 218.665 194.245 215.093 185.803 209.8949999999999zM225.006 100.99C200.193 100.99 180.007 121.177 180.007 145.989C180.007 170.8010000000001 200.194 190.9880000000001 225.006 190.9880000000001C249.819 190.9880000000001 270.005 170.8010000000001 270.005 145.989C270.005 121.177 249.819 100.99 225.006 100.99zM252.065 215.917C250.338 216.588 248.585 217.2050000000001 246.799 217.749L201.986 340.986H422.003V320.974zM482.002 295.9860000000001V295.9860000000001C482.001 290.7850000000001 479.359 286.0260000000001 475.003 283.2980000000001L295.3 172.118C291.74 181.664 286.281 190.285 279.396 197.545L444.89 299.854C449.311 302.587 452.002 307.415 452.002 312.613V355.985C452.002 364.269 445.286 370.985 437.002 370.985H191.077L180.168 400.9840000000001H467.002C475.273 400.9840000000001 482.002 394.255 482.002 385.9840000000001z"></glyph><glyph glyph-name="box" unicode="" horiz-adv-x="512" d="M511.9 445.731C511.302 451.238 507.88 456.112 502.765 458.499L262.765 570.499C258.476 572.5 253.522 572.5 249.233 570.499L9.233 458.499C4.119 456.112 0.697 451.239 0.098 445.731C0.085 445.616 0 444.084 0 444V172C0 165.458 3.983 159.574 10.058 157.145L250.058 61.145C251.965 60.382 253.983 60 256 60C258.017 60 260.0350000000001 60.381 261.942 61.145L501.942 157.145C508.017 159.574 512 165.458 512 172V444C512 444.084 511.913 445.617 511.9 445.731zM256 538.344L455.744 445.13L378.83 414.3640000000001L175.327 500.696zM136.31 482.488L336.656 397.495L256 365.233L56.256 445.13zM32 420.368L240 337.168V99.633L32 182.833zM272 99.632V337.168L480 420.368V182.833z"></glyph><glyph glyph-name="coal" unicode="" horiz-adv-x="512" d="M362 104.277C356.48 104.277 352 99.797 352 94.277C352 88.757 356.48 84.277 362 84.277C367.52 84.277 372 88.757 372 94.277C372 99.797 367.52 104.277 362 104.277zM150 104.277C144.48 104.277 140 99.797 140 94.277C140 88.757 144.48 84.277 150 84.277S160 88.757 160 94.277C160 99.797 155.52 104.277 150 104.277zM110 244.277C104.48 244.277 100 239.797 100 234.277C100 228.757 104.48 224.277 110 224.277S120 228.757 120 234.277C120 239.7970000000001 115.52 244.277 110 244.277zM410 244.277H150C144.478 244.277 140 239.799 140 234.277C140 228.755 144.478 224.277 150 224.277H410C415.522 224.277 420 228.755 420 234.277C420 239.799 415.522 244.277 410 244.277zM502 384.277H460.143L351.352 493.068C331.858 512.56 300.143 512.56 280.649 493.068L256 468.42L231.352 493.068C211.814 512.606 180.191 512.61 160.649 493.068L51.857 384.277H10C4.478 384.277 0 379.799 0 374.277V334.277C0 320.608 9.193 309.053 21.718 305.449L56.757 147.771C59.826 133.9379999999999 71.868 124.2769999999999 86.04 124.2769999999999H101.006C105.652 101.4819999999999 125.853 84.2769999999999 150 84.2769999999999C174.147 84.2769999999999 194.348 101.4819999999999 198.994 124.2769999999999H313.006C317.652 101.4819999999999 337.853 84.2769999999999 362 84.2769999999999C386.147 84.2769999999999 406.348 101.4819999999999 410.9940000000001 124.2769999999999H425.9600000000001C440.1320000000001 124.2769999999999 452.174 133.9379999999999 455.242 147.7679999999999L490.282 305.449C502.807 309.053 512 320.608 512 334.277V374.277C512 379.8 507.522 384.277 502 384.277zM294.791 478.926C306.486 490.621 325.514 490.621 337.209 478.926L431.857 384.278H340.142L270.142 454.278zM174.791 478.926C186.486 490.621 205.514 490.621 217.209 478.926L311.857 384.278H80.143zM150 104.277C133.458 104.277 120 117.735 120 134.277C120 150.819 133.458 164.277 150 164.277C166.542 164.277 180 150.819 180 134.277C180 117.735 166.542 104.277 150 104.277zM362 104.277C345.458 104.277 332 117.735 332 134.277C332 150.819 345.4580000000001 164.277 362 164.277C378.5420000000001 164.277 392 150.819 392 134.277C392 117.735 378.542 104.277 362 104.277zM435.718 152.103C434.7120000000001 147.568 430.608 144.277 425.9600000000001 144.277H410.9940000000001C406.348 167.072 386.1470000000001 184.277 362 184.277C337.853 184.277 317.652 167.072 313.006 144.277H198.994C194.348 167.072 174.147 184.277 150 184.277C125.853 184.277 105.652 167.072 101.006 144.277H86.04C81.393 144.277 77.288 147.568 76.281 152.106L42.466 304.277H469.534zM492 334.277C492 328.763 487.514 324.277 482 324.277H30C24.486 324.277 20 328.763 20 334.277V364.277H492z"></glyph><glyph glyph-name="factory" unicode="" horiz-adv-x="640" d="M629.328125 266.6643245016469L596.613281 266.6643245016469L575.996094 566.0547399927609C575.609375 571.660204051419 570.949219 576.003950997222 565.328125 575.9961390027148L501.328125 575.9961390027148C495.707031 576.003950997222 491.046875 571.660204051419 490.660156 566.0547399927609L470.042969 266.6643245016469L448 266.6643245016469L448 330.6642795016785C448 336.5509943625821 443.222656 341.332241000768 437.335938 341.332241000768C434.90625 341.3361479980209 432.554688 340.5080225802967 430.664062 338.992399645969L341.332031 267.5276058946522L341.332031 330.6642795016785C341.332031 336.5509943625821 336.5585940000001 341.332241000768 330.6679690000001 341.332241000768C328.242188 341.3361479980209 325.890625 340.5080225802967 324 338.992399645969L234.667969 267.5276058946522L234.667969 330.6642795016785C234.667969 336.5509943625821 229.894531 341.332241000768 224.003906 341.332241000768C221.578125 341.3361479980209 219.222656 340.5080225802967 217.335938 338.992399645969L128.003906 267.5276058946522L128.003906 330.6642795016785C128 336.5509943625821 123.222656 341.3283350035145 117.335938 341.3283350035145C115.394531 341.3283350035145 113.5 340.8009913743029 111.839844 339.8048990746804L5.171875 275.8049440746487C1.964844 273.8752574314596 0 270.4104158676763 0 266.6643245016469L0 10.6645045015202C0 4.7738846433624 4.777344 0.0004499996836 10.667969 0.0004499996836L629.328125 0.0004499996836C635.21875 0.0004499996836 639.996094 4.7738846433624 639.996094 10.6645045015202L639.996094 255.9963640025566C639.996094 261.8908908579674 635.21875 266.6643245016469 629.328125 266.6643245016469zM511.289062 554.6641220017892L555.367188 554.6641220017892L575.234375 266.6643245016469L491.421875 266.6643245016469zM362.660156 21.3324660006099L362.660156 149.3323760006731L426.660156 149.3323760006731L426.660156 21.3324660006099zM618.664062 21.3324660006099L448 21.3324660006099L448 160.0003374997627C448 165.8870523606664 443.21875 170.6643920015994 437.328125 170.6643920015994L351.9960940000001 170.6643920015994C346.1054690000001 170.6643920015994 341.328125 165.8870523606664 341.328125 160.0003374997627L341.328125 21.3324660006099L21.332031 21.3324660006099L21.332031 260.6252667478593L106.664062 311.8244497484338L106.664062 245.3323085007206C106.664062 239.4377816453098 111.4375 234.6643470016311 117.328125 234.6565350071238C119.75 234.6565350071238 122.105469 235.4846594248489 124 237.0002833591758L213.332031 308.4650771104927L213.332031 245.3323085007206C213.332031 239.4377816453098 218.101562 234.6643470016311 223.996094 234.6565350071238C226.417969 234.6565350071238 228.769531 235.4846594248489 230.664062 236.9963773619222L319.9960940000001 308.4611711132391L319.9960940000001 245.328402503467C319.9960940000001 239.4377816453098 324.765625 234.6565350071238 330.660156 234.6565350071238C333.082031 234.6565350071238 335.4335940000001 235.4846594248489 337.328125 236.9963773619222L426.660156 308.4611711132391L426.660156 255.9963640025566C426.660156 250.1018361471465 431.4375 245.328402503467 437.328125 245.328402503467L618.65625 245.328402503467L618.65625 21.3324660006099zM618.664062 21.3324660006099M362.5898440000001 618.6601710045672C366.46875 616.5820474657479 369.972656 613.8711123718741 372.960938 610.640645643296C378.941406 603.3476817711612 387.457031 598.5976851110026 396.796875 597.328155003641C406.6367190000001 598.582060121989 415.6210940000001 603.539087636579 421.929688 611.195332253282C424.628906 614.0273622620109 427.648438 616.5312665014533 430.9335940000001 618.6601710045672C433.128906 618.5625150732316 438.878906 613.1797068580186 441.972656 610.2890828904885C447.726562 603.1679948975036 455.992188 598.5312791576944 465.0625 597.328155003641C475.539062 598.6562790698038 485.113281 603.9101813756537 491.859375 612.0273636682599C494.472656 614.4804869434076 498.429688 618.2031403259169 499.195312 618.6601710045672C504.921875 618.6601710045672 506.234375 616.7617353394048 509.757812 611.6836139099589C514.386719 602.9375260595519 523.433594 597.4258109349767 533.332031 597.328155003641C539.21875 597.328155003641 543.996094 602.1054956445734 543.996094 607.992210505477C543.996094 613.8867373608878 539.21875 618.6601710045672 533.332031 618.6601710045672C531.195312 618.6601710045672 530.78125 618.8086089001969 527.316406 623.8125113818279C521.652344 633.9882852269869 510.835938 640.2109378516843 499.195312 639.9960937527466C490.566406 638.7968758459467 482.714844 634.3593789660616 477.246094 627.5781337341247C473.703125 624.2382920824509 467.765625 618.6601710045672 465.511719 618.6093900402726C462.207031 620.6093886340236 459.191406 623.0468869201576 456.527344 625.8476659508599C450.113281 633.6601604576997 440.957031 638.7187509008783 430.929688 639.9960937527466C421.6835940000001 638.7343758898919 413.2617190000001 634.0234422022672 407.34375 626.8125092724545C404.351562 623.6015735301436 400.894531 620.8554824609889 397.09375 618.6601710045672C393.539062 620.6992325708521 390.304688 623.2461057800818 387.4960940000001 626.2343846789482C381.2617190000001 633.8046923560756 372.3867190000001 638.7187509008783 362.660156 639.9960937527466C356.773438 640.0156249890136 351.976562 635.2578153343486 351.957031 629.3632884789378C351.9375 623.4765736180342 356.6992190000001 618.6797029908338 362.5898440000001 618.6601710045672zM362.5898440000001 618.6601710045672M117.335938 149.3323760006731L74.664062 149.3323760006731C68.773438 149.3323760006731 64 144.5550363597401 64 138.6683214988365L64 74.6683664988048C64 68.773839643394 68.773438 64.0004049997152 74.664062 64.0004049997152L117.335938 64.0004049997152C123.222656 64.0004049997152 128 68.773839643394 128 74.6683664988048L128 138.6683214988365C128 144.5550363597401 123.222656 149.3323760006731 117.335938 149.3323760006731zM106.664062 85.3324210006415L85.332031 85.3324210006415L85.332031 127.9964540024933L106.664062 127.9964540024933zM106.664062 85.3324210006415M202.667969 149.3323760006731L160 149.3323760006731C154.105469 149.3323760006731 149.332031 144.5550363597401 149.332031 138.6683214988365L149.332031 74.6683664988048C149.332031 68.773839643394 154.105469 64.0004049997152 160 64.0004049997152L202.667969 64.0004049997152C208.554688 64.0004049997152 213.332031 68.773839643394 213.332031 74.6683664988048L213.332031 138.6683214988365C213.332031 144.5550363597401 208.554688 149.3323760006731 202.667969 149.3323760006731zM191.996094 85.3324210006415L170.664062 85.3324210006415L170.664062 127.9964540024933L191.996094 127.9964540024933zM191.996094 85.3324210006415M288 149.3323760006731L245.332031 149.3323760006731C239.4375 149.3323760006731 234.664062 144.5550363597401 234.664062 138.6683214988365L234.664062 74.6683664988048C234.664062 68.773839643394 239.4375 64.0004049997152 245.332031 64.0004049997152L288 64.0004049997152C293.8867190000001 64.0004049997152 298.664062 68.773839643394 298.664062 74.6683664988048L298.664062 138.6683214988365C298.664062 144.5550363597401 293.8867190000001 149.3323760006731 288 149.3323760006731zM277.328125 85.3324210006415L255.996094 85.3324210006415L255.996094 127.9964540024933L277.328125 127.9964540024933zM277.328125 85.3324210006415"></glyph><glyph glyph-name="frame" unicode="" horiz-adv-x="512" d="M495.768 149.936L455.264 312.432V312.504V312.568L423.728 430.072V430.072L407.728 493.944A8 8 0 0 1 398.216 499.808L365.6 492.472A8 8 0 0 1 359.536 482.96L372.864 422.024L373.264 420H174.248L167.76 445.944A8 8 0 0 1 158.064 451.76L126.064 443.76A8 8 0 0 1 120.376 433.576L148.84 343.904L17.96 193.248A8 8 0 0 1 16 188V180A8 8 0 0 1 20.424 172.8L30.112 168L20.424 163.2A8 8 0 0 1 16 156V140A8 8 0 0 1 24 132H227.584A39.904 39.904 0 0 1 254.544 142.448L412 285.536L456.352 137.704A8 8 0 0 1 466.544 132.408L490.544 140.408A8 8 0 0 1 495.768 149.936zM394.168 482.488L406.08 434.824L386.976 432.424L376.88 478.584zM32 151.056L43.576 156.8A8 8 0 0 1 48 164V172A8 8 0 0 1 43.576 179.2L32 184.944L163.864 336.8A8 8 0 0 1 165.464 344.472L138.2 430.304L154.2 434.304L160.264 410.064A8 8 0 0 1 168 404H383A8 8 0 0 1 390.84 413.6L390.216 416.8L410.08 419.2L437.824 315.704L413.472 307.592A7.824 7.824 0 0 1 410.696 305.992L410.616 305.944L255.872 165.2720000000001A31.848 31.848 0 0 1 246.464 186.744L402.256 340.6A8 8 0 0 1 404.328 348.488L394.728 382.2A8 8 0 0 1 387 388H180.8A8 8 0 0 1 173.072 377.9360000000001L221.68 195.768A31.808 31.808 0 0 1 207.2 191.12L175.552 306.624A8 8 0 0 1 161.76 309.712L62.048 193.2A8 8 0 0 1 60.352 186.12L64.224 170.12A8 8 0 0 1 72 164H192A31.672 31.672 0 0 1 196.448 148H32zM208 164A16 16 0 1 0 224 148A16 16 0 0 0 208 164zM191.24 372H380.968L387.64 348.648L237.112 200zM193.64 180H78.296L76.856 185.904L164.112 287.848zM469.28 150.192L425.888 294.8640000000001L441.832 300.1760000000001L478.448 153.2480000000001z"></glyph><glyph glyph-name="shopping-cart" unicode="" horiz-adv-x="511" d="M430.9339334948034 183.45725H461.6589568488077C472.3255830337028 183.45725 481.0000177929691 192.14865 481.0000177929691 202.83615C481.0000177929691 213.51975 472.3255830337028 222.21115 461.6589568488077 222.21115H299.0124043752423C294.8798614624974 222.21115 291.527052666544 218.85178 291.527052666544 214.71115C291.527052666544 210.57053 294.8798614624974 207.21115 299.0124043752423 207.21115H461.6589568488077C464.0683119153967 207.21115 466.0293143755725 205.25022 466.0293143755725 202.83615C466.0293143755725 200.42209 464.0683119153967 198.45725 461.6589568488077 198.45725H195.9601601554719C187.8354396452234 198.45725 180.4319577232804 202.93381 176.6424934305175 210.14084C172.8569414815809 217.34397 173.3559649288274 225.9885 177.9446352332937 232.70334L188.7983952109062 248.58225L200.3344200455942 249.96115L185.1492862529158 227.75412C182.3539764717574 223.66037 182.0654810364352 218.60178 184.3695621165931 214.21897C186.6814479234658 209.83225 191.0167141214202 207.21115 195.9601601554719 207.21115H269.0709975404492C273.2074328360827 207.21115 276.5563492491475 210.57053 276.5563492491475 214.71115C276.5563492491475 218.85178 273.2074328360827 222.21115 269.0709975404492 222.21115H199.5079074708576L216.934744412788 247.6916200000001C217.9054947247167 249.1095900000001 218.66572700519 250.6330300000001 219.2232360004539 252.2189700000001L388.8054359141687 272.5080300000001L421.0314319732702 276.3556900000001C445.3120465685947 279.2697500000001 463.6199692894526 299.9377200000001 463.6199692894526 324.4299000000001V352.0549000000001C463.6199692894526 356.1955300000001 460.2671505130303 359.5549000000001 456.1346175807543 359.5549000000001C452.0020746680094 359.5549000000001 448.6492658720561 356.1955300000001 448.6492658720561 352.0549000000001V348.4260000000001L357.6281675708628 342.3947500000001L353.8776969702676 386.5783440000001L448.6492658720561 387.1486540000001V382.1720940000001C448.6492658720561 378.0314740000001 452.0020746680094 374.6720900000001 456.1346175807543 374.6720900000001C460.2671505130303 374.6720900000001 463.6199692894526 378.0314740000001 463.6199692894526 382.1720940000001V394.648658C463.6199692894526 394.679858 463.6239614770305 394.707258 463.6239614770305 394.738558C463.6239614770305 394.761958 463.6199692894526 394.785458 463.6199692894526 394.808858V435.933862C463.6199692894526 446.683862 455.2301375826199 455.547144 444.5206253226685 456.11355L226.6345126686429 467.67605C226.5447882528279 467.67995 226.4551736221714 467.68777 226.3655090891702 467.68777L118.0228378520086 473.4377704L116.3386337175514 481.0315204C113.6446855789978 493.195542 103.9995005078027 502.508042 91.7695196947172 504.754136L67.6643467727411 509.179917L68.7793517886592 515.515855C69.1887067107169 517.851792 68.670190409574 520.207261 67.3134704123725 522.144761C65.9567504151709 524.086167 63.9255692895619 525.379136 61.5980929921503 525.793198L-3.3412318511959 537.265854C-9.3139201326938 538.320541 -15.3411874070544 536.984604 -20.3119290256236 533.496322C-25.2826696461459 530.008042 -28.600395097664 524.793198 -29.6530231807231 518.804917C-31.8284530220401 506.445542 -23.563378175066 494.621323 -11.2281423384403 492.441636L53.711183103734 480.9689784C54.2296994048769 480.8791384 54.7443173348499 480.8322604 55.2511385224832 480.8322604C59.461648858626 480.8322604 63.2043247129751 483.8635108 63.9645559954015 488.160386L65.0639665285931 494.410386L89.071679173275 490.004136C95.3718501947627 488.847886 100.3386944402089 484.0510108 101.7265984126289 477.78538536L143.4106557306769 289.53537C143.4106557306769 289.5313700000001 143.4146479182549 289.5236700000001 143.4146479182549 289.51977L149.8239753285933 260.57446C151.7109127287288 252.05492 159.1728702182201 246.18774 167.6718583139035 246.18774C168.1318980494511 246.18774 168.5919377849988 246.21114 169.055869903435 246.24634L165.593894738162 241.17993C157.8551389229519 229.85962 157.0130368557234 215.2854 163.3989700468549 203.14868C169.7888155818128 191.00415 182.2644017629766 183.46118 195.9602499796924 183.46118H204.3695735423745V179.54322C183.6328138795471 175.9689999999999 167.8005165390725 157.83228 167.8005165390725 136.05103C167.8005165390725 111.71118 187.5626235266137 91.9104 211.8549252510727 91.9104C236.1433345926432 91.9104 255.9093439435418 111.71118 255.9093439435418 136.05103C255.9093439435418 146.92603 251.9249511118154 157.37525 244.6930134900979 165.4729C241.9366874206384 168.55884 237.2076617813996 168.82447 234.1238465844501 166.06275C231.043943731327 163.30103 230.7788325347428 158.55884 233.5390609675597 155.4729C238.3109726818549 150.12915 240.9386405261453 143.23072 240.9386405261453 136.05103C240.9386405261453 119.98072 227.8899558572257 106.9104 211.8549252510727 106.9104C195.8199046253887 106.9104 182.7712199564691 119.98072 182.7712199564691 136.05103C182.7712199564691 149.52759 191.9485705458705 160.89087 204.3695735423744 164.20728V155.76197C196.4397815710894 152.73072 190.7828817145093 145.04712 190.7828817145093 136.05103C190.7828817145093 124.4065 200.2331382467409 114.93384 211.8549252510727 114.93384C223.4767222358734 114.93384 232.926978768105 124.4065 232.926978768105 136.05103C232.926978768105 145.04712 227.2700789115249 152.72681 219.3402769597709 155.76197V183.45725H415.9633199016273V179.53928C395.226550258331 175.96897 379.3942529178564 157.83225 379.3942529178564 136.0509999999999C379.3942529178564 111.7111499999999 399.1563599053976 91.9064699999999 423.4486716103255 91.9064699999999C447.7409733347846 91.9064699999999 467.5030803223257 111.7111499999999 467.5030803223257 136.0509999999999C467.5030803223257 146.9259999999999 463.5225898539567 157.37522 456.2906522322392 165.47287C453.5343261627797 168.5588099999999 448.8013981601835 168.82053 445.7214853265914 166.0588099999999C442.6415824734683 163.2970899999999 442.3764712768841 158.5588099999999 445.1327973463436 155.46897C449.9047090606387 150.12522 452.5362792682866 143.23069 452.5362792682866 136.0509999999999C452.5362792682866 119.9806899999999 439.487594599367 106.90647 423.4525639932141 106.90647C407.4136410041726 106.90647 394.364956335253 119.98069 394.364956335253 136.0509999999999C394.364956335253 149.5236499999999 403.5462092880118 160.8908399999999 415.9672122845158 164.2072499999999V155.7619399999999C408.0335179498733 152.7306899999999 402.3766280737622 145.0470899999999 402.3766280737622 136.0509999999999C402.3766280737622 124.40647 411.8307769888823 114.9338099999999 423.4525639932141 114.9338099999999C435.0704586146573 114.9338099999999 444.5246175102464 124.40647 444.5246175102464 136.0509999999999C444.5246175102464 145.0470899999999 438.8677176536663 152.7267799999999 430.9379157019124 155.7619399999999V183.45725zM-8.6277628927297 507.215073C-12.8343740592651 507.957261 -15.6491786904136 511.988511 -14.9084402618836 516.199448C-14.5497671591751 518.242417 -13.4191676605306 520.019761 -11.7271657856868 521.211167C-10.4094324943249 522.133042 -8.877274616353 522.613511 -7.3022308629342 522.613511C-6.8499918619139 522.613511 -6.3938524936299 522.574451 -5.9416124945627 522.492417L52.970444675204 512.086167L50.280396903914 496.804917zM263.1606835968884 272.58225L255.6207586839992 320.6095900000001L343.9557035928849 326.46115L347.6710928451386 282.69162zM448.649265872056 333.3908400000001V324.43381C448.649265872056 307.52756 436.0099301369127 293.26194 419.2575633058118 291.25412L362.544327002819 284.46897L358.8952180448286 327.44944zM342.6847507555616 341.40647L253.2854786579196 335.4885L245.3634814328806 385.929904L338.8602051144572 386.488504zM137.5432278621725 385.281474L230.225136078616 385.840064L238.2874886384276 334.4924L150.0811919742421 328.65256zM333.7257229243307 446.972885L337.589252277134 401.484598L243.012611914309 400.918198L234.9580640812123 452.215072zM448.6492658720561 435.937728V402.148658L352.6067441329443 401.574448L348.8211822035388 446.172104L443.7292040767424 441.136947C446.4894225290904 440.98851 448.6492658720561 438.70726 448.6492658720561 435.937728zM219.6754710092867 453.023666L227.8742765405133 400.824448L134.2255004145607 400.261948L121.3912461209228 458.23851zM164.4359208092954 263.82444L153.3638380735126 313.83615L240.6227586840384 319.6174L248.2874494392081 270.8049L212.0107802541169 266.46506C211.9874259567858 266.46106 211.9639718547652 266.46106 211.9445099403226 266.46106L183.6522159111762 263.07435C183.6366463796221 263.07435 183.621076848068 263.07035 183.6054075118245 263.06635L168.1123163693813 261.21506C166.3930209061138 261.01194 164.8140807776189 262.12912 164.4359208092955 263.82444zM211.8509430439638 129.93381C208.4864271579381 129.93381 205.749602924797 132.6799 205.749602924797 136.051C205.749602924797 139.42209 208.4864271579381 142.16428 211.8509430439638 142.16428C215.2193513128781 142.16428 217.9561855264881 139.42209 217.9561855264881 136.051C217.9561855264881 132.6799 215.2154489495206 129.93381 211.8509430439638 129.93381zM423.4485817861052 129.93381C420.0840659000795 129.93381 417.3433393035809 132.6799 417.3433393035809 136.051C417.3433393035809 139.42209 420.0840659000795 142.16428 423.4485817861052 142.16428C426.8130876916619 142.16428 429.549921905272 139.42209 429.549921905272 136.051C429.549921905272 132.6799 426.8130876916619 129.93381 423.4485817861052 129.93381zM423.4485817861052 129.93381"></glyph><glyph glyph-name="webfont" unicode="" horiz-adv-x="150" d></glyph><glyph glyph-name="wheel" unicode="" horiz-adv-x="512.001" d="M256.5411841 575.670781C202.26461566 575.670781 150.38260171 558.87804196 106.48243606 526.89187236C103.28969674 524.49290964 102.49151191 518.89532996 104.8860664 515.6967129999999C107.28062089 512.49809604 112.8679147 511.6984418 116.06065402 514.0974045199999C156.76808035 543.6846114 205.45735498 559.6776962 256.5411841 559.6776962C388.24168105 559.6776962 495.9966331 451.7243738 495.9966331 319.7814242C495.9966331 187.8384746 388.24168105 79.8851522 256.5411841 79.8851522C124.84068715 79.8851522 17.0857351 187.8384746 17.0857351 319.7814242C17.0857351 377.35652948 37.83854068 433.33232628 75.35322769 476.51365524C78.54596701 479.7122722 77.74778218 484.51019764 74.55504286 487.7088146C71.36230354 490.90743156 66.57319456 490.10777732 63.38045524 486.90916036C23.47121374 440.52921444 1.1220385 381.35480068 1.1220385 319.7814242C1.1220385 179.04227796 116.06065402 63.8920674 256.5411841 63.8920674C397.02171418 63.8920674 511.9603297 179.04227796 511.9603297 319.7814242C511.9603297 460.52057044 397.02171418 575.670781 256.5411841 575.670781zM444.91280398 254.20977652C448.90372813 252.61046804 453.69283711 255.00943076 454.49102194 259.8073562C460.07831575 278.99905796 463.27105507 299.7900682 463.27105507 319.7814242C464.0692399 434.13198052 370.68161479 527.6915266 256.5411841 527.6915266C142.40075341 527.6915266 49.0131283 434.13198052 49.0131283 319.7814242C49.0131283 205.43086788 142.40075341 111.8713218 256.5411841 111.8713218C332.36874295 111.8713218 401.81082316 153.45334228 438.52732534 219.8246442C440.92187983 223.8229154 439.32551017 228.62084084 435.33458602 231.01980356C431.34366187 233.41876628 426.55455289 231.8194578 424.1599984 227.8211866C416.97633493 214.22706452 407.39811697 201.43259668 397.02171418 190.23743732L290.06494696 297.39110548C292.45950145 301.3893766800001 294.85405594 306.1873021200001 295.65224077 311.7848818H448.1055433C447.30735847 295.7917970000001 444.91280398 279.7987122 440.123695 263.8056274000001C438.52732534 259.8073562 440.92187983 255.8090850000001 444.9128039799999 254.20977652zM248.5593358 358.96448196C243.77022682 358.16482772 238.98111784 355.765865 234.19200886 353.36690228L127.23524164 461.32022468C159.16263484 490.90743156 202.26461566 510.09913332 248.5593358 511.6984418zM223.01742124 342.17174292C220.62286675 338.17347172 218.22831226 333.37554628 217.43012743 327.7779666H64.9768249C66.57319456 374.95756676 85.72963048 417.33924148 115.26246919 449.32541108zM217.43012743 311.7848818C218.22831226 306.98695636 220.62286675 302.18903092 223.01742124 297.39110548L115.26246919 190.23743732C85.72963048 222.22360692 66.57319456 265.40493588 64.9768249 311.7848818zM234.1920088600001 286.1959461200001C238.1829330100001 283.7969834 242.9720419900001 281.39802068 248.5593358000001 280.59836644V127.8644066C201.46643083 129.46371508 159.16263484 148.65541684 127.23524164 178.2426237199999zM264.5230324000001 280.59836644C269.31214138 281.39802068 274.1012503600001 283.7969834000001 278.8903593400001 286.1959461200001L386.64531139 178.2426237199999C353.91973336 147.8557626 310.81775254 129.46371508 265.32121723 127.8644066V280.59836644zM256.5411841 295.791797C242.97204199 295.791797 232.5956392 306.18730212 232.5956392 319.7814242C232.5956392 333.37554628 242.97204199 343.7710514 256.5411841 343.7710514C270.11032621 343.7710514 280.4867290000001 333.37554628 280.4867290000001 319.7814242C280.4867290000001 306.18730212 270.1103262100001 295.791797 256.5411841 295.791797zM290.0649469600001 342.17174292L325.9832643100001 378.15618372C329.1760036300001 381.3548006800001 329.1760036300001 386.15272612 325.9832643100001 389.35134308C322.7905249900001 392.54996004 318.00141601 392.54996004 314.8086766900001 389.35134308L278.8903593400001 353.36690228C274.89943519 355.765865 270.11032621 358.16482772 264.5230324 358.96448196V511.6984418C311.61593737 510.09913332 353.91973336 490.90743156 385.84712656 461.32022468L336.3596671 411.7416618C333.16692778 408.54304484 333.16692778 403.7451194 336.3596671 400.54650244C337.95603676 398.94719396 340.35059125 398.14753972 341.94696091 398.14753972C343.54333057 398.14753972 345.93788506 398.94719396 347.53425472 400.54650244L397.02171418 450.12506532C426.55455289 418.13889572 445.71098881 374.95756676 447.30735847 328.57762084H295.65224077C294.85405594 332.57589204 292.45950145 337.37381748 290.06494696 342.17174292z"></glyph><glyph glyph-name="wholesale" unicode="" horiz-adv-x="512" d="M488 156H480V532A8 8 0 0 1 472 540H40A8 8 0 0 1 32 532V156H24A8 8 0 0 1 16 148V116A8 8 0 0 1 24 108H48V84A8 8 0 0 1 56 76H104A8 8 0 0 1 112 84V108H224V84A8 8 0 0 1 232 76H280A8 8 0 0 1 288 84V108H400V84A8 8 0 0 1 408 76H456A8 8 0 0 1 464 84V108H488A8 8 0 0 1 496 116V148A8 8 0 0 1 488 156zM336 156V268H368V228A8 8 0 0 1 376 220H424A8 8 0 0 1 432 228V268H464V156zM96 268H128V236H96zM48 284V396H80V356A8 8 0 0 1 88 348H136A8 8 0 0 1 144 356V396H176V284zM96 396H128V364H96zM192 396H224V356A8 8 0 0 1 232 348H280A8 8 0 0 1 288 356V396H320V284H192zM240 524H272V492H240zM232 476H280A8 8 0 0 1 288 484V524H320V412H192V524H224V484A8 8 0 0 1 232 476zM240 396H272V364H240zM384 396H416V364H384zM376 348H424A8 8 0 0 1 432 356V396H464V284H336V396H368V356A8 8 0 0 1 376 348zM384 268H416V236H384zM240 268H272V236H240zM224 268V228A8 8 0 0 1 232 220H280A8 8 0 0 1 288 228V268H320V156H192V268zM464 412H336V524H368V484A8 8 0 0 1 376 476H424A8 8 0 0 1 432 484V524H464zM384 524H416V492H384zM96 524H128V492H96zM80 524V484A8 8 0 0 1 88 476H136A8 8 0 0 1 144 484V524H176V412H48V524zM48 268H80V228A8 8 0 0 1 88 220H136A8 8 0 0 1 144 228V268H176V156H48zM96 92H64V108H96zM272 92H240V108H272zM448 92H416V108H448zM480 124H32V140H480zM432 188H448V172H432zM288 188H304V172H288zM432 316H448V300H432zM288 316H304V300H288zM144 188H160V172H144zM144 316H160V300H144zM432 444H448V428H432zM288 444H304V428H288zM144 444H160V428H144z"></glyph></font></defs></svg>'},function(t,e,n){"use strict";n.r(e);var r=n(94),i=n(134),o=n.n(i),s=(n(181),n(95));const a=new o.a({container:"app"});function u(t){const e=t.getAdjacentEdges().filter(e=>e.getSource()===t).reduce((t,e)=>t+e.getData("neo4jProperties.quantity"),0);return t.getData("neo4jProperties.stock")-e<100}new class{constructor(t,e,n){this._db=e,this._pass=n,this._uri=t;const i=r.driver(this._uri,r.auth.basic(e,n));this._session=i.session({database:e,defaultAccessMode:r.session.READ})}getGraph(){return this._session.run("MATCH (a)-[r]-() RETURN a, r").then(t=>a.parse.neo4j(t))}getGraph(){return fetch("dist/graph.json").then(t=>t.json())}}(s.b,s.a,s.c).getGraph().then(t=>a.parse.neo4j(t)).then(t=>a.setGraph(t)).then(()=>a.layouts.force()).then(()=>a.view.locateGraph());const c={color:"#6FC1A7",icon:""},l={color:"#3DCB8D",icon:""},d={color:"#E77152",icon:""},h={color:"#9AD0D0",icon:""},f={SupplierA:c,SupplierB:c,RawSupplierA:l,RawSupplierB:l,AllRawSupliers:l,Retailer:h,AllRetailers:h,Wholesaler:d,AllWholesalers:d,FrameSupplier:{color:"#6FC1A7",icon:""},WheelSupplier:{color:"#6FC1A7",icon:""},Product:{color:"#76378A",icon:""}},p=a.rules.slices({field:"neo4jProperties.quantity",values:[{color:"#DDD",width:.5},{color:"#AAA",width:1.5},{color:"#777",width:2},{color:"#444",width:3.5}],stops:[15,150,280]});a.styles.addRule({edgeAttributes:t=>{t.getData("neo4jProperties.quantity");const{color:e,width:n}=p(t);return{shape:{head:"arrow"},color:e,width:n}},nodeAttributes:t=>{const e=function(t){return t.getData("neo4jLabels")[0]}(t),{color:n,icon:r}=f[e];return{icon:{font:"icon-font",color:"#000000",content:r},color:n,radius:t.getAdjacentEdges().reduce((t,e)=>t+e.getData("neo4jProperties.quantity"),0)/300+5,pulse:{enabled:u(t),endRatio:1.5,width:4,interval:600,startRatio:1}}}})},function(t,e,n){var r=n(12),i=n(96),o=n(141),s=n(142);function a(e){var n="function"==typeof Map?new Map:void 0;return t.exports=a=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return s(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},a(e)}t.exports=a},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){var r=n(96),i=n(143);function o(e,n,s){return i()?t.exports=o=Reflect.construct:t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}t.exports=o},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){var r=n(12);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(t){a=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),s=new w(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=b(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,s),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function d(){}function h(){}function f(){}var p={};p[i]=function(){return this};var g=Object.getPrototypeOf,_=g&&g(g(S([])));_&&_!==e&&n.call(_,i)&&(p=_);var v=f.prototype=d.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var r;this._invoke=function(i,o){function s(){return new e((function(r,s){!function r(i,o,s,a){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,a)}))}a(u.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=v.constructor=f,f.constructor=h,h.displayName=a(f,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(m.prototype),m.prototype[o]=function(){return this},t.AsyncIterator=m,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new m(u(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},y(v),a(v,s,"Generator"),v[i]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(101)),a=n(11),u=n(19),c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return new WebSocket(t)};(0,i.default)(this,t),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=e;var o=d(e,n),a=o.scheme,u=o.error;if(u)this._error=u;else{this._ws=l(a,e.address,r),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(t){t&&!t.wasClean&&c._handleConnectionError()},this._ws.onopen=function(){c._clearConnectionTimeout();var t=c._pending;c._pending=null;for(var e=0;e<t.length;e++)c.write(t[e])},this._ws.onmessage=function(t){if(c.onmessage){var e=new s.default(t.data);c.onmessage(e)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return(0,o.default)(t,[{key:"_handleConnectionError",value:function(){if(this._connectionTimeoutFired)return this._error=(0,a.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&(this._error=(0,a.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))}},{key:"write",value:function(t){if(null!==this._pending)this._pending.push(t);else{if(!(t instanceof s.default))throw(0,a.newError)("Don't know how to send buffer: "+t);try{this._ws.send(t._buffer)}catch(t){if(1===this._ws.readyState)throw t;this._handleConnectionError()}}}},{key:"close",value:function(){var t=this;return new Promise((function(e,n){t._ws&&3!==t._ws.readyState?(t._open=!1,t._clearConnectionTimeout(),t._ws.onclose=function(){return e()},t._ws.close()):e()}))}},{key:"_setupConnectionTimeout",value:function(){var t=this,e=this._config.connectionTimeout;if(e){var n=this._ws;return setTimeout((function(){1!==n.readyState&&(t._connectionTimeoutFired=!0,n.close())}),e)}return null}},{key:"_clearConnectionTimeout",value:function(){var t=this._connectionTimeoutId;(t||0===t)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(t))}}]),t}();function l(t,e,n){var r=t+"://"+e.asHostPort();try{return n(r)}catch(r){if(function(t,e){return"SyntaxError"===t.name&&(n=e.asHostPort(),"["===n.charAt(0)&&-1!==n.indexOf("]"));var n}(r,e))return n(function(t,e){var n=e.host().replace(new RegExp(":","g"),"-").replace("%","s")+".ipv6-literal.net";return"".concat(t,"://").concat(n,":").concat(e.port())}(t,e));throw r}}function d(t,e){var n=function(t){return!0===t.encrypted||t.encrypted===u.ENCRYPTION_ON}(t),r=function(t){return!1===t.encrypted||t.encrypted===u.ENCRYPTION_OFF}(t),i=t.trust,o=function(t){var e="function"==typeof t?t():"";return e&&e.toLowerCase().indexOf("https")>=0}(e);return function(t,e,n){t&&!n?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):e&&n&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption.")}(n,r,o),r?{scheme:"ws",error:null}:o?{scheme:"wss",error:null}:n?i&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==i?{scheme:null,error:(0,a.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+i+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+u.ENCRYPTION_OFF+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}}function h(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}e.default=c},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=function(t){function e(){return(0,i.default)(this,e),(0,s.default)(this,(0,a.default)(e).apply(this,arguments))}return(0,u.default)(e,t),(0,o.default)(e,[{key:"resolve",value:function(t){return this._resolveToItself(t)}}]),e}(r(n(151)).default);e.default=c},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=function(){function t(){(0,i.default)(this,t)}return(0,o.default)(t,[{key:"resolve",value:function(){throw new Error("Abstract function")}},{key:"_resolveToItself",value:function(t){return Promise.resolve([t])}}]),t}();e.default=s},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(101)),o=n(153),s=new o.TextEncoder("utf-8"),a=new o.TextDecoder("utf-8");var u={encode:function(t){return new i.default(s.encode(t).buffer)},decode:function(t,e){if(t instanceof i.default)return a.decode(t.readView(Math.min(e,t.length-t.position)));for(var n=new i.default(e),r=0;r<e;r++)n.writeUInt8(t.readUInt8());return n.reset(),a.decode(n.readView(e))}};e.default=u},function(t,e,n){"use strict";function r(t,e,n){return e<=t&&t<=n}function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}n.r(e),n.d(e,"TextEncoder",(function(){return u})),n.d(e,"TextDecoder",(function(){return a}));function o(t){this.tokens=[].slice.call(t)}o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};function s(t,e){if(t)throw TypeError("Decoder error");return e||65533}function a(t,e){if(!(this instanceof a))return new a(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function u(t,e){if(!(this instanceof u))return new u(t,e);if("utf-8"!==(t=void 0!==t?String(t).toLowerCase():"utf-8"))throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function c(t){var e=t.fatal,n=0,i=0,o=0,a=128,u=191;this.handler=function(t,c){if(-1===c&&0!==o)return o=0,s(e);if(-1===c)return-1;if(0===o){if(r(c,0,127))return c;if(r(c,194,223))o=1,n=c-192;else if(r(c,224,239))224===c&&(a=160),237===c&&(u=159),o=2,n=c-224;else{if(!r(c,240,244))return s(e);240===c&&(a=144),244===c&&(u=143),o=3,n=c-240}return n<<=6*o,null}if(!r(c,a,u))return n=o=i=0,a=128,u=191,t.prepend(c),s(e);if(a=128,u=191,n+=c-128<<6*(o-(i+=1)),i!==o)return null;var l=n;return n=o=i=0,l}}function l(t){t.fatal;this.handler=function(t,e){if(-1===e)return-1;if(r(e,0,127))return e;var n,i;r(e,128,2047)?(n=1,i=192):r(e,2048,65535)?(n=2,i=224):r(e,65536,1114111)&&(n=3,i=240);for(var o=[(e>>6*n)+i];n>0;){var s=e>>6*(n-1);o.push(128|63&s),n-=1}return o}}a.prototype={decode:function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=i(e),this._streaming||(this._decoder=new c({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var r,s=new o(n),a=[];!s.endOfStream()&&-1!==(r=this._decoder.handler(s,s.read()));)null!==r&&(Array.isArray(r)?a.push.apply(a,r):a.push(r));if(!this._streaming){do{if(-1===(r=this._decoder.handler(s,s.read())))break;null!==r&&(Array.isArray(r)?a.push.apply(a,r):a.push(r))}while(!s.endOfStream());this._decoder=null}return a.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(a)}},u.prototype={encode:function(t,e){t=t?String(t):"",e=i(e),this._streaming||(this._encoder=new l(this._options)),this._streaming=Boolean(e.stream);for(var n,r=[],s=new o(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var s=t.charCodeAt(r+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),r+=1}else i.push(65533)}r+=1}return i}(t));!s.endOfStream()&&-1!==(n=this._encoder.handler(s,s.read()));)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;-1!==(n=this._encoder.handler(s,s.read()));)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}}},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=r(n(100)),l=n(54),d=function(t){function e(t){var n;(0,i.default)(this,e);for(var r=0,o=0;o<t.length;o++)r+=t[o].length;return(n=(0,s.default)(this,(0,a.default)(e).call(this,r)))._buffers=t,n}return(0,u.default)(e,t),(0,o.default)(e,[{key:"getUInt8",value:function(t){for(var e=0;e<this._buffers.length;e++){var n=this._buffers[e];if(!(t>=n.length))return n.getUInt8(t);t-=n.length}}},{key:"getInt8",value:function(t){for(var e=0;e<this._buffers.length;e++){var n=this._buffers[e];if(!(t>=n.length))return n.getInt8(t);t-=n.length}}},{key:"getFloat64",value:function(t){for(var e=(0,l.alloc)(8),n=0;n<8;n++)e.putUInt8(n,this.getUInt8(t+n));return e.getFloat64(0)}}]),e}(c.default);e.default=d},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(43)),o=r(n(48)),s=r(n(5)),a=r(n(6)),u=r(n(15)),c=r(n(12)),l=r(n(16)),d=r(n(121)),h=r(n(127)),f=r(n(103)),p=n(30),g=function(t){function e(t){var n,r=t.id,i=t.config,o=t.log,a=t.address,l=t.userAgent,d=t.authToken;return(0,s.default)(this,e),(n=(0,u.default)(this,(0,c.default)(e).call(this,{id:r,config:i,log:o,userAgent:l,authToken:d})))._address=a,n}var n,r,d;return(0,l.default)(e,t),(0,a.default)(e,[{key:"acquireConnection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.accessMode,t.database,t.bookmarks;return this._connectionPool.acquire(this._address).then((function(t){return new h.default(t,null)}))}},{key:"_hasProtocolVersion",value:(d=(0,o.default)(i.default.mark((function t(e){var n,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.default.create(this._address,this._config,this._createConnectionErrorHandler(),this._log),t.prev=1,t.next=4,n._negotiateProtocol();case 4:if(!(r=n.protocol())){t.next=7;break}return t.abrupt("return",e(r.version));case 7:return t.abrupt("return",!1);case 8:return t.prev=8,t.next=11,n.close();case 11:return t.finish(8);case 12:case"end":return t.stop()}}),t,this,[[1,,8,12]])}))),function(t){return d.apply(this,arguments)})},{key:"supportsMultiDb",value:(r=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hasProtocolVersion((function(t){return t>=p.BOLT_PROTOCOL_V4_0}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"supportsTransactionConfig",value:(n=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hasProtocolVersion((function(t){return t>=p.BOLT_PROTOCOL_V3}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(d.default);e.default=g},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=n(11),s=n(19),a=[null,void 0,!0,!1,s.ENCRYPTION_ON,s.ENCRYPTION_OFF],u=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function t(e,n,r){(0,i.default)(this,t),this.address=e,this.encrypted=function(t){var e=t.encrypted;if(-1===a.indexOf(e))throw(0,o.newError)("Illegal value of the encrypted setting ".concat(e,". Expected one of ").concat(a));return e}(n),this.trust=function(t){var e=t.trust;if(-1===u.indexOf(e))throw(0,o.newError)("Illegal value of the trust setting ".concat(e,". Expected one of ").concat(u));return e}(n),this.trustedCertificates=function(t){return t.trustedCertificates||[]}(n),this.knownHostsPath=function(t){return t.knownHosts||null}(n),this.connectionErrorCode=r||o.SERVICE_UNAVAILABLE,this.connectionTimeout=function(t){var e=parseInt(t.connectionTimeout,10);return 0===e||e&&e<0?null:e||3e4}(n)}},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=n(54),a=n(11),u=r(n(76)),c=r(n(122)),l=r(n(125)),d=r(n(126)),h=r(n(159)),f=function(){function t(e,n,r,o,s){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,i.default)(this,t),this._connection=e,this._channel=n,this._chunker=r,this._disableLosslessIntegers=o,this._log=s,this._serversideRouting=a}return(0,o.default)(t,[{key:"writeHandshakeRequest",value:function(){var t;this._channel.write(((t=(0,s.alloc)(20)).writeInt32(1616949271),t.writeInt32(260),t.writeInt32(4),t.writeInt32(3),t.writeInt32(2),t.reset(),t))}},{key:"createNegotiatedProtocol",value:function(t){var e=[t.readUInt8(),t.readUInt8(),t.readUInt8(),t.readUInt8()];if(72===e[0]&&84===e[1]&&84===e[2]&&80===e[3])throw(0,a.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");var n=Number(e[3]+"."+e[2]);return this._log.isDebugEnabled()&&this._log.debug("".concat(this._connection," negotiated protocol version ").concat(n)),this._createProtocolWithVersion(n)}},{key:"_createProtocolWithVersion",value:function(t){switch(t){case 1:return new u.default(this._connection,this._chunker,this._disableLosslessIntegers);case 2:return new c.default(this._connection,this._chunker,this._disableLosslessIntegers);case 3:return new l.default(this._connection,this._chunker,this._disableLosslessIntegers);case 4:return new d.default(this._connection,this._chunker,this._disableLosslessIntegers);case 4.1:return new h.default(this._connection,this._chunker,this._disableLosslessIntegers,this._serversideRouting);default:throw(0,a.newError)("Unknown Bolt protocol version: "+t)}}}]),t}();e.default=f},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var o=i(n(5)),s=i(n(6)),a=i(n(15)),u=i(n(12)),c=i(n(114)),l=i(n(16)),d=r(n(120)),h=n(123),f=n(104),p=n(29),g=n(124),_=function(t){function e(){return(0,o.default)(this,e),(0,a.default)(this,(0,u.default)(e).apply(this,arguments))}return(0,l.default)(e,t),(0,s.default)(e,[{key:"disableByteArrays",value:function(){throw new Error("Bolt V2 should always support byte arrays")}},{key:"packable",value:function(t){var n=this;return(0,h.isPoint)(t)?function(){return r=n,void(null===(e=t).z||void 0===e.z?function(t,e){var n=[e.packable((0,p.int)(t.srid)),e.packable(t.x),e.packable(t.y)];e.packStruct(88,n)}(e,r):function(t,e){var n=[e.packable((0,p.int)(t.srid)),e.packable(t.x),e.packable(t.y),e.packable(t.z)];e.packStruct(89,n)}(e,r));var e,r}:(0,f.isDuration)(t)?function(){return e=t,r=n,i=(0,p.int)(e.months),o=(0,p.int)(e.days),s=(0,p.int)(e.seconds),a=(0,p.int)(e.nanoseconds),u=[r.packable(i),r.packable(o),r.packable(s),r.packable(a)],void r.packStruct(69,u);var e,r,i,o,s,a,u}:(0,f.isLocalTime)(t)?function(){return e=t,r=n,i=(0,g.localTimeToNanoOfDay)(e.hour,e.minute,e.second,e.nanosecond),o=[r.packable(i)],void r.packStruct(116,o);var e,r,i,o}:(0,f.isTime)(t)?function(){return e=t,r=n,i=(0,g.localTimeToNanoOfDay)(e.hour,e.minute,e.second,e.nanosecond),o=(0,p.int)(e.timeZoneOffsetSeconds),s=[r.packable(i),r.packable(o)],void r.packStruct(84,s);var e,r,i,o,s}:(0,f.isDate)(t)?function(){return e=t,r=n,i=(0,g.dateToEpochDay)(e.year,e.month,e.day),o=[r.packable(i)],void r.packStruct(68,o);var e,r,i,o}:(0,f.isLocalDateTime)(t)?function(){return e=t,r=n,i=(0,g.localDateTimeToEpochSecond)(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),o=(0,p.int)(e.nanosecond),s=[r.packable(i),r.packable(o)],void r.packStruct(100,s);var e,r,i,o,s}:(0,f.isDateTime)(t)?function(){return r=n,void((e=t).timeZoneId?function(t,e){var n=(0,g.localDateTimeToEpochSecond)(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),r=(0,p.int)(t.nanosecond),i=t.timeZoneId,o=[e.packable(n),e.packable(r),e.packable(i)];e.packStruct(102,o)}(e,r):function(t,e){var n=(0,g.localDateTimeToEpochSecond)(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),r=(0,p.int)(t.nanosecond),i=(0,p.int)(t.timeZoneOffsetSeconds),o=[e.packable(n),e.packable(r),e.packable(i)];e.packStruct(70,o)}(e,r));var e,r}:(0,c.default)((0,u.default)(e.prototype),"packable",this).call(this,t)}}]),e}(d.Packer);e.Packer=_;var v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,o.default)(this,e),(0,a.default)(this,(0,u.default)(e).call(this,t))}return(0,l.default)(e,t),(0,s.default)(e,[{key:"_unpackUnknownStruct",value:function(t,n,r){return 88===t?function(t,e,n){return t._verifyStructSize("Point2D",3,e),new h.Point(t.unpack(n),t.unpack(n),t.unpack(n),void 0)}(this,n,r):89===t?function(t,e,n){return t._verifyStructSize("Point3D",4,e),new h.Point(t.unpack(n),t.unpack(n),t.unpack(n),t.unpack(n))}(this,n,r):69===t?function(t,e,n){t._verifyStructSize("Duration",4,e);var r=t.unpack(n),i=t.unpack(n),o=t.unpack(n),s=t.unpack(n);return new f.Duration(r,i,o,s)}(this,n,r):116===t?function(t,e,n,r){t._verifyStructSize("LocalTime",1,e);var i=t.unpackInteger(n);return y((0,g.nanoOfDayToLocalTime)(i),r)}(this,n,r,this._disableLosslessIntegers):84===t?function(t,e,n,r){t._verifyStructSize("Time",2,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),s=(0,g.nanoOfDayToLocalTime)(i);return y(new f.Time(s.hour,s.minute,s.second,s.nanosecond,o),r)}(this,n,r,this._disableLosslessIntegers):68===t?function(t,e,n,r){t._verifyStructSize("Date",1,e);var i=t.unpackInteger(n);return y((0,g.epochDayToDate)(i),r)}(this,n,r,this._disableLosslessIntegers):100===t?function(t,e,n,r){t._verifyStructSize("LocalDateTime",2,e);var i=t.unpackInteger(n),o=t.unpackInteger(n);return y((0,g.epochSecondAndNanoToLocalDateTime)(i,o),r)}(this,n,r,this._disableLosslessIntegers):70===t?function(t,e,n,r){t._verifyStructSize("DateTimeWithZoneOffset",3,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),s=t.unpackInteger(n),a=(0,g.epochSecondAndNanoToLocalDateTime)(i,o);return y(new f.DateTime(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond,s,null),r)}(this,n,r,this._disableLosslessIntegers):102===t?function(t,e,n,r){t._verifyStructSize("DateTimeWithZoneId",3,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),s=t.unpack(n),a=(0,g.epochSecondAndNanoToLocalDateTime)(i,o);return y(new f.DateTime(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond,null,s),r)}(this,n,r,this._disableLosslessIntegers):(0,c.default)((0,u.default)(e.prototype),"_unpackUnknownStruct",this).call(this,t,n,r,this._disableLosslessIntegers)}}]),e}(d.Unpacker);function y(t,e){if(!e)return t;var n=Object.create(Object.getPrototypeOf(t));for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n[r]=(0,p.isInt)(i)?i.toNumberOrInfinity():i}return Object.freeze(n),n}e.Unpacker=v},function(t,e,n){"use strict";var r=n(28),i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(5)),s=i(n(6)),a=i(n(15)),u=i(n(12)),c=i(n(16)),l=i(n(126)),d=r(n(55)),h=n(30),f=n(33),p=function(t){function e(t,n,r,i){var s;return(0,o.default)(this,e),(s=(0,a.default)(this,(0,u.default)(e).call(this,t,n,r)))._serversideRouting=i,s}return(0,c.default)(e,t),(0,s.default)(e,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.userAgent,n=t.authToken,r=t.onError,i=t.onComplete,o=new f.LoginObserver({connection:this._connection,afterError:r,afterComplete:i});return this._connection.write(d.default.hello(e,n,this._serversideRouting),o,!0),o}},{key:"version",get:function(){return h.BOLT_PROTOCOL_V4_1}}]),e}(l.default);e.default=p},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(43)),o=r(n(48)),s=r(n(5)),a=r(n(6)),u=r(n(105)),c=n(11),l=r(n(106)),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.create,r=void 0===n?function(t,e){return Promise.resolve()}:n,i=e.destroy,o=void 0===i?function(t){return Promise.resolve()}:i,a=e.validate,c=void 0===a?function(t){return!0}:a,d=e.installIdleObserver,h=void 0===d?function(t,e){}:d,f=e.removeIdleObserver,p=void 0===f?function(t){}:f,g=e.config,_=void 0===g?u.default.defaultConfig():g,v=e.log,y=void 0===v?l.default.noOp():v;(0,s.default)(this,t),this._create=r,this._destroy=o,this._validate=c,this._installIdleObserver=h,this._removeIdleObserver=p,this._maxSize=_.maxSize,this._acquisitionTimeout=_.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=y,this._closed=!1}var e,n,r;return(0,a.default)(t,[{key:"acquire",value:function(t){var e=this;return this._acquire(t).then((function(n){var r=t.asKey();if(n)return n;var i=e._acquireRequests;return i[r]||(i[r]=[]),new Promise((function(n,o){var s,a=setTimeout((function(){var n=i[r];if(n&&(i[r]=n.filter((function(t){return t!==s}))),s.isCompleted());else{var o=e.activeResourceCount(t),a=e.has(t)?e._pools[r].length:0;s.reject((0,c.newError)("Connection acquisition timed out in ".concat(e._acquisitionTimeout," ms. Poos status: Active conn count = ").concat(o,", Idle conn count = ").concat(a,".")))}}),e._acquisitionTimeout);s=new p(r,n,o,a,e._log),i[r].push(s)}))}))}},{key:"purge",value:function(t){return this._purgeKey(t.asKey())}},{key:"close",value:function(){var t=this;return this._closed=!0,Promise.all(Object.keys(this._pools).map((function(e){return t._purgeKey(e)})))}},{key:"keepAll",value:function(t){var e=this,n=t.map((function(t){return t.asKey()})),r=Object.keys(this._pools).filter((function(t){return-1===n.indexOf(t)}));return Promise.all(r.map((function(t){return e._purgeKey(t)})))}},{key:"has",value:function(t){return t.asKey()in this._pools}},{key:"activeResourceCount",value:function(t){return this._activeResourceCounts[t.asKey()]||0}},{key:"_acquire",value:(r=(0,o.default)(i.default.mark((function t(e){var n,r,o,s;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._closed){t.next=2;break}throw(0,c.newError)("Pool is closed, it is no more able to serve requests.");case 2:n=e.asKey(),(r=this._pools[n])||(r=[],this._pools[n]=r,this._pendingCreates[n]=0);case 5:if(!r.length){t.next=18;break}if(o=r.pop(),!this._validate(o)){t.next=14;break}return this._removeIdleObserver&&this._removeIdleObserver(o),h(n,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(o," acquired from the pool ").concat(n)),t.abrupt("return",o);case 14:return t.next=16,this._destroy(o);case 16:t.next=5;break;case 18:if(!(this._maxSize>0)){t.next=22;break}if(!(this.activeResourceCount(e)+this._pendingCreates[n]>=this._maxSize)){t.next=22;break}return t.abrupt("return",null);case 22:return this._pendingCreates[n]=this._pendingCreates[n]+1,t.prev=23,t.next=26,this._create(e,this._release);case 26:s=t.sent,h(n,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(s," created for the pool ").concat(n));case 29:return t.prev=29,this._pendingCreates[n]=this._pendingCreates[n]-1,t.finish(29);case 32:return t.abrupt("return",s);case 33:case"end":return t.stop()}}),t,this,[[23,,29,32]])}))),function(t){return r.apply(this,arguments)})},{key:"_release",value:(n=(0,o.default)(i.default.mark((function t(e,n){var r,o,s=this;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.asKey(),!(o=this._pools[r])){t.next=14;break}if(this._validate(n)){t.next=9;break}return this._log.isDebugEnabled()&&this._log.debug("".concat(n," destroyed and can't be released to the pool ").concat(r," because it is not functional")),t.next=7,this._destroy(n);case 7:t.next=12;break;case 9:this._installIdleObserver&&this._installIdleObserver(n,{onError:function(t){s._log.debug("Idle connection ".concat(n," destroyed because of error: ").concat(t));var e=s._pools[r];e&&(s._pools[r]=e.filter((function(t){return t!==n}))),s._destroy(n).catch((function(){}))}}),o.push(n),this._log.isDebugEnabled()&&this._log.debug("".concat(n," released to the pool ").concat(r));case 12:t.next=17;break;case 14:return this._log.isDebugEnabled()&&this._log.debug("".concat(n," destroyed and can't be released to the pool ").concat(r," because pool has been purged")),t.next=17,this._destroy(n);case 17:f(r,this._activeResourceCounts),this._processPendingAcquireRequests(e);case 19:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"_purgeKey",value:(e=(0,o.default)(i.default.mark((function t(e){var n,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this._pools[e]||[];case 1:if(!n.length){t.next=8;break}return r=n.pop(),this._removeIdleObserver&&this._removeIdleObserver(r),t.next=6,this._destroy(r);case 6:t.next=1;break;case 8:delete this._pools[e];case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_processPendingAcquireRequests",value:function(t){var e=this,n=t.asKey(),r=this._acquireRequests[n];if(r){var i=r.shift();i?this._acquire(t).catch((function(t){return i.reject(t),null})).then((function(n){n&&(i.isCompleted()?e._release(t,n):i.resolve(n))})):delete this._acquireRequests[n]}}}]),t}();function h(t,e){var n=e[t]||0;e[t]=n+1}function f(t,e){var n=(e[t]||0)-1;n>0?e[t]=n:delete e[t]}var p=function(){function t(e,n,r,i,o){(0,s.default)(this,t),this._key=e,this._resolve=n,this._reject=r,this._timeoutId=i,this._log=o,this._completed=!1}return(0,a.default)(t,[{key:"isCompleted",value:function(){return this._completed}},{key:"resolve",value:function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(t," acquired from the pool ").concat(this._key)),this._resolve(t))}},{key:"reject",value:function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))}}]),t}(),g=d;e.default=g},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(74)),a=n(56),u=(n(33),function(){function t(e){(0,i.default)(this,t),this._connectionProvider=e}return(0,o.default)(t,[{key:"verify",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.database,n=void 0===e?"":e;return c(this._connectionProvider,n)}}]),t}());function c(t,e){var n=new s.default({mode:a.READ,database:e,connectionProvider:t});return n.initializeConnection(),n.getConnection().then((function(t){return n.close().then((function(){return t.server}))})).catch((function(t){return n.close().catch((function(t){})).then((function(){return Promise.reject(t)}))}))}e.default=u},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=n(11),a=function(){function t(e,n,r,o){(0,i.default)(this,t),this._maxRetryTimeMs=u(e,3e4),this._initialRetryDelayMs=u(n,1e3),this._multiplier=u(r,2),this._jitterFactor=u(o,.2),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return(0,o.default)(t,[{key:"execute",value:function(t,e){var n=this;return new Promise((function(r,i){n._executeTransactionInsidePromise(t,e,r,i)})).catch((function(r){var i=Date.now(),o=n._initialRetryDelayMs;return n._retryTransactionPromise(t,e,r,i,o)}))}},{key:"close",value:function(){this._inFlightTimeoutIds.forEach((function(t){return clearTimeout(t)})),this._inFlightTimeoutIds=[]}},{key:"_retryTransactionPromise",value:function(e,n,r,i,o){var s=this;return Date.now()-i>this._maxRetryTimeMs||!t._canRetryOn(r)?Promise.reject(r):new Promise((function(t,r){var i=s._computeDelayWithJitter(o),a=setTimeout((function(){s._inFlightTimeoutIds=s._inFlightTimeoutIds.filter((function(t){return t!==a})),s._executeTransactionInsidePromise(e,n,t,r)}),i);s._inFlightTimeoutIds.push(a)})).catch((function(t){var r=o*s._multiplier;return s._retryTransactionPromise(e,n,t,i,r)}))}},{key:"_executeTransactionInsidePromise",value:function(t,e,n,r){var i,o=this;try{i=t()}catch(t){return void r(t)}this._safeExecuteTransactionWork(i,e).then((function(t){return o._handleTransactionWorkSuccess(t,i,n,r)})).catch((function(t){return o._handleTransactionWorkFailure(t,i,r)}))}},{key:"_safeExecuteTransactionWork",value:function(t,e){try{var n=e(t);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}},{key:"_handleTransactionWorkSuccess",value:function(t,e,n,r){e.isOpen()?e.commit().then((function(){n(t)})).catch((function(t){r(t)})):n(t)}},{key:"_handleTransactionWorkFailure",value:function(t,e,n){e.isOpen()?e.rollback().catch((function(t){})).then((function(){return n(t)})):n(t)}},{key:"_computeDelayWithJitter",value:function(t){var e=t*this._jitterFactor,n=t-e,r=t+e;return Math.random()*(r-n)+n}},{key:"_verifyAfterConstruction",value:function(){if(this._maxRetryTimeMs<0)throw(0,s.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,s.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,s.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,s.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)}}],[{key:"_canRetryOn",value:function(t){return t&&t instanceof s.Neo4jError&&t.code&&(t.code===s.SERVICE_UNAVAILABLE||t.code===s.SESSION_EXPIRED||this._isTransientError(t))}},{key:"_isTransientError",value:function(t){var e=t.code;return e.indexOf("TransientError")>=0&&("Neo.TransientError.Transaction.Terminated"!==e&&"Neo.TransientError.Transaction.LockClientStopped"!==e)}}]),t}();function u(t,e){return t||0===t?t:e}e.default=a},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=n(79),a=n(109),u=r(n(129)),c=(r(n(77)),r(n(164))),l=n(30),d=r(n(69)),h=r(n(165)),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.session,r=e.config;(0,i.default)(this,t),this._session=n,this._retryLogic=p(r)}return(0,o.default)(t,[{key:"run",value:function(t,e,n){var r=this;return new u.default(new s.Observable((function(i){try{i.next(r._session.run(t,e,n)),i.complete()}catch(t){i.error(t)}return function(){}})))}},{key:"beginTransaction",value:function(t){return this._beginTransaction(this._session._mode,t)}},{key:"readTransaction",value:function(t,e){return this._runTransaction(l.ACCESS_MODE_READ,t,e)}},{key:"writeTransaction",value:function(t,e){return this._runTransaction(l.ACCESS_MODE_WRITE,t,e)}},{key:"close",value:function(){var t=this;return new s.Observable((function(e){t._session.close().then((function(){e.complete()})).catch((function(t){return e.error(t)}))}))}},{key:"lastBookmark",value:function(){return this._session.lastBookmark()}},{key:"_beginTransaction",value:function(t,e){var n=this,r=d.default.empty();return e&&(r=new d.default(e)),new s.Observable((function(e){try{e.next(new c.default(n._session._beginTransaction(t,r))),e.complete()}catch(t){e.error(t)}return function(){}}))}},{key:"_runTransaction",value:function(t,e,n){d.default.empty();return n&&new d.default(n),this._retryLogic.retry(this._beginTransaction(t,n).pipe((0,a.flatMap)((function(t){return(0,s.defer)((function(){try{return e(t)}catch(t){return(0,s.throwError)(t)}})).pipe((0,a.catchError)((function(e){return t.rollback().pipe((0,a.concat)((0,s.throwError)(e)))})),(0,a.concat)(t.commit()))}))))}}]),t}();function p(t){var e=t&&t.maxTransactionRetryTime?t.maxTransactionRetryTime:null;return new h.default({maxRetryTimeout:e})}e.default=f},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=n(79),a=r(n(129)),u=(r(n(128)),function(){function t(e){(0,i.default)(this,t),this._txc=e}return(0,o.default)(t,[{key:"run",value:function(t,e){var n=this;return new a.default(new s.Observable((function(r){try{r.next(n._txc.run(t,e)),r.complete()}catch(t){r.error(t)}return function(){}})))}},{key:"commit",value:function(){var t=this;return new s.Observable((function(e){t._txc.commit().then((function(){e.complete()})).catch((function(t){return e.error(t)}))}))}},{key:"rollback",value:function(){var t=this;return new s.Observable((function(e){t._txc.rollback().then((function(){e.complete()})).catch((function(t){return e.error(t)}))}))}}]),t}());e.default=u},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=n(11),a=n(79),u=n(109),c=(r(n(106)),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.maxRetryTimeout,r=void 0===n?3e4:n,o=e.initialDelay,s=void 0===o?1e3:o,a=e.delayMultiplier,u=void 0===a?2:a,c=e.delayJitter,d=void 0===c?.2:c,h=e.logger,f=void 0===h?null:h;(0,i.default)(this,t),this._maxRetryTimeout=l(r,3e4),this._initialDelay=l(s,1e3),this._delayMultiplier=l(u,2),this._delayJitter=l(d,.2),this._logger=f}return(0,o.default)(t,[{key:"retry",value:function(e){var n=this;return e.pipe((0,u.retryWhen)((function(e){var r=[],i=Date.now(),o=1,c=n._initialDelay;return e.pipe((0,u.flatMap)((function(e){if(!t._canRetryOn(e))return(0,a.throwError)(e);if(r.push(e),o>=2&&Date.now()-i>=n._maxRetryTimeout){var l=(0,s.newError)("Failed after retried for ".concat(o," times in ").concat(n._maxRetryTimeout," ms. Make sure that your database is online and retry again."),s.SERVICE_UNAVAILABLE);return l.seenErrors=r,(0,a.throwError)(l)}var d=n._computeNextDelay(c);return c*=n._delayMultiplier,o++,n._logger&&n._logger.warn("Transaction failed and will be retried in ".concat(d)),(0,a.of)(1).pipe((0,u.delay)(d))})))})))}},{key:"_computeNextDelay",value:function(t){var e=t*this._delayJitter;return t-e+2*e*Math.random()}}],[{key:"_canRetryOn",value:function(t){return t&&t.code&&(t.code===s.SERVICE_UNAVAILABLE||t.code===s.SESSION_EXPIRED||this._isTransientError(t))}},{key:"_isTransientError",value:function(t){var e=t.code;return e.indexOf("TransientError")>=0&&("Neo.TransientError.Transaction.Terminated"!==e&&"Neo.TransientError.Transaction.LockClientStopped"!==e)}}]),t}());function l(t,e){return t||0===t?t:e}e.default=c},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=n(56),l=(n(11),r(n(167))),d=(r(n(133)),r(n(107)),r(n(178)));function h(t){var e=t.resolver;if(e&&"function"!=typeof e)throw new TypeError("Configured resolver should be a function. Got: ".concat(e));return t}var f=function(t){function e(t,n,r){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,i.default)(this,e),(o=(0,s.default)(this,(0,a.default)(e).call(this,t,r,u,h(c))))._routingContext=n,o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"_afterConstruction",value:function(){this._log.info("Routing driver ".concat(this._id," created for server address ").concat(this._address))}},{key:"_createConnectionProvider",value:function(t,e,n){return new l.default({id:this._id,address:t,routingContext:this._routingContext,hostNameResolver:(r=this._config,new d.default(r.resolver)),config:this._config,log:this._log,userAgent:e,authToken:n});var r}},{key:"_supportsRouting",value:function(){return!0}}]),e}(c.Driver);e.default=f},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(43)),o=r(n(48)),s=r(n(5)),a=r(n(6)),u=r(n(15)),c=r(n(12)),l=r(n(16)),d=n(11),h=n(56),f=r(n(77)),p=r(n(130)),g=r(n(172)),_=r(n(131)),v=n(54),y=r(n(175)),m=r(n(121)),b=r(n(107)),x=r(n(127)),E=r(n(133)),w=r(n(47)),S=r(n(103)),A=n(29),C=n(30),T=(0,A.int)(3e4),k=function(t){function e(t){var n,r=t.id,i=t.address,o=t.routingContext,a=t.hostNameResolver,l=t.config,d=t.log,h=t.userAgent,f=t.authToken,p=t.routingTablePurgeDelay;return(0,s.default)(this,e),(n=(0,u.default)(this,(0,c.default)(e).call(this,{id:r,config:l,log:d,userAgent:h,authToken:f},(function(t){return S.default.create(t,n._config,n._createConnectionErrorHandler(),n._log,o||{})}))))._seedRouter=i,n._routingTables={},n._rediscovery=new g.default(new _.default(o,i.toString())),n._loadBalancingStrategy=new E.default(n._connectionPool),n._hostNameResolver=a,n._dnsResolver=new v.HostNameResolver,n._log=d,n._useSeedRouter=!0,n._routingTablePurgeDelay=p?(0,A.int)(p):T,n}var n,r,m,k,I,O,M,L,N,R,P,D;return(0,l.default)(e,t),(0,a.default)(e,[{key:"_createConnectionErrorHandler",value:function(){return new b.default(d.SESSION_EXPIRED)}},{key:"_handleUnavailability",value:function(t,e,n){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(e," for database '").concat(n,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(e,n||""),t}},{key:"_handleWriteFailure",value:function(t,e,n){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(e," for database '").concat(n,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(e,n||""),(0,d.newError)("No longer possible to write to server at "+e,d.SESSION_EXPIRED)}},{key:"acquireConnection",value:(D=(0,o.default)(i.default.mark((function t(){var e,n,r,o,s,a,u,c,l,f=this,p=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=p.length>0&&void 0!==p[0]?p[0]:{},n=e.accessMode,r=e.database,o=e.bookmark,u=new b.default(d.SESSION_EXPIRED,(function(t,e){return f._handleUnavailability(t,e,r)}),(function(t,e){return f._handleWriteFailure(t,e,r)})),t.next=4,this._freshRoutingTable({accessMode:n,database:r||"",bookmark:o});case 4:if(c=t.sent,n!==h.READ){t.next=10;break}a=this._loadBalancingStrategy.selectReader(c.readers),s="read",t.next=16;break;case 10:if(n!==h.WRITE){t.next=15;break}a=this._loadBalancingStrategy.selectWriter(c.writers),s="write",t.next=16;break;case 15:throw(0,d.newError)("Illegal mode "+n);case 16:if(a){t.next=18;break}throw(0,d.newError)("Failed to obtain connection towards ".concat(s," server. Known routing table is: ").concat(c),d.SESSION_EXPIRED);case 18:return t.prev=18,t.next=21,this._acquireConnectionToServer(a,s,c);case 21:return l=t.sent,t.abrupt("return",new x.default(l,u));case 25:throw t.prev=25,t.t0=t.catch(18),u.handleAndTransformError(t.t0,a);case 29:case"end":return t.stop()}}),t,this,[[18,25]])}))),function(){return D.apply(this,arguments)})},{key:"_hasProtocolVersion",value:(P=(0,o.default)(i.default.mark((function t(e){var n,r,o,s,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._resolveSeedRouter(this._seedRouter);case 2:n=t.sent,o=0;case 4:if(!(o<n.length)){t.next=25;break}return s=S.default.create(n[o],this._config,this._createConnectionErrorHandler(),this._log),t.prev=6,t.next=9,s._negotiateProtocol();case 9:if(!(a=s.protocol())){t.next=12;break}return t.abrupt("return",e(a.version));case 12:return t.abrupt("return",!1);case 15:t.prev=15,t.t0=t.catch(6),r=t.t0;case 18:return t.prev=18,t.next=21,s.close();case 21:return t.finish(18);case 22:o++,t.next=4;break;case 25:if(!r){t.next=27;break}throw r;case 27:return t.abrupt("return",!1);case 28:case"end":return t.stop()}}),t,this,[[6,15,18,22]])}))),function(t){return P.apply(this,arguments)})},{key:"supportsMultiDb",value:(R=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hasProtocolVersion((function(t){return t>=C.BOLT_PROTOCOL_V4_0}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return R.apply(this,arguments)})},{key:"supportsTransactionConfig",value:(N=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hasProtocolVersion((function(t){return t>=C.BOLT_PROTOCOL_V3}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return N.apply(this,arguments)})},{key:"forget",value:function(t,e){e||""===e?this._routingTables[e].forget(t):Object.values(this._routingTables).forEach((function(e){return e.forget(t)})),this._connectionPool.purge(t).catch((function(){}))}},{key:"forgetWriter",value:function(t,e){e||""===e?this._routingTables[e].forgetWriter(t):Object.values(this._routingTables).forEach((function(e){return e.forgetWriter(t)}))}},{key:"_acquireConnectionToServer",value:function(t,e,n){return this._connectionPool.acquire(t)}},{key:"_freshRoutingTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.accessMode,n=t.database,r=t.bookmark,i=this._routingTables[n]||new p.default({database:n});return i.isStaleFor(e)?(this._log.info('Routing table is stale for database: "'.concat(n,'" and access mode: "').concat(e,'": ').concat(i)),this._refreshRoutingTable(i,r)):i}},{key:"_refreshRoutingTable",value:function(t,e){var n=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(n,t,e):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(n,t,e)}},{key:"_fetchRoutingTableFromSeedRouterFallbackToKnownRouters",value:(L=(0,o.default)(i.default.mark((function t(e,n,r){var o,s;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=[],t.next=3,this._fetchRoutingTableUsingSeedRouter(o,this._seedRouter,n,r);case 3:if(!(s=t.sent)){t.next=8;break}this._useSeedRouter=!1,t.next=11;break;case 8:return t.next=10,this._fetchRoutingTableUsingKnownRouters(e,n,r);case 10:s=t.sent;case 11:return t.next=13,this._applyRoutingTableIfPossible(n,s);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return L.apply(this,arguments)})},{key:"_fetchRoutingTableFromKnownRoutersFallbackToSeedRouter",value:(M=(0,o.default)(i.default.mark((function t(e,n,r){var o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._fetchRoutingTableUsingKnownRouters(e,n,r);case 2:if(o=t.sent){t.next=7;break}return t.next=6,this._fetchRoutingTableUsingSeedRouter(e,this._seedRouter,n,r);case 6:o=t.sent;case 7:return t.next=9,this._applyRoutingTableIfPossible(n,o);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return M.apply(this,arguments)})},{key:"_fetchRoutingTableUsingKnownRouters",value:(O=(0,o.default)(i.default.mark((function t(n,r,o){var s,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._fetchRoutingTable(n,r,o);case 2:if(!(s=t.sent)){t.next=5;break}return t.abrupt("return",s);case 5:return a=n.length-1,e._forgetRouter(r,n,a),t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return O.apply(this,arguments)})},{key:"_fetchRoutingTableUsingSeedRouter",value:(I=(0,o.default)(i.default.mark((function t(e,n,r,o){var s,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._resolveSeedRouter(n);case 2:return s=t.sent,a=s.filter((function(t){return e.indexOf(t)<0})),t.next=6,this._fetchRoutingTable(a,r,o);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return I.apply(this,arguments)})},{key:"_resolveSeedRouter",value:(k=(0,o.default)(i.default.mark((function t(e){var n,r,o=this;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._hostNameResolver.resolve(e);case 2:return n=t.sent,t.next=5,Promise.all(n.map((function(t){return o._dnsResolver.resolve(t)})));case 5:return r=t.sent,t.abrupt("return",[].concat.apply([],r));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return k.apply(this,arguments)})},{key:"_fetchRoutingTable",value:function(t,n,r){var s=this;return t.reduce(function(){var a=(0,o.default)(i.default.mark((function o(a,u,c){var l,d,h;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a;case 2:if(!(l=i.sent)){i.next=7;break}return i.abrupt("return",l);case 7:d=c-1,e._forgetRouter(n,t,d);case 9:return i.next=11,s._createSessionForRediscovery(u,r);case 11:if(!(h=i.sent)){i.next=27;break}return i.prev=13,i.next=16,s._rediscovery.lookupRoutingTableOnRouter(h,n.database,u);case 16:return i.abrupt("return",i.sent);case 19:if(i.prev=19,i.t0=i.catch(13),!i.t0||"Neo.ClientError.Database.DatabaseNotFound"!==i.t0.code){i.next=23;break}throw i.t0;case 23:return s._log.warn("unable to fetch routing table because of an error ".concat(i.t0)),i.abrupt("return",null);case 25:i.next=28;break;case 27:return i.abrupt("return",null);case 28:case"end":return i.stop()}}),o,null,[[13,19]])})));return function(t,e,n){return a.apply(this,arguments)}}(),Promise.resolve(null))}},{key:"_createSessionForRediscovery",value:(m=(0,o.default)(i.default.mark((function t(e,n){var r,o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._connectionPool.acquire(e);case 3:if(r=t.sent,o=new y.default(r),!(r.protocol().version<4)){t.next=8;break}return t.abrupt("return",new f.default({mode:h.WRITE,bookmark:w.default.empty(),connectionProvider:o}));case 8:return t.abrupt("return",new f.default({mode:h.READ,database:"system",bookmark:n,connectionProvider:o}));case 11:if(t.prev=11,t.t0=t.catch(0),!t.t0||"Neo.ClientError.Security.Unauthorized"!==t.t0.code){t.next=15;break}throw t.t0;case 15:return t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t,e){return m.apply(this,arguments)})},{key:"_applyRoutingTableIfPossible",value:(r=(0,o.default)(i.default.mark((function t(e,n){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}throw(0,d.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(e),d.SERVICE_UNAVAILABLE);case 2:return 0===n.writers.length&&(this._useSeedRouter=!0),t.next=5,this._updateRoutingTable(n);case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"_updateRoutingTable",value:(n=(0,o.default)(i.default.mark((function t(e){var n=this;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._connectionPool.keepAll(e.allServers());case 2:Object.values(this._routingTables).forEach((function(t){t.isExpiredFor(n._routingTablePurgeDelay)&&delete n._routingTables[t.database]})),this._routingTables[e.database]=e,this._log.info("Updated routing table ".concat(e));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}],[{key:"_forgetRouter",value:function(t,e,n){var r=e[n];t&&r&&t.forgetRouter(r)}}]),e}(m.default);e.default=k},function(t,e,n){var r=n(169),i=n(170),o=n(116),s=n(171);t.exports=function(t){return r(t)||i(t)||o(t)||s()}},function(t,e,n){var r=n(117);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(43)),o=r(n(48)),s=r(n(5)),a=r(n(6)),u=r(n(130)),c=(r(n(131)),n(11)),l=function(){function t(e){(0,s.default)(this,t),this._routingUtil=e}var e;return(0,a.default)(t,[{key:"lookupRoutingTableOnRouter",value:(e=(0,o.default)(i.default.mark((function e(n,r,o){var s,a,l,d,h,f,p;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._routingUtil.callRoutingProcedure(n,r,o);case 2:if(null!==(s=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:if(1===s.length){e.next=7;break}throw(0,c.newError)('Illegal response from router "'+o+'". Received '+s.length+" records but expected only one.\n"+JSON.stringify(s),c.PROTOCOL_ERROR);case 7:return a=s[0],l=this._routingUtil.parseTtl(a,o),d=this._routingUtil.parseServers(a,o),h=d.routers,f=d.readers,p=d.writers,t._assertNonEmpty(h,"routers",o),t._assertNonEmpty(f,"readers",o),e.abrupt("return",new u.default({database:r,routers:h,readers:f,writers:p,expirationTime:l}));case 13:case"end":return e.stop()}}),e,this)}))),function(t,n,r){return e.apply(this,arguments)})}],[{key:"_assertNonEmpty",value:function(t,e,n){if(0===t.length)throw(0,c.newError)("Received no "+e+" from router "+n,c.PROTOCOL_ERROR)}}]),t}();e.default=l},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION_IN_DEV=e.VERSION_4_0_0=e.VERSION_3_5_0=e.VERSION_3_4_0=e.VERSION_3_2_0=e.ServerVersion=void 0;var i=r(n(5)),o=r(n(6)),s=n(19),a=new RegExp("^(Neo4j/)?(\\d+)\\.(\\d+)(?:\\.)?(\\d*)(\\.|-|\\+)?([0-9A-Za-z-.]*)?$"),u=function(){function t(e,n,r,o){(0,i.default)(this,t),this.major=e,this.minor=n,this.patch=r,this._originalVersionString=o}return(0,o.default)(t,[{key:"compareTo",value:function(t){var e=l(this.major,t.major);return 0===e&&0===(e=l(this.minor,t.minor))&&(e=l(this.patch,t.patch)),e}},{key:"toString",value:function(){return this._originalVersionString?this._originalVersionString:"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"fromDriver",value:function(e){var n=e.session();return n.run("RETURN 1").then((function(e){return n.close().then((function(){return t.fromString(e.summary.server.version)}))}))}},{key:"fromString",value:function(e){if(!e)return new t(3,0,0);if((0,s.assertString)(e,"Neo4j version string"),e.toLowerCase()==="Neo4j/dev".toLowerCase())return _;var n=e.match(a);if(!n)throw new Error("Unparsable Neo4j version: ".concat(e));return new t(c(n[2]),c(n[3]),c(n[4]||0),e)}}]),t}();function c(t,e){var n=parseInt(t,10);if(!n&&0!==n)throw new Error("Unparsable number ".concat(e,": '").concat(t,"'"));return n}function l(t,e){return t<e?-1:t===e?0:1}e.ServerVersion=u;var d=u.fromString("Neo4j/3.2.0");e.VERSION_3_2_0=d;var h=u.fromString("Neo4j/3.4.0");e.VERSION_3_4_0=h;var f=u.fromString("Neo4j/3.5.0");e.VERSION_3_5_0=f;var p=u.fromString("Neo4j/4.0.0");e.VERSION_4_0_0=p;var g=Number.MAX_SAFE_INTEGER,_=new u(g,g,g,"Neo4j/dev");e.VERSION_IN_DEV=_},function(t,e,n){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1){e[0]=e[0].slice(0,-1);for(var r=e.length-1,i=1;i<r;++i)e[i]=e[i].slice(1,-1);return e[r]=e[r].slice(1),e.join("")}return e[0]}function n(t){return"(?:"+t+")"}function r(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function i(t){return t.toUpperCase()}function o(t){var r=e("[0-9]","[A-Fa-f]"),i=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=e("[\\:\\/\\?\\#\\[\\]\\@]",o),a=t?"[\\uE000-\\uF8FF]":"[]",u=e("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=n("[A-Za-z]"+e("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),l=n(n(i+"|"+e(u,o,"[\\:]"))+"*"),d=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|[0-9]"),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?[0-9]")),h=n(d+"\\."+d+"\\."+d+"\\."+d),f=n(r+"{1,4}"),p=n(n(f+"\\:"+f)+"|"+h),g=n(n(f+"\\:")+"{6}"+p),_=n("\\:\\:"+n(f+"\\:")+"{5}"+p),v=n(n(f)+"?\\:\\:"+n(f+"\\:")+"{4}"+p),y=n(n(n(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+n(f+"\\:")+"{3}"+p),m=n(n(n(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+n(f+"\\:")+"{2}"+p),b=n(n(n(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+p),x=n(n(n(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+p),E=n(n(n(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),w=n(n(n(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),S=n([g,_,v,y,m,b,x,E,w].join("|")),A=n(n(u+"|"+i)+"+"),C=(n(S+"\\%25"+A),n(S+n("\\%25|\\%(?!"+r+"{2})")+A)),T=n("[vV]"+r+"+\\."+e(u,o,"[\\:]")+"+"),k=n("\\["+n(C+"|"+S+"|"+T)+"\\]"),I=n(n(i+"|"+e(u,o))+"*"),O=n(k+"|"+h+"(?!"+I+")|"+I),M=n("[0-9]*"),L=n(n(l+"@")+"?"+O+n("\\:"+M)+"?"),N=n(i+"|"+e(u,o,"[\\:\\@]")),R=n(N+"*"),P=n(N+"+"),D=n(n(i+"|"+e(u,o,"[\\@]"))+"+"),F=n(n("\\/"+R)+"*"),z=n("\\/"+n(P+F)+"?"),B=n(D+F),U=n(P+F),V="(?!"+N+")",j=(n(F+"|"+z+"|"+B+"|"+U+"|"+V),n(n(N+"|"+e("[\\/\\?]",a))+"*")),H=n(n(N+"|[\\/\\?]")+"*"),G=n(n("\\/\\/"+L+F)+"|"+z+"|"+U+"|"+V),q=n(c+"\\:"+G+n("\\?"+j)+"?"+n("\\#"+H)+"?"),W=n(n("\\/\\/"+L+F)+"|"+z+"|"+B+"|"+V),Y=n(W+n("\\?"+j)+"?"+n("\\#"+H)+"?");return n(q+"|"+Y),n(c+"\\:"+G+n("\\?"+j)+"?"),n(n("\\/\\/("+n("("+l+")@")+"?("+O+")"+n("\\:("+M+")")+"?)")+"?("+F+"|"+z+"|"+U+"|"+V+")"),n("\\?("+j+")"),n("\\#("+H+")"),n(n("\\/\\/("+n("("+l+")@")+"?("+O+")"+n("\\:("+M+")")+"?)")+"?("+F+"|"+z+"|"+B+"|"+V+")"),n("\\?("+j+")"),n("\\#("+H+")"),n(n("\\/\\/("+n("("+l+")@")+"?("+O+")"+n("\\:("+M+")")+"?)")+"?("+F+"|"+z+"|"+U+"|"+V+")"),n("\\?("+j+")"),n("\\#("+H+")"),n("("+l+")@"),n("\\:("+M+")"),{NOT_SCHEME:new RegExp(e("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",u,o),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",u,o),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",u,o),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",u,o),"g"),NOT_QUERY:new RegExp(e("[^\\%]",u,o,"[\\:\\@\\/\\?]",a),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",u,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",u,o),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",u,s),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+n(n("\\%25|\\%(?!"+r+"{2})")+"("+A+")")+"?\\]?$")}}var s=o(!1),a=o(!0),u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=/^xn--/,d=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,g=String.fromCharCode;function _(t){throw new RangeError(f[t])}function v(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]);var i=function(t,e){for(var n=[],r=t.length;r--;)n[r]=e(t[r]);return n}((t=t.replace(h,".")).split("."),e).join(".");return r+i}function y(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}var m=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},b=function(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))},x=function(t){var e,n=[],r=t.length,i=0,o=128,s=72,a=t.lastIndexOf("-");a<0&&(a=0);for(var u=0;u<a;++u)t.charCodeAt(u)>=128&&_("not-basic"),n.push(t.charCodeAt(u));for(var l=a>0?a+1:0;l<r;){for(var d=i,h=1,f=36;;f+=36){l>=r&&_("invalid-input");var g=(e=t.charCodeAt(l++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36;(g>=36||g>p((c-i)/h))&&_("overflow"),i+=g*h;var v=f<=s?1:f>=s+26?26:f-s;if(g<v)break;var y=36-v;h>p(c/y)&&_("overflow"),h*=y}var m=n.length+1;s=b(i-d,m,0==d),p(i/m)>c-o&&_("overflow"),o+=p(i/m),i%=m,n.splice(i++,0,o)}return String.fromCodePoint.apply(String,n)},E=function(t){var e=[],n=(t=y(t)).length,r=128,i=0,o=72,s=!0,a=!1,u=void 0;try{for(var l,d=t[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var h=l.value;h<128&&e.push(g(h))}}catch(t){a=!0,u=t}finally{try{!s&&d.return&&d.return()}finally{if(a)throw u}}var f=e.length,v=f;for(f&&e.push("-");v<n;){var x=c,E=!0,w=!1,S=void 0;try{for(var A,C=t[Symbol.iterator]();!(E=(A=C.next()).done);E=!0){var T=A.value;T>=r&&T<x&&(x=T)}}catch(t){w=!0,S=t}finally{try{!E&&C.return&&C.return()}finally{if(w)throw S}}var k=v+1;x-r>p((c-i)/k)&&_("overflow"),i+=(x-r)*k,r=x;var I=!0,O=!1,M=void 0;try{for(var L,N=t[Symbol.iterator]();!(I=(L=N.next()).done);I=!0){var R=L.value;if(R<r&&++i>c&&_("overflow"),R==r){for(var P=i,D=36;;D+=36){var F=D<=o?1:D>=o+26?26:D-o;if(P<F)break;var z=P-F,B=36-F;e.push(g(m(F+z%B,0))),P=p(z/B)}e.push(g(m(P,0))),o=b(i,k,v==f),i=0,++v}}}catch(t){O=!0,M=t}finally{try{!I&&N.return&&N.return()}finally{if(O)throw M}}++i,++r}return e.join("")},w=function(t){return v(t,(function(t){return d.test(t)?"xn--"+E(t):t}))},S=function(t){return v(t,(function(t){return l.test(t)?x(t.slice(4).toLowerCase()):t}))},A={};function C(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function T(t){for(var e="",n=0,r=t.length;n<r;){var i=parseInt(t.substr(n+1,2),16);if(i<128)e+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(t.substr(n+4,2),16);e+=String.fromCharCode((31&i)<<6|63&o)}else e+=t.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var s=parseInt(t.substr(n+4,2),16),a=parseInt(t.substr(n+7,2),16);e+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}else e+=t.substr(n,9);n+=9}else e+=t.substr(n,3),n+=3}return e}function k(t,e){function n(t){var n=T(t);return n.match(e.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,n).replace(e.NOT_USERINFO,C).replace(e.PCT_ENCODED,i)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_HOST,C).replace(e.PCT_ENCODED,i)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,n).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,C).replace(e.PCT_ENCODED,i)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,n).replace(e.NOT_QUERY,C).replace(e.PCT_ENCODED,i)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,n).replace(e.NOT_FRAGMENT,C).replace(e.PCT_ENCODED,i)),t}function I(t){return t.replace(/^0*(.*)/,"$1")||"0"}function O(t,e){var n=t.match(e.IPV4ADDRESS)||[],r=u(n,2)[1];return r?r.split(".").map(I).join("."):t}function M(t,e){var n=t.match(e.IPV6ADDRESS)||[],r=u(n,3),i=r[1],o=r[2];if(i){for(var s=i.toLowerCase().split("::").reverse(),a=u(s,2),c=a[0],l=a[1],d=l?l.split(":").map(I):[],h=c.split(":").map(I),f=e.IPV4ADDRESS.test(h[h.length-1]),p=f?7:8,g=h.length-p,_=Array(p),v=0;v<p;++v)_[v]=d[v]||h[g+v]||"";f&&(_[p-1]=O(_[p-1],e));var y=_.reduce((function(t,e,n){if(!e||"0"===e){var r=t[t.length-1];r&&r.index+r.length===n?r.length++:t.push({index:n,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],m=void 0;if(y&&y.length>1){var b=_.slice(0,y.index),x=_.slice(y.index+y.length);m=b.join(":")+"::"+x.join(":")}else m=_.join(":");return o&&(m+="%"+o),m}return t}var L=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N=void 0==="".match(/(){0}/)[1];function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==e.iri?a:s;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var i=t.match(L);if(i){N?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==t.indexOf("@")?i[3]:void 0,n.host=-1!==t.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==t.indexOf("?")?i[7]:void 0,n.fragment=-1!==t.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=M(O(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==n.reference&&(n.error=n.error||"URI is not a "+e.reference+" reference.");var o=A[(e.scheme||n.scheme||"").toLowerCase()];if(e.unicodeSupport||o&&o.unicodeSupport)k(n,r);else{if(n.host&&(e.domainHost||o&&o.domainHost))try{n.host=w(n.host.replace(r.PCT_ENCODED,T).toLowerCase())}catch(t){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+t}k(n,s)}o&&o.parse&&o.parse(n,e)}else n.error=n.error||"URI can not be parsed.";return n}function P(t,e){var n=!1!==e.iri?a:s,r=[];return void 0!==t.userinfo&&(r.push(t.userinfo),r.push("@")),void 0!==t.host&&r.push(M(O(String(t.host),n),n).replace(n.IPV6ADDRESS,(function(t,e,n){return"["+e+(n?"%25"+n:"")+"]"}))),"number"!=typeof t.port&&"string"!=typeof t.port||(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}var D=/^\.\.?\//,F=/^\/\.(\/|$)/,z=/^\/\.\.(\/|$)/,B=/^\/?(?:.|\n)*?(?=\/|$)/;function U(t){for(var e=[];t.length;)if(t.match(D))t=t.replace(D,"");else if(t.match(F))t=t.replace(F,"/");else if(t.match(z))t=t.replace(z,"/"),e.pop();else if("."===t||".."===t)t="";else{var n=t.match(B);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];t=t.slice(r.length),e.push(r)}return e.join("")}function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iri?a:s,r=[],i=A[(e.scheme||t.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(t,e),t.host)if(n.IPV6ADDRESS.test(t.host));else if(e.domainHost||i&&i.domainHost)try{t.host=e.iri?S(t.host):w(t.host.replace(n.PCT_ENCODED,T).toLowerCase())}catch(n){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+n}k(t,n),"suffix"!==e.reference&&t.scheme&&(r.push(t.scheme),r.push(":"));var o=P(t,e);if(void 0!==o&&("suffix"!==e.reference&&r.push("//"),r.push(o),t.path&&"/"!==t.path.charAt(0)&&r.push("/")),void 0!==t.path){var u=t.path;e.absolutePath||i&&i.absolutePath||(u=U(u)),void 0===o&&(u=u.replace(/^\/\//,"/%2F")),r.push(u)}return void 0!==t.query&&(r.push("?"),r.push(t.query)),void 0!==t.fragment&&(r.push("#"),r.push(t.fragment)),r.join("")}function j(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i={};return r||(t=R(V(t,n),n),e=R(V(e,n),n)),!(n=n||{}).tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=U(e.path||""),i.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=U(e.path||""),i.query=e.query):(e.path?("/"===e.path.charAt(0)?i.path=U(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?i.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:i.path=e.path:i.path="/"+e.path,i.path=U(i.path)),i.query=e.query):(i.path=t.path,void 0!==e.query?i.query=e.query:i.query=t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=e.fragment,i}function H(t,e){return t&&t.toString().replace(e&&e.iri?a.PCT_ENCODED:s.PCT_ENCODED,T)}var G={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){var n="https"===String(t.scheme).toLowerCase();return t.port!==(n?443:80)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},q={scheme:"https",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize};function W(t){return"boolean"==typeof t.secure?t.secure:"wss"===String(t.scheme).toLowerCase()}var Y={scheme:"ws",domainHost:!0,parse:function(t,e){var n=t;return n.secure=W(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(t,e){if(t.port!==(W(t)?443:80)&&""!==t.port||(t.port=void 0),"boolean"==typeof t.secure&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){var n=t.resourceName.split("?"),r=u(n,2),i=r[0],o=r[1];t.path=i&&"/"!==i?i:void 0,t.query=o,t.resourceName=void 0}return t.fragment=void 0,t}},X={scheme:"wss",domainHost:Y.domainHost,parse:Y.parse,serialize:Y.serialize},Z={},K="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",J="[0-9A-Fa-f]",Q=n(n("%[EFef]"+J+"%"+J+J+"%"+J+J)+"|"+n("%[89A-Fa-f]"+J+"%"+J+J)+"|"+n("%"+J+J)),$=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),tt=new RegExp(K,"g"),et=new RegExp(Q,"g"),nt=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',$),"g"),rt=new RegExp(e("[^]",K,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),it=rt;function ot(t){var e=T(t);return e.match(tt)?e:t}var st={scheme:"mailto",parse:function(t,e){var n=t,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},s=n.query.split("&"),a=0,u=s.length;a<u;++a){var c=s[a].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),d=0,h=l.length;d<h;++d)r.push(l[d]);break;case"subject":n.subject=H(c[1],e);break;case"body":n.body=H(c[1],e);break;default:i=!0,o[H(c[0],e)]=H(c[1],e)}}i&&(n.headers=o)}n.query=void 0;for(var f=0,p=r.length;f<p;++f){var g=r[f].split("@");if(g[0]=H(g[0]),e.unicodeSupport)g[1]=H(g[1],e).toLowerCase();else try{g[1]=w(H(g[1],e).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}r[f]=g.join("@")}return n},serialize:function(t,e){var n,r=t,o=null!=(n=t.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var s=0,a=o.length;s<a;++s){var u=String(o[s]),c=u.lastIndexOf("@"),l=u.slice(0,c).replace(et,ot).replace(et,i).replace(nt,C),d=u.slice(c+1);try{d=e.iri?S(d):w(H(d,e).toLowerCase())}catch(t){r.error=r.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}o[s]=l+"@"+d}r.path=o.join(",")}var h=t.headers=t.headers||{};t.subject&&(h.subject=t.subject),t.body&&(h.body=t.body);var f=[];for(var p in h)h[p]!==Z[p]&&f.push(p.replace(et,ot).replace(et,i).replace(rt,C)+"="+h[p].replace(et,ot).replace(et,i).replace(it,C));return f.length&&(r.query=f.join("&")),r}},at=/^([^\:]+)\:(.*)/,ut={scheme:"urn",parse:function(t,e){var n=t.path&&t.path.match(at),r=t;if(n){var i=e.scheme||r.scheme||"urn",o=n[1].toLowerCase(),s=n[2],a=i+":"+(e.nid||o),u=A[a];r.nid=o,r.nss=s,r.path=void 0,u&&(r=u.parse(r,e))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(t,e){var n=e.scheme||t.scheme||"urn",r=t.nid,i=n+":"+(e.nid||r),o=A[i];o&&(t=o.serialize(t,e));var s=t,a=t.nss;return s.path=(r||e.nid)+":"+a,s}},ct=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,lt={scheme:"urn:uuid",parse:function(t,e){var n=t;return n.uuid=n.nss,n.nss=void 0,e.tolerant||n.uuid&&n.uuid.match(ct)||(n.error=n.error||"UUID is not valid."),n},serialize:function(t,e){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};A[G.scheme]=G,A[q.scheme]=q,A[Y.scheme]=Y,A[X.scheme]=X,A[st.scheme]=st,A[ut.scheme]=ut,A[lt.scheme]=lt,t.SCHEMES=A,t.pctEncChar=C,t.pctDecChars=T,t.parse=R,t.removeDotSegments=U,t.serialize=V,t.resolveComponents=j,t.resolve=function(t,e,n){var r=function(t,e){var n=t;if(e)for(var r in e)n[r]=e[r];return n}({scheme:"null"},n);return V(j(R(t,r),R(e,r),r,!0),r)},t.normalize=function(t,e){return"string"==typeof t?t=V(R(t,e),e):"object"===r(t)&&(t=R(V(t,e),e)),t},t.equal=function(t,e,n){return"string"==typeof t?t=V(R(t,n),n):"object"===r(t)&&(t=V(t,n)),"string"==typeof e?e=V(R(e,n),n):"object"===r(e)&&(e=V(e,n)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?a.ESCAPE:s.ESCAPE,C)},t.unescapeComponent=H,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(15)),a=r(n(12)),u=r(n(16)),c=function(t){function e(t){var n;return(0,i.default)(this,e),(n=(0,s.default)(this,(0,a.default)(e).call(this)))._connection=t,n}return(0,u.default)(e,t),(0,o.default)(e,[{key:"acquireConnection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.accessMode,t.database,t.bookmarks,this._connection);return this._connection=null,Promise.resolve(e)}}]),e}(r(n(102)).default);e.default=c},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=function(){function t(e){(0,i.default)(this,t),this._offset=e||0}return(0,o.default)(t,[{key:"next",value:function(t){if(0===t)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t}}]),t}();e.default=s},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=function(){function t(){(0,i.default)(this,t)}return(0,o.default)(t,[{key:"selectReader",value:function(t){throw new Error("Abstract function")}},{key:"selectWriter",value:function(t){throw new Error("Abstract function")}}]),t}();e.default=s},function(t,e,n){"use strict";var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(6)),s=r(n(108));function a(t){return Promise.resolve([t])}var u=function(){function t(e){(0,i.default)(this,t),this._resolverFunction=e||a}return(0,o.default)(t,[{key:"resolve",value:function(t){var e=this;return new Promise((function(n){return n(e._resolverFunction(t.asHostPort()))})).then((function(t){if(!Array.isArray(t))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(t));return t.map((function(t){return s.default.fromUrl(t)}))}))}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default="4.1.2"},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(182),i=n(183);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);t.exports=i.locals||{}},function(t,e,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function a(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function u(t,e){for(var n={},r=[],i=0;i<t.length;i++){var o=t[i],u=e.base?o[0]+e.base:o[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=a(l),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(s[d].references++,s[d].updater(h)):s.push({identifier:l,updater:_(h,e),references:1}),r.push(l)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var l,d=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function f(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,g=0;function _(t,e){var n,r,i;if(e.singleton){var o=g++;n=p||(p=c(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=c(e),r=f.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=u(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=u(t,e),c=0;c<n.length;c++){var l=a(n[c]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=o}}}},function(t,e,n){"use strict";n.r(e);var r=n(135),i=n.n(r),o=n(68),s=n.n(o),a=n(110),u=n(136),c=n(137),l=n(138),d=n.n(l),h=i()(!1),f=s()(a.a),p=s()(a.a,{hash:"?#iefix"}),g=s()(u.a),_=s()(c.a),v=s()(d.a,{hash:"#webfont"});h.push([t.i,'#app {\n  width: 99vw;\n  height: 99vh;\n  margin: 0;\n  padding: 0;\n}\nbody {\n  overflow: hidden;\n}\n\np {\n  font-family: "icon-font", Arial, sans-serif;\n}\n\n#controls {\n  position: absolute;\n  top: 0;\n  display: flex;\n  flex-direction: column;\n  min-height: max-content;\n}\n\n@font-face {\n  font-family: "icon-font";\n  src: url('+f+");\n  src: url("+p+') format("embedded-opentype"),\n    url('+g+') format("woff"),\n    url('+_+') format("truetype"),\n    url('+v+') format("svg");\n}\n',""]),e.default=h}]);