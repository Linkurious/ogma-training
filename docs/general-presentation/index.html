<!doctype html>
<html>

<head>
  <title>Ogma trainings</title>
  <link rel="shortcut icon" href="/public/favicon.ico">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.4.0/reveal.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.4.0/plugin/highlight/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.4.0/plugin/notes/notes.min.js"></script>
  <link type="text/css" rel="stylesheet" href="/public/styles.css" />
  <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.4.0/reveal.min.css" />
  <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.4.0/reset.min.css" />
  <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.4.0/theme/black.min.css" />
  <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.4.0/plugin/highlight/monokai.min.css" />
  <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/monokai.min.css" />
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section data-background-image="../public/background.png">
        <section>
          <h2>How to handle large Datasets with</h2>
          <div style="margin-top: 30px; font-size: 72px;">
            <img src="../public/logotype.svg" id="header-logo" />
          </div>
        </section>
      </section>

<section data-background-image="../public/background.png">
  <ol>
    <li class="">Introduction: features, docs, examples</li>
    <li class="fragment fade-in">Setting up the environment</li>
    <li class="fragment fade-in">How to get Ogma</li>
    <li class="fragment fade-in">Access your data</li>
    <li class="fragment fade-in">Styling</li>
    <li class="fragment fade-in">Geo mode & Transformations</li>
    <li class="fragment fade-in">UI, frameworks integration</li>
  </ol>
</section>
<section data-background-image="../public/background.png">
  <section data-background-image="../public/background.png">
    <h2>What is Ogma?</h2>
  </section>

  <section data-background-image="../public/background.png">
    <p>Ogma is a client-side <nobr>interactive graph visualisation library
      </nobr>
    </p>
    <img src="images/example-0.png"
      style="border: 0; width: 35%; display: inline-block; margin: auto; vertical-align: middle;" />
    <ul>
      <li><code>ogma.min.js</code> - the library</li>
      <li><code>ogma.min.d.ts</code> - TypeScript declaration file</li>
      <li>Documentation, tutorials & 100+ examples</li>
      <li>Technical support</li>
    </ul>
  </section>

  <section data-background-image="../public/background.png">
    <h2>Documentation</h2>
    <a href="https://ogma.linkurio.us">https://ogma.linkurio.us</a>
  </section>

  <section data-background-image="../public/background.png">
    <h2>Download center</h2>
    <a href="https://get.linkurio.us">https://get.linkurio.us</a>
  </section>
</section>

<section data-background-image="../public/background.png">
  <section data-background-image="../public/background.png">
    <h2>Features:</h2>
  </section>
  <section data-background-image="../public/background.png">
    <h2>Features:</h2>
    <p>Visualisation styling</p>
    <iframe height="750" width="1200"
      src="https://tinyurl.com/4452xeav"></iframe>
  </section>
  <section data-background-image="../public/background.png">
    <h2>Features:</h2>
    <p>Layouts</p>
    <iframe height="750" width="1200" src="https://tinyurl.com/538vzdp7"></iframe>
  </section>
  <section data-background-image="../public/background.png">
    <h2>Features:</h2>
    <p>Layouts</p>
    <iframe height="750" width="1200"
      src="https://tinyurl.com/2wuyvu3z"></iframe>
  </section>
  <section data-background-image="../public/background.png">
    <h2>Features:</h2>
    <p>Geo mode </p>
    <iframe height="750" width="1200"
      src="https://doc.linkurio.us/ogma/latest/editor/embed.html/#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"></iframe>
  </section>
  <section data-background-image="../public/background.png">
    <h2>Features:</h2>
    <p>Interactions</p>
    <iframe height="750" width="1200" src="https://tinyurl.com/2ya99xv6"></iframe>
  </section>
  <section data-background-image="../public/background.png">
    <h2>Features:</h2>
    <p>Transformations</p>
    <iframe height="750" width="1200" src="https://tinyurl.com/4x24xw9w"></iframe>
  </section>
  <section data-background-image="../public/background.png">
    <h2>Features:</h2>
    <p>Algorithms</p>
    <iframe height="750" width="1200" src="https://tinyurl.com/3h52zh49"></iframe>
  </section>
</section>

<section data-background-image="../public/background.png">
  <section data-background-image="../public/background.png">
    <h2>1. Setting up the environment</h2>
    <div class="fragment">Example: Ogma + <img src="images/webpack.png"
        style="height: 1.5em; border: 0; vertical-align: middle;">Webpack
    </div>
    <br>
    <ul>
      <li class="fragment">
        Get Node & npm <a href="https://nodejs.org/">https://nodejs.org/</a>
      </li>
      <li class="fragment">
        <pre><code class="lang-shell">npm i -D webpack webpack-cli \
css-loader style-loader \
webpack-dev-server html-webpack-plugin
</code></pre>
      </li>
      <li class="fragment">
        Set up your <code>package.json</code>
        <pre><code class="lang-json" style="max-height: 200px;">{
  "name": "01-setup",
  "version": "1.0.0",
  "main": "src/index.js",
  "scripts": {
    "build": "webpack",
    "start": "webpack -w"
  },
  "devDependencies": {
    "css-loader": "^4.3.0",
    "style-loader": "^1.2.1",
    "webpack": "^4.44.1",
    "webpack-cli": "^3.3.12"
  }
}</code></pre>
      </li>
    </ul>
  </section>
  <section data-background-image="../public/background.png">
    <h2>1. Setting up the environment</h2>
    <div>Example: Ogma + <img src="images/webpack.png" style="height: 1.5em; border: 0; vertical-align: middle;">Webpack
    </div>
    <br>
    <div>
      <code>src/index.js</code>
      <pre><code data-line-numbers>import "styles.css";

// your code will go here
console.log('Welcome to visualisation with Ogma');
            </code></pre>
    </div>
    <div class="fragment">
      <code>src/styles.css</code>
      <pre><code data-line-numbers>#container {
  display: block;
  width: 100%;
  height: 100%;
}</code></pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>1. Setting up the environment</h2>
    <div>Example: Ogma + <img src="images/webpack.png" style="height: 1.5em; border: 0; vertical-align: middle;">Webpack
    </div>
    <p>Set up the Webpack config</p>
    <pre><code>const path = require('path');
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.exports = {
  module: {
    rules: [{
      test: /\.css$/i,
      use: ['style-loader', 'css-loader'],
    }]
  },
  entry: './src/index.js',
  output: {
    filename: "[name].bundle.js",
    path: path.resolve(__dirname, "dist")
  },
  plugins: [new HtmlWebpackPlugin()],
  devServer: {
    contentBase: path.join(__dirname, 'dist'),
    port: 9000
  }
};
</code></pre>
  </section>
  <section data-background-image="../public/background.png">
    <h2>1. Setting up the environment</h2>
    <div>Example: Ogma + <img src="images/webpack.png" style="height: 1.5em; border: 0; vertical-align: middle;">Webpack
    </div>
    <pre><code class="lang-shell">npm start</code></pre>
    <div class="fragment"><img style="max-height: 400px;" src="images/example-0-empty.png"></div>
  </section>
</section>

<section data-background-image="../public/background.png">
  <section data-background-image="../public/background.png">
    <h2>2. Installing Ogma</h2>
    <div class="fragment">go to <a href="https://get.linkurio.us">https://get.linkurio.us</a>
    </div>
    <div class="fragment">
      <img src="images/download-1.png" />
    </div>
    <div class="fragment">Download &rarr; copy your <code>npm</code> link
    </div>
    <div class="fragment">
      <pre>
              <code class="lang-shell">npm install --save https://get.linkurio.us/.../?secret=&lt;YOUR_API_KEY&gt;</code>
            </pre>
    </div>
    <div class="fragment">
      <pre>
              <code>import Ogma from 'ogma';</code>
            </pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>2.1 Let's show some nodes</h2>
    <pre>
            <code class="stretch" class="lang-javascript" data-line-numbers="1-2|4-7|9-10|12-20">// index.js
import Ogma from 'ogma';

// create a container and add CSS to it
const container = document.createElement('div');
container.id = 'vis';
document.body.appendChild(container);

// initialize Ogma
const ogma = new Ogma({ container });

// add some nodes and edges
ogma.addNode({ id: 0, attributes: {
  x: -120, y: -75
}});
ogma.addNode({ id: 1, attributes: {
  x: 120, y: -75
}});
// add edge
ogma.addEdge({ source: 0, target: 1 });
            </code>
          </pre>
  </section>
  <section data-background-image="../public/background.png">
    <h2>2.1 Let's show some nodes</h2>
    <img src="images/example-0-nodes.png">
  </section>
  <section data-background-image="../public/background.png">
    <h2>2.3 Updating Ogma version</h2>
    <p>We encourage you to update Ogma every time you get a notification
      that the new version is out.</p>
    <br>
    <ul>
      <li>go to <a href="https://get.linkurio.us">get.linkurio.us</a></li>
      <li>get a new <code>npm</code> link (it contains the package
        version)</li>
      <li>copy it into your <code>package.json</code></p>
      <li>run <code>npm install</code></li>
    </ul>
  </section>
</section>

<section data-background-image="../public/background.png">
  <section data-background-image="../public/background.png">
    <h2>3. Accessing your data</h2>
    <p>Ogma + neo4j database</p>
    <p>For this example we have loaded a supply chain dataset from <a
        href="https://neo4j.com/graphgist/supply-chain-management">this
        neo4j tutorial</a> into a hosted neo4j instance</p>
  </section>
  <section data-background-image="../public/background.png">
    <h2>3. Accessing your data</h2>
    <p>To load data into Ogma you need to parse it into its internal
      format:</p>
    <pre><code class="lang-json">{
  "nodes": [{
    "id": 0, // number|string, required
    // see https://doc.linkurio.us/ogma/latest/api.html#NodeAttributes
    "attributes": {}, // visual attributes
    "data": {}, // any data properties, free format
  }, ...],
  "edges": [{
    "source": 0, // required
    "target": 1, // required,
    // see https://doc.linkurio.us/ogma/latest/api.html#EdgeAttributes
    "attributes": {}, // same as for nodes
    "data": {}
  }]
}</code></pre>
    <p>See <a href="https://doc.linkurio.us/ogma/latest/api.html#NodeAttributes">NodeAttributes</a>,
      <a href="https://doc.linkurio.us/ogma/latest/api.html#EdgeAttributes">EdgeAttributes</a>
      docs
    </p>
  </section>
  <section data-background-image="../public/background.png">
    <h2>3. Accessing your data</h2>
    <ul>
      <li>Load the dataset</li>
      <li>Get your connection credentials
        <pre><code>import { HOST, DB_NAME, PASSWORD } from '../../credentials.json';</code></pre>
      </li>
      <li>Connect to your database</li>
      <li>Establish the API to query the graph
        <pre><code>const query = "MATCH (a)-[r]-() RETURN a, r";
return this._session
  .run(query)
  // parse the response into the format Ogma understands
  .then(response => ogma.parse.neo4j(response));</code></pre>
      </li>
    </ul>
  </section>
  <section data-background-image="../public/background.png">
    <h2>3. Accessing your data</h2>
    <p>Your dummy neo4j client looks like this:</p>
    <pre><code class="lang-javascript">// Create a driver to connect to the Neo4j database
const driver = neo4j.driver(
  HOST, neo4j.auth.basic(DB_NAME, PASSWORD)
);
const session = driver.session({
  database: DB_NAME,
  defaultAccessMode: neo4j.session.READ,
});

// Query the graph to the server and load it to ogma
const query = "MATCH (a)-[r]-() RETURN a, r";
session
  .run(query)
  .then(response => ogma.parse.neo4j(response));
</code></pre>
  </section>
  <section data-background-image="../public/background.png">
    <h2>3. Accessing your data</h2>
    <pre><code>// instance of the API client
const api = new API(HOST, DB_NAME, PASSWORD);

// load the graph
api.getGraph()
  .then((rawGraph) => ogma.setGraph(rawGraph))
  // setup the camera so we can see the entire graph
  .then(() => ogma.view.locateGraph())
  .then(() => {
    // show some information about the graph
    const nodes = ogma.getNodes();
    const edges = ogma.getEdges();
    document.getElementById('controls').innerHTML =
      `Loaded <br>${nodes.size} nodes, ${edges.size} edges`;
    });</code></pre>
  </section>
  <section data-background-image="../public/background.png">
    <h2>3. Accessing your data</h2>
    <img style="max-height: 600px;" src="images/example-1-load.png">
  </section>
</section>

<section data-background-image="../public/background.png">
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <img style="max-height: 600px;" src="images/example-1-load.png">
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>What is missing?</p>
    <ul>
      <li class="fragment">Positions</li>
      <li class="fragment">Nodes meaning</li>
      <li class="fragment">Edges meaning</li>
      <li class="fragment">Insights</li>
    </ul>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Positions</p>
    <p class="fragment">Let's run the layout!</p>
    <div class="fragment">
      <pre>
            <code class="lang-javascript" data-line-numbers>api.getGraph();
  .then((rawGraph) => ogma.setGraph(rawGraph))
  // apply the force layout to the graph
  // (places the nodes so it is readable )
  .then(() => ogma.layouts.force());
  </code></pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Positions</p>
    <img src="images/example-2-layout.gif">
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Nodes color and icon coding:</p>
    <pre><code class="lang-javascript">// Define buckets of importance for nodes
// some values repeat themselves for different types
const supplierStyle = { color: "#6FC1A7", icon: "\uEA04" };
const rawSupplierStyle = { color: "#3DCB8D", icon: "\uEA03" };
const wholeSalerStyle = { color: "#E77152", icon: "\uEA09" };
const retailerStyle = { color: "#9AD0D0", icon: "\uEA06" };

const nodeStyles = {
  'SupplierA': supplierStyle,
  'SupplierB': supplierStyle,

  'RawSupplierA': rawSupplierStyle,
  'RawSupplierB': rawSupplierStyle,
  'AllRawSupliers': rawSupplierStyle,

  'Retailer': retailerStyle,
  'AllRetailers': retailerStyle,

  'Wholesaler': wholeSalerStyle,
  'AllWholesalers': wholeSalerStyle,

  'FrameSupplier': { color: "#6FC1A7", icon: "\uEA05" },
  'WheelSupplier': { color: "#6FC1A7", icon: "\uEA08" },

  'Product': { color: "#76378A", icon: "\uEA02" }
};</code></pre>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Edges color and size coding:</p>
    <pre><code class="lang-javascript">// edge color and width buckets
const edgeBuckets = ogma.rules.slices({
  field: "neo4jProperties.quantity",
  values: [
    { color: "#DDD", width: 0.5 },
    { color: "#AAA", width: 1.5 },
    { color: "#777", width: 2 },
    { color: "#444", width: 3.5 }
  ],
  // buckets are
  // (-Infinity, 15], (15, 150], (150, 280], [280, Infinity)
  stops: [15, 150, 280]
});</code></pre>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Apply edge styling</p>
    <div>
      <pre><code class="lang-javascript">ogma.styles.addRule({
  edgeAttributes: (edge) => {
    const quantity = edge.getData("neo4jProperties.quantity");
    const { color, width } = edgeBuckets(edge);
    return {
      shape: { head: "arrow" },
      color, width
    };
  }});</code></pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Apply edge styling</p>
    <div>
      <img style="max-height: 500px;" src="images/example-3-edges.png">
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Apply node styling</p>
    <div>
      <pre><code class="lang-javascript">ogma.styles.addRule({
  nodeAttributes: (node) => {
    // get data field
    const type = getNodeType(node);
    // match with the styles object
    const { color, icon } = nodeStyles[type];

    // sizing: quantity of incoming edges / 300
    // nodes size depend on the quantity of Product that is exanged through them
    const radius = node
      .getAdjacentEdges()
      .reduce((acc, e) => acc + e.getData("neo4jProperties.quantity"), 0) / 300 + 5;

    return {
      icon: {
        font: "icon-font",
        color: "#000000",
        content: icon,
      },
      color, radius
    };
}});</code></pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Apply node styling</p>
    <div>
      <img style="max-height: 500px;" src="images/example-3-nodes.png">
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Add insights</p>
    <div>
      <pre><code class="lang-javascript">// Helper function to check if a node should pulse
// Nodes pulses if the total demand is higher than their stock
function hasRisk(node) {
  const totalDemand = node
    .getAdjacentEdges()
    .filter((edge) => edge.getSource() === node)
    .reduce((total, edge) => total + edge.getData("neo4jProperties.quantity"), 0);
  return node.getData("neo4jProperties.stock") - totalDemand < 100;
}

// enable pulse animation
ogma.getNodes().filter(hasRisk).pulse();
</code></pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>4. Adding styles</h2>
    <p>Add insights</p>
    <div>
      <img style="max-height: 500px;" src="images/example-3-pulse.gif">
    </div>
  </section>
</section>

<section data-background-image="../public/background.png">
  <section data-background-image="../public/background.png">
    <h2>5. Geo mode + Transformations</h2>
    <p>Let's look at the the same graph with the geo reference</p>
    <pre><code class="lang-javascript">// let Ogma know where to look for the coordinates
ogma.geo.enable({
  longitudePath: 'neo4jProperties.lon',
  latitudePath: 'neo4jProperties.lat'
});</code></pre>
    <div class="fragment">
      <img style="max-height: 400px;" src="images/example-4-geo.png">
      <div>
        <a href="https://doc.linkurio.us/ogma/latest/tutorials/geo-leaflet/index.html">Ogma
          geo mode tutorial</a>
      </div>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>5. Geo mode + Transformations</h2>
    <p>Let's clear up the view a bit</p>
    <p class="fragment">First let's group the parallel edges</p>
    <div class="fragment">
      <pre><code class="lang-javascript">const edgeGrouping = ogma.transformations.addEdgeGrouping({
  selector: (edge) => edge.getData("neo4jType") === "DELIVER",
  generator: (edges) => {
    return {
      data: { neo4jProperties: {  quantity: edges.reduce(...), 0), }}
    };
  }
});</code></pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>5. Geo mode + Transformations</h2>
    <p>Parallel edges are grouped</p>
    <div>
      <img style="max-height: 500px;" src="images/example-4-edges.png">
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>5. Geo mode + Transformations</h2>
    <p>Let's group the nodes: join the raw suppliers, wholesalers and
      group the part suppliers:</p>
    <div class="fragment">
      <pre><code class="lang-javascript">const nodeGrouping = ogma.transformations.addNodeGrouping({
  groupIdFunction: (node) => node.getData("neo4jLabels")[0],
  // don't group the product
  selector: (node) => node.getData("neo4jLabels")[0] !== "Product",
  nodeGenerator: (nodes, groupId) => {
    // choose label for the style
    let label = ['Wholesalers']; // default
    if (groupId === "SupplierA") label = ["FrameSupplier"];
    else if (groupId === "SupplierB") label = ["WheelSupplier"];
    else if (/RawSupplier/.test(groupId)) label = ["RawSuppliers"];
    else if (groupId === 'Retailer') label = ["Retailers"];

    // sizing criteria
    const quantity = nodes.getData("neo4jProperties.quantity")
      .reduce((total, q) => total + q, 0);

    // generated group node
    return {
      data: {
        neo4jLabels: label,
        neo4jProperties: { quantity }
      }
    };
  }
});</code></pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>5. Geo mode + Transformations</h2>
    <p>Nodes are now grouped by the type:</p>
    <div>
      <img style="max-height: 450px;" src="images/example-4-nodes.png">
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>5. Geo mode + Transformations</h2>
    <p>Let's make sense of this new view on the supply chain by applying a
      different layout:</p>
    <div class="fragment">
      <img src="images/example-4-layout.png">
    </div>
  </section>
</section>

<section data-background-image="../public/background.png">
  <section data-background-image="../public/background.png">
    <h2>6. UI & frameworks</h2>
    <p>Let's add some controls</p>
    <div class="fragment">
      <pre>
            <code class="lang-html"><!-- index.html -->
<div id="controls">
  <button id="edge-grouping">Edge grouping: off</button>
  <button id="node-grouping">Node grouping: off</button>
  <button id="geo-mode">Geo mode</button>
</div>
            </code>
          </pre>
    </div>
    <div class="fragment">
      <pre>
            <code class="lang-javascript">// index.js
const edgeGroupingButton = document.getElementById('edge-grouping');
edgeGroupingButton.addEventListener('click', () => {
  edgeGrouping.toggle()
    .then(() => {
      const state = edgeGrouping.isEnabled() ? 'on' : 'off';
      edgeGroupingButton.innerHTML = 'Edge grouping: ' + state;
    });
});
            </code>
          </pre>
    </div>
  </section>
  <section data-background-image="../public/background.png">
    <h2>6. UI & frameworks</h2>
    <img src="images/example-5-ui.png">
  </section>
  <section data-background-image="../public/background.png">
    <h2>6. UI & frameworks</h2>
    <p>Final result</p>
    <iframe height="750" width="1200" src="https://tinyurl.com/5w5vftvj"></iframe>
  </section>
  <section data-background-image="../public/background.png">
    <h2>6. UI & frameworks</h2>
    <p>Ogma integrates nicely with all the popular front-end frameworks
    </p>
    <p><img src="images/react-logo.jpg" width="150" class="logo">
      <img src="images/ts-logo.png" width="150" class="logo">
      <img src="images/vue-logo.png" width="150" class="logo">
    </p>
    <p><img src="images/webpack.png" width="150" class="logo">
      <img src="images/angular-logo.svg" width="150" class="logo"> <img src="images/node-logo.png" width="150"
        class="logo">
    </p>
    <div class="fragment"><a
        href="https://doc.linkurio.us/ogma/latest/tutorials/">https://ogma.linkurio.us/tutorials/</a>
    </div>
  </section>
</section>
<section data-background-image="../public/background.png">
  <h2>Questions?</h2>
  <p>ogma@linkurio.us</p>
  <p><a href="https://ogma.linkurio.us">Ogma docs</a>
  <p><a href="https://get.linkurio.us">Distribution center</a></p>
</section>
    </div>
  </div>
  <script src="../index.js"></script>
</body>

</html>
